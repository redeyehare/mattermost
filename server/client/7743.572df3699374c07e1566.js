"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[7743],{61293:(e,t,n)=>{n.d(t,{A:()=>r,D:()=>l}),n(17046);var a=n(36418),s=n(14778);const i=4e3;function r(e){let{text:t,successCopyTimeout:n}=e;const[s,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),u=(0,a.useRef)(null);let p=i;return(n||0===n)&&(p=n),{copiedRecently:s,copyError:l,onClick:(0,a.useCallback)((()=>{u.current&&(clearTimeout(u.current),u.current=null);const e=navigator.clipboard;if(e)e.writeText(t).then((()=>{r(!0),o(!1)})).catch((()=>{r(!1),o(!0)}));else{const e=document.createElement("textarea");e.innerText=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{const e=document.execCommand("copy");r(e),o(!e)}catch(e){r(!1),o(!0)}e.remove()}u.current=setTimeout((()=>{r(!1),o(!1)}),p)}),[p,t])}}const l=(0,s.defineMessages)({copy:{id:"copy_text.copy",defaultMessage:"Copy"},copied:{id:"copy_text.copied",defaultMessage:"Copied"}})},98689:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(36418),s=n.n(a),i=n(14778);function r(e){const{formatMessage:t}=(0,i.useIntl)();return s().createElement("span",e,s().createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":t({id:"generic_icons.mail",defaultMessage:"Mail Icon"})},s().createElement("path",{d:"M4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4M12,11L20,6H4L12,11M4,18H20V8.37L12,13.36L4,8.37V18Z"})))}},91803:(e,t,n)=>{n.d(t,{A:()=>D}),n(29206),n(43813),n(17046),n(3188),n(6552),n(32773),n(76409),n(27105),n(4290);var a=n(71633),s=n.n(a),i=n(36418),r=n.n(i),l=n(14778),o=n(7453),u=n(68102),p=n(22580),c=n(21753),h=n(36512),m=n(50026),d=(n(40140),n(93759),(0,i.forwardRef)((function(e,t){var n=(0,c.u)(e),a=(0,h.u)(n),s=(0,m.u)(a);return i.createElement(p.S,(0,u.A)({ref:t},s))}))),g=n(40693),v=n(78546),f=n(79342),b=n(71127),V=n(94231),E=n(98689);function O(e){const{formatMessage:t}=(0,l.useIntl)();return r().createElement("span",e,r().createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img","aria-label":t({id:"generic_icons.add-mail",defaultMessage:"Add Mail Icon"})},r().createElement("path",{d:"M3,4C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H14V18H3V8.37L11,13.36L19,8.37V13H21V6A2,2 0 0,0 19,4H3M3,6H19L11,11L3,6M19,15V18H16V20H19V23H21V20H24V18H21V15H19Z"})))}var y=n(53654),C=n(19542),w=n(72429),M=n(41468),I=n(85873);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=/[\s,;]+/,_=(0,l.defineMessages)({loadingDefault:{id:"widgets.users_emails_input.loading",defaultMessage:"Loading"},noMatchDefault:{id:"widgets.users_emails_input.no_user_found_matching",defaultMessage:"No one found matching **{text}**. Enter their email to invite them."},validAddressDefault:{id:"widgets.users_emails_input.valid_email",defaultMessage:"Add **{email}**"}});class N extends r().PureComponent{constructor(e){super(e),x(this,"renderUserName",(e=>{const t=(0,I.Cg)(e);let n=null;t.fullName&&(n=r().createElement("span",{className:"fullname"},t.fullName));let a=null;return t.nickname&&(a=r().createElement("span",{className:"nickname"},t.nickname)),r().createElement(r().Fragment,null,t.displayName,n,a)})),x(this,"loadingMessage",(()=>{const e=r().createElement(l.FormattedMessage,this.props.loadingMessage);return r().createElement(y.A,{text:e})})),x(this,"getOptionValue",(e=>this.isUserProfile(e)?e.id:e.value)),x(this,"formatOptionLabel",((e,t)=>{const n=(0,I.RG)(e.id,e.last_picture_update);let a=null,s=null;return e.is_bot&&(s=r().createElement(C.A,null)),!(0,v.xf)(e.value)&&(0,f.P)(e.roles)&&(a=r().createElement(w.A,null)),"menu"===t.context?e.value&&(0,v.xf)(e.value)?this.getCreateLabel(e.value):r().createElement(r().Fragment,null,r().createElement(M.A,{size:"lg",username:e.username,url:n}),this.renderUserName(e),s,a):e.value&&(0,v.xf)(e.value)?r().createElement(r().Fragment,null,r().createElement(E.A,{className:"mail-icon"}),r().createElement("span",null,e.value)):r().createElement(r().Fragment,null,r().createElement(M.A,{size:"sm",username:e.username,url:n}),(0,I.Mn)(e),s,a)})),x(this,"onChange",(e=>{this.props.onChange&&(e?this.props.onChange(e.map((e=>this.isUserProfile(e)?e:e.value))):this.props.onChange([]))})),x(this,"getCreateLabel",(e=>r().createElement(r().Fragment,null,r().createElement(O,{className:"mail-plus-icon"}),r().createElement(b.A,Object.assign({key:"widgets.users_emails_input.valid_email"},this.props.validAddressMessage,{values:{email:e},disableLinks:!0}))))),x(this,"Input",(e=>r().createElement(o.c.Input,Object.assign({},e,{onPaste:e=>{var t;e.preventDefault();const n=(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text"))||"";this.appendDelimitedValues(n),this.props.onPaste&&this.props.onPaste(e)}})))),x(this,"NoOptionsMessage",(e=>{const t=e.selectProps.inputValue;if(!t)return null;const n=o.c.NoOptionsMessage;return r().createElement("div",{className:"users-emails-input__option users-emails-input__option--no-matches"},r().createElement(n,e,r().createElement(b.A,Object.assign({},this.props.noMatchMessage,{values:{text:t},disableLinks:!0}))))})),x(this,"renderAriaLabel",(e=>e?this.isUserProfile(e)?e.username:e.value:"")),x(this,"MultiValueRemove",(e=>{const{children:t,innerProps:n}=e;return r().createElement("div",Object.assign({},n,{role:"button",tabIndex:0,"aria-label":this.props.intl.formatMessage({id:"multiselect.remove",defaultMessage:"Remove {label}"},{label:this.renderAriaLabel(e.data)}),onKeyDown:e=>{var t;"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),null===(t=n.onClick)||void 0===t||t.call(n,e))}}),t||r().createElement(V.A,null))})),x(this,"components",{NoOptionsMessage:this.props.suppressNoOptionsMessage?()=>null:this.NoOptionsMessage,MultiValueRemove:this.MultiValueRemove,IndicatorsContainer:()=>null,Input:this.Input}),x(this,"handleInputChange",(async(e,t)=>{var n;if("input-blur"===t.action&&""!==t.prevInputValue){const e=this.formatValuesForCreatable(),n=this.state.options.find((e=>t.prevInputValue===e.username||t.prevInputValue==="@"+e.username||t.prevInputValue===e.email));if(n)return this.onChange([...e,n]),this.props.onInputChange(""),void this.setState((e=>A(A({},e),{},{prevValue:t.prevInputValue})));if(this.props.emailInvitationsEnabled&&(0,v.xf)(t.prevInputValue)){const n=t.prevInputValue;this.onChange([...e,{value:n,label:n}]),this.props.onInputChange(""),this.setState((e=>A(A({},e),{},{prevValue:t.prevInputValue})))}}else if("input-change"===t.action&&""!==t.prevInputValue&&null!==(n=t.prevInputValue)&&void 0!==n&&n[t.prevInputValue.length-1].match(P)&&0===await this.appendDelimitedValues(t.prevInputValue))return;"input-blur"!==t.action&&"menu-close"!==t.action&&(this.props.onInputChange(e),this.setState((e=>A(A({},e),{},{prevValue:t.prevInputValue}))))})),x(this,"formatValuesForCreatable",(()=>this.props.value.map((e=>e.id?e:{label:e,value:e})))),x(this,"optionsLoader",((e,t)=>{const n=e=>{this.setState({options:e});const n=e.map((e=>A(A({},e),{},{label:e.username})));t(n),this.props.onUsersLoad&&this.props.onUsersLoad(e)},a=this.props.usersLoader(this.props.inputValue,n);a&&a.then&&a.then(n)})),x(this,"showAddEmail",((e,t,n)=>this.props.emailInvitationsEnabled&&0===n.length&&(0,v.xf)(e))),x(this,"onFocus",(()=>{var e;null===(e=this.selectRef.current)||void 0===e||e.onInputChange(this.props.inputValue,{action:"set-value",prevInputValue:this.props.inputValue})})),x(this,"onBlur",(()=>{var e;null===(e=this.selectRef.current)||void 0===e||e.onInputChange(this.props.inputValue,{action:"input-blur",prevInputValue:this.state.prevValue}),this.props.onBlur&&this.props.onBlur()})),x(this,"appendDelimitedValues",(async e=>{const t=this.formatValuesForCreatable(),n=[...new Set(e.split(P))];if(0===n.length)return 0;const a=(e,t)=>-1===e.findIndex((e=>this.isEmailInvite(e)&&e.value===t||this.isUserProfile(e)&&e.email===t)),s=async e=>a(t,e)?await this.searchByEmail(e)||e:null,i=(e,t)=>-1===e.findIndex((e=>this.isUserProfile(e)&&e.username===t)),r=async e=>i(t,e)?this.searchByUsername(e):null,l=n.map((async e=>{if(""===e)return Promise.resolve(null);let t;return t=this.props.emailInvitationsEnabled&&(0,v.xf)(e)?await s(e):await r(e),"string"==typeof t?Promise.resolve({value:t,label:t}):this.isUserProfile(t)?Promise.resolve(t):Promise.resolve(null)})),o=[];return(await Promise.allSettled(l)).reduce(((e,t)=>("fulfilled"===t.status&&e.push(t.value),e)),[]).forEach((e=>{e&&(!this.isEmailInvite(e)||a(t,e.value)&&a(o,e.value))&&(!this.isUserProfile(e)||i(t,e.username)&&a(t,e.email)&&i(o,e.username)&&a(o,e.email))&&o.push(e)})),this.onChange([...t,...o]),this.props.onInputChange(""),o.length})),x(this,"isUserProfile",(e=>void 0!==e.id)),x(this,"isEmailInvite",(e=>void 0!==e.value)),x(this,"searchByEmail",(async e=>{var t;let n;try{n=await g.mT.getUserByEmail(e)}catch(e){return null}return 0===(null===(t=n)||void 0===t?void 0:t.delete_at)?n:null})),x(this,"searchByUsername",(async e=>{var t;let n;try{n=await g.mT.getUserByUsername(e)}catch(e){return null}return 0===(null===(t=n)||void 0===t?void 0:t.delete_at)?n:null})),this.selectRef=r().createRef(),this.state={options:[],prevValue:this.props.inputValue}}render(){const e=this.formatValuesForCreatable(),t=o.c.NoOptionsMessage,n={placeholder:e=>A(A({},e),{},{pointerEvents:"none",userSelect:"none"}),input:e=>A(A({},e),{},{display:"flex",flex:"1 1 auto","> div":{width:"100%"},input:{width:"100% !important",textAlign:"left"}})};return r().createElement(r().Fragment,null,r().createElement(d,{ref:this.selectRef,onChange:this.onChange,loadOptions:this.optionsLoader,isValidNewOption:this.showAddEmail,isMulti:!0,isClearable:!1,className:s()("UsersEmailsInput",this.props.showError?"error":"",{empty:""===this.props.inputValue},{"no-selections":0===e.length}),classNamePrefix:"users-emails-input",placeholder:this.props.placeholder,components:this.components,getOptionValue:this.getOptionValue,formatOptionLabel:this.formatOptionLabel,defaultOptions:!1,defaultMenuIsOpen:!1,openMenuOnClick:!1,loadingMessage:this.loadingMessage,onInputChange:this.handleInputChange,inputValue:this.props.inputValue,openMenuOnFocus:!0,onFocus:()=>this.onFocus,onBlur:()=>this.onBlur,tabSelectsValue:!0,value:e,"aria-label":this.props.ariaLabel,autoFocus:this.props.autoFocus,styles:n}),this.props.showError&&r().createElement("div",{className:"InputErrorBox"},r().createElement(t,null,r().createElement(b.A,Object.assign({},this.props.errorMessage,{values:this.props.errorMessageValues,disableLinks:!0}))),this.props.extraErrorText||null))}}x(N,"defaultProps",{noMatchMessage:_.noMatchDefault,validAddress:_.validAddressDefault,loadingMessage:_.loadingDefault,showError:!1});const D=(0,l.injectIntl)(N)},50026:(e,t,n)=>{n.d(t,{u:()=>h});var a=n(27405),s=n(94300),i=n(81515),r=n(36418),l=n(7453),o=n(22580),u=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],p=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),a=String(t.getOptionValue(e)).toLowerCase(),s=String(t.getOptionLabel(e)).toLowerCase();return a===n||s===n},c={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,a){return!(!e||t.some((function(t){return p(e,t,a)}))||n.some((function(t){return p(e,t,a)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function h(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,p=e.createOptionPosition,h=void 0===p?"last":p,m=e.formatCreateLabel,d=void 0===m?c.formatCreateLabel:m,g=e.isValidNewOption,v=void 0===g?c.isValidNewOption:g,f=e.getNewOptionData,b=void 0===f?c.getNewOptionData:f,V=e.onCreateOption,E=e.options,O=void 0===E?[]:E,y=e.onChange,C=(0,i.A)(e,u),w=C.getOptionValue,M=void 0===w?o.g:w,I=C.getOptionLabel,L=void 0===I?o.b:I,A=C.inputValue,x=C.isLoading,P=C.isMulti,_=C.value,N=C.name,D=(0,r.useMemo)((function(){return v(A,(0,l.H)(_),O,{getOptionValue:M,getOptionLabel:L})?b(A,d(A)):void 0}),[d,b,L,M,A,v,O,_]),j=(0,r.useMemo)((function(){return!n&&x||!D?O:"first"===h?[D].concat((0,s.A)(O)):[].concat((0,s.A)(O),[D])}),[n,h,x,D,O]),k=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return y(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==D)y(e,t);else if(V)V(A);else{var a=b(A,A),i={action:"create-option",name:N,option:a};y((0,l.D)(P,[].concat((0,s.A)((0,l.H)(_)),[a]),a),i)}}),[b,A,P,N,D,V,y,_]);return(0,a.A)((0,a.A)({},C),{},{options:j,onChange:k})}}}]);
//# sourceMappingURL=7743.572df3699374c07e1566.js.map