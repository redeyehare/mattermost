{"version":3,"file":"452.ceae2dd9afd216532060.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/widgets/icons/admin_eye_icon.tsx","webpack://mattermost-webapp/./src/components/product_notices_modal/product_notices_modal.tsx","webpack://mattermost-webapp/./src/components/product_notices_modal/index.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_next_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_previous_icon.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\ntype Props = React.HTMLAttributes<HTMLSpanElement>;\r\n\r\nexport default function AdminEyeIcon(props: Props): JSX.Element {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='14'\r\n                height='10'\r\n                viewBox='0 0 14 10'\r\n                fill='none'\r\n                role='img'\r\n                aria-label={formatMessage({id: 'generic_icons.adminOnlyIcon', defaultMessage: 'Admin View Only Icon'})}\r\n            >\r\n                <path\r\n                    d='M7 3.21005C7.3264 3.21005 7.624 3.29165 7.8928 3.45485C8.1712 3.61805 8.392 3.83885 8.5552 4.11725C8.7184 4.38605 8.8 4.68365 8.8 5.01005C8.8 5.33645 8.7184 5.63885 8.5552 5.91725C8.392 6.18605 8.1712 6.40205 7.8928 6.56525C7.624 6.72845 7.3264 6.81005 7 6.81005C6.6736 6.81005 6.3712 6.72845 6.0928 6.56525C5.824 6.40205 5.608 6.18605 5.4448 5.91725C5.2816 5.63885 5.2 5.33645 5.2 5.01005C5.2 4.68365 5.2816 4.38605 5.4448 4.11725C5.608 3.83885 5.824 3.61805 6.0928 3.45485C6.3712 3.29165 6.6736 3.21005 7 3.21005ZM7 0.502848C7.9792 0.502848 8.9152 0.694848 9.808 1.07885C10.672 1.46285 11.4304 1.99565 12.0832 2.67725C12.7456 3.35885 13.2496 4.13645 13.5952 5.01005C13.2496 5.88365 12.7456 6.66125 12.0832 7.34285C11.4304 8.02445 10.672 8.55245 9.808 8.92685C8.9152 9.31085 7.9792 9.50285 7 9.50285C6.0208 9.50285 5.0848 9.31085 4.192 8.92685C3.328 8.55245 2.5648 8.02445 1.9024 7.34285C1.2496 6.66125 0.7504 5.88365 0.4048 5.01005C0.7504 4.13645 1.2496 3.35885 1.9024 2.67725C2.5648 1.99565 3.328 1.46285 4.192 1.07885C5.0848 0.694848 6.0208 0.502848 7 0.502848ZM1.7152 5.01005C2.0416 5.67245 2.4736 6.25325 3.0112 6.75245C3.5488 7.25165 4.1584 7.63565 4.84 7.90445C5.5312 8.17325 6.2512 8.30765 7 8.30765C8.1328 8.30765 9.1744 8.01005 10.1248 7.41485C11.0752 6.81965 11.8 6.01805 12.2992 5.01005C11.8 4.00205 11.0752 3.20045 10.1248 2.60525C9.1744 2.01005 8.1328 1.71245 7 1.71245C6.2512 1.71245 5.5312 1.84685 4.84 2.11565C4.1584 2.38445 3.5488 2.76845 3.0112 3.26765C2.4736 3.76685 2.0416 4.34765 1.7152 5.01005Z'\r\n                    fill='rgba(var(--center-channel-color-rgb), 0.75)'\r\n                    fillOpacity='0.48'\r\n                />\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {ProductNotices, ProductNotice} from '@mattermost/types/product_notices';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport Markdown from 'components/markdown';\r\nimport AdminEyeIcon from 'components/widgets/icons/admin_eye_icon';\r\nimport NextIcon from 'components/widgets/icons/fa_next_icon';\r\nimport PreviousIcon from 'components/widgets/icons/fa_previous_icon';\r\n\r\nimport {isDesktopApp, getDesktopVersion} from 'utils/user_agent';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nimport './product_notices_modal.scss';\r\n\r\ntype Props = PropsFromRedux;\r\n\r\ntype State = {\r\n    presentNoticeIndex: number;\r\n    noticesData: ProductNotices;\r\n}\r\n\r\nexport default class ProductNoticesModal extends React.PureComponent<Props, State> {\r\n    clearDataTimer?: number;\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            presentNoticeIndex: 0,\r\n            noticesData: [],\r\n        };\r\n        this.clearDataTimer = undefined;\r\n    }\r\n\r\n    public componentDidMount() {\r\n        this.fetchNoticesData();\r\n    }\r\n\r\n    public componentDidUpdate(prevProps: Props) {\r\n        const presentSocketState = this.props.socketStatus;\r\n        const prevSocketState = prevProps.socketStatus;\r\n        if (presentSocketState.connected && !prevSocketState.connected && prevSocketState.lastConnectAt) {\r\n            const presentTime = Date.now();\r\n            const previousSocketConnectDate = new Date(prevSocketState.lastConnectAt).getDate();\r\n            const presentDate = new Date(presentTime).getDate();\r\n            if (presentDate !== previousSocketConnectDate && presentTime > prevSocketState.lastConnectAt) {\r\n                this.fetchNoticesData();\r\n            }\r\n        }\r\n        if (!prevProps.currentTeamId) {\r\n            this.fetchNoticesData();\r\n        }\r\n    }\r\n\r\n    public componentWillUnmount() {\r\n        clearTimeout(this.clearDataTimer);\r\n    }\r\n\r\n    private async fetchNoticesData() {\r\n        const {version, currentTeamId} = this.props;\r\n        if (!currentTeamId) {\r\n            return;\r\n        }\r\n        let client = 'web';\r\n        let clientVersion = version;\r\n        if (isDesktopApp()) {\r\n            client = 'desktop';\r\n            clientVersion = getDesktopVersion();\r\n        }\r\n\r\n        const {data} = await this.props.actions.getInProductNotices(currentTeamId, client, clientVersion);\r\n        if (data) {\r\n            this.setState({\r\n                noticesData: data,\r\n            });\r\n            if (data.length) {\r\n                const presentNoticeInfo = this.state.noticesData[this.state.presentNoticeIndex];\r\n                this.props.actions.updateNoticesAsViewed([presentNoticeInfo.id]);\r\n            }\r\n        }\r\n    }\r\n\r\n    private confirmButtonText(presentNoticeInfo: ProductNotice) {\r\n        const noOfNotices = this.state.noticesData.length;\r\n\r\n        if (noOfNotices === 1 && presentNoticeInfo.actionText) {\r\n            return (\r\n                <span>\r\n                    {presentNoticeInfo.actionText}\r\n                </span>\r\n            );\r\n        } else if (noOfNotices === this.state.presentNoticeIndex + 1) {\r\n            return (\r\n                <FormattedMessage\r\n                    id={'generic.done'}\r\n                    defaultMessage='Done'\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                <FormattedMessage\r\n                    id={'generic.next'}\r\n                    defaultMessage='Next'\r\n                />\r\n                <NextIcon/>\r\n            </>\r\n        );\r\n    }\r\n\r\n    private cancelButtonText() {\r\n        if (this.state.presentNoticeIndex !== 0) {\r\n            return (\r\n                <>\r\n                    <PreviousIcon/>\r\n                    <FormattedMessage\r\n                        id={'generic.previous'}\r\n                        defaultMessage='Previous'\r\n                    />\r\n                </>\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private renderCicrleIndicators() {\r\n        const noOfNotices = this.state.noticesData.length;\r\n        if (noOfNotices === 1) {\r\n            return null;\r\n        }\r\n\r\n        const indicators = [];\r\n        for (let i = 0; i < noOfNotices; i++) {\r\n            let className = 'circle';\r\n            if (i === this.state.presentNoticeIndex) {\r\n                className += ' active';\r\n            }\r\n\r\n            indicators.push(\r\n                <span\r\n                    id={'tutorialIntroCircle' + i}\r\n                    key={'circle' + i}\r\n                    className={className}\r\n                    data-screen={i}\r\n                />,\r\n            );\r\n        }\r\n        return (\r\n            <span className='tutorial__circles'>\r\n                {indicators}\r\n            </span>\r\n        );\r\n    }\r\n\r\n    private renderAdminOnlyText() {\r\n        if (this.state.noticesData[this.state.presentNoticeIndex].sysAdminOnly) {\r\n            return (\r\n                <>\r\n                    <AdminEyeIcon/>\r\n                    <FormattedMessage\r\n                        id={'inProduct_notices.adminOnlyMessage'}\r\n                        defaultMessage='Visible to Admins only'\r\n                    />\r\n                </>\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private renderImage(image: string | undefined) {\r\n        if (image) {\r\n            return (\r\n                <img\r\n                    className='productNotices__img'\r\n                    src={image}\r\n                />\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private renderActionButton(presentNoticeInfo: ProductNotice) {\r\n        const noOfNotices = this.state.noticesData.length;\r\n\r\n        if (noOfNotices !== 1 && presentNoticeInfo.actionText) {\r\n            return (\r\n                <ExternalLink\r\n                    id='actionButton'\r\n                    className='GenericModal__button actionButton'\r\n                    location='product_notices_modal'\r\n                    href={presentNoticeInfo.actionParam || ''}\r\n                >\r\n                    {presentNoticeInfo.actionText}\r\n                </ExternalLink>\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private handleNextButton = () => {\r\n        const presentNoticeInfo = this.state.noticesData[this.state.presentNoticeIndex];\r\n        const noOfNotices = this.state.noticesData.length;\r\n        if (noOfNotices === 1 && presentNoticeInfo.actionText) {\r\n            window.open(presentNoticeInfo.actionParam, '_blank');\r\n        } else if (this.state.presentNoticeIndex + 1 < noOfNotices) {\r\n            const nextNoticeInfo = this.state.noticesData[this.state.presentNoticeIndex + 1];\r\n\r\n            this.props.actions.updateNoticesAsViewed([nextNoticeInfo.id]);\r\n\r\n            this.setState({\r\n                presentNoticeIndex: this.state.presentNoticeIndex + 1,\r\n            });\r\n        }\r\n    };\r\n\r\n    private handlePreviousButton = () => {\r\n        if (this.state.presentNoticeIndex !== 0) {\r\n            this.setState({\r\n                presentNoticeIndex: this.state.presentNoticeIndex - 1,\r\n            });\r\n        }\r\n    };\r\n\r\n    onModalDismiss = () => {\r\n        this.clearDataTimer = window.setTimeout(() => {\r\n            this.setState({\r\n                noticesData: [],\r\n                presentNoticeIndex: 0,\r\n            });\r\n        }, 3000);\r\n    };\r\n\r\n    render() {\r\n        if (!this.state.noticesData.length) {\r\n            return null;\r\n        }\r\n\r\n        const presentNoticeInfo = this.state.noticesData[this.state.presentNoticeIndex];\r\n        const handlePreviousButton = this.state.presentNoticeIndex === 0 ? undefined : this.handlePreviousButton;\r\n        const autoCloseOnConfirmButton = this.state.presentNoticeIndex === this.state.noticesData.length - 1;\r\n\r\n        return (\r\n            <GenericModal\r\n                compassDesign={true}\r\n                onExited={this.onModalDismiss}\r\n                handleConfirm={this.handleNextButton}\r\n                handleEnterKeyPress={this.handleNextButton}\r\n                handleCancel={handlePreviousButton}\r\n                modalHeaderText={(\r\n                    <span>\r\n                        {presentNoticeInfo.title}\r\n                    </span>\r\n                )}\r\n                confirmButtonText={this.confirmButtonText(presentNoticeInfo)}\r\n                cancelButtonText={this.cancelButtonText()}\r\n                className='productNotices'\r\n                autoCloseOnConfirmButton={autoCloseOnConfirmButton}\r\n                autoCloseOnCancelButton={false}\r\n            >\r\n                <span className='productNotices__helpText'>\r\n                    <Markdown\r\n                        message={presentNoticeInfo.description}\r\n                    />\r\n                </span>\r\n                {this.renderActionButton(presentNoticeInfo)}\r\n                <div className='productNotices__imageDiv'>\r\n                    {this.renderImage(presentNoticeInfo.image)}\r\n                </div>\r\n                <div className='productNotices__info'>\r\n                    {this.renderCicrleIndicators()}\r\n                    {this.renderAdminOnlyText()}\r\n                </div>\r\n            </GenericModal>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {ClientConfig} from '@mattermost/types/config';\r\n\r\nimport {getInProductNotices, updateNoticesAsViewed} from 'mattermost-redux/actions/teams';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {getSocketStatus} from 'selectors/views/websocket';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ProductNoticesModal from './product_notices_modal';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config: Partial<ClientConfig> = getConfig(state);\r\n    const version: string = config.Version || ''; //this should always exist but TS throws error\r\n    const socketStatus = getSocketStatus(state);\r\n\r\n    return {\r\n        currentTeamId: getCurrentTeamId(state),\r\n        version,\r\n        socketStatus,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getInProductNotices,\r\n            updateNoticesAsViewed,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(ProductNoticesModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\ntype Props = {\r\n    additionalClassName?: string;\r\n}\r\n\r\nconst NextIcon = ({additionalClassName}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <i\r\n            className={classNames('icon icon-chevron-right', additionalClassName)}\r\n            title={formatMessage({\r\n                id: 'generic_icons.next',\r\n                defaultMessage: 'Next Icon',\r\n            })}\r\n        />\r\n    );\r\n};\r\n\r\nexport default React.memo(NextIcon);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\ntype Props = {\r\n    additionalClassName?: string;\r\n}\r\n\r\nconst PreviousIcon = ({additionalClassName}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <i\r\n            className={classNames('icon icon-chevron-left', additionalClassName)}\r\n            title={formatMessage({id: 'generic_icons.previous', defaultMessage: 'Previous Icon'})}\r\n        />\r\n    );\r\n};\r\n\r\nexport default React.memo(PreviousIcon);\r\n"],"names":["AdminEyeIcon","props","formatMessage","useIntl","React","width","height","viewBox","fill","role","id","defaultMessage","d","fillOpacity","ProductNoticesModal","constructor","super","_defineProperty","presentNoticeInfo","this","state","noticesData","presentNoticeIndex","noOfNotices","length","actionText","window","open","actionParam","nextNoticeInfo","actions","updateNoticesAsViewed","setState","clearDataTimer","setTimeout","undefined","componentDidMount","fetchNoticesData","componentDidUpdate","prevProps","presentSocketState","socketStatus","prevSocketState","connected","lastConnectAt","presentTime","Date","now","previousSocketConnectDate","getDate","currentTeamId","componentWillUnmount","clearTimeout","version","client","clientVersion","isDesktopApp","getDesktopVersion","data","getInProductNotices","confirmButtonText","FormattedMessage","NextIcon","cancelButtonText","PreviousIcon","renderCicrleIndicators","indicators","i","className","push","key","renderAdminOnlyText","sysAdminOnly","renderImage","image","src","renderActionButton","ExternalLink","location","href","render","handlePreviousButton","autoCloseOnConfirmButton","GenericModal","compassDesign","onExited","onModalDismiss","handleConfirm","handleNextButton","handleEnterKeyPress","handleCancel","modalHeaderText","title","autoCloseOnCancelButton","Markdown","message","description","connect","getConfig","Version","getSocketStatus","getCurrentTeamId","dispatch","bindActionCreators","_ref","additionalClassName","classNames","propTypes","_pt"],"sourceRoot":""}