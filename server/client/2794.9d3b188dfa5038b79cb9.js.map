{"version":3,"file":"2794.9d3b188dfa5038b79cb9.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/drafts/draft_list/empty_draft_list_illustration.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_list/empty_draft_list.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/action.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/schedule_post_actions/delete_scheduled_post_modal.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/send_draft_modal.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/schedule_post_actions/scheduled_post_actions.tsx","webpack://mattermost-webapp/./src/components/drafts/placeholder_scheduled_post_title/placeholder_scheduled_posts_title.tsx","webpack://mattermost-webapp/./src/components/edit_scheduled_post/edit_post_footer.tsx","webpack://mattermost-webapp/./src/components/edit_scheduled_post/edit_post.tsx","webpack://mattermost-webapp/./src/components/edit_scheduled_post/index.ts","webpack://mattermost-webapp/./src/components/drafts/draft_actions/delete_draft_modal.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/draft_actions.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_actions/index.ts","webpack://mattermost-webapp/./src/components/drafts/draft_title/draft_title.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_title/index.ts","webpack://mattermost-webapp/./src/components/drafts/panel/panel.tsx","webpack://mattermost-webapp/./src/components/drafts/panel/panel_body.tsx","webpack://mattermost-webapp/./src/components/drafts/utils.ts","webpack://mattermost-webapp/./src/components/drafts/draft_row.tsx","webpack://mattermost-webapp/./src/components/common/hooks/use_scroll_on_render.ts","webpack://mattermost-webapp/./src/components/drafts/draft_list/virtualized_draft_list.tsx","webpack://mattermost-webapp/./src/components/drafts/draft_list/index.tsx","webpack://mattermost-webapp/./src/components/drafts/drafts_and_schedule_posts_page_header.tsx","webpack://mattermost-webapp/../node_modules/@mui/base/Badge/badgeClasses.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/omitEventHandlers.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/useSlotProps.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/resolveComponentProps.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/mergeSlotProps.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/extractEventHandlers.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/appendOwnerState.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/isHostComponent.js","webpack://mattermost-webapp/../node_modules/@mui/base/utils/ClassNameConfigurator.js","webpack://mattermost-webapp/../node_modules/@mui/base/Badge/Badge.js","webpack://mattermost-webapp/../node_modules/@mui/base/useBadge/useBadge.js","webpack://mattermost-webapp/../node_modules/@mui/utils/esm/usePreviousProps/usePreviousProps.js","webpack://mattermost-webapp/./src/components/drafts/scheduled_post_list/empty_scheduled_post_list_illustration.tsx","webpack://mattermost-webapp/./src/components/drafts/scheduled_post_list/empty_scheduled_post_list.tsx","webpack://mattermost-webapp/./src/components/drafts/scheduled_post_list/non_virtualized_scheduled_post_list.tsx","webpack://mattermost-webapp/./src/components/drafts/scheduled_post_list/scheduled_post_error.tsx","webpack://mattermost-webapp/./src/components/drafts/scheduled_post_list/index.tsx","webpack://mattermost-webapp/./src/components/tabs/tab/index.tsx","webpack://mattermost-webapp/./src/components/tabs/tabs/index.tsx","webpack://mattermost-webapp/./src/components/drafts/drafts_and_schedule_posts_tabs.tsx","webpack://mattermost-webapp/./src/components/drafts/index.tsx","webpack://mattermost-webapp/./src/components/widgets/header/header.tsx","webpack://mattermost-webapp/./src/utils/http_utils.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nexport default (\r\n    <svg\r\n        width='142'\r\n        height='80'\r\n        viewBox='0 0 142 80'\r\n        fill='none'\r\n        xmlns='http://www.w3.org/2000/svg'\r\n    >\r\n        <g clipPath='url(#clip0_4212_90546)'>\r\n            <rect\r\n                x='15.0059'\r\n                y='15'\r\n                width='112'\r\n                height='44'\r\n                rx='3'\r\n                fill='var(--button-bg)'\r\n                fillOpacity='0.12'\r\n            />\r\n            <path\r\n                d='M28.0059 34L28.0059 52L39.0059 52'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinecap='round'\r\n                strokeLinejoin='round'\r\n            />\r\n            <path\r\n                d='M28.0059 31L28.0059 26'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinecap='round'\r\n                strokeLinejoin='round'\r\n            />\r\n            <path\r\n                d='M28.0059 23L28.0059 21'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinecap='round'\r\n                strokeLinejoin='round'\r\n            />\r\n            <path\r\n                d='M54.6108 67.5638L41.0059 81V12C41.0059 10.8954 41.9013 10 43.0059 10H109.006C110.11 10 111.006 10.8954 111.006 12V64.9868C111.006 66.0914 110.11 66.9868 109.006 66.9868H56.0162C55.4901 66.9868 54.9851 67.1941 54.6108 67.5638Z'\r\n                fill='#28427B'\r\n            />\r\n            <path\r\n                d='M49.6108 62.5638L36.0059 76V7C36.0059 5.89543 36.9013 5 38.0059 5H104.006C105.11 5 106.006 5.89543 106.006 7V59.9868C106.006 61.0914 105.11 61.9868 104.006 61.9868H51.0162C50.4901 61.9868 49.9851 62.1941 49.6108 62.5638Z'\r\n                fill='var(--center-channel-bg)'\r\n            />\r\n            <path\r\n                d='M49.2595 62.2081L36.5059 74.8035V7C36.5059 6.17157 37.1774 5.5 38.0059 5.5H104.006C104.834 5.5 105.506 6.17157 105.506 7V59.9868C105.506 60.8153 104.834 61.4868 104.006 61.4868H51.0162C50.3585 61.4868 49.7274 61.746 49.2595 62.2081Z'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n            />\r\n            <circle\r\n                cx='54.0059'\r\n                cy='24'\r\n                r='9'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.32'\r\n            />\r\n            <path\r\n                d='M69.0059 20H85.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46.0059 44H96.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46.0059 51H68.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M69.0059 26H94.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46.0059 38H63.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M67.0059 38H85.0059'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <rect\r\n                x='115.199'\r\n                y='45.0278'\r\n                width='12.4524'\r\n                height='6.22619'\r\n                transform='rotate(-135 115.199 45.0278)'\r\n                fill='var(--center-channel-bg)'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n            />\r\n            <path\r\n                d='M117.952 42.2764L109.147 33.4712L113.787 28.8319C114.568 28.0508 115.834 28.0508 116.615 28.8319L122.592 34.8086C123.373 35.5897 123.373 36.856 122.592 37.637L117.952 42.2764Z'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.32'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n            />\r\n            <path\r\n                d='M89.3356 70.8933L80.5305 62.0882L106.946 35.6727L115.751 44.4778L89.3356 70.8933Z'\r\n                fill='var(--center-channel-bg)'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinejoin='round'\r\n            />\r\n            <path\r\n                d='M73.1016 78.8725L80.5309 62.0876L89.3361 70.8928L73.1016 78.8725Z'\r\n                fill='var(--center-channel-bg)'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinejoin='round'\r\n            />\r\n            <path\r\n                d='M78.3289 76.3964L75.4492 77.9756C74.5896 78.447 73.6355 77.5284 74.0739 76.6516L75.5773 73.6448L78.3289 76.3964Z'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.8'\r\n            />\r\n            <line\r\n                x1='82.8065'\r\n                y1='64.4976'\r\n                x2='109.377'\r\n                y2='37.9268'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n            />\r\n            <line\r\n                x1='86.6825'\r\n                y1='68.3725'\r\n                x2='113.253'\r\n                y2='41.8017'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n            />\r\n        </g>\r\n        <defs>\r\n            <clipPath id='clip0_4212_90546'>\r\n                <rect\r\n                    width='142'\r\n                    height='80'\r\n                    fill='var(--center-channel-bg)'\r\n                    transform='translate(0.00585938)'\r\n                />\r\n            </clipPath>\r\n        </defs>\r\n    </svg>\r\n);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport NoResultsIndicator from 'components/no_results_indicator/no_results_indicator';\r\n\r\nimport EmptyDraftListIllustration from './empty_draft_list_illustration';\r\n\r\nexport default function EmptyDraftList() {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <div className='DraftList Drafts__main'>\r\n            <NoResultsIndicator\r\n                expanded={true}\r\n                iconGraphic={EmptyDraftListIllustration}\r\n                title={formatMessage({\r\n                    id: 'drafts.empty.title',\r\n                    defaultMessage: 'No drafts at the moment',\r\n                })}\r\n                subtitle={formatMessage({\r\n                    id: 'drafts.empty.subtitle',\r\n                    defaultMessage: 'Any messages youve started will show here.',\r\n                })}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport './action.scss';\r\n\r\ntype Props = {\r\n    icon: string;\r\n    id: string;\r\n    name: string;\r\n    onClick: (e: React.MouseEvent<HTMLButtonElement>) => void;\r\n    tooltipText: React.ReactElement | string;\r\n};\r\n\r\nfunction Action({\r\n    name,\r\n    icon,\r\n    onClick,\r\n    id,\r\n    tooltipText,\r\n}: Props) {\r\n    return (\r\n        <div className='DraftAction'>\r\n            <WithTooltip\r\n                title={tooltipText}\r\n                id={`draft_tooltip_${id}`}\r\n            >\r\n                <button\r\n                    className={classNames(\r\n                        'DraftAction__button',\r\n                        {'DraftAction__button--delete': name === 'delete'},\r\n                    )}\r\n                    id={`draft_${icon}_${id}`}\r\n                    onClick={onClick}\r\n                    aria-labelledby={`draft_tooltip_${id}`}\r\n                >\r\n                    <i\r\n                        className={classNames(\r\n                            'icon',\r\n                            icon,\r\n                        )}\r\n                    />\r\n                </button>\r\n            </WithTooltip>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Action;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport noop from 'lodash/noop';\r\nimport React, {useCallback, useState} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\ntype Props = {\r\n    channelDisplayName?: string;\r\n    onConfirm: () => Promise<{error?: string}>;\r\n    onExited: () => void;\r\n}\r\n\r\nexport default function DeleteScheduledPostModal({\r\n    channelDisplayName,\r\n    onExited,\r\n    onConfirm,\r\n}: Props) {\r\n    const {formatMessage} = useIntl();\r\n    const [errorMessage, setErrorMessage] = useState<string>();\r\n\r\n    const title = formatMessage({\r\n        id: 'scheduled_post.delete_modal.title',\r\n        defaultMessage: 'Delete scheduled post',\r\n    });\r\n\r\n    const confirmButtonText = formatMessage({\r\n        id: 'drafts.confirm.delete.button',\r\n        defaultMessage: 'Yes, delete',\r\n    });\r\n\r\n    const handleOnConfirm = useCallback(async () => {\r\n        const response = await onConfirm();\r\n        if (response.error) {\r\n            setErrorMessage(response.error);\r\n        } else {\r\n            onExited();\r\n        }\r\n    }, [onConfirm, onExited]);\r\n\r\n    return (\r\n        <GenericModal\r\n            className='delete_scheduled_post_modal'\r\n            confirmButtonText={confirmButtonText}\r\n            handleCancel={noop}\r\n            handleConfirm={handleOnConfirm}\r\n            modalHeaderText={title}\r\n            onExited={onExited}\r\n            compassDesign={true}\r\n            isDeleteModal={true}\r\n            autoFocusConfirmButton={true}\r\n            autoCloseOnConfirmButton={false}\r\n            errorText={errorMessage}\r\n        >\r\n            {\r\n                channelDisplayName &&\r\n                <FormattedMessage\r\n                    id={'scheduled_post.delete_modal.body'}\r\n                    defaultMessage={'Are you sure you want to delete this scheduled post to <strong>{displayName}</strong>?'}\r\n                    values={{\r\n                        strong: (chunk) => <strong>{chunk}</strong>,\r\n                        displayName: channelDisplayName,\r\n                    }}\r\n                />\r\n            }\r\n\r\n            {\r\n                !channelDisplayName &&\r\n                <FormattedMessage\r\n                    id={'scheduled_post.delete_modal.body_no_channel'}\r\n                    defaultMessage={'Are you sure you want to delete this scheduled post?'}\r\n                />\r\n            }\r\n        </GenericModal>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\ntype Props = {\r\n    displayName: string;\r\n    onConfirm: () => void;\r\n    onExited: () => void;\r\n}\r\n\r\nfunction SendDraftModal({\r\n    displayName,\r\n    onConfirm,\r\n    onExited,\r\n}: Props) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const title = formatMessage({\r\n        id: 'drafts.confirm.send.title',\r\n        defaultMessage: 'Send message now',\r\n    });\r\n\r\n    const confirmButtonText = formatMessage({\r\n        id: 'drafts.confirm.send.button',\r\n        defaultMessage: 'Yes, send now',\r\n    });\r\n\r\n    const message = (\r\n        <FormattedMessage\r\n            id={'drafts.confirm.send.text'}\r\n            defaultMessage={'Are you sure you want to send this message to <strong>{displayName}</strong>?'}\r\n            values={{\r\n                strong: (chunk) => <strong>{chunk}</strong>,\r\n                displayName,\r\n            }}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            confirmButtonText={confirmButtonText}\r\n            handleCancel={() => {}}\r\n            handleConfirm={onConfirm}\r\n            modalHeaderText={title}\r\n            onExited={onExited}\r\n            compassDesign={true}\r\n        >\r\n            {message}\r\n        </GenericModal>\r\n    );\r\n}\r\n\r\nexport default SendDraftModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport moment from 'moment';\r\nimport React, {memo, useCallback, useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\n\r\nimport {fetchMissingChannels} from 'mattermost-redux/actions/channels';\r\nimport {isDeactivatedDirectChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getMyChannelMemberships} from 'mattermost-redux/selectors/entities/common';\r\nimport {getCurrentTimezone} from 'mattermost-redux/selectors/entities/timezone';\r\nimport {isCurrentUserSystemAdmin} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport ScheduledPostCustomTimeModal\r\n    from 'components/advanced_text_editor/send_button/scheduled_post_custom_time_modal/scheduled_post_custom_time_modal';\r\nimport Action from 'components/drafts/draft_actions/action';\r\nimport DeleteScheduledPostModal\r\n    from 'components/drafts/draft_actions/schedule_post_actions/delete_scheduled_post_modal';\r\nimport SendDraftModal from 'components/drafts/draft_actions/send_draft_modal';\r\n\r\nimport Constants, {ModalIdentifiers} from 'utils/constants';\r\n\r\nimport './style.scss';\r\nimport type {GlobalState} from 'types/store';\r\n\r\nconst deleteTooltipText = (\r\n    <FormattedMessage\r\n        id='scheduled_post.action.delete'\r\n        defaultMessage='Delete scheduled post'\r\n    />\r\n);\r\n\r\nconst editTooltipText = (\r\n    <FormattedMessage\r\n        id='scheduled_post.action.edit'\r\n        defaultMessage='Edit scheduled post'\r\n    />\r\n);\r\n\r\nconst rescheduleTooltipText = (\r\n    <FormattedMessage\r\n        id='scheduled_post.action.reschedule'\r\n        defaultMessage='Reschedule post'\r\n    />\r\n);\r\n\r\nconst sendNowTooltipText = (\r\n    <FormattedMessage\r\n        id='scheduled_post.action.send_now'\r\n        defaultMessage='Send now'\r\n    />\r\n);\r\n\r\nconst copyTextTooltipText = (\r\n    <FormattedMessage\r\n        id='scheduled_post.action.copy_text'\r\n        defaultMessage='Copy text'\r\n    />\r\n);\r\n\r\ntype Props = {\r\n    scheduledPost: ScheduledPost;\r\n    channel?: Channel;\r\n    onReschedule: (timestamp: number) => Promise<{error?: string}>;\r\n    onDelete: (scheduledPostId: string) => Promise<{error?: string}>;\r\n    onSend: (scheduledPostId: string) => void;\r\n    onEdit: () => void;\r\n    onCopyText: () => void;\r\n}\r\n\r\nfunction ScheduledPostActions({scheduledPost, channel, onReschedule, onDelete, onSend, onEdit, onCopyText}: Props) {\r\n    const dispatch = useDispatch();\r\n    const userTimezone = useSelector(getCurrentTimezone);\r\n    const myChannelsMemberships = useSelector((state: GlobalState) => getMyChannelMemberships(state));\r\n    const isAdmin = useSelector((state: GlobalState) => isCurrentUserSystemAdmin(state));\r\n\r\n    useEffect(() => {\r\n        // this ensures the DM is loaded in redux store and is available\r\n        // later when we check if the DM is with a deactivated user.\r\n        if (channel?.type === Constants.DM_CHANNEL) {\r\n            // fetchMissingChannels uses DataLoader which de-duplicates all requested data,\r\n            // so even if we have multiple scheduled  posts in a DM,\r\n            // the data loader ensured we fetch that DM only once.\r\n            dispatch(fetchMissingChannels([channel.id]));\r\n        }\r\n    }, [channel, dispatch]);\r\n\r\n    const handleReschedulePost = useCallback(() => {\r\n        const initialTime = moment.tz(scheduledPost.scheduled_at, userTimezone);\r\n\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.SCHEDULED_POST_CUSTOM_TIME_MODAL,\r\n            dialogType: ScheduledPostCustomTimeModal,\r\n            dialogProps: {\r\n                channelId: scheduledPost.channel_id,\r\n                onConfirm: onReschedule,\r\n                initialTime,\r\n            },\r\n        }));\r\n    }, [dispatch, onReschedule, scheduledPost.channel_id, scheduledPost.scheduled_at, userTimezone]);\r\n\r\n    const handleDelete = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.DELETE_DRAFT,\r\n            dialogType: DeleteScheduledPostModal,\r\n            dialogProps: {\r\n                channelDisplayName: channel?.display_name,\r\n                onConfirm: () => onDelete(scheduledPost.id),\r\n            },\r\n        }));\r\n    }, [channel, dispatch, onDelete, scheduledPost.id]);\r\n\r\n    const handleSend = useCallback(() => {\r\n        if (!channel) {\r\n            return;\r\n        }\r\n\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.SEND_DRAFT,\r\n            dialogType: SendDraftModal,\r\n            dialogProps: {\r\n                displayName: channel.display_name,\r\n                onConfirm: () => onSend(scheduledPost.id),\r\n            },\r\n        }));\r\n    }, [channel, dispatch, onSend, scheduledPost.id]);\r\n\r\n    const userChannelMember = Boolean(channel && myChannelsMemberships[channel.id]);\r\n    const isChannelArchived = Boolean(channel?.delete_at);\r\n\r\n    const showEditOption = !scheduledPost.error_code && userChannelMember && !isChannelArchived;\r\n    const isDeactivatedDM = useSelector((state: GlobalState) => isDeactivatedDirectChannel(state, scheduledPost.channel_id));\r\n    const showSendNowOption = (!scheduledPost.error_code || scheduledPost.error_code === 'unknown' || scheduledPost.error_code === 'unable_to_send') && channel && !isChannelArchived && !isDeactivatedDM && userChannelMember;\r\n    const showRescheduleOption = (!scheduledPost.error_code || scheduledPost.error_code === 'unknown' || scheduledPost.error_code === 'unable_to_send') && userChannelMember && !isChannelArchived;\r\n\r\n    return (\r\n        <div className='ScheduledPostActions'>\r\n            <Action\r\n                icon='icon-trash-can-outline'\r\n                id='delete'\r\n                name='delete'\r\n                tooltipText={deleteTooltipText}\r\n                onClick={handleDelete}\r\n            />\r\n\r\n            {\r\n                (isAdmin || showEditOption) &&\r\n                <Action\r\n                    icon='icon-pencil-outline'\r\n                    id='edit'\r\n                    name='edit'\r\n                    tooltipText={editTooltipText}\r\n                    onClick={onEdit}\r\n\r\n                />\r\n            }\r\n\r\n            <Action\r\n                icon='icon-content-copy'\r\n                id='copy_text'\r\n                name='copy_text'\r\n                tooltipText={copyTextTooltipText}\r\n                onClick={onCopyText}\r\n            />\r\n\r\n            {\r\n                (isAdmin || showRescheduleOption) &&\r\n                <Action\r\n                    icon='icon-clock-send-outline'\r\n                    id='reschedule'\r\n                    name='reschedule'\r\n                    tooltipText={rescheduleTooltipText}\r\n                    onClick={handleReschedulePost}\r\n                />\r\n            }\r\n\r\n            {\r\n                (isAdmin || showSendNowOption) &&\r\n                <Action\r\n                    icon='icon-send-outline'\r\n                    id='sendNow'\r\n                    name='sendNow'\r\n                    tooltipText={sendNowTooltipText}\r\n                    onClick={handleSend}\r\n                />\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default memo(ScheduledPostActions);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\ntype Props = {\r\n    type: 'channel' | 'thread';\r\n}\r\n\r\nexport default function PlaceholderScheduledPostsTitle({type}: Props) {\r\n    let title;\r\n\r\n    const icon = (\r\n        <i\r\n            className='icon icon-pencil-outline'\r\n        />\r\n    );\r\n\r\n    const tooltipText = (\r\n        <FormattedMessage\r\n            id='scheduled_posts.row_title_thread.placeholder_tooltip'\r\n            defaultMessage={'The channel either doesnt exist or you do not have access to it.'}\r\n        />\r\n    );\r\n\r\n    if (type === 'thread') {\r\n        title = (\r\n            <FormattedMessage\r\n                id='scheduled_posts.row_title_thread.placeholder'\r\n                defaultMessage={'Thread to: {icon} No Destination'}\r\n                values={{\r\n                    icon,\r\n                }}\r\n            />\r\n        );\r\n    } else {\r\n        title = (\r\n            <FormattedMessage\r\n                id='scheduled_posts.row_title_channel.placeholder'\r\n                defaultMessage={'In: {icon} No Destination'}\r\n                values={{\r\n                    icon,\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <WithTooltip\r\n            title={tooltipText}\r\n        >\r\n            <div>\r\n                {title}\r\n            </div>\r\n        </WithTooltip>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {getBool} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport {isMac} from 'utils/user_agent';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\ntype Props = {\r\n    onSave: () => void;\r\n    onCancel: () => void;\r\n}\r\n\r\nconst EditPostFooter = ({onSave, onCancel}: Props) => {\r\n    const ctrlSend = useSelector((state: GlobalState) => getBool(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter'));\r\n    const ctrlSendKey = isMac() ? '+' : 'CTRL+';\r\n\r\n    return (\r\n        <div className='post-body__footer'>\r\n            <button\r\n                onClick={onSave}\r\n                className='save'\r\n            >\r\n                <FormattedMessage\r\n                    id='edit_post.action_buttons.save'\r\n                    defaultMessage='Save'\r\n                />\r\n            </button>\r\n            <button\r\n                onClick={onCancel}\r\n                className='cancel'\r\n            >\r\n                <FormattedMessage\r\n                    id='edit_post.action_buttons.cancel'\r\n                    defaultMessage='Cancel'\r\n                />\r\n            </button>\r\n            <FormattedMessage\r\n                id='edit_post.helper_text'\r\n                defaultMessage='<strong>{key}ENTER</strong> to Save, <strong>ESC</strong> to Cancel'\r\n                values={{\r\n                    key: ctrlSend ? ctrlSendKey : '',\r\n                    strong: (x) => <strong>{x}</strong>,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(EditPostFooter);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {EmoticonPlusOutlineIcon, InformationOutlineIcon} from '@mattermost/compass-icons/components';\r\nimport type {Emoji} from '@mattermost/types/emojis';\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\nimport {scheduledPostToPost} from '@mattermost/types/schedule_post';\r\n\r\nimport {getChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {getEmojiName} from 'mattermost-redux/utils/emoji_utils';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\nimport {getConnectionId} from 'selectors/general';\r\n\r\nimport DeletePostModal from 'components/delete_post_modal';\r\nimport DeleteScheduledPostModal from 'components/drafts/draft_actions/schedule_post_actions/delete_scheduled_post_modal';\r\nimport useEmojiPicker from 'components/emoji_picker/use_emoji_picker';\r\nimport Textbox from 'components/textbox';\r\nimport type {TextboxClass, TextboxElement} from 'components/textbox';\r\n\r\nimport {AppEvents, Constants, ModalIdentifiers, StoragePrefixes} from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\nimport type {ApplyMarkdownOptions} from 'utils/markdown/apply_markdown';\r\nimport {applyMarkdown} from 'utils/markdown/apply_markdown';\r\nimport {\r\n    formatGithubCodePaste,\r\n    formatMarkdownMessage,\r\n    getHtmlTable,\r\n    hasHtmlLink,\r\n    isGitHubCodeBlock,\r\n} from 'utils/paste';\r\nimport {postMessageOnKeyPress, splitMessageBasedOnCaretPosition} from 'utils/post_utils';\r\nimport {allAtMentions} from 'utils/text_formatting';\r\nimport * as Utils from 'utils/utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\nimport type {PostDraft} from 'types/store/draft';\r\n\r\nimport EditPostFooter from './edit_post_footer';\r\n\r\nimport './style.scss';\r\n\r\nexport type Actions = {\r\n    addMessageIntoHistory: (message: string) => void;\r\n    editPost: (input: Partial<Post>) => Promise<Post>;\r\n    setDraft: (name: string, value: PostDraft | null) => void;\r\n    unsetEditingPost: () => void;\r\n    scrollPostListToBottom: () => void;\r\n    runMessageWillBeUpdatedHooks: (newPost: Partial<Post>, oldPost: Post) => Promise<ActionResult>;\r\n    updateScheduledPost: (scheduledPost: ScheduledPost, connectionId: string) => Promise<ActionResult>;\r\n}\r\n\r\nexport type Props = {\r\n    canEditPost?: boolean;\r\n    canDeletePost?: boolean;\r\n    readOnlyChannel?: boolean;\r\n    teamId: string;\r\n    channelId: string;\r\n    codeBlockOnCtrlEnter: boolean;\r\n    ctrlSend: boolean;\r\n    draft: PostDraft;\r\n    config: {\r\n        EnableEmojiPicker?: string;\r\n        EnableGifPicker?: string;\r\n    };\r\n    maxPostSize: number;\r\n    useChannelMentions: boolean;\r\n    editingPost: {\r\n        post: Post | null;\r\n        postId?: string;\r\n        refocusId?: string;\r\n        title?: string;\r\n        isRHS?: boolean;\r\n    };\r\n    isRHSOpened: boolean;\r\n    isEditHistoryShowing: boolean;\r\n    actions: Actions;\r\n    scheduledPost?: ScheduledPost;\r\n    afterSave?: () => void;\r\n    onCancel?: () => void;\r\n    onDeleteScheduledPost?: () => Promise<{error?: string}>;\r\n};\r\n\r\nexport type State = {\r\n    editText: string;\r\n    selectionRange: {start: number; end: number};\r\n    postError: React.ReactNode;\r\n    errorClass: string | null;\r\n    showEmojiPicker: boolean;\r\n    renderScrollbar: boolean;\r\n    scrollbarWidth: number;\r\n    prevShowState: boolean;\r\n};\r\n\r\nconst {KeyCodes} = Constants;\r\n\r\nconst EditPost = ({editingPost, actions, canEditPost, config, channelId, draft, scheduledPost, afterSave, onCancel, onDeleteScheduledPost, ...rest}: Props): JSX.Element | null => {\r\n    const connectionId = useSelector(getConnectionId);\r\n    const channel = useSelector((state: GlobalState) => getChannel(state, channelId));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [editText, setEditText] = useState<string>(\r\n        draft.message || editingPost?.post?.message_source || editingPost?.post?.message || scheduledPost?.message || '',\r\n    );\r\n    const [selectionRange, setSelectionRange] = useState<State['selectionRange']>({start: editText.length, end: editText.length});\r\n    const caretPosition = useRef<number>(editText.length);\r\n    const [postError, setPostError] = useState<React.ReactNode | null>(null);\r\n    const [errorClass, setErrorClass] = useState<string>('');\r\n    const [showEmojiPicker, setShowEmojiPicker] = useState<boolean>(false);\r\n    const [renderScrollbar, setRenderScrollbar] = useState<boolean>(false);\r\n    const [showMentionHelper, setShowMentionHelper] = useState<boolean>(false);\r\n\r\n    const textboxRef = useRef<TextboxClass>(null);\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n    // using a ref here makes sure that the unmounting callback (saveDraft) is fired with the correct value.\r\n    // If we would just use the editText value from the state it would be a stale since it is encapsuled in the\r\n    // function closure on initial render\r\n    const draftRef = useRef<PostDraft>(draft);\r\n    const saveDraftFrame = useRef<number|null>();\r\n\r\n    const id = scheduledPost ? scheduledPost.id : editingPost.postId;\r\n    const draftStorageId = `${StoragePrefixes.EDIT_DRAFT}${id}`;\r\n\r\n    const {formatMessage} = useIntl();\r\n\r\n    const saveDraft = useCallback(() => {\r\n        // to be run on unmount and only when there is an active saveDraftFrame timer\r\n        if (saveDraftFrame.current && editingPost.postId) {\r\n            actions.setDraft(draftStorageId, draftRef.current);\r\n            clearTimeout(saveDraftFrame.current);\r\n            saveDraftFrame.current = null;\r\n        }\r\n    }, [actions, draftStorageId, editingPost.postId]);\r\n\r\n    useEffect(() => saveDraft, [saveDraft]);\r\n\r\n    useEffect(() => {\r\n        if (saveDraftFrame.current) {\r\n            clearTimeout(saveDraftFrame.current);\r\n        }\r\n\r\n        saveDraftFrame.current = window.setTimeout(() => {\r\n            actions.setDraft(draftStorageId, draftRef.current);\r\n        }, Constants.SAVE_DRAFT_TIMEOUT);\r\n\r\n        if (!scheduledPost) {\r\n            const isMentions = allAtMentions(editText).length > 0;\r\n            setShowMentionHelper(isMentions);\r\n        }\r\n    }, [actions, draftStorageId, editText, scheduledPost]);\r\n\r\n    useEffect(() => {\r\n        const focusTextBox = () => textboxRef?.current?.focus();\r\n\r\n        document.addEventListener(AppEvents.FOCUS_EDIT_TEXTBOX, focusTextBox);\r\n        return () => document.removeEventListener(AppEvents.FOCUS_EDIT_TEXTBOX, focusTextBox);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectionRange.start === selectionRange.end) {\r\n            Utils.setCaretPosition(textboxRef.current?.getInputBox(), selectionRange.start);\r\n        } else {\r\n            Utils.setSelectionRange(textboxRef.current?.getInputBox(), selectionRange.start, selectionRange.end);\r\n        }\r\n    }, [selectionRange]);\r\n\r\n    // just a helper so it's not always needed to update with setting both properties to the same value\r\n    const setSelectionRangeByCaretPosition = (position: number) => setSelectionRange({start: position, end: position});\r\n\r\n    const handleBlur = (e: React.FocusEvent<TextboxElement, Element>) => {\r\n        const target = e.target as HTMLTextAreaElement;\r\n        caretPosition.current = target.selectionEnd;\r\n    };\r\n\r\n    const handlePaste = useCallback((e: ClipboardEvent) => {\r\n        const {clipboardData, target} = e;\r\n        if (\r\n            !clipboardData ||\r\n            !clipboardData.items ||\r\n            !canEditPost ||\r\n            (target as HTMLTextAreaElement).id !== 'edit_textbox'\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        const hasLinks = hasHtmlLink(clipboardData);\r\n        const table = getHtmlTable(clipboardData);\r\n        if (!table && !hasLinks) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        let message = editText;\r\n        let newCaretPosition = selectionRange.start;\r\n\r\n        if (table && isGitHubCodeBlock(table.className)) {\r\n            const {formattedMessage, formattedCodeBlock} = formatGithubCodePaste({selectionStart: (target as any).selectionStart, selectionEnd: (target as any).selectionEnd, message, clipboardData});\r\n            message = formattedMessage;\r\n            newCaretPosition = selectionRange.start + formattedCodeBlock.length;\r\n        } else {\r\n            message = formatMarkdownMessage(clipboardData, editText.trim(), newCaretPosition).formattedMessage;\r\n            newCaretPosition = message.length - (editText.length - newCaretPosition);\r\n        }\r\n\r\n        setEditText(message);\r\n        setSelectionRangeByCaretPosition(newCaretPosition);\r\n    }, [canEditPost, selectionRange, editText]);\r\n\r\n    const isSaveDisabled = () => {\r\n        const {post} = editingPost;\r\n        const hasAttachments = post && post.file_ids && post.file_ids.length > 0;\r\n\r\n        if (hasAttachments) {\r\n            return !canEditPost;\r\n        }\r\n\r\n        if (editText.trim() !== '') {\r\n            return !canEditPost;\r\n        }\r\n\r\n        return !rest.canDeletePost;\r\n    };\r\n\r\n    const applyHotkeyMarkdown = (params: ApplyMarkdownOptions) => {\r\n        if (params.selectionStart === null || params.selectionEnd === null) {\r\n            return;\r\n        }\r\n\r\n        const res = applyMarkdown(params);\r\n\r\n        setEditText(res.message);\r\n        setSelectionRange({start: res.selectionStart, end: res.selectionEnd});\r\n    };\r\n\r\n    const handleRefocusAndExit = (refocusId: string|null) => {\r\n        if (refocusId) {\r\n            const element = document.getElementById(refocusId);\r\n            element?.focus();\r\n        }\r\n\r\n        actions.unsetEditingPost();\r\n    };\r\n\r\n    const handleAutomatedRefocusAndExit = () => {\r\n        draftRef.current = {\r\n            ...draftRef.current,\r\n            message: '',\r\n        };\r\n        handleRefocusAndExit(editingPost.refocusId || null);\r\n    };\r\n\r\n    const handleEdit = async () => {\r\n        if (scheduledPost) {\r\n            await handleEditScheduledPost();\r\n            afterSave?.();\r\n            return;\r\n        }\r\n\r\n        if (!editingPost.post || isSaveDisabled()) {\r\n            return;\r\n        }\r\n\r\n        let updatedPost = {\r\n            message: editText,\r\n            id: editingPost.postId,\r\n            channel_id: editingPost.post.channel_id,\r\n        };\r\n\r\n        const hookResult = await actions.runMessageWillBeUpdatedHooks(updatedPost, editingPost.post);\r\n        if (hookResult.error && hookResult.error.message) {\r\n            setPostError(<>{hookResult.error.message}</>);\r\n            return;\r\n        }\r\n\r\n        updatedPost = hookResult.data;\r\n\r\n        if (postError) {\r\n            setErrorClass('animation--highlight');\r\n            setTimeout(() => setErrorClass(''), Constants.ANIMATION_TIMEOUT);\r\n            return;\r\n        }\r\n\r\n        if (updatedPost.message === (editingPost.post?.message_source || editingPost.post?.message)) {\r\n            handleAutomatedRefocusAndExit();\r\n            return;\r\n        }\r\n\r\n        const hasAttachment = Boolean(\r\n            editingPost.post?.file_ids && editingPost.post?.file_ids.length > 0,\r\n        );\r\n        if (updatedPost.message.trim().length === 0 && !hasAttachment) {\r\n            handleRefocusAndExit(null);\r\n\r\n            const deletePostModalData = {\r\n                modalId: ModalIdentifiers.DELETE_POST,\r\n                dialogType: DeletePostModal,\r\n                dialogProps: {\r\n                    post: editingPost.post,\r\n                    isRHS: editingPost.isRHS,\r\n                },\r\n            };\r\n\r\n            dispatch(openModal(deletePostModalData));\r\n            return;\r\n        }\r\n\r\n        await actions.editPost(updatedPost as Post);\r\n\r\n        handleAutomatedRefocusAndExit();\r\n        afterSave?.();\r\n    };\r\n\r\n    const handleCancel = useCallback(() => {\r\n        onCancel?.();\r\n        handleAutomatedRefocusAndExit();\r\n    }, [onCancel, handleAutomatedRefocusAndExit]);\r\n\r\n    const handleEditScheduledPost = useCallback(async () => {\r\n        if (!scheduledPost || isSaveDisabled() || !channel || !onDeleteScheduledPost) {\r\n            return;\r\n        }\r\n\r\n        const post = scheduledPostToPost(scheduledPost);\r\n\r\n        let updatedPost = {\r\n            message: editText,\r\n            id: scheduledPost.id,\r\n            channel_id: scheduledPost?.channel_id,\r\n        };\r\n\r\n        const hookResult = await actions.runMessageWillBeUpdatedHooks(updatedPost, post);\r\n        if (hookResult.error && hookResult.error.message) {\r\n            setPostError(<>{hookResult.error.message}</>);\r\n            return;\r\n        }\r\n\r\n        updatedPost = hookResult.data;\r\n\r\n        if (postError) {\r\n            setErrorClass('animation--highlight');\r\n            setTimeout(() => setErrorClass(''), Constants.ANIMATION_TIMEOUT);\r\n            return;\r\n        }\r\n\r\n        if (updatedPost.message === post.message) {\r\n            handleAutomatedRefocusAndExit();\r\n            return;\r\n        }\r\n\r\n        const hasAttachment = Boolean(\r\n            scheduledPost.file_ids && scheduledPost.file_ids.length > 0,\r\n        );\r\n        if (updatedPost.message.trim().length === 0 && !hasAttachment) {\r\n            handleRefocusAndExit(null);\r\n\r\n            const deleteScheduledPostModalData = {\r\n                modalId: ModalIdentifiers.DELETE_DRAFT,\r\n                dialogType: DeleteScheduledPostModal,\r\n                dialogProps: {\r\n                    channelDisplayName: channel.display_name,\r\n                    onConfirm: onDeleteScheduledPost,\r\n                },\r\n            };\r\n\r\n            dispatch(openModal(deleteScheduledPostModalData));\r\n            return;\r\n        }\r\n\r\n        const updatedScheduledPost = {\r\n            ...scheduledPost,\r\n            message: updatedPost.message,\r\n        };\r\n\r\n        const response = await actions.updateScheduledPost(updatedScheduledPost, connectionId);\r\n        if (response.error) {\r\n            setPostError(response.error.message);\r\n        } else {\r\n            handleAutomatedRefocusAndExit();\r\n            afterSave?.();\r\n        }\r\n    }, [\r\n        actions,\r\n        connectionId,\r\n        editText,\r\n        handleAutomatedRefocusAndExit,\r\n        handleRefocusAndExit,\r\n        isSaveDisabled,\r\n        postError,\r\n        scheduledPost,\r\n        afterSave,\r\n        channel,\r\n        onDeleteScheduledPost,\r\n    ]);\r\n\r\n    const handleEditKeyPress = (e: React.KeyboardEvent) => {\r\n        const {ctrlSend, codeBlockOnCtrlEnter} = rest;\r\n\r\n        const {allowSending, ignoreKeyPress} = postMessageOnKeyPress(\r\n            e,\r\n            editText,\r\n            ctrlSend,\r\n            codeBlockOnCtrlEnter,\r\n            Date.now(),\r\n            0,\r\n        );\r\n\r\n        if (ignoreKeyPress) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return;\r\n        }\r\n\r\n        if (allowSending && textboxRef.current) {\r\n            e.preventDefault();\r\n            textboxRef.current.blur();\r\n            handleEdit();\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<TextboxElement>) => {\r\n        const {ctrlSend, codeBlockOnCtrlEnter} = rest;\r\n\r\n        const ctrlOrMetaKeyPressed = e.ctrlKey || e.metaKey;\r\n        const ctrlKeyCombo = Keyboard.cmdOrCtrlPressed(e) && !e.altKey && !e.shiftKey;\r\n        const ctrlAltCombo = Keyboard.cmdOrCtrlPressed(e, true) && e.altKey;\r\n        const ctrlEnterKeyCombo =\r\n            (ctrlSend || codeBlockOnCtrlEnter) &&\r\n            Keyboard.isKeyPressed(e, KeyCodes.ENTER) &&\r\n            ctrlOrMetaKeyPressed;\r\n        const markdownLinkKey = Keyboard.isKeyPressed(e, KeyCodes.K);\r\n        const ctrlShiftCombo = Keyboard.cmdOrCtrlPressed(e, true) && e.shiftKey;\r\n        const lastMessageReactionKeyCombo = ctrlShiftCombo && Keyboard.isKeyPressed(e, KeyCodes.BACK_SLASH);\r\n\r\n        // listen for line break key combo and insert new line character\r\n        if (Utils.isUnhandledLineBreakKeyCombo(e)) {\r\n            e.stopPropagation(); // perhaps this should happen in all of these cases? or perhaps Modal should not be listening?\r\n            setEditText(Utils.insertLineBreakFromKeyEvent(e.nativeEvent));\r\n        } else if (ctrlEnterKeyCombo) {\r\n            handleEdit();\r\n        } else if (Keyboard.isKeyPressed(e, KeyCodes.ESCAPE) && !showEmojiPicker) {\r\n            onCancel?.();\r\n            handleAutomatedRefocusAndExit();\r\n        } else if (ctrlAltCombo && markdownLinkKey) {\r\n            applyHotkeyMarkdown({\r\n                markdownMode: 'link',\r\n                selectionStart: e.currentTarget.selectionStart,\r\n                selectionEnd: e.currentTarget.selectionEnd,\r\n                message: e.currentTarget.value,\r\n            });\r\n        } else if (ctrlKeyCombo && Keyboard.isKeyPressed(e, KeyCodes.B)) {\r\n            applyHotkeyMarkdown({\r\n                markdownMode: 'bold',\r\n                selectionStart: e.currentTarget.selectionStart,\r\n                selectionEnd: e.currentTarget.selectionEnd,\r\n                message: e.currentTarget.value,\r\n            });\r\n        } else if (ctrlKeyCombo && Keyboard.isKeyPressed(e, KeyCodes.I)) {\r\n            applyHotkeyMarkdown({\r\n                markdownMode: 'italic',\r\n                selectionStart: e.currentTarget.selectionStart,\r\n                selectionEnd: e.currentTarget.selectionEnd,\r\n                message: e.currentTarget.value,\r\n            });\r\n        } else if (lastMessageReactionKeyCombo) {\r\n            // Stop document from handling the hotkey and opening the reaction\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n    };\r\n\r\n    const handleChange = (e: React.ChangeEvent<TextboxElement>) => {\r\n        const message = e.target.value;\r\n\r\n        draftRef.current = {\r\n            ...draftRef.current,\r\n            message,\r\n        };\r\n\r\n        setEditText(message);\r\n    };\r\n\r\n    const handleHeightChange = (height: number, maxHeight: number) => setRenderScrollbar(height > maxHeight);\r\n\r\n    const handlePostError = (_postError: React.ReactNode) => {\r\n        if (_postError !== postError) {\r\n            setPostError(_postError);\r\n        }\r\n    };\r\n\r\n    const handleEmojiClick = (emoji?: Emoji) => {\r\n        if (!emoji) {\r\n            return;\r\n        }\r\n\r\n        const emojiAlias = getEmojiName(emoji);\r\n        if (!emojiAlias) {\r\n            //Oops.. There went something wrong\r\n            return;\r\n        }\r\n\r\n        let newMessage = `:${emojiAlias}: `;\r\n        let newCaretPosition = newMessage.length;\r\n\r\n        if (editText.length > 0) {\r\n            const {firstPiece, lastPiece} = splitMessageBasedOnCaretPosition(\r\n                caretPosition.current,\r\n                editText,\r\n            );\r\n\r\n            // check whether the first piece of the message is empty when cursor\r\n            // is placed at beginning of message and avoid adding an empty string at the beginning of the message\r\n            newMessage = firstPiece === '' ? `:${emojiAlias}: ${lastPiece}` : `${firstPiece} :${emojiAlias}: ${lastPiece}`;\r\n            newCaretPosition = firstPiece === '' ? `:${emojiAlias}: `.length : `${firstPiece} :${emojiAlias}: `.length;\r\n        }\r\n\r\n        draftRef.current = {\r\n            ...draftRef.current,\r\n            message: newMessage,\r\n        };\r\n\r\n        setEditText(newMessage);\r\n        setSelectionRangeByCaretPosition(newCaretPosition);\r\n        setShowEmojiPicker(false);\r\n        textboxRef.current?.focus();\r\n    };\r\n\r\n    const handleGifClick = (gif: string) => {\r\n        let newMessage = gif;\r\n\r\n        if (editText.length > 0) {\r\n            newMessage = (/\\s+$/).test(editText) ? `${editText}${gif}` : `${editText} ${gif}`;\r\n        }\r\n\r\n        draftRef.current = {\r\n            ...draftRef.current,\r\n            message: newMessage,\r\n        };\r\n\r\n        setEditText(newMessage);\r\n        setShowEmojiPicker(false);\r\n        textboxRef.current?.focus();\r\n    };\r\n\r\n    const toggleEmojiPicker = (e?: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\r\n        e?.stopPropagation();\r\n        setShowEmojiPicker(!showEmojiPicker);\r\n        if (showEmojiPicker) {\r\n            textboxRef.current?.focus();\r\n        }\r\n    };\r\n\r\n    const {\r\n        emojiPicker,\r\n        getReferenceProps,\r\n        setReference,\r\n    } = useEmojiPicker({\r\n        showEmojiPicker,\r\n        setShowEmojiPicker,\r\n\r\n        enableGifPicker: config.EnableGifPicker === 'true',\r\n        onGifClick: handleGifClick,\r\n        onEmojiClick: handleEmojiClick,\r\n    });\r\n\r\n    let emojiPickerControls = null;\r\n    if (config.EnableEmojiPicker === 'true') {\r\n        emojiPickerControls = (\r\n            <>\r\n                <button\r\n                    aria-label={formatMessage({id: 'emoji_picker.emojiPicker.button.ariaLabel', defaultMessage: 'select an emoji'})}\r\n                    id='editPostEmoji'\r\n                    ref={setReference}\r\n                    className='style--none post-action'\r\n                    onClick={toggleEmojiPicker}\r\n                    {...getReferenceProps()}\r\n                >\r\n                    <EmoticonPlusOutlineIcon\r\n                        size={18}\r\n                        color='currentColor'\r\n                    />\r\n                </button>\r\n                {emojiPicker}\r\n            </>\r\n        );\r\n    }\r\n\r\n    let rootId = '';\r\n    if (editingPost.post) {\r\n        rootId = editingPost.post.root_id || editingPost.post.id;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={classNames('post--editing__wrapper', {\r\n                scroll: renderScrollbar,\r\n            })}\r\n            ref={wrapperRef}\r\n        >\r\n            <Textbox\r\n                tabIndex={0}\r\n                rootId={rootId}\r\n                onChange={handleChange}\r\n                onKeyPress={handleEditKeyPress}\r\n                onKeyDown={handleKeyDown}\r\n                onBlur={handleBlur}\r\n                onHeightChange={handleHeightChange}\r\n                handlePostError={handlePostError}\r\n                onPaste={handlePaste}\r\n                value={editText}\r\n                channelId={channelId}\r\n                emojiEnabled={config.EnableEmojiPicker === 'true'}\r\n                createMessage={formatMessage({id: 'edit_post.editPost', defaultMessage: 'Edit the post...'})}\r\n                supportsCommands={false}\r\n                suggestionListPosition='bottom'\r\n                id='edit_textbox'\r\n                ref={textboxRef}\r\n                characterLimit={rest.maxPostSize}\r\n                useChannelMentions={rest.useChannelMentions}\r\n            />\r\n            <div className='post-body__actions'>\r\n                {emojiPickerControls}\r\n            </div>\r\n            { showMentionHelper ? (\r\n                <div className='post-body__info'>\r\n                    <span className='post-body__info__icon'>\r\n                        <InformationOutlineIcon\r\n                            size={14}\r\n                            color='currentColor'\r\n                        />\r\n                    </span>\r\n                    <span>{\r\n                        formatMessage({\r\n                            id: 'edit_post.no_notification_trigger_on_mention',\r\n                            defaultMessage: \"Editing this message with an '@mention' will not notify the recipient.\",\r\n                        })\r\n                    }</span>\r\n                </div>) : null\r\n            }\r\n            <EditPostFooter\r\n                onSave={handleEdit}\r\n                onCancel={handleCancel}\r\n            />\r\n            {postError && (\r\n                <div className={classNames('edit-post-footer', {'has-error': postError})}>\r\n                    <label className={classNames('post-error', errorClass)}>{postError}</label>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditPost;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\n\r\nimport {addMessageIntoHistory} from 'mattermost-redux/actions/posts';\r\nimport {updateScheduledPost} from 'mattermost-redux/actions/scheduled_posts';\r\nimport {Preferences, Permissions} from 'mattermost-redux/constants';\r\nimport {getChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {haveIChannelPermission} from 'mattermost-redux/selectors/entities/roles';\r\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\nimport {getCurrentUserId, isCurrentUserSystemAdmin} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {runMessageWillBeUpdatedHooks} from 'actions/hooks';\r\nimport {unsetEditingPost} from 'actions/post_actions';\r\nimport {setGlobalItem} from 'actions/storage';\r\nimport {scrollPostListToBottom} from 'actions/views/channel';\r\nimport {editPost} from 'actions/views/posts';\r\nimport {getEditingPostDetailsAndPost} from 'selectors/posts';\r\nimport {getIsRhsOpen, getPostDraft, getRhsState} from 'selectors/rhs';\r\n\r\nimport Constants, {RHSStates, StoragePrefixes} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport EditPost from './edit_post';\r\n\r\ntype Props = {\r\n    scheduledPost?: ScheduledPost;\r\n}\r\n\r\nfunction mapStateToProps(state: GlobalState, props: Props) {\r\n    const config = getConfig(state);\r\n    const currentUserId = getCurrentUserId(state);\r\n\r\n    let editingPost;\r\n    let channelId: string;\r\n    let draft;\r\n    let isAuthor;\r\n\r\n    if (props.scheduledPost) {\r\n        editingPost = {post: null};\r\n        channelId = props.scheduledPost.channel_id;\r\n        draft = getPostDraft(state, StoragePrefixes.EDIT_DRAFT, props.scheduledPost.id);\r\n        isAuthor = true;\r\n    } else {\r\n        editingPost = getEditingPostDetailsAndPost(state);\r\n        channelId = editingPost.post.channel_id;\r\n        draft = getPostDraft(state, StoragePrefixes.EDIT_DRAFT, editingPost.postId);\r\n        isAuthor = editingPost?.post?.user_id === currentUserId;\r\n    }\r\n\r\n    const teamId = getCurrentTeamId(state);\r\n    const deletePermission = isAuthor ? Permissions.DELETE_POST : Permissions.DELETE_OTHERS_POSTS;\r\n    const editPermission = isAuthor ? Permissions.EDIT_POST : Permissions.EDIT_OTHERS_POSTS;\r\n\r\n    const channel = getChannel(state, channelId);\r\n    const useChannelMentions = haveIChannelPermission(state, teamId, channelId, Permissions.USE_CHANNEL_MENTIONS);\r\n\r\n    const canEdit = haveIChannelPermission(state, teamId, channelId, editPermission);\r\n\r\n    return {\r\n        canEditPost: canEdit,\r\n        canDeletePost: haveIChannelPermission(state, teamId, channelId, deletePermission),\r\n        codeBlockOnCtrlEnter: getBool(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'code_block_ctrl_enter', true),\r\n        ctrlSend: getBool(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter'),\r\n        draft,\r\n        config,\r\n        editingPost,\r\n        teamId,\r\n        channelId,\r\n        maxPostSize: parseInt(config.MaxPostSize || '0', 10) || Constants.DEFAULT_CHARACTER_LIMIT,\r\n        readOnlyChannel: !isCurrentUserSystemAdmin(state) && channel?.name === Constants.DEFAULT_CHANNEL,\r\n        useChannelMentions,\r\n        isRHSOpened: getIsRhsOpen(state),\r\n        isEditHistoryShowing: getRhsState(state) === RHSStates.EDIT_HISTORY,\r\n        scheduledPost: props.scheduledPost,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            scrollPostListToBottom,\r\n            addMessageIntoHistory,\r\n            editPost,\r\n            setDraft: setGlobalItem,\r\n            unsetEditingPost,\r\n            runMessageWillBeUpdatedHooks,\r\n            updateScheduledPost,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditPost);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport noop from 'lodash/noop';\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\ntype Props = {\r\n    displayName: string;\r\n    onConfirm: () => void;\r\n    onExited: () => void;\r\n}\r\n\r\nfunction DeleteDraftModal({\r\n    displayName,\r\n    onExited,\r\n    onConfirm,\r\n}: Props) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const title = formatMessage({\r\n        id: 'drafts.confirm.delete.title',\r\n        defaultMessage: 'Delete draft',\r\n    });\r\n\r\n    const confirmButtonText = formatMessage({\r\n        id: 'drafts.confirm.delete.button',\r\n        defaultMessage: 'Yes, delete',\r\n    });\r\n\r\n    const message = (\r\n        <FormattedMessage\r\n            id={'drafts.confirm.delete.text'}\r\n            defaultMessage={'Are you sure you want to delete this draft to <strong>{displayName}</strong>?'}\r\n            values={{\r\n                strong: (chunk) => <strong>{chunk}</strong>,\r\n                displayName,\r\n            }}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            confirmButtonText={confirmButtonText}\r\n            handleCancel={noop}\r\n            handleConfirm={onConfirm}\r\n            modalHeaderText={title}\r\n            onExited={onExited}\r\n            compassDesign={true}\r\n            isDeleteModal={true}\r\n            autoFocusConfirmButton={true}\r\n        >\r\n            {message}\r\n        </GenericModal>\r\n    );\r\n}\r\n\r\nexport default DeleteDraftModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo, useCallback} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport ScheduledPostCustomTimeModal\r\n    from 'components/advanced_text_editor/send_button/scheduled_post_custom_time_modal/scheduled_post_custom_time_modal';\r\n\r\nimport {ModalIdentifiers} from 'utils/constants';\r\n\r\nimport Action from './action';\r\nimport DeleteDraftModal from './delete_draft_modal';\r\nimport SendDraftModal from './send_draft_modal';\r\n\r\nconst scheduledDraft = (\r\n    <FormattedMessage\r\n        id='drafts.actions.scheduled'\r\n        defaultMessage='Schedule draft'\r\n    />\r\n);\r\n\r\ntype Props = {\r\n    displayName: string;\r\n    onDelete: () => void;\r\n    onEdit: () => void;\r\n    onSend: () => void;\r\n    canEdit: boolean;\r\n    canSend: boolean;\r\n    onSchedule: (timestamp: number) => Promise<{error?: string}>;\r\n    channelId: string;\r\n}\r\n\r\nfunction DraftActions({\r\n    displayName,\r\n    onDelete,\r\n    onEdit,\r\n    onSend,\r\n    canEdit,\r\n    canSend,\r\n    onSchedule,\r\n    channelId,\r\n}: Props) {\r\n    const dispatch = useDispatch();\r\n\r\n    const handleDelete = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.DELETE_DRAFT,\r\n            dialogType: DeleteDraftModal,\r\n            dialogProps: {\r\n                displayName,\r\n                onConfirm: onDelete,\r\n            },\r\n        }));\r\n    }, [dispatch, displayName, onDelete]);\r\n\r\n    const handleSend = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.SEND_DRAFT,\r\n            dialogType: SendDraftModal,\r\n            dialogProps: {\r\n                displayName,\r\n                onConfirm: onSend,\r\n            },\r\n        }));\r\n    }, [dispatch, displayName, onSend]);\r\n\r\n    const handleScheduleDraft = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.SCHEDULED_POST_CUSTOM_TIME_MODAL,\r\n            dialogType: ScheduledPostCustomTimeModal,\r\n            dialogProps: {\r\n                channelId,\r\n                onConfirm: onSchedule,\r\n            },\r\n        }));\r\n    }, [channelId, dispatch, onSchedule]);\r\n\r\n    return (\r\n        <>\r\n            <Action\r\n                icon='icon-trash-can-outline'\r\n                id='delete'\r\n                name='delete'\r\n                tooltipText={(\r\n                    <FormattedMessage\r\n                        id='drafts.actions.delete'\r\n                        defaultMessage='Delete draft'\r\n                    />\r\n                )}\r\n                onClick={handleDelete}\r\n            />\r\n            {canEdit && (\r\n                <Action\r\n                    icon='icon-pencil-outline'\r\n                    id='edit'\r\n                    name='edit'\r\n                    tooltipText={(\r\n                        <FormattedMessage\r\n                            id='drafts.actions.edit'\r\n                            defaultMessage='Edit draft'\r\n                        />\r\n                    )}\r\n                    onClick={onEdit}\r\n                />\r\n            )}\r\n\r\n            {\r\n                canSend &&\r\n                <Action\r\n                    icon='icon-clock-send-outline'\r\n                    id='reschedule'\r\n                    name='reschedule'\r\n                    tooltipText={scheduledDraft}\r\n                    onClick={handleScheduleDraft}\r\n                />\r\n            }\r\n\r\n            {canSend && (\r\n                <Action\r\n                    icon='icon-send-outline'\r\n                    id='send'\r\n                    name='send'\r\n                    tooltipText={(\r\n                        <FormattedMessage\r\n                            id='drafts.actions.send'\r\n                            defaultMessage='Send draft'\r\n                        />\r\n                    )}\r\n                    onClick={handleSend}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default memo(DraftActions);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport {getTeammateNameDisplaySetting} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {getUserIdFromChannelName} from 'mattermost-redux/utils/channel_utils';\r\nimport {displayUsername} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {Constants} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport DraftActions from './draft_actions';\r\n\r\ntype OwnProps = {\r\n    channelDisplayName: Channel['display_name'];\r\n    channelType: Channel['type'];\r\n    channelName: Channel['name'];\r\n    userId: string;\r\n}\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    const {channelDisplayName, userId, channelName, channelType} = ownProps;\r\n\r\n    let displayName = channelDisplayName;\r\n    let teammateId;\r\n    let teammate;\r\n\r\n    if (channelType === Constants.DM_CHANNEL) {\r\n        teammateId = getUserIdFromChannelName(userId, channelName);\r\n        teammate = getUser(state, teammateId);\r\n        displayName = displayUsername(teammate, getTeammateNameDisplaySetting(state));\r\n    }\r\n\r\n    return {\r\n        displayName,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(DraftActions);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo, useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {batchGetProfilesInChannel, getMissingProfilesByIds} from 'mattermost-redux/actions/users';\r\n\r\nimport Avatar from 'components/widgets/users/avatar';\r\n\r\nimport {Constants} from 'utils/constants';\r\nimport {imageURLForUser} from 'utils/utils';\r\n\r\nimport './draft_title.scss';\r\n\r\ntype Props = {\r\n    channel: Channel;\r\n    membersCount?: number;\r\n    selfDraft: boolean;\r\n    teammate?: UserProfile;\r\n    teammateId?: string;\r\n    type: 'channel' | 'thread';\r\n}\r\n\r\nfunction DraftTitle({\r\n    channel,\r\n    membersCount,\r\n    selfDraft,\r\n    teammate,\r\n    teammateId,\r\n    type,\r\n}: Props) {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (!teammate?.id && teammateId) {\r\n            dispatch(getMissingProfilesByIds([teammateId]));\r\n        }\r\n    }, [teammate?.id, teammateId]);\r\n\r\n    useEffect(() => {\r\n        // if you have a scheduled post in a GM and you closed that GM,\r\n        // we don't fetch that GM's members by default. This causes the number of GM members\r\n        // in scheduled posts row header to show up as '0'. To fix this,\r\n        // we check if the channel is a GM and member count is 0 (could will at least be 1 as the current user\r\n        // is always a member) and if so, fetch the GM members.\r\n        // The action uses a data loader so it is safe to call do this for multiple\r\n        // scheduled posts for the same GM without causing any duplicate API calls.\r\n        if (channel.type === Constants.GM_CHANNEL && !membersCount) {\r\n            dispatch(batchGetProfilesInChannel(channel.id));\r\n        }\r\n    }, [channel.id, channel.type, dispatch, membersCount]);\r\n\r\n    let you = null;\r\n    let title = null;\r\n\r\n    if (selfDraft) {\r\n        you = (\r\n            <>\r\n                &nbsp;\r\n                <FormattedMessage\r\n                    id='drafts.draft_title.you'\r\n                    defaultMessage={'(you)'}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n\r\n    let icon = <i className='icon icon-globe'/>;\r\n\r\n    if (channel.type === Constants.PRIVATE_CHANNEL) {\r\n        icon = <i className='icon icon-lock-outline'/>;\r\n    }\r\n\r\n    if (channel.type === Constants.DM_CHANNEL && teammate) {\r\n        icon = (\r\n            <Avatar\r\n                size='xs'\r\n                username={teammate.username}\r\n                url={imageURLForUser(teammate.id, teammate.last_picture_update)}\r\n                className='DraftTitle__avatar'\r\n            />\r\n        );\r\n    }\r\n\r\n    if (channel.type === Constants.GM_CHANNEL) {\r\n        icon = (\r\n            <div className='DraftTitle__group-icon'>\r\n                {membersCount}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (type === 'thread') {\r\n        if (\r\n            channel.type !== Constants.GM_CHANNEL &&\r\n            channel.type !== Constants.DM_CHANNEL\r\n        ) {\r\n            title = (\r\n                <FormattedMessage\r\n                    id='drafts.draft_title.channel_thread'\r\n                    defaultMessage={'Thread in: {icon} <span>{channelName}</span>'}\r\n                    values={{\r\n                        icon,\r\n                        channelName: channel.display_name,\r\n                        span: (chunks: React.ReactNode) => (<span>{chunks}</span>),\r\n                    }}\r\n                />\r\n            );\r\n        } else {\r\n            title = (\r\n                <FormattedMessage\r\n                    id='drafts.draft_title.direct_thread'\r\n                    defaultMessage={'Thread to: {icon} <span>{channelName}</span>'}\r\n                    values={{\r\n                        icon,\r\n                        channelName: channel.display_name,\r\n                        span: (chunks: React.ReactNode) => (<span>{chunks}</span>),\r\n                    }}\r\n                />\r\n            );\r\n        }\r\n    } else if (\r\n        channel.type !== Constants.GM_CHANNEL &&\r\n        channel.type !== Constants.DM_CHANNEL\r\n    ) {\r\n        title = (\r\n            <FormattedMessage\r\n                id='drafts.draft_title.channel'\r\n                defaultMessage={'In: {icon} <span>{channelName}</span>'}\r\n                values={{\r\n                    icon,\r\n                    channelName: channel.display_name,\r\n                    span: (chunks: React.ReactNode) => (<span>{chunks}</span>),\r\n                }}\r\n            />\r\n        );\r\n    } else {\r\n        title = (\r\n            <FormattedMessage\r\n                id='drafts.draft_title.direct_channel'\r\n                defaultMessage={'To: {icon} <span>{channelName}</span>'}\r\n                values={{\r\n                    icon,\r\n                    channelName: channel.display_name,\r\n                    span: (chunks: React.ReactNode) => (<span>{chunks}</span>),\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {title}\r\n            {you}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default memo(DraftTitle);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport {makeGetGmChannelMemberCount} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {getUserIdFromChannelName} from 'mattermost-redux/utils/channel_utils';\r\n\r\nimport {Constants} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport DraftTitle from './draft_title';\r\n\r\ntype OwnProps = {\r\n    channel: Channel;\r\n    userId: string;\r\n};\r\n\r\nfunction makeMapStateToProps() {\r\n    const getMemberCount = makeGetGmChannelMemberCount();\r\n    return (state: GlobalState, ownProps: OwnProps) => {\r\n        const {channel, userId} = ownProps;\r\n\r\n        let teammateId;\r\n        let teammate;\r\n        let membersCount;\r\n\r\n        if (channel.type === Constants.GM_CHANNEL) {\r\n            membersCount = getMemberCount(state, channel);\r\n        }\r\n\r\n        if (channel.type === Constants.DM_CHANNEL) {\r\n            teammateId = getUserIdFromChannelName(userId, channel.name);\r\n            teammate = getUser(state, teammateId);\r\n        }\r\n\r\n        return {\r\n            channel,\r\n            membersCount,\r\n            selfDraft: teammateId === userId,\r\n            teammate,\r\n            teammateId,\r\n        };\r\n    };\r\n}\r\n\r\nexport default connect(makeMapStateToProps)(DraftTitle);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {memo} from 'react';\r\n\r\nimport {makeIsEligibleForClick} from 'utils/utils';\r\n\r\nimport './panel.scss';\r\n\r\ntype Props = {\r\n    children: React.ReactNode;\r\n    onClick: () => void;\r\n    hasError: boolean;\r\n    innerRef?: React.Ref<HTMLDivElement>;\r\n    isHighlighted?: boolean;\r\n    style?: React.CSSProperties;\r\n    className?: string;\r\n    dataTestId?: string;\r\n    dataPostId?: string;\r\n    ariaLabel?: string;\r\n};\r\n\r\nconst isEligibleForClick = makeIsEligibleForClick('.hljs, code');\r\n\r\nfunction Panel({\r\n    children,\r\n    onClick,\r\n    hasError,\r\n    innerRef,\r\n    isHighlighted,\r\n    style,\r\n    className,\r\n    dataTestId,\r\n    dataPostId,\r\n    ariaLabel,\r\n}: Props) {\r\n    const handleOnClick = (e: React.MouseEvent<HTMLElement>) => {\r\n        if (isEligibleForClick(e)) {\r\n            onClick();\r\n        }\r\n    };\r\n\r\n    const handleOnKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\r\n        if (e.key === 'Enter' || e.key === ' ') {\r\n            onClick();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            data-testid={dataTestId}\r\n            data-postid={dataPostId}\r\n            className={classNames(\r\n                'Panel',\r\n                {\r\n                    draftError: hasError,\r\n                    highlighted: isHighlighted,\r\n                },\r\n                className,\r\n            )}\r\n            style={style}\r\n            onClick={handleOnClick}\r\n            onKeyDown={handleOnKeyDown}\r\n            role='link'\r\n            tabIndex={0}\r\n            ref={innerRef}\r\n            aria-label={ariaLabel}\r\n        >\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default memo(Panel);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {PostPriorityMetadata} from '@mattermost/types/posts';\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport {getCurrentRelativeTeamUrl} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {isBurnOnReadEnabled} from 'selectors/burn_on_read';\r\n\r\nimport PriorityLabels from 'components/advanced_text_editor/priority_labels';\r\nimport BurnOnReadLabel from 'components/burn_on_read/burn_on_read_label';\r\nimport FilePreview from 'components/file_preview';\r\nimport Markdown from 'components/markdown';\r\nimport ShowMore from 'components/post_view/show_more';\r\nimport ProfilePicture from 'components/profile_picture';\r\n\r\nimport {imageURLForUser, handleFormattedTextClick} from 'utils/utils';\r\n\r\nimport type {PostDraft} from 'types/store/draft';\r\n\r\nimport './panel_body.scss';\r\n\r\ntype Props = {\r\n    channelId?: string;\r\n    displayName: string;\r\n    fileInfos: PostDraft['fileInfos'];\r\n    message: string;\r\n    priority?: PostPriorityMetadata;\r\n    burnOnRead?: {enabled: boolean};\r\n    burnOnReadDurationMinutes?: number;\r\n    status: UserStatus['status'];\r\n    uploadsInProgress: PostDraft['uploadsInProgress'];\r\n    userId: UserProfile['id'];\r\n    username: UserProfile['username'];\r\n}\r\n\r\nconst OPTIONS = {\r\n    disableGroupHighlight: true,\r\n    mentionHighlight: false,\r\n};\r\n\r\nfunction PanelBody({\r\n    channelId,\r\n    displayName,\r\n    fileInfos,\r\n    message,\r\n    priority,\r\n    burnOnRead,\r\n    burnOnReadDurationMinutes = 10,\r\n    status,\r\n    uploadsInProgress,\r\n    userId,\r\n    username,\r\n}: Props) {\r\n    const currentRelativeTeamUrl = useSelector(getCurrentRelativeTeamUrl);\r\n    const isBorFeatureEnabled = useSelector(isBurnOnReadEnabled);\r\n\r\n    const handleClick = useCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n        handleFormattedTextClick(e, currentRelativeTeamUrl);\r\n    }, [currentRelativeTeamUrl]);\r\n\r\n    return (\r\n        <div className='DraftPanelBody post'>\r\n            <div className='DraftPanelBody__left post__img'>\r\n                <ProfilePicture\r\n                    status={status}\r\n                    channelId={channelId}\r\n                    username={username}\r\n                    userId={userId}\r\n                    size={'md'}\r\n                    src={imageURLForUser(userId)}\r\n                />\r\n            </div>\r\n            <div className='DraftPanelBody__post_body'>\r\n                <ShowMore\r\n                    text={message}\r\n                >\r\n                    <div\r\n                        onClick={handleClick}\r\n                        className='post__content'\r\n                    >\r\n                        <div className='DraftPanelBody__right'>\r\n                            <div className='post__header'>\r\n                                <strong>{displayName}</strong>\r\n                                {priority && (\r\n                                    <PriorityLabels\r\n                                        canRemove={false}\r\n                                        hasError={false}\r\n                                        persistentNotifications={priority.persistent_notifications}\r\n                                        priority={priority.priority}\r\n                                        requestedAck={priority.requested_ack}\r\n                                    />\r\n                                )}\r\n                                {burnOnRead?.enabled && isBorFeatureEnabled && (\r\n                                    <BurnOnReadLabel\r\n                                        canRemove={false}\r\n                                        onRemove={() => {}}\r\n                                        durationMinutes={burnOnReadDurationMinutes}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                            <div className='post__body'>\r\n                                <Markdown\r\n                                    options={OPTIONS}\r\n                                    message={message}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ShowMore>\r\n                {(fileInfos.length > 0 || uploadsInProgress?.length > 0) && (\r\n                    <FilePreview\r\n                        fileInfos={fileInfos}\r\n                        uploadsInProgress={uploadsInProgress}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PanelBody;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {IntlShape} from 'react-intl';\r\nimport {defineMessages} from 'react-intl';\r\n\r\nimport type {ScheduledPostErrorCode} from '@mattermost/types/schedule_post';\r\n\r\nconst errorCodeToErrorMessage = defineMessages<ScheduledPostErrorCode>({\r\n    unknown: {\r\n        id: 'scheduled_post.error_code.unknown_error',\r\n        defaultMessage: 'Unknown Error',\r\n    },\r\n    channel_archived: {\r\n        id: 'scheduled_post.error_code.channel_archived',\r\n        defaultMessage: 'Channel Archived',\r\n    },\r\n    channel_not_found: {\r\n        id: 'scheduled_post.error_code.channel_removed',\r\n        defaultMessage: 'Channel Removed',\r\n    },\r\n    user_missing: {\r\n        id: 'scheduled_post.error_code.user_missing',\r\n        defaultMessage: 'User Deleted',\r\n    },\r\n    user_deleted: {\r\n        id: 'scheduled_post.error_code.user_deleted',\r\n        defaultMessage: 'User Deleted',\r\n    },\r\n    no_channel_permission: {\r\n        id: 'scheduled_post.error_code.no_channel_permission',\r\n        defaultMessage: 'Missing Permission',\r\n    },\r\n    no_channel_member: {\r\n        id: 'scheduled_post.error_code.no_channel_member',\r\n        defaultMessage: 'Not In Channel',\r\n    },\r\n    thread_deleted: {\r\n        id: 'scheduled_post.error_code.thread_deleted',\r\n        defaultMessage: 'Thread Deleted',\r\n    },\r\n    unable_to_send: {\r\n        id: 'scheduled_post.error_code.unable_to_send',\r\n        defaultMessage: 'Unable to Send',\r\n    },\r\n    invalid_post: {\r\n        id: 'scheduled_post.error_code.invalid_post',\r\n        defaultMessage: 'Invalid Post',\r\n    },\r\n});\r\n\r\nexport function getErrorStringFromCode(intl: IntlShape, errorCode: ScheduledPostErrorCode = 'unknown') {\r\n    const textDefinition = errorCodeToErrorMessage[errorCode] ?? errorCodeToErrorMessage.unknown;\r\n    return intl.formatMessage(textDefinition).toUpperCase();\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport noop from 'lodash/noop';\r\nimport React, {memo, useCallback, useMemo, useEffect, useState, useRef} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport type {ServerError} from '@mattermost/types/errors';\r\nimport type {FileInfo} from '@mattermost/types/files';\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport {getPost as getPostAction} from 'mattermost-redux/actions/posts';\r\nimport {deleteScheduledPost, updateScheduledPost} from 'mattermost-redux/actions/scheduled_posts';\r\nimport {Permissions} from 'mattermost-redux/constants';\r\nimport {PostTypes} from 'mattermost-redux/constants/posts';\r\nimport {isDeactivatedDirectChannel, makeGetChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getPost} from 'mattermost-redux/selectors/entities/posts';\r\nimport {haveIChannelPermission} from 'mattermost-redux/selectors/entities/roles';\r\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\nimport {makeGetThreadOrSynthetic} from 'mattermost-redux/selectors/entities/threads';\r\n\r\nimport type {SubmitPostReturnType} from 'actions/views/create_comment';\r\nimport {removeDraft} from 'actions/views/drafts';\r\nimport {selectPostById} from 'actions/views/rhs';\r\nimport {getBurnOnReadDurationMinutes} from 'selectors/burn_on_read';\r\nimport {getConnectionId} from 'selectors/general';\r\nimport {getChannelURL} from 'selectors/urls';\r\n\r\nimport usePriority from 'components/advanced_text_editor/use_priority';\r\nimport useSubmit from 'components/advanced_text_editor/use_submit';\r\nimport {useScrollOnRender} from 'components/common/hooks/use_scroll_on_render';\r\nimport ScheduledPostActions from 'components/drafts/draft_actions/schedule_post_actions/scheduled_post_actions';\r\nimport PlaceholderScheduledPostsTitle\r\n    from 'components/drafts/placeholder_scheduled_post_title/placeholder_scheduled_posts_title';\r\nimport EditScheduledPost from 'components/edit_scheduled_post';\r\n\r\nimport Constants, {StoragePrefixes} from 'utils/constants';\r\nimport {copyToClipboard} from 'utils/utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\nimport type {PostDraft} from 'types/store/draft';\r\nimport {scheduledPostToPostDraft} from 'types/store/draft';\r\n\r\nimport DraftActions from './draft_actions';\r\nimport DraftTitle from './draft_title';\r\nimport Panel from './panel/panel';\r\nimport PanelBody from './panel/panel_body';\r\nimport Header from './panel/panel_header';\r\nimport {getErrorStringFromCode} from './utils';\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    status: UserStatus['status'];\r\n    displayName: string;\r\n    item: PostDraft | ScheduledPost;\r\n    isRemote?: boolean;\r\n    scrollIntoView?: boolean;\r\n    containerClassName?: string;\r\n    dataTestId?: string;\r\n    dataPostId?: string;\r\n}\r\n\r\nconst mockLastBlurAt = {current: 0};\r\n\r\nfunction DraftRow({\r\n    item,\r\n    user,\r\n    status,\r\n    displayName,\r\n    isRemote,\r\n    scrollIntoView,\r\n    containerClassName,\r\n}: Props) {\r\n    const [isEditing, setIsEditing] = useState(false);\r\n\r\n    const isScheduledPost = 'scheduled_at' in item;\r\n    const intl = useIntl();\r\n\r\n    const rootId = ('rootId' in item) ? item.rootId : item.root_id;\r\n    const channelId = ('channelId' in item) ? item.channelId : item.channel_id;\r\n\r\n    const [serverError, setServerError] = useState<(ServerError & { submittedMessage?: string }) | null>(null);\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    const getChannelSelector = useMemo(() => makeGetChannel(), []);\r\n    const channel = useSelector((state: GlobalState) => getChannelSelector(state, channelId));\r\n\r\n    const getThreadOrSynthetic = useMemo(() => makeGetThreadOrSynthetic(), []);\r\n\r\n    const rootPostDeleted = useSelector((state: GlobalState) => {\r\n        if (!rootId) {\r\n            return false;\r\n        }\r\n        const rootPost = getPost(state, rootId);\r\n        return !rootPost || rootPost.delete_at > 0 || rootPost.state === 'DELETED';\r\n    });\r\n\r\n    const tooLong = useSelector((state: GlobalState) => {\r\n        const maxPostSize = parseInt(getConfig(state).MaxPostSize || '', 10) || Constants.DEFAULT_CHARACTER_LIMIT;\r\n        return item.message.length > maxPostSize;\r\n    });\r\n\r\n    const readOnly = !useSelector((state: GlobalState) => {\r\n        return channel ? haveIChannelPermission(state, channel.team_id, channel.id, Permissions.CREATE_POST) : false;\r\n    });\r\n\r\n    const connectionId = useSelector(getConnectionId);\r\n    const burnOnReadDurationMinutes = useSelector(getBurnOnReadDurationMinutes);\r\n\r\n    const isChannelArchived = Boolean(channel?.delete_at);\r\n    const isDeactivatedDM = useSelector((state: GlobalState) => isDeactivatedDirectChannel(state, channelId));\r\n\r\n    let postError = '';\r\n\r\n    if (isScheduledPost) {\r\n        // This is applicable only for scheduled post.\r\n        if (item.error_code) {\r\n            postError = getErrorStringFromCode(intl, item.error_code);\r\n        } else if (isChannelArchived || isDeactivatedDM) {\r\n            postError = getErrorStringFromCode(intl, 'channel_archived');\r\n        }\r\n    } else if (rootPostDeleted) {\r\n        postError = intl.formatMessage({id: 'drafts.error.post_not_found', defaultMessage: 'Thread not found'});\r\n    } else if (tooLong) {\r\n        postError = intl.formatMessage({id: 'drafts.error.too_long', defaultMessage: 'Message too long'});\r\n    } else if (readOnly) {\r\n        postError = intl.formatMessage({id: 'drafts.error.read_only', defaultMessage: 'Channel is read only'});\r\n    }\r\n\r\n    const canSend = !postError;\r\n    const canEdit = !(rootPostDeleted || readOnly);\r\n\r\n    const channelUrl = useSelector((state: GlobalState) => {\r\n        if (!channel) {\r\n            return '';\r\n        }\r\n        const teamId = getCurrentTeamId(state);\r\n        return getChannelURL(state, channel, teamId);\r\n    });\r\n\r\n    const goToMessage = useCallback(async () => {\r\n        if (isEditing) {\r\n            return;\r\n        }\r\n\r\n        if (rootId) {\r\n            if (rootPostDeleted) {\r\n                return;\r\n            }\r\n            await dispatch(selectPostById(rootId));\r\n            return;\r\n        }\r\n        history.push(channelUrl);\r\n    }, [channelUrl, dispatch, history, rootId, rootPostDeleted, isEditing]);\r\n\r\n    const isBeingScheduled = useRef(false);\r\n    const isScheduledPostBeingSent = useRef(false);\r\n\r\n    const thread = useSelector((state: GlobalState) => {\r\n        if (!rootId) {\r\n            return undefined;\r\n        }\r\n        const post = getPost(state, rootId);\r\n        if (!post) {\r\n            return undefined;\r\n        }\r\n\r\n        return getThreadOrSynthetic(state, post);\r\n    });\r\n\r\n    const handleOnDelete = useCallback(() => {\r\n        let key = `${StoragePrefixes.DRAFT}${channelId}`;\r\n        if (rootId) {\r\n            key = `${StoragePrefixes.COMMENT_DRAFT}${rootId}`;\r\n        }\r\n        dispatch(removeDraft(key, channelId, rootId));\r\n    }, [dispatch, channelId, rootId]);\r\n\r\n    const afterSubmit = useCallback((response: SubmitPostReturnType) => {\r\n        // if draft was being scheduled, delete the draft after it's been scheduled\r\n        if (isBeingScheduled.current && response.created && !response.error) {\r\n            handleOnDelete();\r\n            isBeingScheduled.current = false;\r\n        }\r\n\r\n        // if scheduled posts was being sent, delete the scheduled post after it's been sent\r\n        if (isScheduledPostBeingSent.current && response.created && !response.error) {\r\n            const scheduledPost = item as ScheduledPost;\r\n            dispatch(deleteScheduledPost(scheduledPost.user_id, scheduledPost.id, connectionId));\r\n            isScheduledPostBeingSent.current = false;\r\n        }\r\n    }, [connectionId, dispatch, handleOnDelete, item]);\r\n\r\n    // TODO LOL verify the types and handled it better\r\n    const {onSubmitCheck: prioritySubmitCheck} = usePriority(item as any, noop, noop, false);\r\n    const [handleOnSend] = useSubmit(\r\n        item as any,\r\n        postError,\r\n        channelId,\r\n        rootId,\r\n        serverError,\r\n        mockLastBlurAt,\r\n        noop,\r\n        setServerError,\r\n        noop,\r\n        noop,\r\n        prioritySubmitCheck,\r\n        goToMessage,\r\n        afterSubmit,\r\n        true,\r\n    );\r\n\r\n    const onScheduleDraft = useCallback(async (scheduledAt: number): Promise<{error?: string}> => {\r\n        isBeingScheduled.current = true;\r\n        await handleOnSend(item as PostDraft, {scheduled_at: scheduledAt});\r\n        return Promise.resolve({});\r\n    }, [item, handleOnSend]);\r\n\r\n    const draftActions = useMemo(() => {\r\n        if (!channel) {\r\n            return null;\r\n        }\r\n        return (\r\n            <DraftActions\r\n                channelDisplayName={channel.display_name}\r\n                channelName={channel.name}\r\n                channelType={channel.type}\r\n                channelId={channel.id}\r\n                userId={user.id}\r\n                onDelete={handleOnDelete}\r\n                onEdit={goToMessage}\r\n                onSend={handleOnSend}\r\n                canEdit={canEdit}\r\n                canSend={canSend}\r\n                onSchedule={onScheduleDraft}\r\n            />\r\n        );\r\n    }, [\r\n        canEdit,\r\n        canSend,\r\n        channel,\r\n        goToMessage,\r\n        handleOnDelete,\r\n        handleOnSend,\r\n        user.id,\r\n        onScheduleDraft,\r\n    ]);\r\n\r\n    const handleCancelEdit = useCallback(() => {\r\n        setIsEditing(false);\r\n    }, []);\r\n\r\n    const handleSchedulePostOnReschedule = useCallback(async (updatedScheduledAtTime: number) => {\r\n        handleCancelEdit();\r\n\r\n        const updatedScheduledPost: ScheduledPost = {\r\n            ...(item as ScheduledPost),\r\n            scheduled_at: updatedScheduledAtTime,\r\n        };\r\n\r\n        const result = await dispatch(updateScheduledPost(updatedScheduledPost, connectionId));\r\n        return {\r\n            error: result.error?.message,\r\n        };\r\n    }, [connectionId, dispatch, item, handleCancelEdit]);\r\n\r\n    const handleSchedulePostOnDelete = useCallback(async () => {\r\n        handleCancelEdit();\r\n\r\n        const scheduledPost = item as ScheduledPost;\r\n        const result = await dispatch(deleteScheduledPost(scheduledPost.user_id, scheduledPost.id, connectionId));\r\n        return {\r\n            error: result.error?.message,\r\n        };\r\n    }, [item, dispatch, connectionId, handleCancelEdit]);\r\n\r\n    const handleSchedulePostEdit = useCallback(() => {\r\n        setIsEditing((isEditing) => !isEditing);\r\n    }, []);\r\n\r\n    const handleCopyText = useCallback(() => {\r\n        copyToClipboard(item.message);\r\n    }, [item]);\r\n\r\n    const handleScheduledPostOnSend = useCallback(() => {\r\n        handleCancelEdit();\r\n\r\n        isScheduledPostBeingSent.current = true;\r\n        const postDraft = scheduledPostToPostDraft(item as ScheduledPost);\r\n        handleOnSend(postDraft, undefined, {keepDraft: true, ignorePostError: true});\r\n        return Promise.resolve({});\r\n    }, [handleOnSend, item, handleCancelEdit]);\r\n\r\n    const scheduledPostActions = useMemo(() => {\r\n        return (\r\n            <ScheduledPostActions\r\n                scheduledPost={item as ScheduledPost}\r\n                channel={channel}\r\n                onReschedule={handleSchedulePostOnReschedule}\r\n                onDelete={handleSchedulePostOnDelete}\r\n                onSend={handleScheduledPostOnSend}\r\n                onEdit={handleSchedulePostEdit}\r\n                onCopyText={handleCopyText}\r\n            />\r\n        );\r\n    }, [\r\n        channel,\r\n        handleSchedulePostOnDelete,\r\n        handleSchedulePostOnReschedule,\r\n        handleScheduledPostOnSend,\r\n        handleSchedulePostEdit,\r\n        handleCopyText,\r\n        item,\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        if (rootId && !thread?.id) {\r\n            dispatch(getPostAction(rootId));\r\n        }\r\n    }, [thread?.id, rootId]);\r\n\r\n    const alertRef = useScrollOnRender();\r\n\r\n    if (!channel && !isScheduledPost) {\r\n        return null;\r\n    }\r\n\r\n    let timestamp: number;\r\n    let fileInfos: FileInfo[];\r\n    let uploadsInProgress: string[];\r\n    let actions: React.ReactNode;\r\n\r\n    if (isScheduledPost) {\r\n        timestamp = item.scheduled_at;\r\n        fileInfos = item.metadata?.files || [];\r\n        uploadsInProgress = [];\r\n        actions = scheduledPostActions;\r\n    } else {\r\n        timestamp = item.updateAt;\r\n        fileInfos = item.fileInfos;\r\n        uploadsInProgress = item.uploadsInProgress;\r\n        actions = draftActions;\r\n    }\r\n\r\n    // Both PostDraft and ScheduledPost have a type field (ScheduledPost extends Draft which has type)\r\n    const itemType = (item as PostDraft | ScheduledPost).type;\r\n    const draftBurnOnReadMetadata = !rootId && itemType === PostTypes.BURN_ON_READ ? {enabled: true} : undefined;\r\n\r\n    let title: React.ReactNode;\r\n    if (channel) {\r\n        title = (\r\n            <DraftTitle\r\n                type={(rootId ? 'thread' : 'channel')}\r\n                channel={channel}\r\n                userId={user.id}\r\n            />\r\n        );\r\n    } else {\r\n        title = (\r\n            <PlaceholderScheduledPostsTitle\r\n                type={(rootId ? 'thread' : 'channel')}\r\n            />\r\n        );\r\n    }\r\n\r\n    const kind = isScheduledPost ? 'scheduledPost' : 'draft';\r\n\r\n    return (\r\n        <Panel\r\n            dataTestId={`${kind}View`}\r\n            dataPostId={(item as ScheduledPost).id}\r\n            onClick={goToMessage}\r\n            hasError={Boolean(postError)}\r\n            innerRef={scrollIntoView ? alertRef : undefined}\r\n            isHighlighted={scrollIntoView}\r\n            className={containerClassName}\r\n            ariaLabel={isScheduledPost ? intl.formatMessage({\r\n                id: 'drafts.draft_row.aria_label.scheduled_post',\r\n                defaultMessage: 'scheduled post in {channelName}',\r\n            }, {\r\n                channelName: channel?.display_name,\r\n            }) : intl.formatMessage({\r\n                id: 'drafts.draft_row.aria_label.draft',\r\n                defaultMessage: 'draft in {channelName}',\r\n            }, {\r\n                channelName: channel?.display_name,\r\n            })}\r\n        >\r\n            <Header\r\n                kind={kind}\r\n                actions={actions}\r\n                title={title}\r\n                timestamp={timestamp}\r\n                remote={isRemote || false}\r\n                error={postError || serverError?.message}\r\n            />\r\n            {isEditing && (\r\n                <EditScheduledPost\r\n                    scheduledPost={item as ScheduledPost}\r\n                    onCancel={handleCancelEdit}\r\n                    afterSave={handleCancelEdit}\r\n                    onDeleteScheduledPost={handleSchedulePostOnDelete}\r\n                />\r\n            )}\r\n            {!isEditing && (\r\n                <PanelBody\r\n                    channelId={channel?.id}\r\n                    displayName={displayName}\r\n                    fileInfos={fileInfos}\r\n                    message={item.message}\r\n                    status={status}\r\n                    priority={rootId ? undefined : item.metadata?.priority}\r\n                    burnOnRead={draftBurnOnReadMetadata}\r\n                    burnOnReadDurationMinutes={burnOnReadDurationMinutes}\r\n                    uploadsInProgress={uploadsInProgress}\r\n                    userId={user.id}\r\n                    username={user.username}\r\n                />\r\n            )}\r\n        </Panel>\r\n    );\r\n}\r\n\r\nexport default memo(DraftRow);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\n// useScrollOnRender hook is used to scroll to the element when it is rendered\r\n// Attach the returned ref to the element you want to scroll to.\r\nexport function useScrollOnRender() {\r\n    const ref = React.useRef<HTMLDivElement>(null);\r\n\r\n    React.useEffect(() => {\r\n        if (ref.current) {\r\n            ref.current.scrollIntoView({behavior: 'smooth'});\r\n        }\r\n    }, []);\r\n\r\n    return ref;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport debounce from 'lodash/debounce';\r\nimport type {CSSProperties} from 'react';\r\nimport React, {useMemo, useRef, useCallback, useEffect, memo} from 'react';\r\nimport AutoSizer from 'react-virtualized-auto-sizer';\r\nimport {VariableSizeList} from 'react-window';\r\n\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport type {Draft} from 'selectors/drafts';\r\n\r\nimport DraftRow from 'components/drafts/draft_row';\r\n\r\nconst OVERSCAN_ROW_COUNT = 6; // no. of rows\r\nconst ROW_HEIGHT_CHANGE_TOLERANCE = 4; // in px\r\n\r\nconst RESIZE_DEBOUNCE_TIME = 120; // in ms\r\n\r\ntype Props = {\r\n    drafts: Draft[];\r\n    currentUser: UserProfile;\r\n    userDisplayName: string;\r\n    userStatus: UserStatus['status'];\r\n    draftRemotes: Record<string, boolean>;\r\n}\r\n\r\nexport default function VirtualizedDraftList(props: Props) {\r\n    const listRef = useRef<VariableSizeList>(null);\r\n    const itemHeightCacheMap = useRef<Map<string, number>>(new Map());\r\n\r\n    // Function to set row height after measurement, we also reset the list after setting the height\r\n    const setRowHeight = useCallback((index: number, draftKey: string, size: number) => {\r\n        const currentItemHeight = itemHeightCacheMap.current.get(draftKey);\r\n\r\n        // If current height is not cached or if there is a significant difference, update the cache\r\n        // This prevents layout thrashing when the height variations are small\r\n        if (!currentItemHeight || (Math.abs(currentItemHeight - size) > ROW_HEIGHT_CHANGE_TOLERANCE)) {\r\n            itemHeightCacheMap.current.set(draftKey, size);\r\n\r\n            // Reset the list UI in response to the row height changing\r\n            if (listRef.current) {\r\n                listRef.current.resetAfterIndex(index);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const getItemSize = useCallback((index: number) => {\r\n        const draftKey = index < props.drafts.length ? props.drafts[index].key : '';\r\n        return draftKey ? (itemHeightCacheMap.current.get(draftKey) || 0) : 0;\r\n    }, [props.drafts]);\r\n\r\n    const itemData = useMemo(() => ({\r\n        drafts: props.drafts,\r\n        userDisplayName: props.userDisplayName,\r\n        draftRemotes: props.draftRemotes,\r\n        currentUser: props.currentUser,\r\n        userStatus: props.userStatus,\r\n        setRowHeight,\r\n    }), [props.drafts, props.userDisplayName, props.draftRemotes, props.currentUser, props.userStatus, setRowHeight]);\r\n\r\n    return (\r\n        <div className='DraftList Drafts__main'>\r\n            <AutoSizer>\r\n                {({height, width}) => (\r\n                    <VariableSizeList\r\n                        ref={listRef}\r\n                        height={height}\r\n                        width={width}\r\n                        itemCount={props.drafts.length}\r\n                        itemSize={getItemSize}\r\n                        itemData={itemData}\r\n                        overscanCount={OVERSCAN_ROW_COUNT}\r\n                    >\r\n                        {Row}\r\n                    </VariableSizeList>\r\n                )}\r\n            </AutoSizer>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface RowProps {\r\n    index: number;\r\n    style: CSSProperties;\r\n    data: {\r\n        drafts: Draft[];\r\n        userDisplayName: string;\r\n        draftRemotes: Record<string, boolean>;\r\n        currentUser: UserProfile;\r\n        userStatus: string;\r\n        setRowHeight: (index: number, draftKey: string, size: number) => void;\r\n    };\r\n}\r\n\r\n// Row component for dynamic height measurement\r\n// This component is rendered for each visible draft item by react-window's virtualization\r\nfunction RowComponent({index, style, data: {drafts, userDisplayName, draftRemotes, currentUser, userStatus, setRowHeight}}: RowProps) {\r\n    const draft = drafts[index];\r\n\r\n    // Reference to the DOM element we'll measure\r\n    const rowRef = useRef<HTMLDivElement>(null);\r\n\r\n    // These refs store the current values for use in callbacks\r\n    // This prevents stale closures in the ResizeObserver callback\r\n    // and ensures event handlers always have the latest values\r\n    // we also update these refs whenever their source values change\r\n    const indexRef = useRef(index);\r\n    const draftKeyRef = useRef(draft.key);\r\n    const setRowHeightRef = useRef(setRowHeight);\r\n    useEffect(() => {\r\n        indexRef.current = index;\r\n        draftKeyRef.current = draft.key;\r\n        setRowHeightRef.current = setRowHeight;\r\n    }, [index, draft.key, setRowHeight]);\r\n\r\n    // This effect performs the initial height measurement on first render\r\n    // or whenever the draft content changes\r\n    useEffect(() => {\r\n        if (!rowRef.current) {\r\n            return undefined;\r\n        }\r\n\r\n        // Use requestAnimationFrame to measure after the browser has painted\r\n        const rafId = requestAnimationFrame(() => {\r\n            if (!rowRef.current) {\r\n                return;\r\n            }\r\n\r\n            const height = rowRef.current.getBoundingClientRect().height;\r\n\r\n            // Inform the virtualized list about this row's height\r\n            setRowHeight(index, draft.key, height);\r\n        });\r\n\r\n        return () => {\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }, [draft, setRowHeight, index]);\r\n\r\n    // This effect sets up a ResizeObserver to track height changes on the row element\r\n    useEffect(() => {\r\n        if (!rowRef.current) {\r\n            return undefined;\r\n        }\r\n\r\n        // Flag to track whether we're still observing (prevents updates after unmount)\r\n        let isObservingResize = true;\r\n\r\n        // Create a debounced function to update height measurements\r\n        // This prevents excessive updates when height changes rapidly\r\n        const debouncedUpdateHeight = debounce((height: number) => {\r\n            if (!isObservingResize || !rowRef.current) {\r\n                return;\r\n            }\r\n\r\n            // Notify the parent list about this row's height\r\n            setRowHeightRef.current(\r\n                indexRef.current,\r\n                draftKeyRef.current,\r\n                height,\r\n            );\r\n        }, RESIZE_DEBOUNCE_TIME);\r\n\r\n        // This ResizeObserver API notifies us when the element's size changes\r\n        const resizeObserver = new ResizeObserver((resizeEntries) => {\r\n            if (!isObservingResize || !rowRef.current) {\r\n                return;\r\n            }\r\n\r\n            // Since we're observing a single row, we can safely assume that the first entry is the one we want\r\n            if (resizeEntries.length === 1 && resizeEntries[0].target === rowRef.current) {\r\n                const height = resizeEntries[0].borderBoxSize[0].blockSize;\r\n                debouncedUpdateHeight(height);\r\n            }\r\n        });\r\n\r\n        // Start observing size changes on the row element\r\n        resizeObserver.observe(rowRef.current);\r\n\r\n        return () => {\r\n            isObservingResize = false;\r\n            debouncedUpdateHeight.cancel();\r\n            resizeObserver.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div style={style}> {/* To avoid interference with virtualized list styles we are not using this div for height measurement */}\r\n            <div\r\n                ref={rowRef}\r\n                className={classNames('virtualizedVariableListRowWrapper', {\r\n                    firstRow: index === 0,\r\n                })}\r\n            >\r\n                <DraftRow\r\n                    key={draft.key}\r\n                    item={draft.value}\r\n                    displayName={userDisplayName}\r\n                    user={currentUser}\r\n                    status={userStatus}\r\n                    isRemote={draftRemotes?.[draft.key]}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst Row = memo(RowComponent);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport {getDraftRemotes, type Draft} from 'selectors/drafts';\r\n\r\nimport EmptyDraftList from './empty_draft_list';\r\nimport VirtualizedDraftList from './virtualized_draft_list';\r\n\r\ntype Props = {\r\n    drafts: Draft[];\r\n    currentUser: UserProfile;\r\n    userDisplayName: string;\r\n    userStatus: UserStatus['status'];\r\n}\r\n\r\nexport default function DraftList(props: Props) {\r\n    const draftRemotes = useSelector(getDraftRemotes);\r\n\r\n    if (props.drafts.length === 0) {\r\n        return <EmptyDraftList/>;\r\n    }\r\n\r\n    return (\r\n        <VirtualizedDraftList\r\n            drafts={props.drafts}\r\n            currentUser={props.currentUser}\r\n            userDisplayName={props.userDisplayName}\r\n            userStatus={props.userStatus}\r\n            draftRemotes={draftRemotes}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport Header from 'components/widgets/header';\r\n\r\ntype Props = {\r\n    children: ReactNode;\r\n}\r\n\r\nexport default function DraftsAndSchedulePostsPageHeader(props: Props) {\r\n    return (\r\n        <div\r\n            id='app-content'\r\n            className='Drafts app__content'\r\n        >\r\n            <Header\r\n                level={2}\r\n                className='Drafts__header'\r\n                heading={\r\n                    <FormattedMessage\r\n                        id='drafts.heading'\r\n                        defaultMessage='Drafts'\r\n                    />\r\n                }\r\n                subtitle={\r\n                    <FormattedMessage\r\n                        id='drafts.subtitle'\r\n                        defaultMessage=\"Any messages you've started will show here\"\r\n                    />\r\n                }\r\n            />\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n","import generateUtilityClasses from '../generateUtilityClasses';\nimport generateUtilityClass from '../generateUtilityClass';\nexport function getBadgeUtilityClass(slot) {\n  return generateUtilityClass('MuiBadge', slot);\n}\nconst badgeClasses = generateUtilityClasses('MuiBadge', ['root', 'badge', 'invisible']);\nexport default badgeClasses;","/**\n * Removes event handlers from the given object.\n * A field is considered an event handler if it is a function with a name beginning with `on`.\n *\n * @param object Object to remove event handlers from.\n * @returns Object with event handlers removed.\n */\nexport default function omitEventHandlers(object) {\n  if (object === undefined) {\n    return {};\n  }\n  const result = {};\n  Object.keys(object).filter(prop => !(prop.match(/^on[A-Z]/) && typeof object[prop] === 'function')).forEach(prop => {\n    result[prop] = object[prop];\n  });\n  return result;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"elementType\", \"externalSlotProps\", \"ownerState\"];\nimport { unstable_useForkRef as useForkRef } from '@mui/utils';\nimport appendOwnerState from './appendOwnerState';\nimport mergeSlotProps from './mergeSlotProps';\nimport resolveComponentProps from './resolveComponentProps';\n/**\n * @ignore - do not document.\n * Builds the props to be passed into the slot of an unstyled component.\n * It merges the internal props of the component with the ones supplied by the user, allowing to customize the behavior.\n * If the slot component is not a host component, it also merges in the `ownerState`.\n *\n * @param parameters.getSlotProps - A function that returns the props to be passed to the slot component.\n */\nexport default function useSlotProps(parameters) {\n  var _parameters$additiona;\n  const {\n      elementType,\n      externalSlotProps,\n      ownerState\n    } = parameters,\n    rest = _objectWithoutPropertiesLoose(parameters, _excluded);\n  const resolvedComponentsProps = resolveComponentProps(externalSlotProps, ownerState);\n  const {\n    props: mergedProps,\n    internalRef\n  } = mergeSlotProps(_extends({}, rest, {\n    externalSlotProps: resolvedComponentsProps\n  }));\n  const ref = useForkRef(internalRef, resolvedComponentsProps == null ? void 0 : resolvedComponentsProps.ref, (_parameters$additiona = parameters.additionalProps) == null ? void 0 : _parameters$additiona.ref);\n  const props = appendOwnerState(elementType, _extends({}, mergedProps, {\n    ref\n  }), ownerState);\n  return props;\n}","/**\n * If `componentProps` is a function, calls it with the provided `ownerState`.\n * Otherwise, just returns `componentProps`.\n */\nexport default function resolveComponentProps(componentProps, ownerState) {\n  if (typeof componentProps === 'function') {\n    return componentProps(ownerState);\n  }\n  return componentProps;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport clsx from 'clsx';\nimport extractEventHandlers from './extractEventHandlers';\nimport omitEventHandlers from './omitEventHandlers';\n/**\n * Merges the slot component internal props (usually coming from a hook)\n * with the externally provided ones.\n *\n * The merge order is (the latter overrides the former):\n * 1. The internal props (specified as a getter function to work with get*Props hook result)\n * 2. Additional props (specified internally on a Base UI component)\n * 3. External props specified on the owner component. These should only be used on a root slot.\n * 4. External props specified in the `slotProps.*` prop.\n * 5. The `className` prop - combined from all the above.\n * @param parameters\n * @returns\n */\nexport default function mergeSlotProps(parameters) {\n  const {\n    getSlotProps,\n    additionalProps,\n    externalSlotProps,\n    externalForwardedProps,\n    className\n  } = parameters;\n  if (!getSlotProps) {\n    // The simpler case - getSlotProps is not defined, so no internal event handlers are defined,\n    // so we can simply merge all the props without having to worry about extracting event handlers.\n    const joinedClasses = clsx(externalForwardedProps == null ? void 0 : externalForwardedProps.className, externalSlotProps == null ? void 0 : externalSlotProps.className, className, additionalProps == null ? void 0 : additionalProps.className);\n    const mergedStyle = _extends({}, additionalProps == null ? void 0 : additionalProps.style, externalForwardedProps == null ? void 0 : externalForwardedProps.style, externalSlotProps == null ? void 0 : externalSlotProps.style);\n    const props = _extends({}, additionalProps, externalForwardedProps, externalSlotProps);\n    if (joinedClasses.length > 0) {\n      props.className = joinedClasses;\n    }\n    if (Object.keys(mergedStyle).length > 0) {\n      props.style = mergedStyle;\n    }\n    return {\n      props,\n      internalRef: undefined\n    };\n  }\n\n  // In this case, getSlotProps is responsible for calling the external event handlers.\n  // We don't need to include them in the merged props because of this.\n\n  const eventHandlers = extractEventHandlers(_extends({}, externalForwardedProps, externalSlotProps));\n  const componentsPropsWithoutEventHandlers = omitEventHandlers(externalSlotProps);\n  const otherPropsWithoutEventHandlers = omitEventHandlers(externalForwardedProps);\n  const internalSlotProps = getSlotProps(eventHandlers);\n\n  // The order of classes is important here.\n  // Emotion (that we use in libraries consuming Base UI) depends on this order\n  // to properly override style. It requires the most important classes to be last\n  // (see https://github.com/mui/material-ui/pull/33205) for the related discussion.\n  const joinedClasses = clsx(internalSlotProps == null ? void 0 : internalSlotProps.className, additionalProps == null ? void 0 : additionalProps.className, className, externalForwardedProps == null ? void 0 : externalForwardedProps.className, externalSlotProps == null ? void 0 : externalSlotProps.className);\n  const mergedStyle = _extends({}, internalSlotProps == null ? void 0 : internalSlotProps.style, additionalProps == null ? void 0 : additionalProps.style, externalForwardedProps == null ? void 0 : externalForwardedProps.style, externalSlotProps == null ? void 0 : externalSlotProps.style);\n  const props = _extends({}, internalSlotProps, additionalProps, otherPropsWithoutEventHandlers, componentsPropsWithoutEventHandlers);\n  if (joinedClasses.length > 0) {\n    props.className = joinedClasses;\n  }\n  if (Object.keys(mergedStyle).length > 0) {\n    props.style = mergedStyle;\n  }\n  return {\n    props,\n    internalRef: internalSlotProps.ref\n  };\n}","/**\n * Extracts event handlers from a given object.\n * A prop is considered an event handler if it is a function and its name starts with `on`.\n *\n * @param object An object to extract event handlers from.\n * @param excludeKeys An array of keys to exclude from the returned object.\n */\nexport default function extractEventHandlers(object, excludeKeys = []) {\n  if (object === undefined) {\n    return {};\n  }\n  const result = {};\n  Object.keys(object).filter(prop => prop.match(/^on[A-Z]/) && typeof object[prop] === 'function' && !excludeKeys.includes(prop)).forEach(prop => {\n    result[prop] = object[prop];\n  });\n  return result;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport isHostComponent from './isHostComponent';\n\n/**\n * Type of the ownerState based on the type of an element it applies to.\n * This resolves to the provided OwnerState for React components and `undefined` for host components.\n * Falls back to `OwnerState | undefined` when the exact type can't be determined in development time.\n */\n\n/**\n * Appends the ownerState object to the props, merging with the existing one if necessary.\n *\n * @param elementType Type of the element that owns the `existingProps`. If the element is a DOM node or undefined, `ownerState` is not applied.\n * @param otherProps Props of the element.\n * @param ownerState\n */\nexport default function appendOwnerState(elementType, otherProps, ownerState) {\n  if (elementType === undefined || isHostComponent(elementType)) {\n    return otherProps;\n  }\n  return _extends({}, otherProps, {\n    ownerState: _extends({}, otherProps.ownerState, ownerState)\n  });\n}","/**\n * Determines if a given element is a DOM element name (i.e. not a React component).\n */\nexport default function isHostComponent(element) {\n  return typeof element === 'string';\n}","import * as React from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultContextValue = {\n  disableDefaultClasses: false\n};\nconst ClassNameConfiguratorContext = /*#__PURE__*/React.createContext(defaultContextValue);\n/**\n * @ignore - internal hook.\n *\n * Wraps the `generateUtilityClass` function and controls how the classes are generated.\n * Currently it only affects whether the classes are applied or not.\n *\n * @returns Function to be called with the `generateUtilityClass` function specific to a component to generate the classes.\n */\nexport function useClassNamesOverride(generateUtilityClass) {\n  const {\n    disableDefaultClasses\n  } = React.useContext(ClassNameConfiguratorContext);\n  return slot => {\n    if (disableDefaultClasses) {\n      return '';\n    }\n    return generateUtilityClass(slot);\n  };\n}\n\n/**\n * Allows to configure the components within to not apply any built-in classes.\n */\nexport default function ClassNameConfigurator(props) {\n  const {\n    disableDefaultClasses,\n    children\n  } = props;\n  const contextValue = React.useMemo(() => ({\n    disableDefaultClasses: disableDefaultClasses != null ? disableDefaultClasses : false\n  }), [disableDefaultClasses]);\n  return /*#__PURE__*/_jsx(ClassNameConfiguratorContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"badgeContent\", \"component\", \"children\", \"invisible\", \"max\", \"slotProps\", \"slots\", \"showZero\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport composeClasses from '../composeClasses';\nimport useBadge from '../useBadge';\nimport { getBadgeUtilityClass } from './badgeClasses';\nimport { useSlotProps } from '../utils';\nimport { useClassNamesOverride } from '../utils/ClassNameConfigurator';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    invisible\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    badge: ['badge', invisible && 'invisible']\n  };\n  return composeClasses(slots, useClassNamesOverride(getBadgeUtilityClass));\n};\n/**\n *\n * Demos:\n *\n * - [Badge](https://mui.com/base/react-badge/)\n *\n * API:\n *\n * - [Badge API](https://mui.com/base/react-badge/components-api/#badge)\n */\nconst Badge = /*#__PURE__*/React.forwardRef(function Badge(props, ref) {\n  const {\n      component,\n      children,\n      max: maxProp = 99,\n      slotProps = {},\n      slots = {},\n      showZero = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    badgeContent,\n    max,\n    displayValue,\n    invisible\n  } = useBadge(_extends({}, props, {\n    max: maxProp\n  }));\n  const ownerState = _extends({}, props, {\n    badgeContent,\n    invisible,\n    max,\n    showZero\n  });\n  const classes = useUtilityClasses(ownerState);\n  const Root = component || slots.root || 'span';\n  const rootProps = useSlotProps({\n    elementType: Root,\n    externalSlotProps: slotProps.root,\n    externalForwardedProps: other,\n    additionalProps: {\n      ref\n    },\n    ownerState,\n    className: classes.root\n  });\n  const BadgeComponent = slots.badge || 'span';\n  const badgeProps = useSlotProps({\n    elementType: BadgeComponent,\n    externalSlotProps: slotProps.badge,\n    ownerState,\n    className: classes.badge\n  });\n  return /*#__PURE__*/_jsxs(Root, _extends({}, rootProps, {\n    children: [children, /*#__PURE__*/_jsx(BadgeComponent, _extends({}, badgeProps, {\n      children: displayValue\n    }))]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? Badge.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit TypeScript types and run \"yarn proptypes\"  |\n  // ----------------------------------------------------------------------\n  /**\n   * The content rendered within the badge.\n   */\n  badgeContent: PropTypes.node,\n  /**\n   * The badge will be added relative to this node.\n   */\n  children: PropTypes.node,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * If `true`, the badge is invisible.\n   * @default false\n   */\n  invisible: PropTypes.bool,\n  /**\n   * Max count to show.\n   * @default 99\n   */\n  max: PropTypes.number,\n  /**\n   * Controls whether the badge is hidden when `badgeContent` is zero.\n   * @default false\n   */\n  showZero: PropTypes.bool,\n  /**\n   * The props used for each slot inside the Badge.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    badge: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside the Badge.\n   * Either a string to use a HTML element or a component.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    badge: PropTypes.elementType,\n    root: PropTypes.elementType\n  })\n} : void 0;\nexport default Badge;","import { usePreviousProps } from '@mui/utils';\n/**\n *\n * Demos:\n *\n * - [Badge](https://mui.com/base/react-badge/#hook)\n *\n * API:\n *\n * - [useBadge API](https://mui.com/base/react-badge/hooks-api/#use-badge)\n */\nexport default function useBadge(parameters) {\n  const {\n    badgeContent: badgeContentProp,\n    invisible: invisibleProp = false,\n    max: maxProp = 99,\n    showZero = false\n  } = parameters;\n  const prevProps = usePreviousProps({\n    badgeContent: badgeContentProp,\n    max: maxProp\n  });\n  let invisible = invisibleProp;\n  if (invisibleProp === false && badgeContentProp === 0 && !showZero) {\n    invisible = true;\n  }\n  const {\n    badgeContent,\n    max = maxProp\n  } = invisible ? prevProps : parameters;\n  const displayValue = badgeContent && Number(badgeContent) > max ? `${max}+` : badgeContent;\n  return {\n    badgeContent,\n    invisible,\n    max,\n    displayValue\n  };\n}","'use client';\n\nimport * as React from 'react';\nconst usePreviousProps = value => {\n  const ref = React.useRef({});\n  React.useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\nexport default usePreviousProps;","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nexport default (\r\n    <svg\r\n        width='142'\r\n        height='87'\r\n        viewBox='0 0 142 87'\r\n        fill='none'\r\n        xmlns='http://www.w3.org/2000/svg'\r\n    >\r\n        <g clipPath='url(#clip0_4212_90995)'>\r\n            <rect\r\n                x='15'\r\n                y='15'\r\n                width='112'\r\n                height='44'\r\n                rx='3'\r\n                fill='var(--button-bg)'\r\n                fillOpacity='0.12'\r\n            />\r\n            <path\r\n                d='M29.5 75L29.5 47L40 47'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M45 43H29.5V9.5L22.5 2.5'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n                strokeLinecap='round'\r\n            />\r\n            <circle\r\n                cx='2.5'\r\n                cy='2.5'\r\n                r='2.5'\r\n                transform='matrix(1 0 0 -1 20 5)'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.48'\r\n            />\r\n            <circle\r\n                cx='2.5'\r\n                cy='2.5'\r\n                r='2.5'\r\n                transform='matrix(1 0 0 -1 27 78)'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.48'\r\n            />\r\n            <path\r\n                d='M127 22.5L117 22.5L117 49'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n                strokeLinecap='round'\r\n            />\r\n            <circle\r\n                cx='128.5'\r\n                cy='22.5'\r\n                r='2.5'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.48'\r\n            />\r\n            <path\r\n                d='M54.605 67.5638L41 81V12C41 10.8954 41.8954 10 43 10H109C110.105 10 111 10.8954 111 12V64.9868C111 66.0914 110.105 66.9868 109 66.9868H56.0103C55.4842 66.9868 54.9793 67.1941 54.605 67.5638Z'\r\n                fill='#28427B'\r\n            />\r\n            <path\r\n                d='M49.605 62.5638L36 76V7C36 5.89543 36.8954 5 38 5H104C105.105 5 106 5.89543 106 7V59.9868C106 61.0914 105.105 61.9868 104 61.9868H51.0103C50.4842 61.9868 49.9793 62.1941 49.605 62.5638Z'\r\n                fill='var(--center-channel-bg)'\r\n            />\r\n            <path\r\n                d='M49.2536 62.2081L36.5 74.8035V7C36.5 6.17157 37.1716 5.5 38 5.5H104C104.828 5.5 105.5 6.17157 105.5 7V59.9868C105.5 60.8153 104.828 61.4868 104 61.4868H51.0103C50.3527 61.4868 49.7215 61.746 49.2536 62.2081Z'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n            />\r\n            <circle\r\n                cx='54'\r\n                cy='24'\r\n                r='9'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.32'\r\n            />\r\n            <path\r\n                d='M69 20H85'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46 44H96'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46 51H68'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M69 26H94'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M46 38H63'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                d='M67 38H85'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.48'\r\n                strokeLinecap='round'\r\n            />\r\n            <path\r\n                opacity='0.32'\r\n                d='M114.218 87.29C106.772 87.1409 100.598 84.5917 95.6936 79.6423C90.7897 74.6929 88.2252 68.5281 88 61.1479C88.2213 53.7639 90.7859 47.5971 95.6936 42.6477C100.601 37.6983 106.776 35.1491 114.218 35C121.591 35.1529 127.73 37.7021 132.633 42.6477C137.537 47.5933 140.102 53.76 140.327 61.1479C140.098 68.5319 137.534 74.6967 132.633 79.6423C127.733 84.5879 121.595 87.1371 114.218 87.29Z'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.32'\r\n            />\r\n            <path\r\n                d='M111.218 82.7899C103.897 82.6411 97.8524 80.1385 93.0488 75.2904C88.243 70.4399 85.7248 64.403 85.5002 57.1477C85.7211 49.8888 88.2392 43.8501 93.0487 38.9998C97.8561 34.1515 103.901 31.6489 111.218 31.5001C118.465 31.6526 124.474 34.1544 129.278 38.9998C134.084 43.8462 136.602 49.8848 136.827 57.1477C136.598 64.407 134.08 70.4439 129.278 75.2904C124.478 80.1356 118.469 82.6374 111.218 82.7899Z'\r\n                fill='var(--center-channel-bg)'\r\n                stroke='var(--center-channel-color)'\r\n            />\r\n            <path\r\n                d='M111.042 77C105.35 76.886 100.63 74.9359 96.8812 71.1498C93.1325 67.3636 91.1721 62.6478 91 57.0022C91.1692 51.3537 93.1296 46.6364 96.8812 42.8502C100.633 39.0641 105.353 37.114 111.042 37C116.678 37.1169 121.37 39.067 125.119 42.8502C128.867 46.6334 130.828 51.3508 131 57.0022C130.825 62.6507 128.865 67.3666 125.119 71.1498C121.373 74.933 116.681 76.8831 111.042 77Z'\r\n                fill='var(--center-channel-bg)'\r\n            />\r\n            <path\r\n                d='M111.041 76.4999C105.475 76.3862 100.885 74.4827 97.2365 70.798C93.5858 67.1108 91.6718 62.5228 91.5002 57.0021C91.6689 51.4785 93.583 46.8892 97.2364 43.2022C100.888 39.5172 105.478 37.6138 111.041 37.5001C116.552 37.6167 121.114 39.5192 124.764 43.2022C128.414 46.8862 130.328 51.4754 130.5 57.0021C130.325 62.5259 128.411 67.1139 124.763 70.798C121.117 74.4807 116.555 76.3833 111.041 76.4999Z'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.32'\r\n            />\r\n            <path\r\n                d='M111 35.5V57L120.5 66.5'\r\n                stroke='var(--center-channel-color)'\r\n                strokeOpacity='0.8'\r\n                strokeLinejoin='round'\r\n            />\r\n            <circle\r\n                cx='111'\r\n                cy='57'\r\n                r='2'\r\n                fill='var(--center-channel-color)'\r\n                fillOpacity='0.8'\r\n            />\r\n        </g>\r\n        <defs>\r\n            <clipPath id='clip0_4212_90995'>\r\n                <rect\r\n                    width='142'\r\n                    height='87'\r\n                    fill='white'\r\n                />\r\n            </clipPath>\r\n        </defs>\r\n    </svg>\r\n);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport NoResultsIndicator from 'components/no_results_indicator';\r\n\r\nimport NoScheduledPostsIllustration from './empty_scheduled_post_list_illustration';\r\n\r\nexport default function EmptyScheduledPostList() {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <NoResultsIndicator\r\n            expanded={true}\r\n            iconGraphic={NoScheduledPostsIllustration}\r\n            title={formatMessage({\r\n                id: 'Schedule_post.empty_state.title',\r\n                defaultMessage: 'No scheduled drafts at the moment',\r\n            })}\r\n            subtitle={formatMessage({\r\n                id: 'Schedule_post.empty_state.subtitle',\r\n                defaultMessage:\r\n                    'Schedule drafts to send messages at a later time. Any scheduled drafts will show up here and can be modified after being scheduled.',\r\n            })}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useRef} from 'react';\r\n\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport DraftRow from 'components/drafts/draft_row';\r\n\r\nimport {useQuery} from 'utils/http_utils';\r\n\r\ntype Props = {\r\n    scheduledPosts: ScheduledPost[];\r\n    currentUser: UserProfile;\r\n    userDisplayName: string;\r\n    userStatus: UserStatus['status'];\r\n}\r\n\r\nexport default function NonVirtualizedScheduledPostList(props: Props) {\r\n    const query = useQuery();\r\n    const targetId = query.get('target_id');\r\n    const targetScheduledPostId = useRef<string>();\r\n\r\n    return (\r\n        <>\r\n            {\r\n                props.scheduledPosts.map((scheduledPost, index) => {\r\n                    // find the first scheduled posst with the target and no error\r\n                    const isInTargetChannelOrThread = scheduledPost.channel_id === targetId || scheduledPost.root_id === targetId;\r\n                    const hasError = Boolean(scheduledPost.error_code);\r\n                    const scrollIntoView = !targetScheduledPostId.current && (isInTargetChannelOrThread && !hasError);\r\n                    if (scrollIntoView) {\r\n                        // if found, save the scheduled post's ID\r\n                        targetScheduledPostId.current = scheduledPost.id;\r\n                    }\r\n\r\n                    return (\r\n                        <DraftRow\r\n                            key={scheduledPost.id}\r\n                            item={scheduledPost}\r\n                            displayName={props.userDisplayName}\r\n                            status={props.userStatus}\r\n                            user={props.currentUser}\r\n                            scrollIntoView={targetScheduledPostId.current === scheduledPost.id} // scroll into view if this is the target scheduled post\r\n                            containerClassName={classNames('nonVirtualizedScheduledPostRow', {firstRow: index === 0})}\r\n                        />\r\n                    );\r\n                })\r\n            }\r\n        </>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport AlertBanner from 'components/alert_banner';\r\n\r\nexport default function ScheduledPostError() {\r\n    return (\r\n        <AlertBanner\r\n            mode='danger'\r\n            className='scheduledPostListErrorIndicator'\r\n            message={\r\n                <FormattedMessage\r\n                    id='scheduled_post.panel.error_indicator.message'\r\n                    defaultMessage='One of your scheduled drafts cannot be sent.'\r\n                />\r\n            }\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport {fetchMissingChannels} from 'mattermost-redux/actions/channels';\r\nimport {hasScheduledPostError} from 'mattermost-redux/selectors/entities/scheduled_posts';\r\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport EmptyScheduledPostList from './empty_scheduled_post_list';\r\nimport NonVirtualizedScheduledPostList from './non_virtualized_scheduled_post_list';\r\nimport ScheduledPostError from './scheduled_post_error';\r\n\r\nimport './scheduled_post_list.scss';\r\n\r\ntype Props = {\r\n    scheduledPosts: ScheduledPost[];\r\n    currentUser: UserProfile;\r\n    userDisplayName: string;\r\n    userStatus: UserStatus['status'];\r\n};\r\n\r\nexport default function ScheduledPostList(props: Props) {\r\n    const dispatch = useDispatch();\r\n\r\n    const currentTeamId = useSelector(getCurrentTeamId);\r\n\r\n    const scheduledPostsHasError = useSelector((state: GlobalState) => hasScheduledPostError(state, currentTeamId));\r\n\r\n    useEffect(() => {\r\n        if (props.scheduledPosts.length > 0) {\r\n            dispatch(fetchMissingChannels(props.scheduledPosts.map((post) => post.channel_id)));\r\n        }\r\n    }, [dispatch, props.scheduledPosts]);\r\n\r\n    if (props.scheduledPosts.length === 0) {\r\n        return (\r\n            <EmptyScheduledPostList/>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className='ScheduledPostList nonVirtualizedScheduledPostList'>\r\n            {scheduledPostsHasError && (<ScheduledPostError/>)}\r\n\r\n            <NonVirtualizedScheduledPostList\r\n                scheduledPosts={props.scheduledPosts}\r\n                currentUser={props.currentUser}\r\n                userDisplayName={props.userDisplayName}\r\n                userStatus={props.userStatus}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {Tab as ReactBootstrapTab} from 'react-bootstrap';\r\n\r\ntype Props = {\r\n    children?: React.ReactNode;\r\n    eventKey?: any;\r\n    title?: React.ReactNode | undefined;\r\n    unmountOnExit?: boolean | undefined;\r\n    tabClassName?: string | undefined;\r\n    tabIndex?: number;\r\n}\r\n\r\nexport default function Tab({children, title, unmountOnExit, tabClassName, eventKey, tabIndex = -1}: Props) {\r\n    return (\r\n        <ReactBootstrapTab\r\n            eventKey={eventKey}\r\n            title={title}\r\n            unmountOnExit={unmountOnExit}\r\n            tabClassName={tabClassName}\r\n            tabIndex={tabIndex}\r\n        >\r\n            {children}\r\n        </ReactBootstrapTab>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {Tabs as ReactBootstrapTabs} from 'react-bootstrap';\r\nimport type {SelectCallback} from 'react-bootstrap';\r\n\r\nimport './style.scss';\r\n\r\ntype Props = {\r\n    children?: React.ReactNode;\r\n    id?: string;\r\n    activeKey?: any;\r\n    mountOnEnter?: boolean;\r\n    unmountOnExit?: boolean;\r\n    onSelect?: SelectCallback;\r\n    className?: string;\r\n}\r\n\r\nexport default function Tabs({\r\n    children,\r\n    id,\r\n    activeKey,\r\n    unmountOnExit,\r\n    onSelect,\r\n    className,\r\n    mountOnEnter,\r\n}: Props) {\r\n    return (\r\n        <ReactBootstrapTabs\r\n            id={id}\r\n            activeKey={activeKey}\r\n            unmountOnExit={unmountOnExit}\r\n            onSelect={onSelect}\r\n            className={classNames('tabs', className)}\r\n            mountOnEnter={mountOnEnter}\r\n            autoFocus={true}\r\n        >\r\n            {children}\r\n        </ReactBootstrapTabs>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {Badge} from '@mui/base';\r\nimport React, {useCallback, useMemo} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\n\r\nimport type {ScheduledPost} from '@mattermost/types/schedule_post';\r\nimport type {UserProfile, UserStatus} from '@mattermost/types/users';\r\n\r\nimport {makeGetScheduledPostsByTeam} from 'mattermost-redux/selectors/entities/scheduled_posts';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {type Draft} from 'selectors/drafts';\r\n\r\nimport DraftList from 'components/drafts/draft_list';\r\nimport ScheduledPostList from 'components/drafts/scheduled_post_list';\r\nimport Tab from 'components/tabs/tab';\r\nimport Tabs from 'components/tabs/tabs';\r\n\r\nimport {DRAFT_URL_SUFFIX, SCHEDULED_POST_URL_SUFFIX} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nconst EMPTY_SCHEDULED_POSTS: ScheduledPost[] = [];\r\n\r\nconst TAB_KEYS = {\r\n    DRAFTS: 'drafts',\r\n    SCHEDULED_POSTS: 'scheduled_posts',\r\n};\r\n\r\ntype Props = {\r\n    drafts: Draft[];\r\n    currentUser: UserProfile;\r\n    userDisplayName: string;\r\n    userStatus: UserStatus['status'];\r\n}\r\n\r\nexport default function DraftsAndSchedulePostsTabs(props: Props) {\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const isDraftsTab = location.pathname.includes(DRAFT_URL_SUFFIX);\r\n    const isScheduledPostsTab = location.pathname.includes(SCHEDULED_POST_URL_SUFFIX);\r\n\r\n    const currentTeam = useSelector(getCurrentTeam);\r\n    const currentTeamName = currentTeam?.name ?? '';\r\n    const currentTeamId = currentTeam?.id ?? '';\r\n\r\n    const getScheduledPostsByTeam = useMemo(() => makeGetScheduledPostsByTeam(), []);\r\n    const scheduledPosts = useSelector((state: GlobalState) => getScheduledPostsByTeam(state, currentTeamId, true));\r\n\r\n    const handleSwitchTabs = useCallback((key: string) => {\r\n        if (key === TAB_KEYS.DRAFTS) {\r\n            history.push(`/${currentTeamName}/drafts`);\r\n        } else if (key === TAB_KEYS.SCHEDULED_POSTS) {\r\n            history.push(`/${currentTeamName}/scheduled_posts`);\r\n        }\r\n    }, [history, currentTeamName]);\r\n\r\n    const scheduledPostsTabHeading = useMemo(() => {\r\n        return (\r\n            <div className='drafts_tab_title'>\r\n                <FormattedMessage\r\n                    id='schedule_post.tab.heading'\r\n                    defaultMessage='Scheduled'\r\n                />\r\n                {scheduledPosts?.length > 0 && (\r\n                    <Badge\r\n                        className='badge'\r\n                        badgeContent={scheduledPosts.length}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }, [scheduledPosts?.length]);\r\n\r\n    const draftTabHeading = useMemo(() => {\r\n        return (\r\n            <div className='drafts_tab_title'>\r\n                <FormattedMessage\r\n                    id='drafts.heading'\r\n                    defaultMessage='Drafts'\r\n                />\r\n                {props.drafts.length > 0 && (\r\n                    <Badge\r\n                        className='badge'\r\n                        badgeContent={props.drafts.length}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }, [props.drafts.length]);\r\n\r\n    const activeTab = useMemo(() => {\r\n        if (isDraftsTab) {\r\n            return TAB_KEYS.DRAFTS;\r\n        } else if (isScheduledPostsTab) {\r\n            return TAB_KEYS.SCHEDULED_POSTS;\r\n        }\r\n        return '';\r\n    }, [isDraftsTab, isScheduledPostsTab]);\r\n\r\n    return (\r\n        <Tabs\r\n            id='draft_tabs'\r\n            activeKey={activeTab}\r\n            mountOnEnter={true}\r\n            unmountOnExit={true}\r\n\r\n            // @ts-expect-error The types that we have for React Bootstrap are for a newer version than we use\r\n            onSelect={handleSwitchTabs}\r\n        >\r\n            <Tab\r\n                eventKey={TAB_KEYS.DRAFTS}\r\n                title={draftTabHeading}\r\n                unmountOnExit={true}\r\n                tabClassName='drafts_tab'\r\n                tabIndex={0}\r\n            >\r\n                <DraftList\r\n                    drafts={props.drafts}\r\n                    currentUser={props.currentUser}\r\n                    userDisplayName={props.userDisplayName}\r\n                    userStatus={props.userStatus}\r\n                />\r\n            </Tab>\r\n            <Tab\r\n                eventKey={TAB_KEYS.SCHEDULED_POSTS}\r\n                title={scheduledPostsTabHeading}\r\n                unmountOnExit={true}\r\n                tabClassName='drafts_tab'\r\n            >\r\n                <ScheduledPostList\r\n                    scheduledPosts={scheduledPosts || EMPTY_SCHEDULED_POSTS}\r\n                    currentUser={props.currentUser}\r\n                    userDisplayName={props.userDisplayName}\r\n                    userStatus={props.userStatus}\r\n                />\r\n            </Tab>\r\n        </Tabs>\r\n    );\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo, useEffect, useMemo} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/common';\r\nimport {getTeammateNameDisplaySetting} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {isScheduledPostsEnabled} from 'mattermost-redux/selectors/entities/scheduled_posts';\r\nimport {getStatusForUserId} from 'mattermost-redux/selectors/entities/users';\r\nimport {displayUsername} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {selectLhsItem} from 'actions/views/lhs';\r\nimport {suppressRHS, unsuppressRHS} from 'actions/views/rhs';\r\nimport type {Draft} from 'selectors/drafts';\r\nimport {makeGetDrafts} from 'selectors/drafts';\r\n\r\nimport DraftList from 'components/drafts/draft_list';\r\n\r\nimport type {GlobalState} from 'types/store';\r\nimport {LhsItemType, LhsPage} from 'types/store/lhs';\r\n\r\nimport DraftsAndSchedulePostsPageHeader from './drafts_and_schedule_posts_page_header';\r\nimport DraftsAndSchedulePostsTabs from './drafts_and_schedule_posts_tabs';\r\n\r\nimport './drafts_and_schedule_posts.scss';\r\n\r\nconst EMPTY_DRAFTS: Draft[] = [];\r\n\r\nfunction Drafts() {\r\n    const dispatch = useDispatch();\r\n\r\n    const scheduledPostsEnabled = useSelector(isScheduledPostsEnabled);\r\n\r\n    // We would need to get drafts here early since its needed by the draft list component\r\n    const getDrafts = useMemo(() => makeGetDrafts(), []);\r\n    const drafts = useSelector(getDrafts);\r\n\r\n    const currentUser = useSelector(getCurrentUser);\r\n    const userStatus = useSelector((state: GlobalState) => getStatusForUserId(state, currentUser.id));\r\n\r\n    const teammateNameDisplaySetting = useSelector(getTeammateNameDisplaySetting);\r\n    const userDisplayName = useMemo(() => displayUsername(currentUser, teammateNameDisplaySetting), [currentUser, teammateNameDisplaySetting]);\r\n\r\n    // When Drafts component mounts, select Drafts in the LHS\r\n    // and suppress the RHS and restore RHS when component unmounts\r\n    useEffect(() => {\r\n        dispatch(selectLhsItem(LhsItemType.Page, LhsPage.Drafts));\r\n        dispatch(suppressRHS);\r\n\r\n        return () => {\r\n            dispatch(unsuppressRHS);\r\n        };\r\n    }, [dispatch]);\r\n\r\n    if (scheduledPostsEnabled) {\r\n        return (\r\n            <DraftsAndSchedulePostsPageHeader>\r\n                <DraftsAndSchedulePostsTabs\r\n                    drafts={drafts || EMPTY_DRAFTS}\r\n                    currentUser={currentUser}\r\n                    userDisplayName={userDisplayName}\r\n                    userStatus={userStatus}\r\n                />\r\n            </DraftsAndSchedulePostsPageHeader>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <DraftsAndSchedulePostsPageHeader>\r\n            <DraftList\r\n                drafts={drafts || EMPTY_DRAFTS}\r\n                currentUser={currentUser}\r\n                userDisplayName={userDisplayName}\r\n                userStatus={userStatus}\r\n            />\r\n        </DraftsAndSchedulePostsPageHeader>\r\n    );\r\n}\r\n\r\nexport default memo(Drafts);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {Fragment} from 'react';\r\nimport type {ReactNode, HTMLAttributes} from 'react';\r\n\r\nimport './header.scss';\r\n\r\ntype Props = {\r\n    heading: ReactNode;\r\n    level?: 0 | 1 | 2 | 3 | 4 | 5 | 6;\r\n    subtitle?: ReactNode;\r\n    right?: ReactNode;\r\n};\r\n\r\ntype HeadingTag = keyof Pick<JSX.IntrinsicElements, 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6'>;\r\n\r\nconst Headings: Array<typeof Fragment | HeadingTag> = [Fragment, 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\r\n\r\nconst Header = ({\r\n    level = 0,\r\n    heading,\r\n    subtitle,\r\n    right,\r\n    ...attrs\r\n}: Props & HTMLAttributes<HTMLElement>) => {\r\n    const H = Headings[level];\r\n    return (\r\n        <div\r\n            {...attrs}\r\n            className={classNames('Header', attrs.className)}\r\n        >\r\n            <div className='left'>\r\n                <H>{heading}</H>\r\n                {subtitle ? <p>{subtitle}</p> : null}\r\n            </div>\r\n            <div className='spacer'/>\r\n            {right}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useMemo} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nexport function useQuery() {\r\n    const {search} = useLocation();\r\n\r\n    const params = useMemo(() => {\r\n        return new URLSearchParams(search);\r\n    }, [search]);\r\n\r\n    return params;\r\n}\r\n"],"names":["React","width","height","viewBox","fill","xmlns","clipPath","x","y","rx","fillOpacity","d","stroke","strokeOpacity","strokeLinecap","strokeLinejoin","cx","cy","r","transform","x1","y1","x2","y2","id","EmptyDraftList","formatMessage","useIntl","className","NoResultsIndicator","expanded","iconGraphic","EmptyDraftListIllustration","title","defaultMessage","subtitle","Action","_ref","name","icon","onClick","tooltipText","WithTooltip","concat","classNames","propTypes","_pt","isRequired","DeleteScheduledPostModal","channelDisplayName","onExited","onConfirm","errorMessage","setErrorMessage","useState","confirmButtonText","handleOnConfirm","useCallback","async","response","error","GenericModal","handleCancel","noop","handleConfirm","modalHeaderText","compassDesign","isDeleteModal","autoFocusConfirmButton","autoCloseOnConfirmButton","errorText","FormattedMessage","values","strong","chunk","displayName","SendDraftModal","message","deleteTooltipText","editTooltipText","rescheduleTooltipText","sendNowTooltipText","copyTextTooltipText","ScheduledPostActions","scheduledPost","channel","onReschedule","onDelete","onSend","onEdit","onCopyText","dispatch","useDispatch","userTimezone","useSelector","getCurrentTimezone","myChannelsMemberships","state","getMyChannelMemberships","isAdmin","isCurrentUserSystemAdmin","useEffect","type","Constants","DM_CHANNEL","fetchMissingChannels","handleReschedulePost","initialTime","moment","scheduled_at","openModal","modalId","ModalIdentifiers","SCHEDULED_POST_CUSTOM_TIME_MODAL","dialogType","ScheduledPostCustomTimeModal","dialogProps","channelId","channel_id","handleDelete","DELETE_DRAFT","display_name","handleSend","SEND_DRAFT","userChannelMember","Boolean","isChannelArchived","delete_at","showEditOption","error_code","isDeactivatedDM","isDeactivatedDirectChannel","showSendNowOption","showRescheduleOption","memo","PlaceholderScheduledPostsTitle","EditPostFooter","onSave","onCancel","ctrlSend","getBool","Preferences","CATEGORY_ADVANCED_SETTINGS","ctrlSendKey","isMac","key","KeyCodes","EditPost","_editingPost$post","_editingPost$post2","editingPost","actions","canEditPost","config","draft","afterSave","onDeleteScheduledPost","rest","_objectWithoutProperties","_excluded","connectionId","getConnectionId","getChannel","editText","setEditText","post","message_source","selectionRange","setSelectionRange","start","length","end","caretPosition","useRef","postError","setPostError","errorClass","setErrorClass","showEmojiPicker","setShowEmojiPicker","renderScrollbar","setRenderScrollbar","showMentionHelper","setShowMentionHelper","textboxRef","wrapperRef","draftRef","saveDraftFrame","postId","draftStorageId","StoragePrefixes","EDIT_DRAFT","saveDraft","current","setDraft","clearTimeout","window","setTimeout","SAVE_DRAFT_TIMEOUT","isMentions","allAtMentions","focusTextBox","_textboxRef$current","focus","document","addEventListener","AppEvents","FOCUS_EDIT_TEXTBOX","removeEventListener","_textboxRef$current2","_textboxRef$current3","Utils","getInputBox","setSelectionRangeByCaretPosition","position","handlePaste","e","clipboardData","target","items","hasLinks","hasHtmlLink","table","getHtmlTable","preventDefault","newCaretPosition","isGitHubCodeBlock","formattedMessage","formattedCodeBlock","formatGithubCodePaste","selectionStart","selectionEnd","formatMarkdownMessage","trim","isSaveDisabled","file_ids","canDeletePost","applyHotkeyMarkdown","params","res","applyMarkdown","handleRefocusAndExit","refocusId","element","getElementById","unsetEditingPost","handleAutomatedRefocusAndExit","_objectSpread","handleEdit","_editingPost$post3","_editingPost$post4","_editingPost$post5","_editingPost$post6","handleEditScheduledPost","updatedPost","hookResult","runMessageWillBeUpdatedHooks","data","ANIMATION_TIMEOUT","hasAttachment","editPost","deletePostModalData","DELETE_POST","DeletePostModal","isRHS","scheduledPostToPost","deleteScheduledPostModalData","updatedScheduledPost","updateScheduledPost","emojiPicker","getReferenceProps","setReference","useEmojiPicker","enableGifPicker","EnableGifPicker","onGifClick","gif","_textboxRef$current5","newMessage","test","onEmojiClick","emoji","_textboxRef$current4","emojiAlias","getEmojiName","firstPiece","lastPiece","splitMessageBasedOnCaretPosition","emojiPickerControls","EnableEmojiPicker","Object","assign","ref","_textboxRef$current6","stopPropagation","EmoticonPlusOutlineIcon","size","color","rootId","root_id","scroll","Textbox","tabIndex","onChange","value","onKeyPress","codeBlockOnCtrlEnter","allowSending","ignoreKeyPress","postMessageOnKeyPress","Date","now","blur","onKeyDown","ctrlOrMetaKeyPressed","ctrlKey","metaKey","ctrlKeyCombo","Keyboard","altKey","shiftKey","ctrlAltCombo","ctrlEnterKeyCombo","ENTER","markdownLinkKey","K","lastMessageReactionKeyCombo","BACK_SLASH","nativeEvent","ESCAPE","markdownMode","currentTarget","B","I","onBlur","onHeightChange","handleHeightChange","maxHeight","handlePostError","_postError","onPaste","emojiEnabled","createMessage","supportsCommands","suggestionListPosition","characterLimit","maxPostSize","useChannelMentions","InformationOutlineIcon","readOnlyChannel","teamId","isRHSOpened","isEditHistoryShowing","addMessageIntoHistory","scrollPostListToBottom","connect","props","getConfig","currentUserId","getCurrentUserId","isAuthor","_editingPost","getPostDraft","getEditingPostDetailsAndPost","user_id","getCurrentTeamId","deletePermission","Permissions","DELETE_OTHERS_POSTS","editPermission","EDIT_POST","EDIT_OTHERS_POSTS","haveIChannelPermission","USE_CHANNEL_MENTIONS","parseInt","MaxPostSize","DEFAULT_CHARACTER_LIMIT","DEFAULT_CHANNEL","getIsRhsOpen","getRhsState","RHSStates","EDIT_HISTORY","bindActionCreators","setGlobalItem","DeleteDraftModal","scheduledDraft","DraftActions","canEdit","canSend","onSchedule","handleScheduleDraft","ownProps","userId","channelName","channelType","teammateId","teammate","getUserIdFromChannelName","getUser","displayUsername","getTeammateNameDisplaySetting","DraftTitle","membersCount","selfDraft","getMissingProfilesByIds","GM_CHANNEL","batchGetProfilesInChannel","you","PRIVATE_CHANNEL","Avatar","username","url","imageURLForUser","last_picture_update","span","chunks","getMemberCount","makeGetGmChannelMemberCount","isEligibleForClick","makeIsEligibleForClick","Panel","children","hasError","innerRef","isHighlighted","style","dataTestId","dataPostId","ariaLabel","draftError","highlighted","role","OPTIONS","disableGroupHighlight","mentionHighlight","PanelBody","fileInfos","priority","burnOnRead","burnOnReadDurationMinutes","status","uploadsInProgress","currentRelativeTeamUrl","getCurrentRelativeTeamUrl","isBorFeatureEnabled","isBurnOnReadEnabled","handleClick","handleFormattedTextClick","ProfilePicture","src","ShowMore","text","PriorityLabels","canRemove","persistentNotifications","persistent_notifications","requestedAck","requested_ack","enabled","BurnOnReadLabel","onRemove","durationMinutes","Markdown","options","FilePreview","errorCodeToErrorMessage","defineMessages","unknown","channel_archived","channel_not_found","user_missing","user_deleted","no_channel_permission","no_channel_member","thread_deleted","unable_to_send","invalid_post","getErrorStringFromCode","intl","_errorCodeToErrorMess","textDefinition","arguments","undefined","toUpperCase","mockLastBlurAt","DraftRow","_item$metadata2","item","user","isRemote","scrollIntoView","containerClassName","isEditing","setIsEditing","isScheduledPost","serverError","setServerError","history","useHistory","getChannelSelector","useMemo","makeGetChannel","getThreadOrSynthetic","makeGetThreadOrSynthetic","rootPostDeleted","rootPost","getPost","tooLong","readOnly","team_id","CREATE_POST","getBurnOnReadDurationMinutes","channelUrl","getChannelURL","goToMessage","selectPostById","push","isBeingScheduled","isScheduledPostBeingSent","thread","handleOnDelete","DRAFT","COMMENT_DRAFT","removeDraft","afterSubmit","created","deleteScheduledPost","onSubmitCheck","prioritySubmitCheck","usePriority","handleOnSend","useSubmit","onScheduleDraft","scheduledAt","Promise","resolve","draftActions","handleCancelEdit","handleSchedulePostOnReschedule","_result$error","updatedScheduledAtTime","handleSchedulePostOnDelete","_result$error2","handleSchedulePostEdit","handleCopyText","copyToClipboard","handleScheduledPostOnSend","postDraft","scheduledPostToPostDraft","keepDraft","ignorePostError","scheduledPostActions","getPostAction","alertRef","behavior","useScrollOnRender","timestamp","_item$metadata","metadata","files","updateAt","itemType","draftBurnOnReadMetadata","PostTypes","BURN_ON_READ","kind","Header","remote","EditScheduledPost","VirtualizedDraftList","listRef","itemHeightCacheMap","Map","setRowHeight","index","draftKey","currentItemHeight","get","Math","abs","set","resetAfterIndex","getItemSize","drafts","itemData","userDisplayName","draftRemotes","currentUser","userStatus","AutoSizer","VariableSizeList","itemCount","itemSize","overscanCount","Row","RowComponent","_ref2","rowRef","indexRef","draftKeyRef","setRowHeightRef","rafId","requestAnimationFrame","getBoundingClientRect","cancelAnimationFrame","isObservingResize","debouncedUpdateHeight","debounce","resizeObserver","ResizeObserver","resizeEntries","borderBoxSize","blockSize","observe","cancel","disconnect","firstRow","DraftList","getDraftRemotes","DraftsAndSchedulePostsPageHeader","level","heading","getBadgeUtilityClass","slot","generateUtilityClass","generateUtilityClasses","omitEventHandlers","object","result","keys","filter","prop","match","forEach","useSlotProps","parameters","_parameters$additiona","elementType","externalSlotProps","ownerState","resolvedComponentsProps","componentProps","resolveComponentProps","mergedProps","internalRef","getSlotProps","additionalProps","externalForwardedProps","joinedClasses","mergedStyle","eventHandlers","excludeKeys","includes","extractEventHandlers","componentsPropsWithoutEventHandlers","otherPropsWithoutEventHandlers","internalSlotProps","mergeSlotProps","useForkRef","otherProps","appendOwnerState","defaultContextValue","disableDefaultClasses","ClassNameConfiguratorContext","component","max","maxProp","slotProps","slots","showZero","other","badgeContent","displayValue","invisible","badgeContentProp","invisibleProp","prevProps","Number","useBadge","classes","root","badge","composeClasses","useClassNamesOverride","useUtilityClasses","Root","rootProps","BadgeComponent","badgeProps","opacity","EmptyScheduledPostList","NoScheduledPostsIllustration","NonVirtualizedScheduledPostList","targetId","useQuery","targetScheduledPostId","scheduledPosts","map","isInTargetChannelOrThread","ScheduledPostError","AlertBanner","mode","ScheduledPostList","currentTeamId","scheduledPostsHasError","hasScheduledPostError","Tab","unmountOnExit","tabClassName","eventKey","ReactBootstrapTab","Tabs","activeKey","onSelect","mountOnEnter","ReactBootstrapTabs","autoFocus","EMPTY_SCHEDULED_POSTS","TAB_KEYS","DraftsAndSchedulePostsTabs","_currentTeam$name","_currentTeam$id","location","useLocation","isDraftsTab","pathname","DRAFT_URL_SUFFIX","isScheduledPostsTab","SCHEDULED_POST_URL_SUFFIX","currentTeam","getCurrentTeam","currentTeamName","getScheduledPostsByTeam","makeGetScheduledPostsByTeam","handleSwitchTabs","scheduledPostsTabHeading","Badge","draftTabHeading","activeTab","EMPTY_DRAFTS","Drafts","scheduledPostsEnabled","isScheduledPostsEnabled","getDrafts","makeGetDrafts","getCurrentUser","getStatusForUserId","teammateNameDisplaySetting","selectLhsItem","LhsItemType","Page","LhsPage","suppressRHS","unsuppressRHS","Headings","Fragment","right","attrs","H","search","URLSearchParams"],"sourceRoot":""}