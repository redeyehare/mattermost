"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[1781],{62114:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(62688),s=a.n(n),i=(a(17046),a(36418)),r=a.n(i),l=a(14778),o=a(37270),c=a(14696),d=a(30596),h=a(57898),m=a(21650);const u=e=>{let{pulsatingDotPlacement:t="left",pulsatingDotTranslate:a}=e;const n=(0,o.useDispatch)(),s=(0,o.useSelector)(m.F9),u=r().createElement(l.FormattedMessage,{id:"newChannelWithBoard.tutorialTip.title",defaultMessage:"Access linked boards from the App Bar"}),p=r().createElement(l.FormattedMessage,{id:"newChannelWithBoard.tutorialTip.description",defaultMessage:"The board you just created can be quickly accessed by clicking on the Boards icon in the App bar. You can view the boards that are linked to this channel in the right-hand sidebar and open one in full view."}),[g,f]=(0,i.useState)(s),b=(0,i.useCallback)((e=>{e.stopPropagation(),f(!1),n((0,d.z)({[h.pm.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]:!0}))}),[]),E=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),g?(n((0,d.z)({[h.pm.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]:!0})),f(!1)):f(!0)}),[]),_=(0,c.LX)(["app-bar-icon-focalboard"],[],{y:-2,height:4,x:0,width:0});return s?r().createElement(c.Yd,{show:!0,screen:p,title:u,overlayPunchOut:_,placement:"right-start",pulsatingDotPlacement:t,step:1,singleTip:!0,showOptOut:!1,interactivePunchOut:!0,handleDismiss:b,handleOpen:E,handlePrevious:b,offset:[-30,5],pulsatingDotTranslate:a}):null};u.propTypes={pulsatingDotTranslate:s().shape({x:s().number.isRequired,y:s().number.isRequired})};const p=u},96121:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(62688),s=a.n(n),i=a(36418),r=a.n(i),l=a(62114),o=a(87131),c=a(78451);const d=e=>{const{ariaLabelOverride:t,buttonClass:a,buttonId:n,children:s,onClick:i,tooltip:d,tooltipShortcut:h,isRhsOpen:m,pluginId:u}=e,p=u===c.g_.focalboard,g=null!=t?t:d;return r().createElement(r().Fragment,null,r().createElement(o.A,{title:m?"":d,shortcut:h},r().createElement("button",{id:n,"aria-label":g,className:a||"channel-header__icon",onClick:i},s)),p&&r().createElement(l.A,{pulsatingDotPlacement:"start",pulsatingDotTranslate:{x:0,y:-22}}))};d.propTypes={ariaLabelOverride:s().string,buttonClass:s().string,buttonId:s().string.isRequired,children:s().node.isRequired,onClick:s().func.isRequired,tooltip:s().string.isRequired,isRhsOpen:s().bool,pluginId:s().string};const h=d},61293:(e,t,a)=>{a.d(t,{A:()=>r,D:()=>l}),a(17046);var n=a(36418),s=a(14778);const i=4e3;function r(e){let{text:t,successCopyTimeout:a}=e;const[s,r]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),c=(0,n.useRef)(null);let d=i;return(a||0===a)&&(d=a),{copiedRecently:s,copyError:l,onClick:(0,n.useCallback)((()=>{c.current&&(clearTimeout(c.current),c.current=null);const e=navigator.clipboard;if(e)e.writeText(t).then((()=>{r(!0),o(!1)})).catch((()=>{r(!1),o(!0)}));else{const e=document.createElement("textarea");e.innerText=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{const e=document.execCommand("copy");r(e),o(!e)}catch(e){r(!1),o(!0)}e.remove()}c.current=setTimeout((()=>{r(!1),o(!1)}),d)}),[d,t])}}const l=(0,s.defineMessages)({copy:{id:"copy_text.copy",defaultMessage:"Copy"},copied:{id:"copy_text.copied",defaultMessage:"Copied"}})},85507:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(62688),s=a.n(n),i=(a(10844),a(36418)),r=a.n(i);const l=e=>r().createElement("svg",{width:e.width?e.width.toString():"87",height:e.height?e.height.toString():"70",viewBox:"0 0 87 70",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r().createElement("rect",{x:"8.00098",y:"7",width:"72",height:"24",rx:"3.75",fill:"var(--button-bg)",fillOpacity:"0.12"}),r().createElement("rect",{x:"0.000976562",y:"34",width:"87",height:"25",rx:"3.75",fill:"var(--button-bg)",fillOpacity:"0.12"}),r().createElement("path",{d:"M38.3214 2.31098C39.4303 0.112261 42.5697 0.112256 43.6786 2.31098L71.7146 57.899C72.7209 59.8943 71.2707 62.25 69.0359 62.25H12.9641C10.7294 62.25 9.27912 59.8943 10.2854 57.899L38.3214 2.31098Z",fill:"var(--center-channel-bg)"}),r().createElement("path",{d:"M40.3214 4.31098C41.4303 2.11226 44.5697 2.11226 45.6786 4.31098L73.7146 59.899C74.7209 61.8943 73.2707 64.25 71.0359 64.25H14.9641C12.7294 64.25 11.2791 61.8943 12.2854 59.899L40.3214 4.31098Z",fill:"#FFBC1F"}),r().createElement("path",{d:"M43.2322 2.53614L71.2681 58.1242C72.1067 59.7869 70.8982 61.75 69.0359 61.75H12.9641C11.1018 61.75 9.89327 59.7869 10.7319 58.1242L38.7678 2.53614C39.6919 0.703873 42.3081 0.703871 43.2322 2.53614Z",stroke:"var(--center-channel-color)"}),r().createElement("path",{d:"M49.542 4.23999L52.8888 10.72M74.922 53.38L68.5073 40.96L66.8339 37.72L64.6027 33.4L61.5348 27.46M59.3036 23.14L55.12 15.04",stroke:"var(--center-channel-color)",strokeOpacity:"0.56",strokeWidth:"1.08",strokeLinecap:"round"}),r().createElement("path",{d:"M38.0164 25.2833L40.2971 39.9301C40.3191 40.2208 40.4554 40.4927 40.6786 40.6912C40.9018 40.8897 41.1954 41 41.5002 41C41.8051 41 42.0986 40.8897 42.3219 40.6912C42.5451 40.4927 42.6814 40.2208 42.7034 39.9301L44.984 25.2833C45.3987 19.5722 37.5955 19.5722 38.0164 25.2833Z",fill:"#3F4350"}),r().createElement("path",{d:"M41.0072 47C41.798 47.0014 42.5706 47.2372 43.2275 47.6776C43.8843 48.118 44.396 48.7432 44.6976 49.4742C44.9993 50.2053 45.0774 51.0093 44.9222 51.7848C44.7671 52.5602 44.3856 53.2723 43.8259 53.831C43.2662 54.3897 42.5535 54.7699 41.7777 54.9237C41.002 55.0774 40.1981 54.9978 39.4676 54.6948C38.7371 54.3919 38.1128 53.8792 37.6736 53.2215C37.2344 52.5639 37 51.7908 37 51C37 50.4741 37.1036 49.9534 37.3051 49.4676C37.5066 48.9818 37.8019 48.5406 38.1741 48.169C38.5463 47.7975 38.9881 47.503 39.4743 47.3024C39.9604 47.1018 40.4813 46.9991 41.0072 47Z",fill:"#3F4350"}),r().createElement("path",{d:"M48.4619 68.5H70.0619",stroke:"var(--center-channel-color)",strokeOpacity:"0.56",strokeWidth:"1.08",strokeLinecap:"round"}),r().createElement("path",{d:"M10.001 50L26.001 19",stroke:"var(--center-channel-color)",strokeOpacity:"0.56",strokeWidth:"1.08",strokeLinecap:"round"}));l.propTypes={width:s().number.isRequired,height:s().number.isRequired};const o=l},18913:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(62688),s=a.n(n),i=a(71633),r=a.n(i),l=a(36418),o=a.n(l),c=a(14778),d=a(87131),h=a(91600);function m(e){let{onClick:t,className:a}=e;const n=(0,c.useIntl)();return(0,h.Y3)()?o().createElement(d.A,{title:o().createElement(c.FormattedMessage,{id:"new_window_button.tooltip",defaultMessage:"Open in new window"})},o().createElement("button",{type:"button",className:r()("btn btn-icon btn-sm","PopoutButton",a),"aria-label":n.formatMessage({id:"new_window_button.tooltip",defaultMessage:"Open in new window"}),onClick:t},o().createElement("i",{className:"icon icon-dock-window","aria-hidden":"true"}))):null}m.propTypes={onClick:s().func.isRequired,className:s().string}},80163:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(37270),s=a(32446),i=a(3569),r=a(2386),l=a(75270),o=a(78451),c=a(62688),d=a.n(c),h=a(36418),m=a.n(h),u=a(14778),p=a(19202),g=a(18913),f=a(87131),b=a(91600);function E(e){const{formatMessage:t}=(0,u.useIntl)(),a=e.previousRhsState!==o._n.CHANNEL_INFO,n=e.isExpanded?m().createElement(m().Fragment,null,m().createElement(u.FormattedMessage,{id:"rhs_header.collapseSidebarTooltip",defaultMessage:"Collapse the right sidebar"}),m().createElement(p.h,{shortcut:p.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0})):m().createElement(m().Fragment,null,m().createElement(u.FormattedMessage,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand the right sidebar"}),m().createElement(p.h,{shortcut:p.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0})),s=e.isExpanded?t({id:"rhs_header.collapseSidebarTooltip.icon",defaultMessage:"Collapse Sidebar Icon"}):t({id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"});return m().createElement("div",{className:"sidebar--right__header"},m().createElement("span",{className:"sidebar--right__title",id:"rhsPanelTitle"},e.canGoBack&&m().createElement("button",{className:"sidebar--right__back btn btn-icon btn-sm",onClick:e.actions.goBack,"aria-label":t({id:"rhs_header.back.icon",defaultMessage:"Back Icon"})},m().createElement("i",{className:"icon icon-arrow-back-ios"})),e.children),m().createElement("div",{className:"pull-right"},a&&!(0,b.kL)()&&m().createElement(f.A,{title:n},m().createElement("button",{type:"button",className:"sidebar--right__expand btn btn-icon btn-sm",onClick:e.actions.toggleRhsExpanded,"aria-label":s},m().createElement("i",{className:"icon icon-arrow-expand","aria-hidden":"true"}),m().createElement("i",{className:"icon icon-arrow-collapse","aria-hidden":"true"}))),e.newWindowHandler&&m().createElement(g.A,{onClick:e.newWindowHandler}),!(0,b.kL)()&&m().createElement(f.A,{title:m().createElement(u.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close"})},m().createElement("button",{id:"searchResultsCloseButton",type:"button",className:"sidebar--right__close btn btn-icon btn-sm","aria-label":"Close",onClick:e.actions.closeRightHandSide},m().createElement("i",{className:"icon icon-close","aria-label":t({id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"})})))))}E.propTypes={children:d().node.isRequired,newWindowHandler:d().func};const _=E,v=(0,n.connect)((function(e){const t=(0,l.SB)(e),a=t===o._n.CHANNEL_INFO||t===o._n.CHANNEL_MEMBERS||t===o._n.CHANNEL_FILES||t===o._n.PIN;return{isExpanded:(0,l.v6)(e),channelId:(0,i.eH)(e),previousRhsState:t,canGoBack:a}}),(function(e){return{actions:(0,s.zH)({closeRightHandSide:r.bP,toggleRhsExpanded:r.XH,goBack:r.OE},e)}}))(_)},24521:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ls});var n=a(37270),s=a(81911),i=a(32446),r=a(65952),l=a(14776),o=a(2386),c=a(30001),d=a(75270),h=a(78451),m=a(62688),u=a.n(m),p=(a(4290),a(71633)),g=a.n(p),f=a(36418),b=a.n(f),E=a(30413),_=a(57898),v=a(3569),C=a(80635),M=a(7430),y=a(79342),S=a(15755),N=a(79751),R=a(7380),T=a(98496),A=a(85873),P=a(44785),I=a.n(P),w=a(46),x=a(64109),F=a(64182),k=a(61677),H=a(96532),L=a(63155),q=(a(57406),a(55448),a(14778)),O=a(18515);const B=I().button.withConfig({displayName:"EditButton"})(["border:0;margin:0px;padding:0px;border-radius:4px;background:rgba(var(--center-channel-color-rgb),0.04);color:rgba(var(--center-channel-color-rgb),0.75);&:hover{background:rgba(var(--center-channel-color-rgb),0.08);color:rgba(var(--center-channel-color-rgb),0.75);}width:24px;height:24px;i.icon{font-size:14.4px;}"]),D=I().button.withConfig({displayName:"EmptyPlace"})(["padding:0px;background:transparent;border:0px;color:rgba(var(--center-channel-color-rgb),0.75);i{display:none;font-size:14px;margin-left:4px;}&:hover{color:rgba(var(--center-channel-color-rgb),0.75);i{display:inline-block;}}"]),U=e=>{let{editable:t,content:a,emptyLabel:n,onEdit:s,className:i}=e;const{formatMessage:r}=(0,q.useIntl)(),l=t&&a;return b().createElement("div",{className:i},b().createElement("div",{className:"EditableArea__content"},a,!a&&t&&b().createElement(D,{onClick:s,"aria-label":r({id:"channel_info_rhs.edit_link",defaultMessage:"Edit"})},n,b().createElement("i",{className:"icon icon-pencil-outline edit-icon"}))),b().createElement("div",{className:"EditableArea__edit"},l?b().createElement(B,{onClick:s,"aria-label":r({id:"channel_info_rhs.edit_link",defaultMessage:"Edit"})},b().createElement("i",{className:"icon icon-pencil-outline"})):""))};U.propTypes={editable:u().bool.isRequired,content:u().node.isRequired,emptyLabel:u().string.isRequired,onEdit:u().func.isRequired,className:u().string};const G=I()(U).withConfig({displayName:"EditableArea"})(["display:flex;&>.EditableArea__content{flex:1;p:last-child{margin-bottom:0;}}&:hover{&>.EditableArea__edit{visibility:visible;}}&>.EditableArea__edit{visibility:hidden;width:24px;}"]);a(17046);var V=a(86634);const z=e=>{let{children:t,maxLines:a,lineHeight:n,moreText:s,lessText:i,errorMargin:r=.1,className:l}=e;const o=a*n,[c,d]=(0,f.useState)(!1),[h,m]=(0,f.useState)(!1),[u,p]=(0,f.useState)("inherit"),g=(0,f.useRef)(null);return(0,f.useEffect)((()=>{if(null===g||null===g.current)return;const e=g.current.scrollHeight;e>o+o*r?(d(!0),p("".concat(h?e:o,"px"))):(d(!1),p("inherit"))}),[t,h]),b().createElement(V.A,{in:h,timeout:500,classNames:"LineLimiter--Transition-"},b().createElement(b().Fragment,null,b().createElement("div",{className:l,style:{maxHeight:u}},b().createElement("div",null,b().createElement("div",{ref:g},t))),c&&b().createElement(W,{className:"LineLimiter__toggler",onClick:()=>m(!h)},h?i:s)))};z.propTypes={children:u().node.isRequired,maxLines:u().number.isRequired,lineHeight:u().number.isRequired,moreText:u().string.isRequired,lessText:u().string.isRequired,className:u().string,errorMargin:u().number};const W=I().button.withConfig({displayName:"ToggleButton"})(["border:0px;background-color:var(--center-channel-bg);color:var(--button-bg);padding:0;margin:0;"]),Y=I()(z).withConfig({displayName:"LineLimiter"})(["transition:max-height 0.5s ease;line-height:","px;overflow:hidden;p{margin-bottom:","px;}span[data-emoticon]{max-height:","px;.emoticon{max-height:","px;min-height:","px;}}.markdown-inline-img__container img.markdown-inline-img{max-height:","px !important;margin-top:0 !important;margin-bottom:0 !important;}& > *{overflow:hidden;}"],(e=>e.lineHeight),(e=>e.lineHeight),(e=>e.lineHeight),(e=>e.lineHeight),(e=>e.lineHeight),(e=>e.lineHeight)),j=I().div.withConfig({displayName:"ChannelId"})(["margin-bottom:12px;font-size:11px;line-height:16px;letter-spacing:0.02em;color:rgba(var(--center-channel-color-rgb),0.75);"]),K=I().div.withConfig({displayName:"ChannelPurpose"})(["margin-bottom:12px;&.ChannelPurpose--is-dm{margin-bottom:16px;}"]),Q=I().div.withConfig({displayName:"ChannelDescriptionHeading"})(["color:rgba(var(--center-channel-color-rgb),0.75);font-size:12px;font-style:normal;font-weight:600;line-height:16px;letter-spacing:0.24px;text-transform:uppercase;padding:6px 0px;"]),J=I().div.withConfig({displayName:"ChannelHeader"})(["margin-bottom:12px;"]),Z=e=>{let{channel:t,canEditChannelProperties:a,actions:n}=e;const{formatMessage:s}=(0,q.useIntl)();return b().createElement(b().Fragment,null,(t.purpose||a)&&b().createElement(K,null,b().createElement(Q,null,s({id:"channel_info_rhs.about_area.channel_purpose.heading",defaultMessage:"Channel Purpose"})),b().createElement(G,{editable:a,content:t.purpose&&b().createElement(Y,{maxLines:4,lineHeight:20,moreText:s({id:"channel_info_rhs.about_area.channel_purpose.line_limiter.more",defaultMessage:"more"}),lessText:s({id:"channel_info_rhs.about_area.channel_purpose.line_limiter.less",defaultMessage:"less"})},b().createElement(O.A,{message:t.purpose})),onEdit:n.editChannelPurpose,emptyLabel:s({id:"channel_info_rhs.about_area.add_channel_purpose",defaultMessage:"Add a channel purpose"})})),(t.header||a)&&b().createElement(J,null,b().createElement(Q,null,s({id:"channel_info_rhs.about_area.channel_header.heading",defaultMessage:"Channel Header"})),b().createElement(G,{content:t.header&&b().createElement(Y,{maxLines:4,lineHeight:20,moreText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.more",defaultMessage:"more"}),lessText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.less",defaultMessage:"less"})},b().createElement(O.A,{message:t.header})),editable:a,onEdit:n.editChannelHeader,emptyLabel:s({id:"channel_info_rhs.about_area.add_channel_header",defaultMessage:"Add a channel header"})})),b().createElement(j,null,s({id:"channel_info_rhs.about_area_id",defaultMessage:"ID:"})," ",t.id))};Z.propTypes={canEditChannelProperties:u().bool.isRequired,actions:u().shape({editChannelPurpose:u().func.isRequired,editChannelHeader:u().func.isRequired}).isRequired};const X=Z;var $=a(40693),ee=a(61767),te=a(19542),ae=a(72429);const ne=I().p.withConfig({displayName:"Username"})(["font-family:Metropolis,sans-serif;font-size:18px;line-height:24px;color:rgb(var(--center-channel-color-rgb));font-weight:600;margin:0;"]),se=I().div.withConfig({displayName:"ChannelHeader"})(["margin-bottom:12px;"]),ie=I().div.withConfig({displayName:"UserInfoContainer"})(["display:flex;align-items:center;margin-bottom:12px;"]),re=I().div.withConfig({displayName:"UserAvatar"})([".status{bottom:0;right:0;height:18px;width:18px;& svg{min-height:14.4px;}}"]),le=I().div.withConfig({displayName:"UserInfo"})(["margin-left:12px;display:flex;flex-direction:column;"]),oe=I().div.withConfig({displayName:"UsernameContainer"})(["display:flex;gap:8px"]),ce=I().div.withConfig({displayName:"UserPosition"})(["line-height:20px;p{margin-bottom:0;}"]),de=I().div.withConfig({displayName:"ChannelId"})(["margin-bottom:12px;font-size:11px;line-height:16px;letter-spacing:0.02em;color:rgba(var(--center-channel-color-rgb),0.75);"]),he=e=>{let{channel:t,dmUser:a,actions:n}=e;const{formatMessage:s}=(0,q.useIntl)();return b().createElement(b().Fragment,null,b().createElement(ie,null,b().createElement(re,null,b().createElement(ee.A,{src:$.mT.getProfilePictureUrl(a.user.id,a.user.last_picture_update),isBot:a.user.is_bot,status:a.status?a.status:void 0,username:a.display_name,userId:a.user.id,channelId:t.id,size:"xl"})),b().createElement(le,null,b().createElement(oe,null,b().createElement(ne,null,a.display_name),a.user.is_bot&&b().createElement(te.A,null),a.is_guest&&b().createElement(ae.A,null)),b().createElement(ce,null,b().createElement(O.A,{message:a.user.is_bot?a.user.bot_description:a.user.position})))),!a.user.is_bot&&b().createElement(se,null,b().createElement(G,{content:t.header&&b().createElement(Y,{maxLines:4,lineHeight:20,moreText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.more",defaultMessage:"more"}),lessText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.less",defaultMessage:"less"})},b().createElement(O.A,{message:t.header})),editable:!0,onEdit:n.editChannelHeader,emptyLabel:s({id:"channel_info_rhs.about_area.add_channel_header",defaultMessage:"Add a channel header"})})),b().createElement(de,null,s({id:"channel_info_rhs.about_area_id",defaultMessage:"ID:"})," ",t.id))};he.propTypes={actions:u().shape({editChannelHeader:u().func.isRequired}).isRequired};const me=he;var ue=a(72180);const pe=I().p.withConfig({displayName:"Usernames"})(["font-family:Metropolis,sans-serif;font-size:18px;line-height:24px;color:rgb(var(--center-channel-color-rgb));font-weight:600;margin:0;"]),ge=I().div.withConfig({displayName:"ProfilePictures"})(["margin-bottom:10px;"]),fe=I().div.withConfig({displayName:"ProfilePictureContainer"})(["display:inline-block;position:relative;left:","px;& img{border:2px solid white;}"],(e=>-15*e.position)),be=I().div.withConfig({displayName:"UsersArea"})(["margin-bottom:12px;&.ChannelPurpose--is-dm{margin-bottom:16px;}"]),Ee=I().div.withConfig({displayName:"ChannelHeader"})(["margin-bottom:12px;"]),_e=I().div.withConfig({displayName:"ChannelId"})(["margin-bottom:12px;font-size:11px;line-height:16px;letter-spacing:0.02em;color:rgba(var(--center-channel-color-rgb),0.75);"]),ve=e=>{let{channel:t,gmUsers:a,actions:n}=e;const{formatMessage:s}=(0,q.useIntl)();return b().createElement(b().Fragment,null,b().createElement(be,null,b().createElement(ge,null,a.map(((e,a)=>b().createElement(fe,{key:e.id,position:a},b().createElement(ee.A,{src:$.mT.getProfilePictureUrl(e.id,e.last_picture_update),size:"xl",userId:e.id,username:e.username,channelId:t.id}))))),b().createElement(pe,null,a.map(((e,a,n)=>{let{length:s}=n;return b().createElement(b().Fragment,{key:e.id},b().createElement(ue.A,{userId:e.id,channelId:t.id}),a+1!==s&&b().createElement("span",null,", "))})))),b().createElement(Ee,null,b().createElement(G,{content:t.header&&b().createElement(Y,{maxLines:4,lineHeight:20,moreText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.more",defaultMessage:"more"}),lessText:s({id:"channel_info_rhs.about_area.channel_header.line_limiter.less",defaultMessage:"less"})},b().createElement(O.A,{message:t.header})),editable:!0,onEdit:n.editChannelHeader,emptyLabel:s({id:"channel_info_rhs.about_area.add_channel_header",defaultMessage:"Add a channel header"})})),b().createElement(_e,null,s({id:"channel_info_rhs.about_area_id",defaultMessage:"ID:"})," ",t.id))};ve.propTypes={gmUsers:u().array.isRequired,actions:u().shape({editChannelHeader:u().func.isRequired}).isRequired};const Ce=ve,Me=I().div.withConfig({displayName:"Container"})(["overflow-wrap:anywhere;padding:24px;padding-bottom:12px;font-size:14px;line-height:20px;& .status-wrapper{height:50px;}& .text-empty{padding:0px;background:transparent;border:0px;color:rgba(var(--center-channel-color-rgb),0.75);}"]),ye=e=>{let{channel:t,dmUser:a,gmUsers:n,canEditChannelProperties:s,actions:i}=e;return b().createElement(Me,null,t.type===h.Ay.DM_CHANNEL&&a&&b().createElement(me,{channel:t,dmUser:a,actions:{editChannelHeader:i.editChannelHeader}}),t.type===h.Ay.GM_CHANNEL&&n&&b().createElement(Ce,{channel:t,gmUsers:n,actions:{editChannelHeader:i.editChannelHeader}}),[h.Ay.OPEN_CHANNEL,h.Ay.PRIVATE_CHANNEL].includes(t.type)&&b().createElement(X,{channel:t,canEditChannelProperties:s,actions:i}))};ye.propTypes={gmUsers:u().array,canEditChannelProperties:u().bool.isRequired,actions:u().shape({editChannelPurpose:u().func.isRequired,editChannelHeader:u().func.isRequired}).isRequired};const Se=ye;var Ne=a(87131);const Re=I().i.withConfig({displayName:"Icon"})(["font-size:12px;"]),Te=I().span.withConfig({displayName:"HeaderTitle"})(["line-height:2.4rem;"]),Ae=e=>{let{channel:t,isArchived:a,isMobile:n,onClose:s}=e;const{formatMessage:i}=(0,q.useIntl)();return b().createElement("div",{className:"sidebar--right__header"},b().createElement("span",{className:"sidebar--right__title"},n&&b().createElement("button",{className:"sidebar--right__back btn btn-icon btn-sm",onClick:s,"aria-label":i({id:"rhs_header.back.icon",defaultMessage:"Back Icon"})},b().createElement("i",{className:"icon icon-arrow-back-ios"})),b().createElement("h2",null,b().createElement(Te,{id:"rhsPanelTitle"},b().createElement(q.FormattedMessage,{id:"channel_info_rhs.header.title",defaultMessage:"Info"})),t.display_name&&b().createElement("span",{className:"style--none sidebar--right__title__subtitle"},a&&b().createElement(Re,{className:"icon icon-archive-outline"}),t.display_name))),b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close"})},b().createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close btn btn-icon btn-sm","aria-label":i({id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"}),onClick:s},b().createElement("i",{className:"icon icon-close"}))))};Ae.propTypes={isArchived:u().bool.isRequired,isMobile:u().bool.isRequired,onClose:u().func.isRequired};const Pe=Ae;var Ie=a(53654);const we=I().nav.withConfig({displayName:"MenuContainer"})(["display:flex;flex-direction:column;align-items:flex-start;padding:16px 0;font-size:14px;line-height:20px;color:rgb(var(--center-channel-color-rgb));"]),xe=I().button.withConfig({displayName:"MenuItemButton"})(["display:flex;flex-direction:row;align-items:center;width:100%;height:40px;padding:8px 16px;background:none;border:none;text-align:left;cursor:pointer;&:hover{background:rgba(var(--center-channel-color-rgb),0.08);}"]),Fe=I().div.withConfig({displayName:"Icon"})(["color:rgba(var(--center-channel-color-rgb),var(--icon-opacity));"]),ke=I().div.withConfig({displayName:"MenuItemText"})(["padding-left:8px;flex:1;"]),He=I().div.withConfig({displayName:"RightSide"})(["display:flex;color:rgba(var(--center-channel-color-rgb),0.75);"]),Le=I().div.withConfig({displayName:"Badge"})(["font-size:12px;line-height:18px;width:20px;display:flex;place-content:center;"]);function qe(e){const{icon:t,text:a,opensSubpanel:n,badge:s,onClick:i,id:r}=e,l=void 0!==s||n;return b().createElement(xe,{onClick:i,"aria-label":a,type:"button",id:r||""},b().createElement(Fe,null,t),b().createElement(ke,null,a),l&&b().createElement(He,null,void 0!==s&&b().createElement(Le,null,s),n&&b().createElement(Fe,null,b().createElement("i",{className:"icon icon-chevron-right"}))))}function Oe(e){const{formatMessage:t}=(0,q.useIntl)(),{channel:a,channelStats:n,isArchived:s,className:i,actions:r}=e,[l,o]=(0,f.useState)(!0),c=a.type!==h.YM.DM_CHANNEL&&!s,d=a.type!==h.YM.DM_CHANNEL,m=(null==n?void 0:n.files_count)>=0?null==n?void 0:n.files_count:0;return(0,f.useEffect)((()=>(r.getChannelStats(a.id,!0).then((()=>{o(!1)})),()=>{o(!0)})),[a.id]),b().createElement(we,{className:i,"data-testid":"channel_info_rhs-menu","aria-label":t({id:"channel_info_rhs.menu.title",defaultMessage:"Channel Info Actions"})},c&&b().createElement(qe,{id:"channelInfoRHSNotificationSettings",icon:b().createElement("i",{className:"icon icon-bell-outline"}),text:t({id:"channel_info_rhs.menu.notification_preferences",defaultMessage:"Notification Preferences"}),onClick:r.openNotificationSettings}),d&&b().createElement(qe,{icon:b().createElement("i",{className:"icon icon-account-outline"}),text:t({id:"channel_info_rhs.menu.members",defaultMessage:"Members"}),opensSubpanel:!0,badge:n.member_count,onClick:()=>r.showChannelMembers(a.id)}),b().createElement(qe,{icon:b().createElement("i",{className:"icon icon-pin-outline"}),text:t({id:"channel_info_rhs.menu.pinned",defaultMessage:"Pinned messages"}),opensSubpanel:!0,badge:null==n?void 0:n.pinnedpost_count,onClick:()=>r.showPinnedPosts(a.id)}),b().createElement(qe,{icon:b().createElement("i",{className:"icon icon-file-text-outline"}),text:t({id:"channel_info_rhs.menu.files",defaultMessage:"Files"}),opensSubpanel:!0,badge:l?b().createElement(Ie.A,null):m,onClick:()=>r.showChannelFiles(a.id)}))}qe.propTypes={icon:u().element.isRequired,text:u().string.isRequired,opensSubpanel:u().bool,badge:u().oneOfType([u().string,u().number,u().element]),onClick:u().func.isRequired,id:u().string},Oe.propTypes={isArchived:u().bool.isRequired,className:u().string,actions:u().shape({openNotificationSettings:u().func.isRequired,showChannelFiles:u().func.isRequired,showPinnedPosts:u().func.isRequired,showChannelMembers:u().func.isRequired,getChannelStats:u().func.isRequired}).isRequired};var Be=a(61293);const De=I().div.withConfig({displayName:"ChannelInfoRhsTopButtons"})(["display:flex;color:rgba(var(--center-channel-color-rgb),0.75);margin-top:24px;padding:0 18px;"]),Ue=I().button.withConfig({displayName:"Button"})(["flex:1;padding:12px 0 10px 0;border:0;margin:0 6px;background:rgba(var(--center-channel-color-rgb),0.04);border-radius:4px;&:hover{background:rgba(var(--center-channel-color-rgb),0.08);color:rgba(var(--center-channel-color-rgb),0.8);& i{color:rgba(var(--center-channel-color-rgb),var(--icon-opacity-hover));}}&:active,&.active{background:rgba(var(--button-bg-rgb),0.08);color:var(--button-bg);& i{color:var(--button-bg-rgb);}}& i{color:rgba(var(--center-channel-color-rgb),var(--icon-opacity));font-size:24px;}& span{font-size:10px;font-weight:600;line-height:16px;}"]),Ge=I()(Ue).withConfig({displayName:"CopyButton"})(["transition:background-color 0.5s ease;&:active,&.active{background:rgba(var(--center-channel-color-rgb),0.08);color:rgba(var(--center-channel-color-rgb),0.75);transition:none;}&.success{background:var(--online-indicator);color:var(--button-color);& i{color:var(--button-color);}}"]);function Ve(e){let{channelType:t,channelURL:a,isFavorite:n,isMuted:s,isInvitingPeople:i,canAddPeople:r,actions:l}=e;const{formatMessage:o}=(0,q.useIntl)(),c=(0,Be.A)({text:a||"",successCopyTimeout:1e3}),d=[h.Ay.OPEN_CHANNEL,h.Ay.PRIVATE_CHANNEL].includes(t)&&r||t===h.Ay.GM_CHANNEL,m=[h.Ay.OPEN_CHANNEL,h.Ay.PRIVATE_CHANNEL].includes(t),u=n?"icon-star":"icon-star-outline",p=o(n?{id:"channel_info_rhs.top_buttons.favorited",defaultMessage:"Favorited"}:{id:"channel_info_rhs.top_buttons.favorite",defaultMessage:"Favorite"}),g=s?"icon-bell-off-outline":"icon-bell-outline",f=o(s?{id:"channel_info_rhs.top_buttons.muted",defaultMessage:"Muted"}:{id:"channel_info_rhs.top_buttons.mute",defaultMessage:"Mute"}),E=c.copiedRecently?"icon-check":"icon-link-variant",_=c.copiedRecently?o({id:"channel_info_rhs.top_buttons.copied",defaultMessage:"Copied"}):o({id:"channel_info_rhs.top_buttons.copy",defaultMessage:"Copy Link"});return b().createElement(De,null,b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"channel_info_rhs.top_buttons.favorite.tooltip",defaultMessage:"Add this channel to favorites"})},b().createElement(Ue,{onClick:l.toggleFavorite,className:n?"active":"","aria-label":p,id:"channelInfoRHSAddFavoriteButton"},b().createElement("div",null,b().createElement("i",{className:"icon "+u})),b().createElement("span",null,p))),b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"channel_info_rhs.top_buttons.mute.tooltip",defaultMessage:"Mute notifications for this channel"})},b().createElement(Ue,{onClick:l.toggleMute,className:s?"active":"","aria-label":f,id:"channelInfoRHSMuteChannelButton"},b().createElement("div",null,b().createElement("i",{className:"icon "+g})),b().createElement("span",null,f))),d&&b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"channel_info_rhs.top_buttons.add_people.tooltip",defaultMessage:"Add team members to this channel"})},b().createElement(Ue,{onClick:l.addPeople,className:i?"active":"",id:"channelInfoRHSAddPeopleButton"},b().createElement("div",null,b().createElement("i",{className:"icon icon-account-plus-outline"})),b().createElement("span",null,b().createElement(q.FormattedMessage,{id:"channel_info_rhs.top_buttons.add_people",defaultMessage:"Add People"})))),m&&b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"channel_info_rhs.top_buttons.copy_link.tooltip",defaultMessage:"Copy link to this channel"})},b().createElement(Ge,{onClick:c.onClick,className:c.copiedRecently?"success":"","aria-label":_},b().createElement("div",null,b().createElement("i",{className:"icon "+E})),b().createElement("span",null,_))))}Ve.propTypes={channelType:u().string.isRequired,channelURL:u().string,isFavorite:u().bool.isRequired,isMuted:u().bool.isRequired,isInvitingPeople:u().bool.isRequired,canAddPeople:u().bool.isRequired,actions:u().shape({toggleFavorite:u().func.isRequired,toggleMute:u().func.isRequired,addPeople:u().func.isRequired}).isRequired};const ze=I().div.withConfig({displayName:"Divider"})(["width:88%;border:1px solid rgba(var(--center-channel-color-rgb),0.04);margin:0 auto;"]),We=e=>{let{channel:t,channelStats:a,isArchived:n,isFavorite:s,isMuted:i,isInvitingPeople:r,isMobile:l,currentTeam:o,currentUser:c,dmUser:d,channelMembers:m,canManageMembers:u,canManageProperties:p,actions:g}=e;const f=c.id,E=(0,L.vV)()+"/"+o.name+"/channels/"+t.name,_=m.filter((e=>e.id!==c.id)),v=!n&&p;return b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body"},b().createElement(Pe,{channel:t,isArchived:n,isMobile:l,onClose:g.closeRightHandSide}),b().createElement(Ve,{channelType:t.type,channelURL:E,isFavorite:s,isMuted:i,isInvitingPeople:r,canAddPeople:u,actions:{toggleFavorite:()=>{s?g.unfavoriteChannel(t.id):g.favoriteChannel(t.id)},toggleMute:()=>{i?g.unmuteChannel(f,t.id):g.muteChannel(f,t.id)},addPeople:()=>t.type===h.Ay.GM_CHANNEL?g.openModal({modalId:h.IQ.CREATE_DM_CHANNEL,dialogType:H.default,dialogProps:{isExistingChannel:!0,focusOriginElement:"channelInfoRHSAddPeopleButton"}}):g.openModal({modalId:h.IQ.CHANNEL_INVITE,dialogType:w.A,dialogProps:{channel:t}})}}),b().createElement(Se,{channel:t,dmUser:d,gmUsers:_,canEditChannelProperties:v,actions:{editChannelHeader:()=>g.openModal({modalId:h.IQ.EDIT_CHANNEL_HEADER,dialogType:F.A,dialogProps:{channel:t}}),editChannelPurpose:()=>g.openModal({modalId:h.IQ.EDIT_CHANNEL_PURPOSE,dialogType:k.A,dialogProps:{channel:t}})}}),b().createElement(ze,null),b().createElement(Oe,{channel:t,channelStats:a,isArchived:n,actions:{openNotificationSettings:()=>g.openModal({modalId:h.IQ.CHANNEL_NOTIFICATIONS,dialogType:x.A,dialogProps:{channel:t,currentUser:c,focusOriginElement:"channelInfoRHSNotificationSettings"}}),showChannelFiles:g.showChannelFiles,showPinnedPosts:g.showPinnedPosts,showChannelMembers:g.showChannelMembers,getChannelStats:g.getChannelStats}}))};We.propTypes={isArchived:u().bool.isRequired,isFavorite:u().bool.isRequired,isMuted:u().bool.isRequired,isInvitingPeople:u().bool.isRequired,isMobile:u().bool.isRequired,canManageMembers:u().bool.isRequired,canManageProperties:u().bool.isRequired,dmUser:u().shape({display_name:u().string.isRequired,is_guest:u().bool.isRequired,status:u().string.isRequired}),channelMembers:u().array.isRequired,actions:u().shape({closeRightHandSide:u().func.isRequired,unfavoriteChannel:u().func.isRequired,favoriteChannel:u().func.isRequired,unmuteChannel:u().func.isRequired,muteChannel:u().func.isRequired,openModal:u().func.isRequired,showChannelFiles:u().func.isRequired,showPinnedPosts:u().func.isRequired,showChannelMembers:u().func.isRequired,getChannelStats:u().func.isRequired}).isRequired};const Ye=(0,f.memo)(We),je={member_count:0,guest_count:0,pinnedpost_count:0,files_count:0},Ke=(0,n.connect)((function(e){const t=(0,r.Lw)(e),a=(0,v.HW)(e),n=(0,l.H7)(e),s=(0,r.Wh)(e)||je,i=(0,r.JT)(e),o=(0,r.TJ)(e),c=(0,r.cP)(e),d=(0,T.o)(e,h.IQ.CHANNEL_INVITE)||(0,T.o)(e,h.IQ.CREATE_DM_CHANNEL),m=(0,R.w3)(e),u=(null==t?void 0:t.type)===h.YM.PRIVATE_CHANNEL,p={channel:t,currentUser:a,currentTeam:n,isArchived:i,isFavorite:o,isMuted:c,isInvitingPeople:d,isMobile:m,canManageMembers:(0,C.Ec)(e,null==n?void 0:n.id,null==t?void 0:t.id,u?_.xB.MANAGE_PRIVATE_CHANNEL_MEMBERS:_.xB.MANAGE_PUBLIC_CHANNEL_MEMBERS),canManageProperties:(0,C.Ec)(e,null==n?void 0:n.id,null==t?void 0:t.id,u?_.xB.MANAGE_PRIVATE_CHANNEL_PROPERTIES:_.xB.MANAGE_PUBLIC_CHANNEL_PROPERTIES),channelStats:s,channelMembers:(0,M.Gv)(e)};if((null==t?void 0:t.type)===h.YM.DM_CHANNEL){const n=(0,M.wz)(e,(0,A.zj)(t.name,a.id));p.dmUser={user:n,display_name:(0,A.GZ)(e,n),is_guest:(0,y.P)(n.roles),status:(0,M.CB)(e,n.id)}}return p}),(function(e){return{actions:(0,i.zH)({closeRightHandSide:o.bP,unfavoriteChannel:E.XJ,favoriteChannel:E.yc,unmuteChannel:S.c2,muteChannel:S.vW,openModal:N.q,showChannelFiles:o.QK,showPinnedPosts:o.H3,showChannelMembers:o.sQ,getChannelStats:E.Fe},e)}}))(Ye);a(74883),a(3188),a(30973),a(76685);var Qe=a(56707),Je=a(8361),Ze=a(77440),Xe=a(73996),$e=a(65357),et=a(89247),tt=(a(59297),a(43813),a(54823),a(29012),a(46177)),at=a.n(tt),nt=a(17085),st=a(44553),it=a(80050),rt=a(17518),lt=a(62939),ot=a(24284),ct=a(19513);const dt=I().div.withConfig({displayName:"Title"})(["flex:1;font-family:'Open Sans',sans-serif;font-weight:600;font-size:14px;line-height:20px;"]),ht=I().div.withConfig({displayName:"Actions"})(["button + button{margin-left:8px;}"]),mt=I().button.withConfig({displayName:"Button"})(["border:none;background:transparent;width:fit-content;padding:8px 16px;border-radius:4px;font-size:12px;font-weight:600;line-height:16px;&.add-members,&.manage-members-done{background-color:var(--button-bg);color:var(--button-color);&:hover,&:active,&:focus{background:linear-gradient(0deg,rgba(var(--center-channel-color-rgb),0.16),rgba(var(--center-channel-color-rgb),0.16)),var(--button-bg);color:var(--button-color);}}&.manage-members{background:rgba(var(--button-bg-rgb),0.08);color:var(--button-bg);&:hover,&:focus{background:rgba(var(--button-bg-rgb),0.12);}&:active{background:rgba(var(--button-bg-rgb),0.16);}}"]),ut=I().i.withConfig({displayName:"ButtonIcon"})(["font-size:14.4px;"]),pt=e=>{let{className:t,channelType:a,membersCount:n,canManageMembers:s,editing:i,actions:r}=e;const l=a!==h.Ay.GM_CHANNEL&&n>1,o=(0,f.useCallback)((e=>{(0,ct.e)(e,h.Ay.KeyCodes.ESCAPE)&&i&&r.stopEditing()}),[i,r]);return(0,f.useEffect)((()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)})),[o]),b().createElement("div",{className:t},b().createElement(dt,null,i?b().createElement(q.FormattedMessage,{id:"channel_members_rhs.action_bar.managing_title",defaultMessage:"Managing Members"}):b().createElement(q.FormattedMessage,{id:"channel_members_rhs.action_bar.members_count_title",defaultMessage:"{members_count} members",values:{members_count:n}})),s&&b().createElement(ht,null,i?b().createElement(mt,{onClick:r.stopEditing,className:"manage-members-done"},b().createElement(q.FormattedMessage,{id:"channel_members_rhs.action_bar.done_button",defaultMessage:"Done"})):b().createElement(b().Fragment,null,l&&b().createElement(mt,{className:"manage-members",onClick:r.startEditing},b().createElement(q.FormattedMessage,{id:"channel_members_rhs.action_bar.manage_button",defaultMessage:"Manage"})),b().createElement(mt,{onClick:r.inviteMembers,className:"add-members"},b().createElement(ut,{className:"icon-account-plus-outline",title:"Add Icon"}),b().createElement(q.FormattedMessage,{id:"channel_members_rhs.action_bar.add_button",defaultMessage:"Add"})))))};pt.propTypes={className:u().string,channelType:u().string.isRequired,membersCount:u().number.isRequired,canManageMembers:u().bool.isRequired,editing:u().bool.isRequired,actions:u().shape({startEditing:u().func.isRequired,stopEditing:u().func.isRequired,inviteMembers:u().func.isRequired}).isRequired};const gt=I()(pt)(["display:flex;flex-direction:row;align-items:center;padding:16px 20px;"]),ft=I().span.withConfig({displayName:"HeaderTitle"})(["line-height:2.4rem;"]),bt=e=>{let{channel:t,canGoBack:a,onClose:n,goBack:s}=e;const{formatMessage:i}=(0,q.useIntl)();return b().createElement("div",{className:"sidebar--right__header"},b().createElement("span",{className:"sidebar--right__title"},a&&b().createElement("button",{className:"sidebar--right__back btn btn-icon btn-sm",onClick:s,"aria-label":i({id:"rhs_header.back.icon",defaultMessage:"Back Icon"})},b().createElement("i",{className:"icon icon-arrow-back-ios"})),b().createElement("h2",null,b().createElement(ft,{id:"rhsPanelTitle"},b().createElement(q.FormattedMessage,{id:"channel_members_rhs.header.title",defaultMessage:"Members"})),t.display_name&&b().createElement("span",{className:"style--none sidebar--right__title__subtitle"},t.display_name))),b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close"})},b().createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close btn btn-icon btn-sm","aria-label":i({id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"}),onClick:n},b().createElement("i",{className:"icon icon-close"}))))};bt.propTypes={canGoBack:u().bool.isRequired,onClose:u().func.isRequired,goBack:u().func.isRequired};const Et=bt;var _t=a(50639),vt=a(98566);const Ct=e=>{let{className:t,terms:a,onInput:n}=e;const{formatMessage:s}=(0,q.useIntl)();let i;return a.length>0&&(i=b().createElement("button",{className:"style--none",onClick:()=>n(""),"aria-label":s({id:"channel_members_rhs.search_bar.aria.cancel_search_button",defaultMessage:"cancel members search"})},b().createElement("i",{className:"icon icon-close-circle"}))),b().createElement("div",{className:t},b().createElement(vt.A,{"data-testid":"channel-member-rhs-search",value:a,onInput:e=>n(e.currentTarget.value),inputPrefix:b().createElement("i",{className:"icon icon-magnify"}),inputSuffix:i,placeholder:s({id:"channel_members_rhs.search_bar.placeholder",defaultMessage:"Search members"}),useLegend:!1}))};Ct.propTypes={className:u().string,terms:u().string.isRequired,onInput:u().func.isRequired};const Mt=I()(Ct)(["display:flex;padding:0px 20px 12px;.Input_container .Input_wrapper{padding:0 8px;}"]);function yt(e){let{channel:t,currentUserIsChannelAdmin:a,searchTerms:n,membersCount:i,canGoBack:r,teamUrl:l,channelMembers:o,canManageMembers:c,editing:d=!1,actions:m}=e;const u=(0,s.useHistory)(),[p,g]=(0,f.useState)([]),[E,_]=(0,f.useState)(0),[v,C]=(0,f.useState)(!1),{formatMessage:M}=(0,q.useIntl)(),{structuredAttributes:y,loading:S}=(0,it.Ay)(it.ck.Channel,t.id,t.policy_enforced),N=""!==n,R=t.name===h.Ay.DEFAULT_CHANNEL,T=N||i>=20;(0,f.useEffect)((()=>()=>{m.setChannelMembersRhsSearchTerm("")}),[]),(0,f.useEffect)((()=>{const e=[];let t=!1;for(let s=0;s<o.length;s++){var a;const i=o[s];if(0===e.length){var n;let a=null;!0===(null===(n=i.membership)||void 0===n?void 0:n.scheme_admin)?a=b().createElement(q.FormattedMessage,{id:"channel_members_rhs.list.channel_admin_title",defaultMessage:"CHANNEL ADMINS"}):(a=b().createElement(q.FormattedMessage,{id:"channel_members_rhs.list.channel_members_title",defaultMessage:"MEMBERS"}),t=!0),e.push({type:_t.w.FirstSeparator,data:b().createElement("div",{className:"channel-members-rhs__member-list-separator channel-members-rhs__member-list-separator--first"},a)})}else t||!1!==(null===(a=i.membership)||void 0===a?void 0:a.scheme_admin)||(e.push({type:_t.w.Separator,data:b().createElement("div",{className:"channel-members-rhs__member-list-separator"},b().createElement(q.FormattedMessage,{id:"channel_members_rhs.list.channel_members_title",defaultMessage:"MEMBERS"}))}),t=!0);e.push({type:_t.w.Member,data:i})}JSON.stringify(p)!==JSON.stringify(e)&&g(e)}),[o]),(0,f.useEffect)((()=>{if(t.type===h.Ay.DM_CHANNEL){let e=m.closeRightHandSide;return r&&(e=m.goBack),void e()}_(0),C(!1),m.setChannelMembersRhsSearchTerm(""),m.loadProfilesAndReloadChannelMembers(0,100,t.id,nt.cM.Admin),m.loadMyChannelMemberAndRole(t.id)}),[t.id,t.type]);const A=(0,f.useCallback)(at()((async e=>{await m.searchProfilesAndChannelMembers(e,{in_team_id:t.team_id,in_channel_id:t.id})}),h.Ay.SEARCH_TIMEOUT_MILLISECONDS),[m.searchProfilesAndChannelMembers]);(0,f.useEffect)((()=>{n&&A(n)}),[n]);const P=(0,f.useCallback)((async e=>{await m.openDirectChannelToUserId(e.id),u.push(l+"/messages/@"+e.username),await m.closeRightHandSide()}),[m.openDirectChannelToUserId,u,l,m.closeRightHandSide]),I=(0,f.useCallback)((async()=>{C(!0),await m.loadProfilesAndReloadChannelMembers(E+1,100,t.id,nt.cM.Admin),_(E+1),C(!1)}),[m.loadProfilesAndReloadChannelMembers,E,t.id]);return b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body channel-members-rhs"},b().createElement(Et,{channel:t,canGoBack:r,onClose:m.closeRightHandSide,goBack:m.goBack}),t.policy_enforced&&b().createElement("div",{className:"channel-members-rhs__alert-container policy-enforced"},b().createElement(st.A,{mode:"info",variant:"app",title:M({id:"channel_members_rhs.policy_enforced_restrictions",defaultMessage:"Channel access is restricted by user attributes"})},y.length>0&&b().createElement(ot.A,null,y.flatMap((e=>e.values.map((t=>{return b().createElement(lt.A,{key:"".concat(e.name,"-").concat(t),tooltipTitle:(a=e.name,a.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))),text:t});var a}))))),S&&b().createElement("span",{className:"loading-indicator"},"Loading..."))),b().createElement(gt,{channelType:t.type,membersCount:i,canManageMembers:c,editing:d,actions:{startEditing:()=>m.setEditChannelMembers(!0),stopEditing:()=>m.setEditChannelMembers(!1),inviteMembers:()=>t.type===h.Ay.GM_CHANNEL?m.openModal({modalId:h.IQ.CREATE_DM_CHANNEL,dialogType:H.default,dialogProps:{isExistingChannel:!0,focusOriginElement:"channelInfoRHSAddPeopleButton"}}):m.openModal({modalId:h.IQ.CHANNEL_INVITE,dialogType:w.A,dialogProps:{channel:t}})}}),d&&R&&!a&&b().createElement("div",{className:"channel-members-rhs__alert-container"},b().createElement(st.A,{mode:"info",variant:"app",message:M({id:"channel_members_rhs.default_channel_moderation_restrictions",defaultMessage:"In this channel, you can only remove guests. Only <link>channel admins</link> can manage other members."},{link:e=>b().createElement(rt.A,{href:"https://docs.mattermost.com/welcome/about-user-roles.html#channel-admin",location:"channel_members_rhs"},e)})})),T&&b().createElement(Mt,{terms:n,onInput:async e=>{m.setChannelMembersRhsSearchTerm(e)}}),b().createElement("div",{className:"channel-members-rhs__members-container"},o.length>0&&b().createElement(_t.A,{searchTerms:n,members:p,editing:d,channel:t,openDirectMessage:P,fetchRemoteClusterInfo:m.fetchRemoteClusterInfo,loadMore:I,hasNextPage:o.length<i,isNextPageLoading:v})))}yt.propTypes={currentUserIsChannelAdmin:u().bool.isRequired,membersCount:u().number.isRequired,searchTerms:u().string.isRequired,canGoBack:u().bool.isRequired,teamUrl:u().string.isRequired,channelMembers:u().array.isRequired,canManageMembers:u().bool.isRequired,editing:u().bool.isRequired,actions:u().shape({openModal:u().func.isRequired,openDirectChannelToUserId:u().func.isRequired,closeRightHandSide:u().func.isRequired,goBack:u().func.isRequired,setChannelMembersRhsSearchTerm:u().func.isRequired,loadProfilesAndReloadChannelMembers:u().func.isRequired,loadMyChannelMemberAndRole:u().func.isRequired,setEditChannelMembers:u().func.isRequired,searchProfilesAndChannelMembers:u().func.isRequired,fetchRemoteClusterInfo:u().func.isRequired}).isRequired};const St=(e,t,a,n,s)=>{const i=[];return e.forEach((e=>{if(!n[e.id])return;const r=e.remote_id&&(0,Xe.un)(s,e.remote_id)||void 0;i.push({user:e,membership:n[e.id],status:t[e.id],displayName:(0,y.R4)(e,a),remoteDisplayName:r})})),i.sort(((e,t)=>{var a,n,s;return(null===(a=e.membership)||void 0===a?void 0:a.scheme_admin)===(null===(n=t.membership)||void 0===n?void 0:n.scheme_admin)?e.displayName.localeCompare(t.displayName):!0===(null===(s=e.membership)||void 0===s?void 0:s.scheme_admin)?-1:1})),i},Nt=(0,Je.Mz)("getProfiles",M.a6,M.si,Ze.K3,r.H9,(e=>e),St),Rt=(0,Je.Mz)("searchProfiles",((e,t)=>(0,M.cG)(e,t,!1)),M.si,Ze.K3,r.H9,(e=>e),St),Tt=(0,n.connect)((function(e){const t=(0,r.Lw)(e),a=(0,l.H7)(e),n=(0,r.tW)(e),{member_count:s}=(0,r.Wh)(e)||{member_count:0};if(!t)return{channel:{},currentUserIsChannelAdmin:!1,channelMembers:[],channelAdmins:[],searchTerms:"",membersCount:s,canManageMembers:!1,canGoBack:!1,teamUrl:""};const i=(0,r.JT)(e),o=t.type===h.YM.PRIVATE_CHANNEL,c=(0,C.Ec)(e,null==a?void 0:a.id,t.id,o?_.xB.MANAGE_PRIVATE_CHANNEL_MEMBERS:_.xB.MANAGE_PUBLIC_CHANNEL_MEMBERS)&&!i,m=e.views.search.channelMembersRhsSearch||"";let u=[];u=""===m?Nt(e):Rt(e,m.trim());const p=(0,l._p)(e),g=(0,d.SB)(e),f=g===h._n.CHANNEL_INFO||g===h._n.CHANNEL_FILES||g===h._n.PIN,b=Boolean(f),E=(0,d.k7)(e);return{channel:t,currentUserIsChannelAdmin:n&&n.scheme_admin,membersCount:s,searchTerms:m,teamUrl:p,canGoBack:b,canManageMembers:c,channelMembers:u,editing:E}}),(function(e){return{actions:(0,i.zH)({openModal:N.q,openDirectChannelToUserId:S.q6,closeRightHandSide:o.bP,goBack:o.OE,setChannelMembersRhsSearchTerm:et.iv,loadProfilesAndReloadChannelMembers:$e.fQ,loadMyChannelMemberAndRole:E.pS,setEditChannelMembers:o.TH,searchProfilesAndChannelMembers:$e.uh,fetchRemoteClusterInfo:Qe.l8},e)}}))(yt);var At=a(77143),Pt=a(78417),It=a(1396),wt=a(52729),xt=a(34574),Ft=a(61452),kt=a(85507),Ht=a(80163),Lt=a(38335),qt=a(85406),Ot=a(39487),Bt=a(26241),Dt=a(21413),Ut=a(1754);function Gt(e){let{content:t,onExited:a,className:n}=e;const{formatMessage:s}=(0,q.useIntl)(),i=(0,f.useCallback)((()=>{a()}),[a]),r=(0,f.useCallback)((()=>{var e;null===(e=t.undo)||void 0===e||e.call(t),a()}),[t.undo,a]),l=g()("info-toast",n);return(0,f.useEffect)((()=>{const e=setTimeout((()=>{a()}),5e3);return()=>clearTimeout(e)}),[a]),b().createElement(V.A,{in:Boolean(t),classNames:"toast",mountOnEnter:!0,unmountOnExit:!0,timeout:300,appear:!0},b().createElement("div",{className:l},t.icon,b().createElement("span",null,t.message),t.undo&&b().createElement("button",{onClick:r,className:"info-toast__undo"},s({id:"post_info.edit.undo",defaultMessage:"Undo"})),b().createElement("button",{className:"info-toast__icon_button",onClick:i,"aria-label":s({id:"general_button.close",defaultMessage:"Close"})},b().createElement("i",{className:"icon icon-close"}))))}Gt.propTypes={content:u().shape({icon:u().element,message:u().string.isRequired,undo:u().func}).isRequired,className:u().string,onExited:u().func.isRequired};const Vt=b().memo(Gt);var zt=a(35145),Wt=a(10943),Yt=a(77828),jt=a(41468),Kt=a(14696);const Qt=(0,q.defineMessages)({title:{id:"post_info.edit.restore",defaultMessage:"Restore this version"},titleQuestion:{id:"post_info.edit.restore_question",defaultMessage:"Restore this version?"}}),Jt=e=>{let{post:t,postHeader:a,actions:n,onExited:s}=e;const{formatMessage:i}=(0,q.useIntl)(),r=()=>s(),l=b().createElement("div",{className:"edit-post-history__restore__modal__header"},i(Qt.titleQuestion));return b().createElement(Kt.zW,{compassDesign:!0,onExited:r,enforceFocus:!1,id:"restorePostModal","aria-labelledby":"restorePostModalLabel",modalHeaderText:l,handleCancel:r,cancelButtonClassName:"cancel-button",handleConfirm:async()=>{await n.handleRestore(t),r()}},b().createElement("div",{className:"edit-post-history__restore__modal__content"},a,b().createElement(Wt.A,{post:t,overflowType:"ellipsis",maxHeight:100,showPostEditedIndicator:!1}),b().createElement(Ut.A,{post:t,isEditHistory:!0,disableDownload:!0,disableActions:!0})))};Jt.propTypes={postHeader:u().element.isRequired,actions:u().shape({handleRestore:u().func.isRequired}).isRequired,onExited:u().func.isRequired};const Zt=(0,f.memo)(Jt),Xt=[Yt.hp.Kg,Yt.hp.HA],$t=(0,q.defineMessages)({helpText:{id:"post_info.edit.restore",defaultMessage:"Restore this version"},currentVersionText:{id:"post_info.edit.current_version",defaultMessage:"Current Version"},ariaLabelMessage:{id:"post_info.edit.aria_label",defaultMessage:"Select to restore an old message."}}),ea=e=>{var t;let{post:a,isCurrent:s=!1,postCurrentVersion:i,actions:r}=e;const{formatMessage:l}=(0,q.useIntl)(),[o,c]=(0,f.useState)(s),d=(0,n.useDispatch)(),m=(0,n.useSelector)(Dt.K7),u=(0,f.useCallback)((e=>{e.stopPropagation();const t={modalId:h.IQ.RESTORE_POST_MODAL,dialogType:Zt,dialogProps:{post:a,postHeader:M,actions:{handleRestore:p}}};r.openModal(t)}),[r,a]);if(!a)return null;const p=async()=>{if(!i||!a)return void r.closeRightHandSide();(await d((0,xt.tg)(a.original_id,a.id,m))).data&&(r.closeRightHandSide(),(()=>{const e={modalId:h.IQ.INFO_TOAST,dialogType:Vt,dialogProps:{content:{icon:b().createElement(qt.CheckIcon,{size:18}),message:"Restored Message",undo:E}}};r.openModal(e)})());const e=h.eN.EDIT_DRAFT+a.original_id;d((0,Bt.AB)(e,a.channel_id,a.root_id))},E=async()=>{if(!i)return void r.closeRightHandSide();const e=await d((0,xt.jY)(a.original_id));if(!e.data||0===e.data.length)return;const t=e.data[0];await d((0,xt.tg)(t.original_id,t.id,m))},_=s?b().createElement("div",{className:"edit-post-history__current__indicator"},l($t.currentVersionText)):null,v=(0,A.RG)(a.user_id),C=(0,Ot.GX)(null===(t=a.props)||void 0===t?void 0:t.override_username),M=b().createElement("div",{className:"edit-post-history__header"},b().createElement("span",{className:"profile-icon"},b().createElement(jt.A,{size:"sm",url:v,className:"avatar-post-preview"})),b().createElement("div",{className:"edit-post-history__header__username"},b().createElement(ue.A,{userId:a.user_id,disablePopover:!0,overwriteName:C}))),y=b().createElement(Wt.A,{post:a,isRHS:!0,showPostEditedIndicator:!1}),S=a.delete_at>0,N=b().createElement("div",{className:"edit-post-history__content_container"},M,b().createElement("div",{className:"post__content"},b().createElement("div",{className:"search-item-snippet post__body"},y)),b().createElement(Ut.A,{post:a,isEditHistory:S,disableDownload:S,disableActions:S})),R=s?null:b().createElement(Ne.A,{title:l($t.helpText)},b().createElement("button",{className:"edit-post-history__icon__button restore-icon",onClick:u,"aria-label":l($t.ariaLabelMessage)},b().createElement("i",{className:"icon icon-restore"}))),T=g()("edit-post-history__container",{"edit-post-history__container__background":o}),P=0===a.edit_at?a.create_at:a.edit_at;return b().createElement("div",{className:T,onClick:()=>{c((e=>!e))}},b().createElement(zt.A,{className:"a11y__section post",id:"searchResult_"+a.id,post:a},b().createElement("div",{className:"edit-post-history__title__container"},b().createElement("div",{className:"edit-post-history__date__badge__container"},b().createElement("button",{"aria-label":"Toggle to see an old message.",className:"edit-post-history__icon__button toggleCollapseButton"},b().createElement("i",{className:"icon ".concat(o?"icon-chevron-down":"icon-chevron-right")})),b().createElement("span",{className:"edit-post-history__date"},b().createElement(Yt.Ay,{value:P,ranges:Xt})),_),R),o&&N))};ea.propTypes={isCurrent:u().bool};const ta=(0,f.memo)(ea),aa=(0,n.connect)((function(e){const t=(0,d.zb)(e)||"";return{postCurrentVersion:(0,wt.f5)(e,t)}}),(function(e){return{actions:(0,i.zH)({editPost:Lt.lD,closeRightHandSide:o.bP,openModal:N.q},e)}}))(ta),na=e=>{let{channelDisplayName:t,originalPost:a}=e;const[s,i]=(0,f.useState)([]),[r,l]=(0,f.useState)(!1),[o,c]=(0,f.useState)(!1),d=(0,n.useDispatch)(),h=(0,f.useRef)(null),{formatMessage:m}=(0,q.useIntl)(),u=m({id:"post_info.edit.history.retrieveError",defaultMessage:"Unable to load edit history"}),p=m({id:"post_info.edit.history.retrieveErrorVerbose",defaultMessage:"There was an error loading the history for this message. Check your network connection or try again later."});(0,f.useEffect)((()=>{var e;(async()=>{c(!0);const e=await d((0,xt.jY)(a.id));e.data?(i(e.data),l(!1)):(l(!0),i([])),c(!1)})(),null===(e=h.current)||void 0===e||e.scrollTo({top:0})}),[a,d]),(0,f.useEffect)((()=>{i([]),l(!1)}),[a.id]);const g=m({id:"search_header.title_edit.history",defaultMessage:"Edit History"}),E=b().createElement("div",{className:"edit-post-history__error_container"},b().createElement("div",{className:"edit-post-history__error_item"},b().createElement(kt.A,{width:127,height:127}),b().createElement("p",{className:"edit-post-history__error_heading"},u),b().createElement("p",{className:"edit-post-history__error_subheading"},p)));if(o&&0===s.length)return b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body sidebar-right__edit-post-history"},b().createElement(It.A,{style:{display:"grid",placeContent:"center",flex:"1"}}));const _=[b().createElement(aa,{post:a,key:a.id,isCurrent:!0}),...s.map((e=>b().createElement(aa,{key:e.id,post:e})))];return b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body sidebar-right__edit-post-history"},b().createElement(Ft.A,{ref:h},b().createElement(Ht.A,null,b().createElement("h2",{id:"rhsPanelTitle"},g),b().createElement("div",{className:"sidebar--right__title__channel"},t)),r?E:_))},sa=(0,f.memo)(na),ia=(0,n.connect)((function(e){var t;const a=(0,d.zb)(e)||"",n=(0,wt.f5)(e,a),s=null!==(t=(0,r.Lw)(e))&&void 0!==t?t:(0,r.c)(e,n.channel_id);return{channelDisplayName:(null==s?void 0:s.display_name)||"",originalPost:n}}))(sa);var ra=a(71769),la=a(7021),oa=a(69161);function ca(e){let{role:t,children:a,id:s,className:i,rightWidthHolderRef:r,ariaLabel:l,ariaLabeledby:o}=e;const c=(0,f.useRef)(null),h=(0,n.useSelector)(d.RP),m=(0,n.useSelector)(d.v6),[u,p]=(0,f.useState)(!1),g=ra.HF[h].default,E=(0,oa.Em)(h),_=(e,t)=>{const a=r.current;a&&a.style.removeProperty(t)};return(0,f.useEffect)((()=>{const e=c.current;e&&(p(m),u&&!m&&(e.classList.add("resize-disabled"),setTimeout((()=>{e.classList.remove("resize-disabled")}),1e3)))}),[m]),b().createElement("div",{id:s,className:i,role:t,ref:c,"aria-label":l,"aria-labelledby":o||"rhsPanelTitle"},a,b().createElement(la.A,{name:"rhsResizeHandle",globalCssVar:ra.Oq.RHS,defaultWidth:g,dir:ra.Cr.RIGHT,disabled:m,containerRef:c,onResize:(e,t,a)=>{const n=r.current;n&&(E||n.style.setProperty(t,a))},onResizeEnd:_,onDividerDoubleClick:(e,t)=>{_(0,t),document.body.classList.add("layout-changing"),setTimeout((()=>{document.body.classList.remove("layout-changing")}),1e3)}}))}ca.propTypes={children:u().node.isRequired,ariaLabel:u().string,ariaLabeledby:u().string};const da=ca;var ha=a(26614),ma=a(62757),ua=a.n(ma),pa=a(91767),ga=a(70368),fa=a(19202);function ba(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ea extends b().PureComponent{constructor(){super(...arguments),ba(this,"handleBack",(e=>{switch(e.preventDefault(),this.props.previousRhsState){case h._n.CHANNEL_FILES:case h._n.SEARCH:this.props.actions.showSearchResults();break;case h._n.MENTION:this.props.actions.showMentions();break;case h._n.FLAG:this.props.actions.showFlaggedPosts();break;case h._n.PIN:this.props.actions.showPinnedPosts()}}))}render(){let e,t;switch(this.props.previousRhsState){case h._n.SEARCH:case h._n.MENTION:t=b().createElement(q.FormattedMessage,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to search results"});break;case h._n.FLAG:t=b().createElement(q.FormattedMessage,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to saved messages"});break;case h._n.PIN:t=b().createElement(q.FormattedMessage,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to pinned messages"})}const a=b().createElement(b().Fragment,null,b().createElement(q.FormattedMessage,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand the right sidebar"}),b().createElement(fa.h,{shortcut:fa.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0})),n=b().createElement(b().Fragment,null,b().createElement(q.FormattedMessage,{id:"rhs_header.collapseSidebarTooltip",defaultMessage:"Collapse the right sidebar"}),b().createElement(fa.h,{shortcut:fa.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0}));t&&(e=b().createElement(Ne.A,{title:t},b().createElement("button",{className:"sidebar--right__back btn btn-icon btn-sm",onClick:this.handleBack,"aria-label":this.props.intl.formatMessage({id:"rhs_header.back.icon",defaultMessage:"Back Icon"})},b().createElement("i",{className:"icon icon-arrow-back-ios"}))));const s=this.props.intl.formatMessage({id:"rhs_header.collapseSidebarTooltip.icon",defaultMessage:"Collapse Sidebar Icon"}),i=this.props.intl.formatMessage({id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"});return b().createElement("div",{className:"sidebar--right__header"},b().createElement("span",{className:"sidebar--right__title",id:"rhsPanelTitle"},e,b().createElement(q.FormattedMessage,{id:"search_header.title5",defaultMessage:"Extra information"})),b().createElement("div",{className:"pull-right"},b().createElement(Ne.A,{title:this.props.isExpanded?n:a},b().createElement("button",{type:"button",className:"sidebar--right__expand btn btn-icon btn-sm","aria-label":this.props.isExpanded?s:i,onClick:this.props.actions.toggleRhsExpanded},b().createElement("i",{className:"icon icon-arrow-expand"}),b().createElement("i",{className:"icon icon-arrow-collapse"}))),b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close"})},b().createElement("button",{type:"button",className:"sidebar--right__close btn btn-icon btn-sm","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},b().createElement("i",{className:"icon icon-close","aria-label":this.props.intl.formatMessage({id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"})})))))}}ba(Ea,"propTypes",{isExpanded:u().bool.isRequired,actions:u().shape({showMentions:u().func.isRequired,showSearchResults:u().func.isRequired,showFlaggedPosts:u().func.isRequired,showPinnedPosts:u().func.isRequired,closeRightHandSide:u().func.isRequired,toggleRhsExpanded:u().func.isRequired}).isRequired});const _a=(0,q.injectIntl)(Ea),va=(0,n.connect)((function(e){return{isExpanded:(0,d.v6)(e)}}),(function(e){return{actions:(0,i.zH)({showMentions:o.NP,showSearchResults:o.A4,showFlaggedPosts:o.LF,showPinnedPosts:o.H3,closeRightHandSide:o.bP,toggleRhsExpanded:o.XH},e)}}))(_a);var Ca=a(89092);function Ma(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ya extends b().Component{constructor(e){super(e),Ma(this,"handleScroll",(()=>{this.state.isScrolling||this.setState({isScrolling:!0}),this.scrollStopAction.fireAfter(h.Ay.SCROLL_DELAY)})),Ma(this,"handleScrollStop",(()=>{this.setState({isScrolling:!1})})),Ma(this,"handleClick",(()=>{this.props.isMobileView&&(0,pa.O3)()})),this.scrollStopAction=new Ca.A(this.handleScrollStop),this.state={isScrolling:!1}}shouldComponentUpdate(e,t){var a,n,s,i;return!ua()(null===(a=e.selected)||void 0===a||null===(n=a.props)||void 0===n?void 0:n.card,null===(s=this.props.selected)||void 0===s||null===(i=s.props)||void 0===i?void 0:i.card)||t.isScrolling!==this.state.isScrolling}render(){if(null==this.props.selected)return b().createElement("div",null);const{selected:e,pluginPostCardTypes:t,teamUrl:a}=this.props,n=e.type;let i=null;if(t&&Object.hasOwn(t,n)){const a=t[n].component;i=b().createElement(a,{post:e})}if(!i){var r;const t=(0,Ot.GX)(null===(r=e.props)||void 0===r?void 0:r.card);i=b().createElement("div",{className:"info-card"},b().createElement(O.A,{message:t}))}let l=b().createElement(ue.A,{userId:e.user_id,hideStatus:!0,disablePopover:!0});const o=(0,Ot.GX)(e.props.override_username);o&&this.props.enablePostUsernameOverride&&(l=b().createElement(ue.A,{userId:e.user_id,hideStatus:!0,disablePopover:!0,overwriteName:o}));const c=b().createElement(ga.A,{compactDisplay:!1,post:e,userId:e.user_id});return b().createElement("div",{className:"sidebar-right__body sidebar-right__card"},b().createElement(va,{previousRhsState:this.props.previousRhsState}),b().createElement(Ft.A,{onScroll:this.handleScroll},b().createElement("div",{className:"post-right__scroll"},i,b().createElement("div",{className:"d-flex post-card--info"},b().createElement("div",{className:"post-card--post-by overflow--ellipsis"},b().createElement(q.FormattedMessage,{id:"rhs_card.message_by",defaultMessage:"Message by {avatar} {user}",values:{user:l,avatar:c}})),b().createElement("div",{className:"post-card--view-post"},b().createElement(s.Link,{to:"".concat(a,"/pl/").concat(e.id),className:"post__permalink",onClick:this.handleClick},b().createElement(q.FormattedMessage,{id:"rhs_card.jump",defaultMessage:"Jump"})))))))}}Ma(ya,"defaultProps",{pluginPostCardTypes:{}});const Sa=(0,n.connect)((function(e){const t=(0,d.y3)(e);return{enablePostUsernameOverride:"true"===(0,ha.zj)(e).EnablePostUsernameOverride,isMobileView:(0,R.w3)(e),selected:t,pluginPostCardTypes:e.plugins.postCardTypes,teamUrl:(0,l._p)(e)}}))(ya);var Na=a(71892),Ra=a(62563),Ta=a(11638),Aa=a(92008),Pa=a(62975),Ia=a(18913),wa=a(28704),xa=a(83007),Fa=a(91600);function ka(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ha extends b().PureComponent{constructor(){super(...arguments),ka(this,"handleBack",(e=>{switch(e.preventDefault(),this.props.previousRhsState){case h._n.SEARCH:case h._n.MENTION:case h._n.FLAG:case h._n.PIN:this.props.goBack()}})),ka(this,"handleJumpClick",(()=>{this.props.isMobileView&&this.props.closeRightHandSide(),this.props.setRhsExpanded(!1);const e=this.props.relativeTeamUrl;(0,xa.J)().push("".concat(e,"/pl/").concat(this.props.rootPostId))})),ka(this,"handleFollowChange",(()=>{const{currentTeam:e,currentUserId:t,rootPostId:a,isFollowingThread:n}=this.props;e&&this.props.setThreadFollow(t,e.id,a,!n)})),ka(this,"popout",(async()=>{const{currentTeam:e,intl:t,rootPostId:a,focusPost:n,currentUserId:s}=this.props;e&&await(0,Fa.gf)(t,a,e.name,((e,t)=>{n(e,t,s,{skipRedirectReplyPermalink:!0})}))}))}render(){let e;const{isFollowingThread:t}=this.props,{formatMessage:a}=this.props.intl,n=b().createElement(q.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close"});let s;switch(this.props.previousRhsState){case h._n.SEARCH:case h._n.MENTION:s=b().createElement(q.FormattedMessage,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to search results"});break;case h._n.FLAG:s=b().createElement(q.FormattedMessage,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to saved messages"});break;case h._n.PIN:s=b().createElement(q.FormattedMessage,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to pinned messages"})}const i=this.props.isExpanded?b().createElement(b().Fragment,null,b().createElement(q.FormattedMessage,{id:"rhs_header.collapseSidebarTooltip",defaultMessage:"Collapse the right sidebar"}),b().createElement(fa.h,{shortcut:fa.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0})):b().createElement(b().Fragment,null,b().createElement(q.FormattedMessage,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand the right sidebar"}),b().createElement(fa.h,{shortcut:fa.A.navExpandSidebar,hideDescription:!0,isInsideTooltip:!0})),r=this.props.channel.display_name;s&&(e=b().createElement(Ne.A,{title:s},b().createElement("button",{className:"sidebar--right__back btn btn-icon btn-sm",onClick:this.handleBack,"aria-label":a({id:"rhs_header.back.icon",defaultMessage:"Back Icon"})},b().createElement("i",{className:"icon icon-arrow-back-ios"}))));const l=a({id:"rhs_header.collapseSidebarTooltip.icon",defaultMessage:"Collapse Sidebar Icon"}),o=a({id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"});return b().createElement("div",{className:"sidebar--right__header"},b().createElement("span",{className:"sidebar--right__title",id:"rhsPanelTitle"},e,b().createElement(q.FormattedMessage,{id:"rhs_header.details",defaultMessage:"Thread"}),r&&b().createElement("button",{onClick:this.handleJumpClick,className:"style--none sidebar--right__title__channel"},r)),b().createElement("div",{className:"controls"},this.props.isCollapsedThreadsEnabled?b().createElement(wa.A,{className:"sidebar--right__follow__thread",isFollowing:t,onClick:this.handleFollowChange}):null,b().createElement(Ia.A,{onClick:this.popout}),b().createElement(Ne.A,{title:i},b().createElement("button",{type:"button",className:"sidebar--right__expand btn btn-icon btn-sm","aria-label":this.props.isExpanded?l:o,onClick:this.props.toggleRhsExpanded},b().createElement("i",{className:"icon icon-arrow-expand"}),b().createElement("i",{className:"icon icon-arrow-collapse"}))),b().createElement(Ne.A,{title:n},b().createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close btn btn-icon btn-sm","aria-label":"Close",onClick:this.props.closeRightHandSide},b().createElement("i",{className:"icon icon-close","aria-label":a({id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"})})))))}}ka(Ha,"propTypes",{isExpanded:u().bool.isRequired,isMobileView:u().bool.isRequired,rootPostId:u().string.isRequired,relativeTeamUrl:u().string.isRequired,isCollapsedThreadsEnabled:u().bool.isRequired,isFollowingThread:u().bool,currentUserId:u().string.isRequired,setRhsExpanded:u().func.isRequired,showMentions:u().func.isRequired,showSearchResults:u().func.isRequired,showFlaggedPosts:u().func.isRequired,showPinnedPosts:u().func.isRequired,goBack:u().func.isRequired,closeRightHandSide:u().func.isRequired,toggleRhsExpanded:u().func.isRequired,setThreadFollow:u().func.isRequired,focusPost:u().func.isRequired});const La=(0,q.injectIntl)(Ha),qa={setRhsExpanded:o.N7,showSearchResults:o.A4,showMentions:o.NP,showFlaggedPosts:o.LF,showPinnedPosts:o.H3,showChannelFiles:o.QK,closeRightHandSide:o.bP,toggleRhsExpanded:o.XH,setThreadFollow:Na.ap,goBack:o.OE,focusPost:Ta.V},Oa=(0,n.connect)((function(){const e=(0,Ra.pL)();return function(t,a){let{rootPostId:n}=a,s=!1;const i=(0,Ze.WW)(t),r=(0,wt.f5)(t,n),o=(0,M.WR)(t);if(r&&i){const a=e(t,r);if(s=a.is_following,null===s&&0===a.reply_count){const e=(0,M.nY)(t),a=(0,Pa.cS)(r.message);s=(0,Aa.kX)(e,a)}}return{isExpanded:(0,d.v6)(t),isMobileView:(0,R.w3)(t),relativeTeamUrl:(0,l._p)(t),currentTeam:(0,l.H7)(t),currentUserId:o,isCollapsedThreadsEnabled:i,isFollowingThread:s}}}),qa)(La);var Ba=a(4562);const Da=e=>{let{currentTeam:t,channel:a,selected:s,previousRhsState:i}=e;const r=(0,n.useDispatch)();return(0,f.useEffect)((()=>{null!=a&&a.team_id&&a.team_id!==(null==t?void 0:t.id)&&r((0,o.bP)())}),[t,a,r]),null!=s&&a?b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body"},b().createElement(Oa,{rootPostId:s.id,channel:a,previousRhsState:i}),b().createElement(Ba.A,{rootPostId:s.id,useRelativeTimestamp:!0,isThreadView:!1})):b().createElement("div",null)},Ua=(0,f.memo)(Da),Ga=(0,n.connect)((function(e){return{selected:(0,d.sP)(e),channel:(0,d.FE)(e),currentTeam:(0,l.H7)(e)}}))(Ua);var Va=a(35737),za=(a(32773),a(1112),a(97309),a(10844),a(96121)),Wa=a(89735);const Ya={xs:"xsmall",sm:"small",md:"medium",lg:"large"},ja=b().forwardRef(((e,t)=>{let{placement:a="right",popoverSize:n="sm",children:s,popoverStyle:i="info",title:r,id:l,onMouseOut:o,onMouseOver:c,className:d,style:h}=e;return b().createElement(Wa.Popover,{id:l,style:h,className:d,bsStyle:i,placement:a,bsClass:"popover",title:r,bsSize:n&&Ya[n],onMouseOut:o,onMouseOver:c,ref:t},s)}));ja.propTypes={id:u().string,children:u().node,popoverStyle:u().oneOf(["info"]),popoverSize:u().oneOf(["xs","sm","md","lg"]),title:u().node,placement:u().oneOf(["bottom","top","right","left"]),className:u().string,onMouseOut:u().func,onMouseOver:u().func},ja.displayName="Popover";const Ka=b().memo(ja);var Qa=a(4565),Ja=a(33636),Za=a(32721);class Xa extends Qa.A{constructor(e){var t,a,n;super(e),t=this,n=()=>{var e,t;return null===(e=this.itemsContainerRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.parentNode},(a=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(a="getContent"))in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.popoverRef=b().createRef(),this.itemsContainerRef=b().createRef()}render(){return(0,Za.pd)(this.props.results)?b().createElement(Ka,{ref:this.popoverRef,id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},b().createElement(Ja.A,{ref:this.itemsContainerRef,id:"searchSuggestionList",results:this.props.results,selectedTerm:this.props.selection,getItemId:e=>"sbrSearchBox_item_".concat(e),onItemClick:this.props.onCompleteWord,onItemHover:this.props.onItemHover})):null}}var $a=a(32269);const en=e=>{let{results:t,matchedPretext:a,onCompleteWord:n,preventClose:s,handleEscape:i}=e;if(!(0,Za.pd)(t))return null;const r=t,l=r.items[0],o=r.terms[0],c=r.components[0];return b().createElement(Ka,{id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},b().createElement(c,{key:o,item:l,term:o,matchedPretext:a,isSelection:!1,onClick:n,preventClose:s,handleEscape:i}))};en.propTypes={onCompleteWord:u().func.isRequired,matchedPretext:u().string.isRequired,preventClose:u().func.isRequired,handleEscape:u().func.isRequired};const tn=(0,f.memo)(en),{KeyCodes:an}=h.Ay,nn={searchForm:{overflow:"visible"}},sn=e=>{const{isFocused:t,keepFocused:a,searchTerms:n,suggestionProviders:s,children:i=null}=e,r=(0,f.useRef)(),l=(0,q.useIntl)();return(0,f.useEffect)((()=>{t||a?setTimeout((()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.focus()}),0):setTimeout((()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.blur()}),0)}),[t,a]),(0,f.useEffect)((()=>{t&&!a&&n.endsWith('""')&&setTimeout((()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.focus()}),0)}),[n]),b().createElement("div",{id:e.isSideBarRight?"sbrSearchFormContainer":"searchFormContainer",className:"search-form__container"},b().createElement("form",{role:"search",className:g()(["search__form",{"search__form--focused":t}]),onSubmit:e.handleSubmit,style:nn.searchForm,autoComplete:"off","aria-labelledby":"searchBox"},b().createElement("div",{className:"search__font-icon"},b().createElement("i",{className:"icon icon-magnify icon-16"})),""!==e.searchType&&b().createElement("div",{className:"searchTypeBadge",onMouseDown:e.handleFocus},"messages"===e.searchType&&b().createElement(q.FormattedMessage,{id:"search_bar.search_types.messages",defaultMessage:"MESSAGES"}),"files"===e.searchType&&b().createElement(q.FormattedMessage,{id:"search_bar.search_types.files",defaultMessage:"FILES"}),b().createElement("i",{className:"icon icon-close icon-12",onMouseDown:()=>{e.setKeepFocused(!0)},onClick:()=>e.clearSearchType&&e.clearSearchType()})),b().createElement($a.A,{ref:t=>{r.current=t,e.getFocus&&e.getFocus(e.handleFocus)},id:e.isSideBarRight?"sbrSearchBox":"searchBox",tabIndex:"0",className:"search-bar form-control a11y__region",containerClass:"w-full","data-a11y-sort-order":"9","aria-describedby":e.isSideBarRight?"sbr-searchbar-help-popup":"searchbar-help-popup","aria-label":l.formatMessage({id:"search_bar.search",defaultMessage:"Search"}),placeholder:l.formatMessage({id:"search_bar.search",defaultMessage:"Search"}),value:e.searchTerms,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange,onKeyDown:t=>{var a;ct.e(t,an.ESCAPE)&&(null===(a=r.current)||void 0===a||a.blur(),t.stopPropagation(),t.preventDefault()),ct.e(t,an.DOWN)&&(t.preventDefault(),e.updateHighlightedSearchHint(1,!0)),ct.e(t,an.UP)&&(t.preventDefault(),e.updateHighlightedSearchHint(-1,!0)),ct.e(t,an.ENTER)&&e.handleEnterKey(t),ct.e(t,an.BACKSPACE)&&!n&&e.clearSearchType&&e.clearSearchType()},listComponent:Xa,dateComponent:tn,providers:s,type:"search",delayInputUpdate:!0,clearable:!0,onClear:e.handleClear}),e.isSearchingTerm&&b().createElement(Ie.A,null),i))};var rn=a(68124);const ln=e=>{const t=(0,n.useSelector)(ha.zj),a=(0,rn._G)(t);return e.onSearchTypeSelected&&!e.searchType?b().createElement("div",{className:"search-hint__search-type-selector",onMouseDown:e.onMouseDown},b().createElement("div",{className:"search-hint_text-container"},b().createElement(q.FormattedMessage,{id:"search_bar.usage.search_type_question",defaultMessage:"What are you searching for?"}),b().createElement(q.FormattedMessage,{id:"search_bar.usage.searchLearn",defaultMessage:"<a>Learn about search</a>",values:{a:e=>b().createElement(rt.A,{location:"search_hint",className:"search-hint_learn-search",href:"https://mattermost.com/pl/mattermost-academy-search-training"},b().createElement("span",null,e),b().createElement("i",{className:"icon icon-lightbulb-outline"}))}})),b().createElement("div",{className:"button-container"},b().createElement("button",{className:g()({highlighted:0===e.highlightedIndex}),onClick:()=>e.onSearchTypeSelected&&e.onSearchTypeSelected("messages"),onBlur:()=>e.onElementBlur&&e.onElementBlur(),onFocus:()=>e.onElementFocus&&e.onElementFocus()},b().createElement("i",{className:"icon icon-message-text-outline"}),b().createElement(q.FormattedMessage,{id:"search_bar.usage.search_type_messages",defaultMessage:"Messages"})),a&&b().createElement("button",{className:g()({highlighted:1===e.highlightedIndex}),onClick:()=>e.onSearchTypeSelected&&e.onSearchTypeSelected("files"),onBlur:()=>e.onElementBlur&&e.onElementBlur(),onFocus:()=>e.onElementFocus&&e.onElementFocus()},b().createElement("i",{className:"icon icon-file-text-outline"}),b().createElement(q.FormattedMessage,{id:"search_bar.usage.search_type_files",defaultMessage:"Files"})))):b().createElement(b().Fragment,null,e.withTitle&&!e.searchType&&b().createElement("h4",{className:"search-hint__title"},b().createElement(q.FormattedMessage,{id:"search_bar.usage.title",defaultMessage:"Search options"})),e.withTitle&&"files"===e.searchType&&b().createElement("h4",{className:"search-hint__title"},b().createElement(q.FormattedMessage,{id:"search_bar.usage.title_files",defaultMessage:"File search options"})),e.withTitle&&"messages"===e.searchType&&b().createElement("h4",{className:"search-hint__title"},b().createElement(q.FormattedMessage,{id:"search_bar.usage.title_messages",defaultMessage:"Message search options"})),b().createElement("ul",{role:"list",className:"search-hint__suggestions-list",onMouseDown:e.onMouseDown,onTouchEnd:e.onMouseDown},e.options.map(((t,a)=>b().createElement("li",{className:g()("search-hint__suggestions-list__option",{highlighted:a===e.highlightedIndex}),key:t.searchTerm,onMouseDown:()=>e.onOptionSelected(t.searchTerm),onTouchEnd:()=>e.onOptionSelected(t.searchTerm),onMouseOver:()=>(t=>{e.onOptionHover&&e.onOptionHover(t)})(a)},b().createElement("div",{className:"search-hint__suggestion-list__flex-wrap"},b().createElement("span",{className:"search-hint__suggestion-list__label"},t.additionalDisplay?t.additionalDisplay:t.searchTerm)),b().createElement("div",{className:"search-hint__suggestion-list__value"},b().createElement(q.FormattedMessage,{id:t.message.id,defaultMessage:t.message.defaultMessage})))))))};ln.propTypes={withTitle:u().bool,onOptionSelected:u().func.isRequired,onMouseDown:u().func,options:u().arrayOf(u().shape({searchTerm:u().string.isRequired,additionalDisplay:u().string})).isRequired,highlightedIndex:u().number,onOptionHover:u().func,onSearchTypeSelected:u().func,onElementBlur:u().func,onElementFocus:u().func,searchType:u().oneOf(["files","messages",""])};const on=ln;var cn=a(69813),dn=a(30112),hn=(a(29206),a(87988)),mn=a(21650),un=(a(6552),a(31655)),pn=a(18221),gn=a(64517),fn=a(17983),bn=a(99068),En=a(67416);function _n(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const vn=[Yt.hp.Kg,Yt.hp.HA];class Cn extends b().PureComponent{constructor(e){super(e),_n(this,"jumpToConv",(e=>{e.stopPropagation(),(0,xa.J)().push("/".concat(this.props.teamName,"/pl/").concat(this.props.fileInfo.post_id))})),_n(this,"copyLink",(()=>{(0,A.lW)("".concat((0,L.vV)(),"/").concat(this.props.teamName,"/pl/").concat(this.props.fileInfo.post_id))})),_n(this,"stopPropagation",(e=>{e.stopPropagation()})),_n(this,"keepOpen",(e=>{this.setState({keepOpen:e})})),_n(this,"renderPluginItems",(()=>{var e;const{fileInfo:t,channel:a,enableSharedChannelsPlugins:n}=this.props;if((null==a?void 0:a.shared)&&!n)return null;const s=null===(e=this.props.pluginMenuItems)||void 0===e?void 0:e.filter((e=>null==e?void 0:e.match(t))).map((e=>b().createElement(fn.A.ItemAction,{id:e.id+"_pluginmenuitem",key:e.id+"_pluginmenuitem",onClick:()=>{var a;return null===(a=e.action)||void 0===a?void 0:a.call(e,t)},text:e.text})));return null!=s&&s.length?b().createElement(b().Fragment,null,b().createElement("li",{id:"divider_file_".concat(this.props.fileInfo.id,"_plugins"),className:"MenuItem__divider",role:"menuitem"}),s):null})),_n(this,"showPreview",(()=>{this.props.actions.openModal({modalId:h.IQ.FILE_PREVIEW_MODAL,dialogType:gn.A,dialogProps:{fileInfos:[this.props.fileInfo],postId:this.props.fileInfo.post_id,startIndex:0}})})),this.state={keepOpen:!1}}render(){const{fileInfo:e,channelDisplayName:t,channelType:a}=this.props;let n=t;return a===h.Ay.DM_CHANNEL?n=b().createElement(q.FormattedMessage,{id:"search_item.file_tag.direct_message",defaultMessage:"Direct Message"}):a===h.Ay.GM_CHANNEL&&(n=b().createElement(q.FormattedMessage,{id:"search_item.file_tag.group_message",defaultMessage:"Group Message"})),b().createElement("div",{"data-testid":"search-item-container",className:"search-item__container"},b().createElement("button",{className:"FileSearchResultItem"+(this.state.keepOpen?" keep-open":""),onClick:this.showPreview},b().createElement(pn.A,{fileInfo:e}),b().createElement("div",{className:"fileData"},b().createElement("div",{className:"fileDataName"},e.name),b().createElement("div",{className:"fileMetadata"},n&&b().createElement(En.A,{className:"file-search-channel-name",text:n}),b().createElement("span",null,(0,A.O1)(e.size)),b().createElement("span",null,"  "),b().createElement(Yt.Ay,{value:e.create_at,ranges:vn}))),this.props.fileInfo.post_id&&b().createElement(Ne.A,{title:(0,q.defineMessage)({id:"file_search_result_item.more_actions",defaultMessage:"More Actions"})},b().createElement(bn.A,{onToggle:this.keepOpen,stopPropagationOnToggle:!0},b().createElement("a",{href:"#",className:"action-icon dots-icon btn btn-icon btn-sm"},b().createElement("i",{className:"icon icon-dots-vertical"})),b().createElement(fn.A,{ariaLabel:"file menu",openLeft:!0},b().createElement(fn.A.ItemAction,{onClick:this.jumpToConv,ariaLabel:(0,A.Vw)({id:"file_search_result_item.open_in_channel",defaultMessage:"Open in channel"}),text:(0,A.Vw)({id:"file_search_result_item.open_in_channel",defaultMessage:"Open in channel"})}),b().createElement(fn.A.ItemAction,{onClick:this.copyLink,ariaLabel:(0,A.Vw)({id:"file_search_result_item.copy_link",defaultMessage:"Copy link"}),text:(0,A.Vw)({id:"file_search_result_item.copy_link",defaultMessage:"Copy link"})}),this.renderPluginItems()))),b().createElement(Ne.A,{title:(0,q.defineMessage)({id:"file_search_result_item.download",defaultMessage:"Download"})},b().createElement("a",{className:"action-icon download-icon btn btn-icon btn-sm",href:(0,un.S1)(e.id),onClick:this.stopPropagation},b().createElement("i",{className:"icon icon-download-outline"})))))}}const Mn=(0,n.connect)((function(e,t){const a=(0,r.c)(e,t.channelId),n="true"===(0,ha.Y6)(e,"EnableSharedChannelsPlugins");return{channelDisplayName:"",channelType:null==a?void 0:a.type,channel:a,enableSharedChannelsPlugins:n}}),(function(e){return{actions:(0,i.zH)({openModal:N.q},e)}}))(Cn);var yn=a(63669),Sn=a(92243),Nn=a(50800),Rn=a(55476),Tn=a(92277);function An(e){const t=(0,q.useIntl)();return b().createElement("div",{className:"FilesFilterMenu"},b().createElement(bn.A,null,b().createElement(Ne.A,{title:b().createElement(q.FormattedMessage,{id:"channel_info_rhs.menu.files.filter",defaultMessage:"Filter"})},b().createElement(Tn.T,{id:"filesFilterButton",className:"action-icon dots-icon",type:"button"},"all"!==e.selectedFilter&&b().createElement("i",{className:"icon-dot"}),b().createElement(qt.FilterVariantIcon,{size:18,color:"currentColor"}))),b().createElement(fn.A,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.file_menu",defaultMessage:"file menu"}),openLeft:!0},b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.all_file_types",defaultMessage:"All file types"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.all_file_types",defaultMessage:"All file types"}),onClick:()=>e.onFilter("all"),icon:"all"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.documents",defaultMessage:"Documents"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.documents",defaultMessage:"Documents"}),onClick:()=>e.onFilter("documents"),icon:"documents"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.spreadsheets",defaultMessage:"Spreadsheets"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.spreadsheets",defaultMessage:"Spreadsheets"}),onClick:()=>e.onFilter("spreadsheets"),icon:"spreadsheets"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.presentations",defaultMessage:"Presentations"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.presentations",defaultMessage:"Presentations"}),onClick:()=>e.onFilter("presentations"),icon:"presentations"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.code",defaultMessage:"Code"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.code",defaultMessage:"Code"}),onClick:()=>e.onFilter("code"),icon:"code"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.images",defaultMessage:"Images"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.images",defaultMessage:"Images"}),onClick:()=>e.onFilter("images"),icon:"images"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.audio",defaultMessage:"Audio"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.audio",defaultMessage:"Audio"}),onClick:()=>e.onFilter("audio"),icon:"audio"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}),b().createElement(fn.A.ItemAction,{ariaLabel:t.formatMessage({id:"channel_info_rhs.menu.files.filter.videos",defaultMessage:"Videos"}),text:t.formatMessage({id:"channel_info_rhs.menu.files.filter.videos",defaultMessage:"Videos"}),onClick:()=>e.onFilter("video"),icon:"video"===e.selectedFilter?b().createElement("i",{className:"icon icon-check"}):null}))))}An.propTypes={selectedFilter:u().string.isRequired,onFilter:u().func.isRequired};var Pn=a(96760);const{KeyCodes:In}=h.Ay;function wn(e){const t=(0,n.useSelector)((e=>(0,d.Qe)(e))),a=(0,n.useSelector)(l.vt).length>1,s=(0,f.useRef)(null),i=(0,f.useRef)(null),r=(t,a)=>{if(ct.e(t,In.LEFT)||ct.e(t,In.RIGHT)){let n,r;return t.preventDefault(),t.stopPropagation(),a===h.cO.MESSAGES_SEARCH_TYPE&&e.isFileAttachmentsEnabled?(n=h.cO.FILES_SEARCH_TYPE,r=i):(n=h.cO.MESSAGES_SEARCH_TYPE,r=s),e.onChange(n),void(r.current&&setTimeout((()=>{document.dispatchEvent(new CustomEvent(h.pn.FOCUS,{detail:{target:r.current,keyboardOnly:!0}}))}),0))}ct.e(t,In.ENTER)&&e.onChange(a)};return b().createElement("div",{className:"MessagesOrFilesSelector"},b().createElement("div",{className:"buttons-container",role:"tablist","aria-label":"Messages or Files"},b().createElement("button",{ref:s,role:"tab","aria-selected":e.selected===h.cO.MESSAGES_SEARCH_TYPE?"true":"false",tabIndex:e.selected===h.cO.MESSAGES_SEARCH_TYPE?0:-1,"aria-controls":"messagesPanel",id:"messagesTab",onClick:()=>e.onChange(h.cO.MESSAGES_SEARCH_TYPE),onKeyDown:e=>r(e,h.cO.MESSAGES_SEARCH_TYPE),className:e.selected===h.cO.MESSAGES_SEARCH_TYPE?"active tab messages-tab":"tab messages-tab"},b().createElement(q.FormattedMessage,{id:"search_bar.messages_tab",defaultMessage:"Messages"}),b().createElement("span",{className:"counter"},e.messagesCounter)),e.isFileAttachmentsEnabled&&b().createElement("button",{ref:i,role:"tab","aria-selected":e.selected===h.cO.FILES_SEARCH_TYPE?"true":"false",tabIndex:e.selected===h.cO.FILES_SEARCH_TYPE?0:-1,"aria-controls":"filesPanel",id:"filesTab",onClick:()=>e.onChange(h.cO.FILES_SEARCH_TYPE),onKeyDown:e=>r(e,h.cO.FILES_SEARCH_TYPE),className:e.selected===h.cO.FILES_SEARCH_TYPE?"active tab files-tab":"tab files-tab"},b().createElement(q.FormattedMessage,{id:"search_bar.files_tab",defaultMessage:"Files"}),b().createElement("span",{className:"counter"},e.filesCounter))),e.crossTeamSearchEnabled&&a&&b().createElement("div",{className:"team-selector-container"},b().createElement(Pn.A,{selectedTeamId:t,onTeamSelected:e.onTeamChange})),e.selected===h.cO.FILES_SEARCH_TYPE&&b().createElement(An,{selectedFilter:e.selectedFilter,onFilter:e.onFilter}))}wn.propTypes={selected:u().string.isRequired,messagesCounter:u().string.isRequired,filesCounter:u().string.isRequired,isFileAttachmentsEnabled:u().bool.isRequired,crossTeamSearchEnabled:u().bool.isRequired,onChange:u().func.isRequired,onFilter:u().func.isRequired,onTeamChange:u().func.isRequired};var xn=a(271);function Fn(e){return b().createElement("div",{className:"search-item__container","data-testid":"search-item-container"},b().createElement(xn.A,{post:e.post,matches:e.matches,term:e.isFlaggedPosts||e.isPinnedPosts||e.isMentionSearch?"":e.searchTerm,isMentionSearch:e.isMentionSearch,a11yIndex:e.a11yIndex,location:h.Hc.SEARCH}))}Fn.propTypes={a11yIndex:u().number.isRequired,isFlaggedPosts:u().bool.isRequired,isMentionSearch:u().bool.isRequired,isPinnedPosts:u().bool.isRequired,matches:u().arrayOf(u().string).isRequired,searchTerm:u().string.isRequired};var kn=a(3468),Hn=a(70689),Ln=a(23548);function qn(e){const[t]=(0,Ln.A)(),a=(0,n.useSelector)((t=>{const a=e.searchType===h.cO.FILES_SEARCH_TYPE?"files":"posts";return(0,kn.FW)(t,a)})),s=(0,n.useSelector)(d.bM)===h._n.SEARCH;return a&&null!=t&&t.postHistoryLimit&&s?b().createElement("div",{id:"".concat(e.searchType,"_search_limits_banner"),className:"SearchLimitsBanner__wrapper"},b().createElement(Hn.A,null)):null}qn.propTypes={searchType:u().string.isRequired};const On=qn,Bn=e=>{const t=(0,f.useRef)(null),[a,s]=(0,f.useState)(e.searchType),i=(0,n.useSelector)(mn.Lt),r=(0,n.useSelector)(ha.zj),l=(0,q.useIntl)();(0,f.useEffect)((()=>{var a;"all"!==e.searchFilterType&&e.setSearchFilterType("all"),s(e.searchType),null===(a=t.current)||void 0===a||a.scrollTo({top:0})}),[e.searchTerms]),(0,f.useEffect)((()=>{s(e.searchSelectedType)}),[e.searchSelectedType]),(0,f.useEffect)((()=>{s(e.searchType)}),[e.isFlaggedPosts,e.isPinnedPosts,e.isMentionSearch]),(0,f.useEffect)((()=>{0!==e.searchPage||e.isChannelFiles||e.isSearchingTerm||setTimeout((()=>{e.getMorePostsForSearch(),e.getMoreFilesForSearch()}),100)}),[e.searchPage,e.searchTerms,e.isSearchingTerm]);const o=(0,hn.sg)((()=>{e.getMorePostsForSearch()}),100,!1,(()=>{})),c=(0,hn.sg)((()=>{e.getMoreFilesForSearch()}),100,!1,(()=>{})),{results:d,fileResults:m,searchTerms:u,isCard:p=!1,isSearchAtEnd:E,isSearchFilesAtEnd:_,isSearchingTerm:v,isFlaggedPosts:C,isSearchingFlaggedPost:M,isPinnedPosts:y,isChannelFiles:S,isSearchingPinnedPost:N,isSideBarExpanded:R,isMentionSearch:T,isOpened:A=!1,updateSearchTerms:P,handleSearchHintSelection:I,searchFilterType:w,setSearchFilterType:x}=e,F=!d||!Array.isArray(d)||0===d.length,k=!m||!Array.isArray(m)||0===m.length,H=v||M||N||!A,L=!(a===h.cO.MESSAGES_SEARCH_TYPE&&E||a===h.cO.FILES_SEARCH_TYPE&&_||S||C||y),O=!(C||T||p||y||S);let B,D,U,G=d;const V={variant:Sn.L.ChannelSearch};T?(V.variant=Sn.L.Mentions,U=(0,q.defineMessage)({id:"search_header.title2",defaultMessage:"Recent Mentions"})):C?(V.variant=Sn.L.FlaggedPosts,V.subtitleValues={buttonText:b().createElement("strong",null,l.formatMessage({id:"flag_post.flag",defaultMessage:"Save Message"}))},U=(0,q.defineMessage)({id:"search_header.title3",defaultMessage:"Saved messages"})):y?(V.variant=Sn.L.PinnedPosts,V.subtitleValues={text:b().createElement("strong",null,l.formatMessage({id:"post_info.pin",defaultMessage:"Pin to Channel"}))},G=[...d],U=(0,q.defineMessage)({id:"search_header.pinnedMessages",defaultMessage:"Pinned messages"})):S?(V.variant="all"===w?Sn.L.ChannelFiles:Sn.L.ChannelFilesFiltered,U=(0,q.defineMessage)({id:"search_header.channelFiles",defaultMessage:"Files"})):p?U=(0,q.defineMessage)({id:"search_header.title5",defaultMessage:"Extra information"}):!u&&F&&k?U=(0,q.defineMessage)({id:"search_header.search",defaultMessage:"Search"}):a!==h.cO.FILES_SEARCH_TYPE||S?(V.titleValues={channelName:"".concat(u)},U=(0,q.defineMessage)({id:"search_header.results",defaultMessage:"Search Results"})):(V.variant=Sn.L.Files,V.titleValues={searchTerm:"".concat(u)},U=(0,q.defineMessage)({id:"search_header.results",defaultMessage:"Search Results"}));const z=l.formatMessage(U),W=e=>{I(),P(e)};switch(!0){case H:B=b().createElement("div",{className:"sidebar--right__subheader a11y__section"},b().createElement("div",{className:"sidebar--right__loading"},b().createElement(Rn.A,{text:(0,q.defineMessage)({id:"search_header.loading",defaultMessage:"Searching"})})));break;case F&&!u&&!T&&!y&&!C&&!S:B=b().createElement("div",{className:"sidebar--right__subheader search__hints a11y__section"},b().createElement(on,{onOptionSelected:W,options:h.IE}));break;case F&&a===h.cO.MESSAGES_SEARCH_TYPE&&!S:case k&&(a===h.cO.FILES_SEARCH_TYPE||S):B=b().createElement("div",{className:g()(["sidebar--right__subheader a11y__section",{"sidebar-expanded":R}]),"aria-live":"polite"},b().createElement(yn.A,Object.assign({style:{padding:"48px"}},V)));break;default:(a===h.cO.FILES_SEARCH_TYPE||S)&&(G=m),B=G.map(((t,n)=>{if(a===h.cO.MESSAGES_SEARCH_TYPE&&!e.isChannelFiles){if("string"==typeof t&&(0,dn.fE)(t)){const e=(0,dn.GG)(t);return b().createElement(Nn.A,{key:e,date:e})}const a=t;return b().createElement(Fn,{key:a.id,post:a,matches:e.matches[a.id],searchTerm:u,isFlaggedPosts:e.isFlaggedPosts,isMentionSearch:e.isMentionSearch,isPinnedPosts:e.isPinnedPosts,a11yIndex:n})}return b().createElement(Mn,{key:t.id,channelId:t.channel_id,fileInfo:t,teamName:e.currentTeamName,pluginMenuItems:i})})),D=L?b().createElement("div",{className:"loading-screen"},b().createElement("div",{className:"loading__content"},b().createElement("div",{className:"round round-1"}),b().createElement("div",{className:"round round-2"}),b().createElement("div",{className:"round round-3"}))):null}return b().createElement("div",{id:"searchContainer",className:"SearchResults sidebar-right__body"},b().createElement(Ht.A,null,b().createElement("h2",{id:"rhsPanelTitle"},z),e.channelDisplayName&&b().createElement("div",{className:"sidebar--right__title__channel"},e.channelDisplayName)),O&&b().createElement(wn,{selected:a,selectedFilter:w,isFileAttachmentsEnabled:(0,rn._G)(r),messagesCounter:E||0===e.searchPage?"".concat(d.length):"".concat(d.length,"+"),filesCounter:_||0===e.searchPage?"".concat(m.length):"".concat(m.length,"+"),onChange:s,onFilter:x,onTeamChange:t=>{e.updateSearchTeam(t)},crossTeamSearchEnabled:e.crossTeamSearchEnabled}),S&&b().createElement("div",{className:"channel-files__header"},b().createElement("div",{className:"channel-files__title"},b().createElement(q.FormattedMessage,{id:"search_results.channel-files-header",defaultMessage:"Recent files"})),b().createElement(An,{selectedFilter:w,onFilter:x})),b().createElement(On,{searchType:a}),b().createElement(Ft.A,{ref:t,color:"--center-channel-color-rgb",onScroll:()=>{if(!(e.isFlaggedPosts||e.isPinnedPosts||e.isSearchingTerm||e.isSearchGettingMore||e.isChannelFiles)){var n,s,i;const e=(null===(n=t.current)||void 0===n?void 0:n.scrollHeight)||0;((null===(s=t.current)||void 0===s?void 0:s.scrollTop)||0)+((null===(i=t.current)||void 0===i?void 0:i.clientHeight)||0)+30>=e&&(a===h.cO.FILES_SEARCH_TYPE?c():o())}}},b().createElement("div",{id:"search-items-container",className:g()(["search-items-container post-list__table a11y__region",{"no-results":F&&a===h.cO.MESSAGES_SEARCH_TYPE||k&&(a===h.cO.FILES_SEARCH_TYPE||S),"channel-files-container":S}]),"data-a11y-sort-order":"3","data-a11y-focus-child":!0,"data-a11y-loop-navigation":!1,"aria-label":l.formatMessage({id:"accessibility.sections.rhs",defaultMessage:"{regionTitle} complementary region"},{regionTitle:z})},b().createElement("div",{id:"".concat(a,"Panel"),className:"files-or-messages-panel"},B),D)))},Dn=(e,t)=>{for(const a in t)if(Object.hasOwn(t,a)&&"results"!==a&&Object.hasOwn(t,a)&&"fileResults"!==a&&t[a]!==e[a])return!1;const{results:a}=e,{results:n}=t;if(a.length!==n.length)return!1;for(let e=0;e<a.length;e++)if(a[e]!==n[e])return!1;const{fileResults:s}=e,{fileResults:i}=t;if(s.length!==i.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==i[e])return!1;return!0},Un=b().memo(Bn,Dn),Gn=(0,n.connect)((function(){let e,t,a=[];const n=(0,dn.$5)();return function(s,i){var r,o,c;const h=(0,wt.p5)(s);h&&h!==e&&(e=h,i.isPinnedPosts&&(e=e.sort(((e,t)=>t.create_at-e.create_at))));const m=(0,cn.IJ)(s);m&&m!==t&&(t=m,a=[],t.forEach((e=>{e&&a.push(e)})));const u=(0,d.Wf)(s)||{},p=null!==(r=null===(o=(0,l.H7)(s))||void 0===o?void 0:o.name)&&void 0!==r?r:"";return{results:n(s,e),fileResults:a,matches:(0,wt.Un)(s),searchTerms:(0,d.Y6)(s),searchSelectedType:(0,d.t$)(s),isSearchingTerm:(0,d.PQ)(s),isSearchingFlaggedPost:(0,d.bS)(s),isSearchingPinnedPost:(0,d.Tr)(s),isSearchGettingMore:(0,d.sr)(s),isSearchAtEnd:u.isEnd,isSearchFilesAtEnd:u.isFilesEnd,searchPage:null===(c=u.params)||void 0===c?void 0:c.page,currentTeamName:p}}}))(Un);var Vn=a(65812),zn=a(21733),Wn=a(4890),Yn=a(97314),jn=a(75644),Kn=a(4715);const Qn=(e,t)=>{let a=[],n=h.IE;if("files"===t&&(n=h.PL),""===e.trim())return n;const s=e.split(/\s+/g),i=s[s.length-1],r=s[s.length-2];let l;if(l=r?!(n.some((e=>{let{searchTerm:t}=e;return r.toLowerCase().endsWith(t.toLowerCase())}))&&"@"!==r):!n.some((t=>{let{searchTerm:a}=t;return e.toLowerCase().endsWith(a.toLowerCase())}))||"@"===e,l)try{a=n.filter((e=>"@"===i&&"From:"===e.searchTerm||new RegExp(i,"ig").test(e.searchTerm)&&e.searchTerm.toLowerCase()!==i.toLowerCase()))}catch(e){a=[]}return a},Jn=e=>{let{actions:{autocompleteChannelsForSearch:t,autocompleteUsersInTeam:a,closeRightHandSide:s,filterFilesSearchByExt:i,getMoreFilesForSearch:l,getMorePostsForSearch:o,openRHSSearch:c,setRhsExpanded:d,showChannelFiles:m,showSearchResults:u,updateRhsState:p,updateSearchTeam:g,updateSearchTerms:E,updateSearchTermsForShortcut:_,updateSearchType:v},crossTeamSearchEnabled:C,hideMobileSearchBarInRHS:M=!1,isChannelFiles:y,isFlaggedPosts:S,isMentionSearch:N,isMobileView:R,isPinnedPosts:T,isRhsExpanded:A,isSearchingTerm:P,searchTeam:I,searchTerms:w="",searchType:x,searchVisible:F,channelDisplayName:k="",children:H,currentChannel:L,enableFindShortcut:O,getFocus:B,hideSearchBar:D,isSideBarRight:U=!1,isSideBarRightOpen:G}=e;const V=(0,q.useIntl)(),z=(0,n.useSelector)(r.nZ),[W,Y]=(0,f.useState)(!1),[j,K]=(0,f.useState)(!1),[Q,J]=(0,f.useState)(!1),[Z,X]=(0,f.useState)(!1),[$,ee]=(0,f.useState)(-1),[te,ae]=(0,f.useState)(Qn(w,x)),[ne,se]=(0,f.useState)("all"),ie=(0,f.useRef)([new zn.A,new Vn.A(t),new Wn.A(a)]),re=(0,Kn.y3)()&&(0,jn.l)((0,Kn.B7)(),"4.7.0");(0,f.useEffect)((()=>{if(!O)return;const e=e=>{if(ct.r(e)&&ct.e(e,h.Ay.KeyCodes.F)){if(!re&&!e.shiftKey)return;if((0,Kn.BD)()&&e.ctrlKey)return;e.preventDefault(),D&&(c(),J(!0)),z&&_(),de()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[D,z]),(0,f.useEffect)((()=>{R&&U&&de()}),[R,U]),(0,f.useEffect)((()=>{R||ae(Qn(w,x))}),[R,w,x]),(0,f.useEffect)((()=>{!R&&W&&Q&&he()}),[R,w]);const le=(0,f.useCallback)((()=>{let e=I;N&&(e=""),o(e)}),[I,N,o]),oe=(0,f.useCallback)((()=>{let e=I;N&&(e=""),l(e)}),[I,N,l]),ce=()=>s(),de=()=>Y(!0),he=()=>{setTimeout((()=>{Q?J(!1):Y(!1)}),0),_e()},me=()=>K(!1),ue=()=>K(!0),pe=()=>{W?J(!0):Y(!0)},ge=e=>{const t=(null==w?void 0:w.split(" "))||[];t.pop(),t.push(e.toLowerCase()),fe(t.join(" "))},fe=e=>{E(e),_e()},be=x||w?void 0:e=>{v(e),x||K(!1),Y(!0)},Ee=e=>{const t=e.target.value;E(t)},_e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Math.abs(e)>1)return;let a=$+e;switch(e){case 1:a=a===te.length?0:a;break;case-1:a=a<0?te.length-1:a;break;default:a=-1}ee(a),X(t)},ve=e=>{if(e.preventDefault(),Z)return J(!0),void(x||w?ge(te[$].searchTerm):(v(0===$?"messages":"files"),ee(-1)));N&&p(h._n.SEARCH),Me().then((()=>{J(!1),Y(!1)}))},Ce=e=>{e.preventDefault(),Me().then((()=>{J(!1),Y(!1)}))},Me=async()=>{if(0===w.trim().length)return;const{error:e}=await u(Boolean(N));e||ye()},ye=()=>{R&&Se()},Se=()=>{N&&(Y(!1),p(h._n.SEARCH)),E(""),g(null),v("")},Ne=e=>{ee(e),X(!1)},Re=()=>b().createElement(b().Fragment,null,b().createElement("div",{className:"sidebar-collapse__container"},b().createElement("button",{id:U?"sbrSidebarCollapse":"sidebarCollapse",className:"sidebar-collapse",onClick:ce,"aria-label":V.formatMessage({id:"channel_header.back",defaultMessage:"Back to channel"})},b().createElement("span",{className:"fa fa-2x fa-angle-left",title:V.formatMessage({id:"generic_icons.back",defaultMessage:"Back Icon"}),"aria-hidden":"true"}))),b().createElement(sn,{updateHighlightedSearchHint:_e,handleEnterKey:ve,handleClear:Se,handleChange:Ee,handleSubmit:Ce,handleFocus:de,handleBlur:he,keepFocused:Q,setKeepFocused:J,isFocused:W,suggestionProviders:ie.current,isSideBarRight:U,isSearchingTerm:P,getFocus:B,searchTerms:w,searchType:x,clearSearchType:()=>v("")},!R&&(()=>{let e=0;if(null==w||w.split(/[: ]/g).forEach((t=>{let a=h.IE;"files"===x&&(a=h.PL),a.some((e=>{let{searchTerm:a}=e;return a.toLowerCase()===t.toLowerCase()}))&&e++})),0===te.length||N)return b().createElement(b().Fragment,null);const t="search-help-popover".concat((j||W)&&e<=2?" visible":"");return b().createElement(Ka,{id:"".concat(U?"sbr-":"","searchbar-help-popup"),placement:"bottom",className:t},b().createElement(on,{options:te,withTitle:!0,onOptionSelected:ge,onMouseDown:pe,highlightedIndex:$,onOptionHover:Ne,onSearchTypeSelected:be,onElementBlur:me,onElementFocus:ue,searchType:x}))})()));return U?b().createElement("div",{className:"sidebar--right__content"},!M&&b().createElement("div",{className:"search-bar__container channel-header alt"},b().createElement("div",{className:"sidebar-right__table"},Re())),F?b().createElement(Gn,{isMentionSearch:N,isFlaggedPosts:S,isPinnedPosts:T,isChannelFiles:y,shrink:()=>{d(!1)},channelDisplayName:k,isOpened:G,updateSearchTerms:ge,updateSearchTeam:async e=>{g(e);const t=w.replace(/\bin:[^\s]*/gi,"").replace(/\s{2,}/g," ").replace(/\bfrom:[^\s]*/gi,"").replace(/\s{2,}/g," ");t.trim()!==w.trim()&&E(t),Me().then((()=>{J(!1),Y(!1)}))},handleSearchHintSelection:pe,isSideBarExpanded:A,getMorePostsForSearch:le,getMoreFilesForSearch:oe,setSearchFilterType:e=>{switch(e){case"documents":i(["doc","pdf","docx","odt","rtf","txt"]);break;case"spreadsheets":i(["xls","xlsx","ods"]);break;case"presentations":i(["ppt","pptx","odp"]);break;case"code":i(["py","go","java","kt","c","cpp","h","html","js","ts","cs","vb","php","pl","r","rb","sql","swift","json"]);break;case"images":i(["png","jpg","jpeg","bmp","tiff","svg","psd","xcf"]);break;case"audio":i(["ogg","mp3","wav","flac"]);break;case"video":i(["ogm","mp4","avi","webm","mov","mkv","mpeg","mpg"]);break;default:i([])}se(e),y&&L?m(L.id):u(!1)},searchFilterType:ne,setSearchType:e=>v(e),searchType:x||"messages",crossTeamSearchEnabled:C}):H):D?b().createElement(za.A,{buttonId:"channelHeaderSearchButton",onClick:e=>{e.preventDefault(),c()},tooltip:V.formatMessage({id:"channel_header.search",defaultMessage:"Search"})},b().createElement(Yn.A,{className:"icon icon--standard","aria-hidden":"true"})):b().createElement("div",{id:"searchbarContainer",className:"search-bar-container--global"},b().createElement("div",{className:"sidebar-right__table"},Re()))},Zn=b().memo(Jn),Xn=(0,n.connect)((function(e){const t=(0,d.bM)(e),a=(0,r.Lw)(e),n=(0,R.w3)(e),s=(0,d.A)(e),i=(0,ha.FG)(e);return{currentChannel:a,isRhsExpanded:(0,d.v6)(e),isSearchingTerm:(0,d.PQ)(e),searchTerms:(0,d.u$)(e),searchTeam:(0,d.Qe)(e),searchType:(0,d.N5)(e),searchVisible:null!==t&&![h._n.PLUGIN,h._n.CHANNEL_INFO,h._n.CHANNEL_MEMBERS,h._n.EDIT_HISTORY].includes(t),hideMobileSearchBarInRHS:n&&s&&t===h._n.CHANNEL_INFO,isMentionSearch:t===h._n.MENTION,isFlaggedPosts:t===h._n.FLAG,isPinnedPosts:t===h._n.PIN,isChannelFiles:t===h._n.CHANNEL_FILES,isMobileView:n,crossTeamSearchEnabled:i}}),(function(e){return{actions:(0,i.zH)({updateSearchTerms:o.ng,updateSearchTeam:o.j$,updateSearchTermsForShortcut:o.g7,updateSearchType:o.C_,showSearchResults:o.A4,showChannelFiles:o.QK,setRhsExpanded:o.N7,closeRightHandSide:o.bP,autocompleteChannelsForSearch:(e,t,a,n)=>(0,S.yE)(e,a,n),autocompleteUsersInTeam:$e.Ip,updateRhsState:o.CI,getMorePostsForSearch:Va.A$,openRHSSearch:o.Ci,getMoreFilesForSearch:Va.gn,filterFilesSearchByExt:o.aT},e)}}))(Zn);var $n=a(694);const es=e=>{let{showPluggable:t,pluggableId:a,title:s,pluginId:i}=e;const o=(0,q.useIntl)(),c=(0,n.useSelector)(l.H7),d=(0,n.useSelector)(r.Lw),h=(0,n.useSelector)((e=>{var t;return i?null===(t=e.plugins.plugins[i])||void 0===t?void 0:t.name:void 0})),m=(0,f.useCallback)((()=>{i&&c&&d&&(0,Fa.Y7)(o,i,null!=h?h:i,c.name,d.name)}),[o,i,c,d,h]);return b().createElement("div",{id:"rhsContainer",className:"sidebar-right__body"},b().createElement(Ht.A,{newWindowHandler:m},s),t&&b().createElement($n.default,{pluggableName:"RightHandSidebarComponent",pluggableId:a}))};es.propTypes={showPluggable:u().bool.isRequired,pluggableId:u().string.isRequired,title:u().node.isRequired,pluginId:u().string};const ts=b().memo(es),as=(0,n.connect)((function(e){const t=e.plugins.components.RightHandSidebarComponent,a=(0,d.ZI)(e),n=t.find((e=>e.id===a)),s=n?n.title:"",i=n?n.pluginId:void 0;return{showPluggable:Boolean(n),pluggableId:a,title:s,pluginId:i}}))(ts);var ns=a(76932),ss=a(30138);function is(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rs extends b().PureComponent{constructor(e){super(e),is(this,"previous",void 0),is(this,"previousActiveElement",null),is(this,"setPrevious",(()=>{this.props.isOpen&&(this.previous={searchVisible:this.props.searchVisible,isPinnedPosts:this.props.isPinnedPosts,isRecentMentions:this.props.isRecentMentions,isSavedPosts:this.props.isSavedPosts,isChannelFiles:this.props.isChannelFiles,isChannelInfo:this.props.isChannelInfo,isChannelMembers:this.props.isChannelMembers,isPostEditHistory:this.props.isPostEditHistory,selectedPostId:this.props.selectedPostId,selectedPostCardId:this.props.selectedPostCardId,previousRhsState:this.props.previousRhsState})})),is(this,"handleShortcut",(e=>{const t=(0,Kn.cX)()&&e.shiftKey,a=!(0,Kn.cX)()&&e.altKey;(0,ct.r)(e,!0)&&(e.shiftKey&&(0,ct.e)(e,h.Ay.KeyCodes.PERIOD)?(e.preventDefault(),this.props.isOpen?this.props.isExpanded?this.props.actions.setRhsExpanded(!1):this.props.actions.setRhsExpanded(!0):this.props.actions.openAtPrevious(this.previous)):(0,ct.e)(e,h.Ay.KeyCodes.PERIOD)?(e.preventDefault(),this.props.isOpen?this.props.actions.closeRightHandSide():this.props.actions.openAtPrevious(this.previous)):(0,ct.e)(e,h.Ay.KeyCodes.I)&&(t||a)&&(e.preventDefault(),this.props.isOpen&&this.props.isChannelInfo?this.props.actions.closeRightHandSide():this.props.channel&&this.props.actions.showChannelInfo(this.props.channel.id)))})),is(this,"handleClickOutside",(e=>{var t,a,n,s;!(this.props.isOpen&&this.props.isExpanded&&e.target&&null!==(t=document.getElementById("root"))&&void 0!==t&&t.contains(e.target))||null!==(a=this.sidebarRight.current)&&void 0!==a&&a.contains(e.target)||null!==(n=document.getElementById("global-header"))&&void 0!==n&&n.contains(e.target)||null!==(s=document.querySelector(".app-bar"))&&void 0!==s&&s.contains(e.target)||this.props.actions.setRhsExpanded(!1)})),is(this,"handleUpdateSearchTerms",(e=>{var t;this.props.actions.updateSearchTerms(e),null===(t=this.focusSearchBar)||void 0===t||t.call(this)})),is(this,"getSearchBarFocus",(e=>{this.focusSearchBar=e})),this.sidebarRightWidthHolder=b().createRef(),this.sidebarRight=b().createRef(),this.state={isOpened:!1}}handleRHSFocus(e){var t,a;const n=e.isOpen,s=this.props.isOpen,i=this.props.isPinnedPosts!==e.isPinnedPosts||this.props.isRecentMentions!==e.isRecentMentions||this.props.isSavedPosts!==e.isSavedPosts||this.props.isChannelFiles!==e.isChannelFiles||this.props.isChannelInfo!==e.isChannelInfo||this.props.isChannelMembers!==e.isChannelMembers||this.props.isPostEditHistory!==e.isPostEditHistory||(null===(t=this.props.rhsChannel)||void 0===t?void 0:t.id)!==(null===(a=e.rhsChannel)||void 0===a?void 0:a.id)||this.props.teamId!==e.teamId;if(this.props.isOpen&&(i||!n&&s)){if(this.previousActiveElement=document.activeElement,this.props.postRightVisible)return;setTimeout((()=>{if(this.sidebarRight.current){const e=this.sidebarRight.current.querySelector("#rhsContainer"),t=this.sidebarRight.current.querySelector("#searchContainer");if(e||t){const a=(0,ss.L)(e||t);(0,ss.p)(a||e,!0)}else{const e=(0,ss.L)(this.sidebarRight.current);(0,ss.p)(e||this.sidebarRight.current,!0)}}}),0)}else!this.props.isOpen&&n&&(ns.A.originElement?ns.A.restoreOriginFocus():setTimeout((()=>{this.previousActiveElement&&((0,ss.p)(this.previousActiveElement,!0),this.previousActiveElement=null)}),0))}componentDidMount(){document.addEventListener("keydown",this.handleShortcut),document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("keydown",this.handleShortcut),document.removeEventListener("mousedown",this.handleClickOutside)}componentDidUpdate(e){var t,a;this.handleRHSFocus(e);const{actions:n,isChannelFiles:s,isPinnedPosts:i,rhsChannel:r,channel:l}=this.props;i&&e.isPinnedPosts===i&&r&&r.id!==(null===(t=e.rhsChannel)||void 0===t?void 0:t.id)&&n.showPinnedPosts(r.id),s&&e.isChannelFiles===s&&r&&r.id!==(null===(a=e.rhsChannel)||void 0===a?void 0:a.id)&&n.showChannelFiles(r.id),(l&&e.channel&&l.id!==e.channel.id||l&&!e.channel)&&this.props.actions.setRhsExpanded(!1),(e.teamId&&this.props.teamId!==e.teamId||this.props.productId!==e.productId)&&this.props.actions.closeRightHandSide(),this.setPrevious()}render(){const{team:e,channel:t,rhsChannel:a,postRightVisible:n,postCardVisible:s,previousRhsState:i,searchVisible:r,isPluginView:l,isOpen:o,isChannelInfo:c,isChannelMembers:d,isExpanded:h,isPostEditHistory:m}=this.props;if(!o)return null;let u,p,f=null;n?(u=!0,f=b().createElement("div",{className:"post-right__container"},b().createElement(At.default,{overlayType:"right",id:Pt.wZ}),b().createElement(Ga,{previousRhsState:i}))):s?f=b().createElement(Sa,{previousRhsState:i}):l?f=b().createElement(as,null):c?(p=!0,f=b().createElement(Ke,null)):d?(p=!0,f=b().createElement(Tt,null)):m&&(f=b().createElement(ia,null));const E=Boolean(!e||u&&!a||p&&!t),_=a?a.display_name:"",v=(n||s||l||r||m)&&h,C=g()("sidebar--right","move--left is-open",{"sidebar--right--expanded expanded":v});return b().createElement(b().Fragment,null,b().createElement("div",{className:"sidebar--right sidebar--right--width-holder",ref:this.sidebarRightWidthHolder}),b().createElement(da,{className:C,id:"sidebar-right",role:"region",rightWidthHolderRef:this.sidebarRightWidthHolder,ariaLabel:this.props.ariaLabel,ariaLabeledby:this.props.ariaLabeledby},b().createElement("div",{tabIndex:-1,className:"sidebar-right-container",ref:this.sidebarRight},E?b().createElement("div",{className:"sidebar-right__body"},b().createElement(It.A,{centered:!0})):b().createElement(Xn,{isSideBarRight:!0,isSideBarRightOpen:!0,getFocus:this.getSearchBarFocus,channelDisplayName:_},f))))}}is(rs,"propTypes",{isExpanded:u().bool.isRequired,isOpen:u().bool.isRequired,postRightVisible:u().bool.isRequired,postCardVisible:u().bool.isRequired,searchVisible:u().bool.isRequired,isPinnedPosts:u().bool.isRequired,isChannelFiles:u().bool.isRequired,isChannelInfo:u().bool.isRequired,isChannelMembers:u().bool.isRequired,isPluginView:u().bool.isRequired,isPostEditHistory:u().bool.isRequired,selectedPostId:u().string.isRequired,selectedPostCardId:u().string.isRequired,isSavedPosts:u().bool,isRecentMentions:u().bool,ariaLabel:u().string,ariaLabeledby:u().string,actions:u().shape({setRhsExpanded:u().func.isRequired,showPinnedPosts:u().func.isRequired,openRHSSearch:u().func.isRequired,closeRightHandSide:u().func.isRequired,openAtPrevious:u().func.isRequired,updateSearchTerms:u().func.isRequired,showChannelFiles:u().func.isRequired,showChannelInfo:u().func.isRequired}).isRequired});const ls=(0,s.withRouter)((0,n.connect)((function(e,t){var a;const n=(0,d.bM)(e),s=(0,r.Lw)(e),i=(0,l.H7)(e),o=null!==(a=null==i?void 0:i.id)&&void 0!==a?a:"",m=(0,c._u)(e,t.location.pathname),u=(0,d.zb)(e),p=(0,d.Fd)(e);return{isExpanded:(0,d.v6)(e),isOpen:(0,d.A)(e),channel:s,postRightVisible:Boolean(u)&&n!==h._n.EDIT_HISTORY,postCardVisible:Boolean(p),searchVisible:Boolean(n)&&n!==h._n.PLUGIN,previousRhsState:(0,d.SB)(e),isPinnedPosts:n===h._n.PIN,isChannelFiles:n===h._n.CHANNEL_FILES,isChannelInfo:n===h._n.CHANNEL_INFO,isChannelMembers:n===h._n.CHANNEL_MEMBERS,isPluginView:n===h._n.PLUGIN,isPostEditHistory:n===h._n.EDIT_HISTORY,isRecentMention:n===h._n.MENTION,isSavedPosts:n===h._n.FLAG,rhsChannel:(0,d.FE)(e),selectedPostId:u,selectedPostCardId:p,team:i,teamId:o,productId:m}}),(function(e){return{actions:(0,i.zH)({setRhsExpanded:o.N7,showPinnedPosts:o.H3,openRHSSearch:o.Ci,closeRightHandSide:o.bP,openAtPrevious:o.J8,updateSearchTerms:o.ng,showChannelFiles:o.QK,showChannelInfo:o.Vl},e)}}))(rs))},97314:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(36418),s=a.n(n),i=a(14778);function r(e){const{formatMessage:t}=(0,i.useIntl)();return s().createElement("span",e,s().createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 17 17",role:"img","aria-label":t({id:"generic_icons.search",defaultMessage:"Search Icon"})},s().createElement("path",{d:"M16.398 15.138L13.014 11.754C13.458 11.178 13.8 10.548 14.04 9.86399C14.28 9.14399 14.4 8.40599 14.4 7.64999C14.4 6.42599 14.094 5.29199 13.482 4.24799C12.882 3.22799 12.072 2.41799 11.052 1.81799C10.008 1.20599 8.874 0.899988 7.65 0.899988C6.426 0.899988 5.292 1.20599 4.248 1.81799C3.228 2.41799 2.418 3.22799 1.818 4.24799C1.206 5.29199 0.9 6.42599 0.9 7.64999C0.9 8.87399 1.206 10.008 1.818 11.052C2.418 12.072 3.228 12.882 4.248 13.482C5.292 14.094 6.426 14.4 7.65 14.4C8.406 14.4 9.138 14.274 9.846 14.022C10.53 13.794 11.16 13.458 11.736 13.014L15.138 16.398C15.306 16.566 15.516 16.65 15.768 16.65C16.02 16.65 16.23 16.56 16.398 16.38C16.566 16.212 16.65 16.008 16.65 15.768C16.65 15.528 16.566 15.318 16.398 15.138ZM2.7 7.64999C2.7 6.74999 2.922 5.92199 3.366 5.16599C3.81 4.40999 4.41 3.80999 5.166 3.36599C5.922 2.92199 6.75 2.69999 7.65 2.69999C8.55 2.69999 9.378 2.92199 10.134 3.36599C10.89 3.80999 11.49 4.40999 11.934 5.16599C12.378 5.92199 12.6 6.74999 12.6 7.64999C12.6 8.54999 12.378 9.37799 11.934 10.134C11.49 10.89 10.89 11.49 10.134 11.934C9.378 12.378 8.55 12.6 7.65 12.6C6.75 12.6 5.922 12.378 5.166 11.934C4.41 11.49 3.81 10.89 3.366 10.134C2.922 9.37799 2.7 8.54999 2.7 7.64999Z"})))}}}]);
//# sourceMappingURL=1781.76148515a2559efd3291.js.map