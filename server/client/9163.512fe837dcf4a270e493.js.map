{"version":3,"file":"9163.512fe837dcf4a270e493.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/settings_sidebar/settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\nexport type Tab = {\r\n    icon: string | {url: string};\r\n    iconTitle: string;\r\n    name: string;\r\n    uiName: string;\r\n    newGroup?: boolean;\r\n    display?: boolean; // Controls whether the tab is displayed, defaults to true\r\n}\r\n\r\nexport type Props = {\r\n    activeTab?: string;\r\n    tabs: Tab[];\r\n    pluginTabs?: Tab[];\r\n    updateTab: (name: string) => void;\r\n    isMobileView: boolean;\r\n};\r\n\r\nexport default class SettingsSidebar extends React.PureComponent<Props> {\r\n    buttonRefs: Map<string, HTMLButtonElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.buttonRefs = new Map();\r\n    }\r\n\r\n    // Get all visible tabs in the correct order\r\n    private getVisibleTabs(): Tab[] {\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n        const visiblePluginTabs = this.props.pluginTabs?.filter((tab) => tab.display !== false) || [];\r\n        return [...visibleTabs, ...visiblePluginTabs];\r\n    }\r\n\r\n    public handleClick = (tab: Tab, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        this.props.updateTab(tab.name);\r\n        (e.target as Element).closest('.settings-modal')?.classList.add('display--content');\r\n    };\r\n\r\n    public handleKeyDown = (tab: Tab, e: React.KeyboardEvent) => {\r\n        // Only handle UP and DOWN arrow keys\r\n        if (!isKeyPressed(e, Constants.KeyCodes.UP) && !isKeyPressed(e, Constants.KeyCodes.DOWN)) {\r\n            return;\r\n        }\r\n\r\n        // Prevent scrolling\r\n        e.preventDefault();\r\n\r\n        // Get all visible tabs\r\n        const visibleTabs = this.getVisibleTabs();\r\n\r\n        // If no tabs are visible, do nothing\r\n        if (visibleTabs.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Find the current tab's position in the visible tabs\r\n        const currentIndex = visibleTabs.findIndex((t) => t.name === tab.name);\r\n\r\n        // If tab not found in visible tabs, do nothing\r\n        if (currentIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        let nextIndex: number;\r\n\r\n        // Determine which tab to focus based on the key pressed\r\n        if (isKeyPressed(e, Constants.KeyCodes.UP)) {\r\n            // UP arrow key - move to previous tab or wrap to last\r\n            nextIndex = currentIndex > 0 ? currentIndex - 1 : visibleTabs.length - 1;\r\n        } else {\r\n            // DOWN arrow key - move to next tab or wrap to first\r\n            nextIndex = currentIndex < visibleTabs.length - 1 ? currentIndex + 1 : 0;\r\n        }\r\n\r\n        // Get the target tab\r\n        const targetTab = visibleTabs[nextIndex];\r\n\r\n        // Update the active tab\r\n        this.props.updateTab(targetTab.name);\r\n\r\n        // Focus the target tab button directly\r\n        const targetButton = this.buttonRefs.get(targetTab.name);\r\n        if (targetButton) {\r\n            // Use direct focus instead of a11yFocus to ensure Cypress tests can detect the focus change\r\n            targetButton.focus();\r\n        }\r\n    };\r\n\r\n    private renderTab(tab: Tab) {\r\n        const key = `${tab.name}_li`;\r\n        const isActive = this.props.activeTab === tab.name;\r\n\r\n        let icon;\r\n        if (typeof tab.icon === 'string') {\r\n            icon = (\r\n                <i\r\n                    className={tab.icon}\r\n                    title={tab.iconTitle}\r\n                />\r\n            );\r\n        } else {\r\n            icon = (\r\n                <img\r\n                    src={tab.icon.url}\r\n                    alt={tab.iconTitle}\r\n                    className='icon'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <React.Fragment key={key}>\r\n                {tab.newGroup && <hr/>}\r\n                <button\r\n                    data-testid={`${tab.name}-tab-button`}\r\n                    ref={(element: HTMLButtonElement) => {\r\n                        if (element) {\r\n                            this.buttonRefs.set(tab.name, element);\r\n                        } else {\r\n                            this.buttonRefs.delete(tab.name);\r\n                        }\r\n                    }}\r\n                    id={`${tab.name}Button`}\r\n                    className={classNames('cursor--pointer style--none nav-pills__tab', {active: isActive})}\r\n                    onClick={this.handleClick.bind(null, tab)}\r\n                    onKeyDown={this.handleKeyDown.bind(null, tab)}\r\n                    aria-label={tab.uiName.toLowerCase()}\r\n                    role='tab'\r\n                    aria-selected={isActive}\r\n                    tabIndex={!isActive && !this.props.isMobileView ? -1 : 0}\r\n                    aria-controls={`${tab.name}Settings`}\r\n                >\r\n                    {icon}\r\n                    {tab.uiName}\r\n                </button>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    public render() {\r\n        // Filter regular tabs and plugin tabs separately for rendering\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n\r\n        // Map regular tabs\r\n        const tabList = visibleTabs.map((tab) => this.renderTab(tab));\r\n\r\n        let pluginTabList: React.ReactNode;\r\n        if (this.props.pluginTabs?.length) {\r\n            const visiblePluginTabs = this.props.pluginTabs.filter((tab) => tab.display !== false);\r\n            if (visiblePluginTabs.length) {\r\n                pluginTabList = (\r\n                    <>\r\n                        <hr/>\r\n                        <div\r\n                            role='group'\r\n                            aria-labelledby='userSettingsModal.pluginPreferences.header'\r\n                        >\r\n                            <div\r\n                                key={'plugin preferences heading'}\r\n                                role='heading'\r\n                                className={'header'}\r\n                                aria-level={3}\r\n                                id='userSettingsModal_pluginPreferences_header'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id={'userSettingsModal.pluginPreferences.header'}\r\n                                    defaultMessage={'PLUGIN PREFERENCES'}\r\n                                />\r\n                            </div>\r\n                            {visiblePluginTabs.map((tab) => this.renderTab(tab))}\r\n                        </div>\r\n                    </>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='tabList'\r\n                className='nav nav-pills nav-stacked'\r\n                role='tablist'\r\n                aria-orientation='vertical'\r\n            >\r\n                <div role='group'>\r\n                    {tabList}\r\n                </div>\r\n                {pluginTabList}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport SettingsSidebar from './settings_sidebar';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SettingsSidebar);\r\n"],"names":["SettingsSidebar","React","constructor","props","super","_defineProperty","tab","e","_closest","preventDefault","this","updateTab","name","target","closest","classList","add","isKeyPressed","Constants","KeyCodes","UP","DOWN","visibleTabs","getVisibleTabs","length","currentIndex","findIndex","t","nextIndex","targetTab","targetButton","buttonRefs","get","focus","Map","_this$props$pluginTab","tabs","filter","display","pluginTabs","renderTab","key","concat","isActive","activeTab","icon","className","title","iconTitle","src","url","alt","newGroup","ref","element","set","delete","id","classNames","active","onClick","handleClick","bind","onKeyDown","handleKeyDown","uiName","toLowerCase","role","tabIndex","isMobileView","render","_this$props$pluginTab2","tabList","map","pluginTabList","visiblePluginTabs","FormattedMessage","defaultMessage","_pt","isRequired","connect","state","getIsMobileView"],"sourceRoot":""}