{"version":3,"file":"4896.ce0ae78eeb70e81d175d.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/shared.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/attribute_selector_menu.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/operator_selector_menu.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/multi_value_selector_menu.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/single_value_selector_menu.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/value_selector_menu.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/editors/table_editor/table_editor.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/modals/cel_help/cel_help_modal.tsx","webpack://mattermost-webapp/./src/components/admin_console/access_control/modals/policy_test/test_modal.tsx","webpack://mattermost-webapp/./src/components/admin_console/team_channel_settings/convert_confirm_modal.tsx","webpack://mattermost-webapp/./src/components/channel_settings_modal/channel_access_rules_confirm_modal.tsx","webpack://mattermost-webapp/./src/components/color_input.tsx","webpack://mattermost-webapp/./src/hooks/useChannelAccessControlActions.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/actions/access_control.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\n\r\nimport Markdown from 'components/markdown';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport './shared.scss';\r\n\r\n// CEL operator constants\r\nexport enum CELOperator {\r\n    EQUALS = '==',\r\n    NOT_EQUALS = '!=',\r\n    STARTS_WITH = 'startsWith',\r\n    ENDS_WITH = 'endsWith',\r\n    CONTAINS = 'contains',\r\n    IN = 'in',\r\n}\r\n\r\n// Operator label constants\r\nexport enum OperatorLabel {\r\n    IS = 'is',\r\n    IS_NOT = 'is not',\r\n    STARTS_WITH = 'starts with',\r\n    ENDS_WITH = 'ends with',\r\n    CONTAINS = 'contains',\r\n    IN = 'in',\r\n}\r\n\r\n// Map from CEL operator to UI label\r\nexport const OPERATOR_LABELS: Record<string, string> = {\r\n    [CELOperator.EQUALS]: OperatorLabel.IS,\r\n    [CELOperator.NOT_EQUALS]: OperatorLabel.IS_NOT,\r\n    [CELOperator.STARTS_WITH]: OperatorLabel.STARTS_WITH,\r\n    [CELOperator.ENDS_WITH]: OperatorLabel.ENDS_WITH,\r\n    [CELOperator.CONTAINS]: OperatorLabel.CONTAINS,\r\n    [CELOperator.IN]: OperatorLabel.IN,\r\n};\r\n\r\ntype OperatorType = 'comparison' | 'method' | 'list';\r\n\r\n// Map from UI label to operator configuration\r\nexport const OPERATOR_CONFIG: Record<string, {type: OperatorType; celOp: CELOperator}> = {\r\n    [OperatorLabel.IS]: {type: 'comparison', celOp: CELOperator.EQUALS},\r\n    [OperatorLabel.IS_NOT]: {type: 'comparison', celOp: CELOperator.NOT_EQUALS},\r\n    [OperatorLabel.STARTS_WITH]: {type: 'method', celOp: CELOperator.STARTS_WITH},\r\n    [OperatorLabel.ENDS_WITH]: {type: 'method', celOp: CELOperator.ENDS_WITH},\r\n    [OperatorLabel.CONTAINS]: {type: 'method', celOp: CELOperator.CONTAINS},\r\n    [OperatorLabel.IN]: {type: 'list', celOp: CELOperator.IN},\r\n};\r\n\r\n// Checks if there are any usable attributes for ABAC policies.\r\n// An attribute is usable if:\r\n// 1. It doesn't contain spaces (CEL incompatible)\r\n// 2. It's either synced from LDAP/SAML, admin-managed, OR user-managed attributes are enabled\r\nexport function hasUsableAttributes(\r\n    userAttributes: UserPropertyField[],\r\n    enableUserManagedAttributes: boolean,\r\n): boolean {\r\n    return userAttributes.some((attr) => {\r\n        const hasSpaces = attr.name.includes(' ');\r\n        const isSynced = attr.attrs?.ldap || attr.attrs?.saml;\r\n        const isAdminManaged = attr.attrs?.managed === 'admin';\r\n        const allowed = isSynced || isAdminManaged || enableUserManagedAttributes;\r\n        return !hasSpaces && allowed;\r\n    });\r\n}\r\n\r\ninterface TestButtonProps {\r\n    onClick: () => void;\r\n    disabled: boolean;\r\n    disabledTooltip?: string;\r\n}\r\n\r\ninterface AddAttributeButtonProps {\r\n    onClick: () => void;\r\n    disabled: boolean;\r\n}\r\n\r\ninterface HelpTextProps {\r\n    message: string;\r\n    onLearnMoreClick?: () => void;\r\n}\r\n\r\nexport function TestButton({onClick, disabled, disabledTooltip}: TestButtonProps): JSX.Element {\r\n    const button = (\r\n        <button\r\n            className='btn btn-sm btn-tertiary'\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n        >\r\n            <i className='icon icon-lock-outline'/>\r\n            <FormattedMessage\r\n                id='admin.access_control.table_editor.test_access_rule'\r\n                defaultMessage='Test access rule'\r\n            />\r\n        </button>\r\n    );\r\n\r\n    if (disabled && disabledTooltip) {\r\n        return (\r\n            <WithTooltip title={disabledTooltip}>\r\n                {button}\r\n            </WithTooltip>\r\n        );\r\n    }\r\n\r\n    return button;\r\n}\r\n\r\nexport function AddAttributeButton({onClick, disabled}: AddAttributeButtonProps): JSX.Element {\r\n    return (\r\n        <button\r\n            className='btn btn-sm btn-tertiary'\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n        >\r\n            <i className='icon icon-plus'/>\r\n            <FormattedMessage\r\n                id='admin.access_control.table_editor.add_attribute'\r\n                defaultMessage='Add attribute'\r\n            />\r\n        </button>\r\n    );\r\n}\r\n\r\nexport function HelpText({message, onLearnMoreClick}: HelpTextProps): JSX.Element {\r\n    return (\r\n        <div className='editor__help-text'>\r\n            <Markdown\r\n                message={message}\r\n                options={{mentionHighlight: false}}\r\n            />\r\n            {onLearnMoreClick && (\r\n                <a\r\n                    href='#'\r\n                    className='editor__learn-more'\r\n                    onClick={onLearnMoreClick}\r\n                >\r\n                    <FormattedMessage\r\n                        id='admin.access_control.table_editor.learnMore'\r\n                        defaultMessage='Learn more about creating access expressions with examples.'\r\n                    />\r\n                </a>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useMemo, useState, useEffect, useCallback, useRef} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {\r\n    CheckIcon,\r\n    MenuVariantIcon,\r\n    ChevronDownCircleOutlineIcon,\r\n    EmailOutlineIcon,\r\n    FormatListBulletedIcon,\r\n    LinkVariantIcon,\r\n    PoundIcon,\r\n    InformationOutlineIcon,\r\n    SyncIcon,\r\n    ShieldAlertOutlineIcon,\r\n} from '@mattermost/compass-icons/components';\r\nimport type IconProps from '@mattermost/compass-icons/components/props';\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\n\r\nimport * as Menu from 'components/menu';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport './selector_menus.scss';\r\n\r\n// Define AttributeIcon outside the main component\r\nconst AttributeIcon = (props: IconProps & { attribute?: UserPropertyField }) => {\r\n    const {attribute, ...iconProps} = props;\r\n    if (attribute) {\r\n        const valueType = attribute.attrs?.value_type;\r\n        if (valueType === 'email') {\r\n            return <EmailOutlineIcon {...iconProps}/>;\r\n        }\r\n        if (valueType === 'url') {\r\n            return <LinkVariantIcon {...iconProps}/>;\r\n        }\r\n        if (valueType === 'phone') {\r\n            return <PoundIcon {...iconProps}/>;\r\n        }\r\n\r\n        // If no specific value_type, check the field type\r\n        switch (attribute.type) {\r\n        case 'select':\r\n            return <ChevronDownCircleOutlineIcon {...iconProps}/>;\r\n        case 'multiselect':\r\n            return <FormatListBulletedIcon {...iconProps}/>;\r\n        case 'text':\r\n        default:\r\n            return <MenuVariantIcon {...iconProps}/>;\r\n        }\r\n    }\r\n    return <MenuVariantIcon {...iconProps}/>;\r\n};\r\n\r\ninterface AttributeSelectorProps {\r\n    currentAttribute: string;\r\n    availableAttributes: UserPropertyField[];\r\n    disabled: boolean;\r\n    onChange: (attribute: string) => void;\r\n    menuId: string;\r\n    buttonId: string;\r\n    autoOpen?: boolean;\r\n    onMenuOpened?: () => void;\r\n    enableUserManagedAttributes: boolean;\r\n}\r\n\r\nconst AttributeSelectorMenu = ({currentAttribute, availableAttributes, disabled, onChange, menuId, buttonId, autoOpen = false, onMenuOpened, enableUserManagedAttributes}: AttributeSelectorProps) => {\r\n    const {formatMessage} = useIntl();\r\n    const [filter, setFilter] = useState('');\r\n    const prevAutoOpen = useRef(false);\r\n\r\n    const onFilterChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFilter(e.target.value);\r\n    }, []); // setFilter is stable\r\n\r\n    const options = useMemo(() => {\r\n        return availableAttributes.filter((attr) => {\r\n            return attr.name.toLowerCase().includes(filter.toLowerCase());\r\n        });\r\n    }, [availableAttributes, filter]);\r\n\r\n    const handleAttributeChange = React.useCallback((attribute: string) => {\r\n        onChange(attribute);\r\n        setFilter(''); // Reset filter after selection\r\n    }, [onChange]); // setFilter is stable, onChange is a dependency\r\n\r\n    const selectedAttributeObject = useMemo(() => {\r\n        return availableAttributes.find((attr) => attr.name === currentAttribute);\r\n    }, [currentAttribute, availableAttributes]);\r\n\r\n    useEffect(() => {\r\n        if (autoOpen && !prevAutoOpen.current) {\r\n            const buttonElement = document.getElementById(buttonId);\r\n            buttonElement?.click();\r\n            if (onMenuOpened) {\r\n                onMenuOpened();\r\n            }\r\n        }\r\n        prevAutoOpen.current = autoOpen;\r\n    }, [autoOpen, buttonId, onMenuOpened]);\r\n\r\n    return (\r\n        <Menu.Container\r\n            menuButton={{\r\n                id: buttonId,\r\n                class: classNames('btn btn-transparent field-selector-menu-button', {\r\n                    disabled,\r\n                }),\r\n                children: (\r\n                    <>\r\n                        <AttributeIcon attribute={selectedAttributeObject}/>\r\n                        {currentAttribute || formatMessage({id: 'admin.access_control.table_editor.selector.select_attribute', defaultMessage: 'Select attribute'})}\r\n                    </>\r\n                ),\r\n                dataTestId: 'attributeSelectorMenuButton',\r\n                disabled,\r\n            }}\r\n            menu={{\r\n                id: menuId,\r\n                'aria-label': 'Select attribute',\r\n                className: 'select-attribute-mui-menu',\r\n            }}\r\n        >\r\n            <Menu.InputItem\r\n                key='filter_attributes'\r\n                id='filter_attributes'\r\n                type='text'\r\n                placeholder={formatMessage({id: 'admin.access_control.table_editor.selector.filter_attributes', defaultMessage: 'Search attributes...'})}\r\n                className='attribute-selector-search'\r\n                value={filter}\r\n                onChange={onFilterChange}\r\n            />\r\n            {options.map((option) => {\r\n                const {name} = option;\r\n                const hasSpaces = name.includes(' ');\r\n                const isSynced = option.attrs?.ldap || option.attrs?.saml;\r\n                const isAdminManaged = option.attrs?.managed === 'admin';\r\n                const allowed = isSynced || isAdminManaged || enableUserManagedAttributes;\r\n\r\n                const menuItem = (\r\n                    <Menu.Item\r\n                        id={`attribute-${name}`}\r\n                        key={name}\r\n                        role='menuitemradio'\r\n                        forceCloseOnSelect={true}\r\n                        aria-checked={name === currentAttribute}\r\n                        onClick={hasSpaces ? undefined : () => handleAttributeChange(name)}\r\n                        labels={<span>{name}</span>}\r\n                        disabled={hasSpaces || !allowed}\r\n                        leadingElement={\r\n                            <AttributeIcon\r\n                                attribute={option}\r\n                                size={18}\r\n                            />\r\n                        }\r\n                        trailingElements={(\r\n                            <>\r\n                                {hasSpaces && (\r\n                                    <InformationOutlineIcon\r\n                                        size={18}\r\n                                    />\r\n                                )}\r\n                                {!allowed && !isSynced && (\r\n                                    <ShieldAlertOutlineIcon\r\n                                        size={18}\r\n                                        color='rgba(var(--center-channel-color-rgb), 0.5)'\r\n                                    />\r\n                                )}\r\n                                {isSynced && (\r\n                                    <SyncIcon\r\n                                        size={18}\r\n                                        color='rgba(var(--center-channel-color-rgb), 0.5)'\r\n                                    />\r\n                                )}\r\n                                {name === currentAttribute &&\r\n                                    <CheckIcon/>\r\n                                }\r\n                            </>\r\n                        )}\r\n                    />\r\n                );\r\n\r\n                // Determine tooltip content based on conditions\r\n                let tooltipContent = null;\r\n                if (hasSpaces) {\r\n                    tooltipContent = formatMessage({\r\n                        id: 'admin.access_control.table_editor.attribute_spaces_not_supported',\r\n                        defaultMessage: 'CEL is not compatible with variable names containing spaces',\r\n                    });\r\n                } else if (!allowed) {\r\n                    tooltipContent = formatMessage({\r\n                        id: 'admin.access_control.table_editor.not_safe_to_use',\r\n                        defaultMessage: 'Values for this attribute are managed by users and should not be used for access control. Please link attribute to AD/LDAP for use in access policies.',\r\n                    });\r\n                } else if (isSynced) {\r\n                    tooltipContent = formatMessage({\r\n                        id: 'admin.access_control.table_editor.attribute_synced',\r\n                        defaultMessage: 'This attribute is synced from an external source',\r\n                    });\r\n                }\r\n\r\n                // Wrap in tooltip if needed\r\n                if (tooltipContent) {\r\n                    return (\r\n                        <WithTooltip\r\n                            key={name}\r\n                            title={tooltipContent}\r\n                        >\r\n                            <div className='menu-item-tooltip-wrapper'>\r\n                                {menuItem}\r\n                            </div>\r\n                        </WithTooltip>\r\n                    );\r\n                }\r\n\r\n                return menuItem;\r\n            })}\r\n        </Menu.Container>\r\n    );\r\n};\r\n\r\nexport default AttributeSelectorMenu;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport type {ComponentType} from 'react';\r\nimport React, {useMemo, useState} from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {defineMessage, FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {CheckIcon, ElementOfIcon, EqualIcon, FunctionIcon, NotEqualVariantIcon} from '@mattermost/compass-icons/components';\r\nimport type IconProps from '@mattermost/compass-icons/components/props';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport * as Menu from 'components/menu';\r\n\r\nimport {OperatorLabel} from '../shared';\r\nimport './selector_menus.scss';\r\n\r\ninterface OperatorSelectorProps {\r\n    currentOperator: string;\r\n    disabled: boolean;\r\n    onChange: (operator: string) => void;\r\n}\r\n\r\nconst OperatorSelectorMenu = ({currentOperator, disabled, onChange}: OperatorSelectorProps) => {\r\n    const {formatMessage} = useIntl();\r\n    const [filter, setFilter] = useState('');\r\n\r\n    const handleOperatorChange = React.useCallback((descriptor: OperatorDescriptor) => {\r\n        onChange(descriptor.id);\r\n        setFilter('');\r\n    }, [onChange]);\r\n\r\n    const currentOperatorDescriptor = useMemo(() => {\r\n        return getOperatorDescriptor(currentOperator);\r\n    }, [currentOperator]);\r\n\r\n    const CurrentOperatorIcon = currentOperatorDescriptor.icon;\r\n\r\n    const onFilterChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFilter(e.target.value);\r\n    }, []);\r\n\r\n    const filteredOperators = useMemo(() => {\r\n        return Object.values(OPERATOR_DESCRIPTORS).filter((desc) => {\r\n            const label = formatMessage(desc.label);\r\n            return label.toLowerCase().includes(filter.toLowerCase());\r\n        });\r\n    }, [filter, formatMessage]);\r\n\r\n    return (\r\n        <Menu.Container\r\n            menuButton={{\r\n                id: 'operator-selector-button',\r\n                class: classNames('btn btn-transparent field-selector-menu-button', {\r\n                    disabled,\r\n                }),\r\n                children: (\r\n                    <>\r\n                        <CurrentOperatorIcon\r\n                            size={18}\r\n                            color='rgba(var(--center-channel-color-rgb), 0.64)'\r\n                        />\r\n                        <FormattedMessage {...currentOperatorDescriptor.label}/>\r\n                    </>\r\n                ),\r\n                dataTestId: 'operatorSelectorMenuButton',\r\n                disabled,\r\n            }}\r\n            menu={{\r\n                id: 'operator-selector-menu',\r\n                'aria-label': 'Select operator',\r\n                className: 'select-operator-mui-menu',\r\n            }}\r\n        >\r\n            <Menu.InputItem\r\n                key='filter_operators'\r\n                id='filter_operators'\r\n                type='text'\r\n                placeholder={formatMessage({id: 'admin.access_control.table_editor.selector.filter_operators', defaultMessage: 'Search operators...'})}\r\n                className='attribute-selector-search'\r\n                value={filter}\r\n                onChange={onFilterChange}\r\n            />\r\n            {filteredOperators.map((descriptor) => {\r\n                const {id, icon: Icon, label} = descriptor;\r\n\r\n                return (\r\n                    <Menu.Item\r\n                        id={id}\r\n                        key={id}\r\n                        role='menuitemradio'\r\n                        forceCloseOnSelect={true}\r\n                        aria-checked={id === currentOperatorDescriptor.id}\r\n                        onClick={() => handleOperatorChange(descriptor)}\r\n                        labels={<FormattedMessage {...label}/>}\r\n                        leadingElement={<Icon size={18}/>}\r\n                        trailingElements={id === currentOperatorDescriptor.id && (\r\n                            <CheckIcon/>\r\n                        )}\r\n                    />\r\n                );\r\n            })}\r\n        </Menu.Container>\r\n    );\r\n};\r\n\r\nexport default OperatorSelectorMenu;\r\n\r\nconst getOperatorDescriptor = (operatorValue: string): OperatorDescriptor => {\r\n    for (const descriptor of Object.values(OPERATOR_DESCRIPTORS)) {\r\n        if (descriptor.id === operatorValue) {\r\n            return descriptor;\r\n        }\r\n    }\r\n\r\n    return OPERATOR_DESCRIPTORS.is;\r\n};\r\n\r\ntype OperatorDescriptor = {\r\n    id: OperatorLabel;\r\n    icon: ComponentType<IconProps>;\r\n    label: MessageDescriptor;\r\n};\r\n\r\nconst OPERATOR_DESCRIPTORS: IDMappedObjects<OperatorDescriptor> = {\r\n    [OperatorLabel.IS]: {\r\n        id: OperatorLabel.IS,\r\n        icon: EqualIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.is',\r\n            defaultMessage: 'is',\r\n        }),\r\n    },\r\n    [OperatorLabel.IS_NOT]: {\r\n        id: OperatorLabel.IS_NOT,\r\n        icon: NotEqualVariantIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.is_not',\r\n            defaultMessage: 'is not',\r\n        }),\r\n    },\r\n    [OperatorLabel.IN]: {\r\n        id: OperatorLabel.IN,\r\n        icon: ElementOfIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.in',\r\n            defaultMessage: 'in',\r\n        }),\r\n    },\r\n    [OperatorLabel.STARTS_WITH]: {\r\n        id: OperatorLabel.STARTS_WITH,\r\n        icon: FunctionIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.starts_with',\r\n            defaultMessage: 'starts with',\r\n        }),\r\n    },\r\n    [OperatorLabel.ENDS_WITH]: {\r\n        id: OperatorLabel.ENDS_WITH,\r\n        icon: FunctionIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.ends_with',\r\n            defaultMessage: 'ends with',\r\n        }),\r\n    },\r\n    [OperatorLabel.CONTAINS]: {\r\n        id: OperatorLabel.CONTAINS,\r\n        icon: FunctionIcon,\r\n        label: defineMessage({\r\n            id: 'admin.access_control.table_editor.operator.contains',\r\n            defaultMessage: 'contains',\r\n        }),\r\n    },\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useState, useMemo, useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {CheckIcon, ChevronDownIcon, CloseIcon} from '@mattermost/compass-icons/components';\r\nimport type {PropertyFieldOption} from '@mattermost/types/properties';\r\n\r\nimport * as Menu from 'components/menu';\r\n\r\nimport './selector_menus.scss';\r\n\r\n// MultiValueSelector handles selection of multiple values (operator 'in')\r\nconst MultiValueSelector = ({\r\n    values,\r\n    disabled,\r\n    updateValues,\r\n    options = [],\r\n    allowCreateValue = false,\r\n    placeholder,\r\n}: {\r\n    values: string[];\r\n    disabled: boolean;\r\n    updateValues: (values: string[]) => void;\r\n    options?: PropertyFieldOption[];\r\n    allowCreateValue?: boolean;\r\n    placeholder?: string;\r\n}) => {\r\n    const {formatMessage} = useIntl();\r\n    const [filter, setFilter] = useState('');\r\n\r\n    const hasOptions = options.length > 0;\r\n    const actualAllowCreateForMenu = hasOptions ? allowCreateValue : true;\r\n\r\n    // Filter logic for options\r\n    const onFilterChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFilter(e.target.value);\r\n    }, []);\r\n\r\n    const filteredOptions = useMemo(() => {\r\n        return options.filter((option) => {\r\n            const name = option.name || '';\r\n            return name.toLowerCase().includes(filter.toLowerCase());\r\n        });\r\n    }, [options, filter]);\r\n\r\n    const defaultMultiPlaceholder = formatMessage({\r\n        id: 'admin.access_control.table_editor.values.select_values',\r\n        defaultMessage: 'Select values...',\r\n    });\r\n\r\n    const defaultCreatePlaceholder = formatMessage({\r\n        id: 'admin.access_control.table_editor.values.create_placeholder',\r\n        defaultMessage: 'Type to create value',\r\n    });\r\n\r\n    const handleSelectItem = useCallback((name: string) => {\r\n        const newValues = values.includes(name) ?\r\n            values.filter((v) => v !== name) :\r\n            [...values, name];\r\n        updateValues(newValues);\r\n    }, [values, updateValues]);\r\n\r\n    const handleCreateValue = useCallback((valueToCreate: string) => {\r\n        const trimmedValue = valueToCreate.trim();\r\n        if (!trimmedValue || values.includes(trimmedValue)) {\r\n            return;\r\n        }\r\n        updateValues([...values, trimmedValue]);\r\n        setFilter('');\r\n    }, [values, updateValues]);\r\n\r\n    const handleInputKeyDownForMenu = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key !== 'Tab') {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        if (e.key === 'Enter' && actualAllowCreateForMenu && filter.trim()) {\r\n            e.preventDefault();\r\n            handleCreateValue(filter);\r\n        }\r\n    }, [actualAllowCreateForMenu, filter, handleCreateValue]);\r\n\r\n    const handleRemoveValue = useCallback((event: React.MouseEvent<HTMLDivElement> | React.KeyboardEvent<HTMLDivElement>, valueToRemove: string) => {\r\n        event.stopPropagation();\r\n        const newValues = values.filter((v) => v !== valueToRemove);\r\n        updateValues(newValues);\r\n    }, [values, updateValues]);\r\n\r\n    // Memoize cell contents to prevent unnecessary re-renders\r\n    const cellContents = useMemo(() => {\r\n        if (values.length === 0) {\r\n            let visualPlaceholderText = defaultMultiPlaceholder;\r\n            if (actualAllowCreateForMenu && options.length === 0) {\r\n                visualPlaceholderText = defaultCreatePlaceholder;\r\n            }\r\n            const actualTextDisplayed = placeholder || visualPlaceholderText;\r\n            const useStyle = actualTextDisplayed === defaultMultiPlaceholder || actualTextDisplayed === defaultCreatePlaceholder;\r\n\r\n            return (\r\n                <span className={classNames({'value-selector-menu-button__placeholder': useStyle})}>\r\n                    {actualTextDisplayed}\r\n                </span>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className='value-selector-menu-button__multi-values-container'>\r\n                {values.map((value) => (\r\n                    <div\r\n                        key={value}\r\n                        className='select__multi-value'\r\n                    >\r\n                        <div className='select__multi-value__label'>{value}</div>\r\n                        {!disabled && (\r\n                            <div\r\n                                className='select__multi-value__remove'\r\n                                onClick={(e) => handleRemoveValue(e, value)}\r\n                                role='button'\r\n                                tabIndex={0}\r\n                                onKeyDown={(e: React.KeyboardEvent<HTMLDivElement>) => {\r\n                                    if (e.key === 'Enter' || e.key === ' ') {\r\n                                        handleRemoveValue(e, value);\r\n                                    }\r\n                                }}\r\n                            >\r\n                                <CloseIcon size={12}/>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }, [values, disabled]);\r\n\r\n    return (\r\n        <div className='values-editor'>\r\n            <Menu.Container\r\n                menuButton={{\r\n                    id: 'value-selector-button',\r\n                    class: classNames('btn btn-transparent field-selector-menu-button', {\r\n                        disabled,\r\n                    }),\r\n                    children: (\r\n                        <span className='value-selector-menu-button__inner-wrapper'>\r\n                            {cellContents}\r\n                            <ChevronDownIcon\r\n                                size={18}\r\n                                color='rgba(var(--center-channel-color-rgb), 0.5)'\r\n                            />\r\n                        </span>\r\n                    ),\r\n                    dataTestId: 'valueSelectorMenuButton',\r\n                    disabled,\r\n                }}\r\n                menu={{\r\n                    id: 'value-selector-menu',\r\n                    'aria-label': placeholder || defaultMultiPlaceholder,\r\n                    className: 'select-value-mui-menu',\r\n                }}\r\n            >\r\n                <Menu.InputItem\r\n                    key='filter_values'\r\n                    id='filter_values'\r\n                    type='text'\r\n                    placeholder={formatMessage({\r\n                        id: 'admin.access_control.table_editor.selector.filter_or_create',\r\n                        defaultMessage: 'Search or create value...',\r\n                    })}\r\n                    className='attribute-selector-search'\r\n                    value={filter}\r\n                    onChange={onFilterChange}\r\n                    onKeyDown={handleInputKeyDownForMenu}\r\n                />\r\n                {filteredOptions.map((option) => {\r\n                    const name = option.name || '';\r\n                    const id = option.id || name;\r\n                    const isSelected = values.includes(name);\r\n\r\n                    return (\r\n                        <Menu.Item\r\n                            id={`value-option-${id}`}\r\n                            key={id}\r\n                            role='menuitemcheckbox'\r\n                            forceCloseOnSelect={false}\r\n                            aria-checked={isSelected}\r\n                            onClick={() => handleSelectItem(name)}\r\n                            labels={<span>{name}</span>}\r\n                            trailingElements={isSelected && (\r\n                                <CheckIcon/>\r\n                            )}\r\n                        />\r\n                    );\r\n                })}\r\n                {actualAllowCreateForMenu && filter.trim() && !filteredOptions.some((opt) => opt.name === filter.trim()) && (\r\n                    <Menu.Item\r\n                        id='create-value-option'\r\n                        key='create-value-option'\r\n                        onClick={() => handleCreateValue(filter)}\r\n                        labels={<span>\r\n                            {formatMessage({\r\n                                id: 'admin.access_control.table_editor.create_value',\r\n                                defaultMessage: 'Create \"{value}\"',\r\n                            }, {value: filter.trim()})}\r\n                        </span>}\r\n                    />\r\n                )}\r\n            </Menu.Container>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MultiValueSelector;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useState, useMemo, useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {CheckIcon, ChevronDownIcon} from '@mattermost/compass-icons/components';\r\nimport type {PropertyFieldOption} from '@mattermost/types/properties';\r\n\r\nimport * as Menu from 'components/menu';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport './selector_menus.scss';\r\n\r\n// SingleValueSelector handles selection of a single value (operators like 'is', 'contains', etc.)\r\nconst SingleValueSelector = ({\r\n    value,\r\n    disabled,\r\n    updateValue,\r\n    options = [],\r\n    allowCreateValue = false,\r\n    placeholder,\r\n}: {\r\n    value: string;\r\n    disabled: boolean;\r\n    updateValue: (value: string) => void;\r\n    options?: PropertyFieldOption[];\r\n    allowCreateValue?: boolean;\r\n    placeholder?: string;\r\n}) => {\r\n    const {formatMessage} = useIntl();\r\n    const [filter, setFilter] = useState('');\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isEditing, setIsEditing] = useState(false);\r\n\r\n    const hasOptions = options.length > 0;\r\n\r\n    // Simple input logic for attributes without options\r\n    const commitInputValue = useCallback(() => {\r\n        const trimmedValue = inputValue.trim();\r\n        if (trimmedValue) {\r\n            updateValue(trimmedValue);\r\n        }\r\n        setInputValue('');\r\n        setIsEditing(false);\r\n    }, [inputValue, updateValue]);\r\n\r\n    const handleKeyDownSimpleInput = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            commitInputValue();\r\n        }\r\n    }, [commitInputValue]);\r\n\r\n    // Filter logic for options\r\n    const onFilterChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFilter(e.target.value);\r\n    }, []);\r\n\r\n    const filteredOptions = useMemo(() => {\r\n        return options.filter((option) => {\r\n            const name = option.name || '';\r\n            return name.toLowerCase().includes(filter.toLowerCase());\r\n        });\r\n    }, [options, filter]);\r\n\r\n    const defaultPlaceholder = formatMessage({\r\n        id: 'admin.access_control.table_editor.value.select_value',\r\n        defaultMessage: 'Select value',\r\n    });\r\n\r\n    const handleSelectItem = useCallback((name: string) => {\r\n        updateValue(name);\r\n        setFilter('');\r\n    }, [updateValue]);\r\n\r\n    const handleCreateValue = useCallback((valueToCreate: string) => {\r\n        const trimmedValue = valueToCreate.trim();\r\n        if (trimmedValue) {\r\n            updateValue(trimmedValue);\r\n        }\r\n        setFilter('');\r\n    }, [updateValue]);\r\n\r\n    const handleInputKeyDownForMenu = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key !== 'Tab') {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        if (e.key === 'Enter' && allowCreateValue && filter.trim()) {\r\n            e.preventDefault();\r\n            handleCreateValue(filter);\r\n        }\r\n    }, [allowCreateValue, filter, handleCreateValue]);\r\n\r\n    if (!hasOptions) {\r\n        // For attributes without options, show simple input field\r\n        return (\r\n            <div className='values-editor'>\r\n                <input\r\n                    type='text'\r\n                    className='values-editor__simple-input'\r\n                    value={isEditing ? inputValue : value}\r\n                    onChange={(e) => setInputValue(e.target.value)}\r\n                    onKeyDown={handleKeyDownSimpleInput}\r\n                    onFocus={() => {\r\n                        setIsEditing(true);\r\n                        if (value) {\r\n                            setInputValue(value);\r\n                        }\r\n                    }}\r\n                    onBlur={commitInputValue}\r\n                    placeholder={placeholder || formatMessage({\r\n                        id: 'admin.access_control.table_editor.value.placeholder',\r\n                        defaultMessage: 'Add value...',\r\n                    })}\r\n                    disabled={disabled}\r\n                    maxLength={Constants.MAX_CUSTOM_ATTRIBUTE_LENGTH}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // For attributes with options, show dropdown menu\r\n    const actualTextDisplayed = value || placeholder || defaultPlaceholder;\r\n    const useStyle = actualTextDisplayed === defaultPlaceholder;\r\n\r\n    return (\r\n        <div className='values-editor'>\r\n            <Menu.Container\r\n                menuButton={{\r\n                    id: 'value-selector-button',\r\n                    class: classNames('btn btn-transparent field-selector-menu-button', {\r\n                        disabled,\r\n                    }),\r\n                    children: (\r\n                        <span className='value-selector-menu-button__inner-wrapper'>\r\n                            <span\r\n                                className={classNames({'value-selector-menu-button__placeholder': useStyle})}\r\n                            >\r\n                                {actualTextDisplayed}\r\n                            </span>\r\n                            <ChevronDownIcon\r\n                                size={18}\r\n                                color='rgba(var(--center-channel-color-rgb), 0.5)'\r\n                            />\r\n                        </span>\r\n                    ),\r\n                    dataTestId: 'valueSelectorMenuButton',\r\n                    disabled,\r\n                }}\r\n                menu={{\r\n                    id: 'value-selector-menu',\r\n                    'aria-label': placeholder || defaultPlaceholder,\r\n                    className: 'select-value-mui-menu',\r\n                }}\r\n            >\r\n                <Menu.InputItem\r\n                    key='filter_values'\r\n                    id='filter_values'\r\n                    type='text'\r\n                    placeholder={formatMessage({\r\n                        id: 'admin.access_control.table_editor.selector.filter_or_create',\r\n                        defaultMessage: 'Search or create value...',\r\n                    })}\r\n                    className='attribute-selector-search'\r\n                    value={filter}\r\n                    onChange={onFilterChange}\r\n                    onKeyDown={handleInputKeyDownForMenu}\r\n                />\r\n                {filteredOptions.map((option) => {\r\n                    const name = option.name || '';\r\n                    const id = option.id || name;\r\n                    const isSelected = value === name;\r\n\r\n                    return (\r\n                        <Menu.Item\r\n                            id={`value-option-${id}`}\r\n                            key={id}\r\n                            role='menuitemradio'\r\n                            forceCloseOnSelect={true}\r\n                            aria-checked={isSelected}\r\n                            onClick={() => handleSelectItem(name)}\r\n                            labels={<span>{name}</span>}\r\n                            trailingElements={isSelected && (\r\n                                <CheckIcon/>\r\n                            )}\r\n                        />\r\n                    );\r\n                })}\r\n                {allowCreateValue && filter.trim() && !filteredOptions.some((opt) => opt.name === filter.trim()) && (\r\n                    <Menu.Item\r\n                        id='create-value-option'\r\n                        key='create-value-option'\r\n                        onClick={() => handleCreateValue(filter)}\r\n                        labels={<span>\r\n                            {formatMessage({\r\n                                id: 'admin.access_control.table_editor.create_value',\r\n                                defaultMessage: 'Create \"{value}\"',\r\n                            }, {value: filter.trim()})}\r\n                        </span>}\r\n                    />\r\n                )}\r\n            </Menu.Container>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SingleValueSelector;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {PropertyFieldOption} from '@mattermost/types/properties';\r\n\r\nimport MultiValueSelector from './multi_value_selector_menu';\r\nimport SingleValueSelector from './single_value_selector_menu';\r\n\r\nexport interface TableRow {\r\n    attribute: string;\r\n    operator: string;\r\n    values: string[];\r\n    attribute_type: string;\r\n}\r\n\r\nexport interface ValueSelectorMenuProps {\r\n    row: TableRow;\r\n    disabled: boolean;\r\n    updateValues: (values: string[]) => void;\r\n    options?: PropertyFieldOption[];\r\n    allowCreateValue?: boolean;\r\n    placeholder?: string;\r\n}\r\n\r\n// Main ValueSelectorMenu component that delegates to the appropriate selector\r\nconst ValueSelectorMenu = ({\r\n    row,\r\n    disabled,\r\n    updateValues,\r\n    options = [],\r\n    allowCreateValue = false,\r\n    placeholder,\r\n}: ValueSelectorMenuProps) => {\r\n    const isMultiOperator = row.operator === 'in';\r\n\r\n    if (isMultiOperator) {\r\n        return (\r\n            <MultiValueSelector\r\n                values={row.values}\r\n                disabled={disabled}\r\n                updateValues={updateValues}\r\n                options={options}\r\n                allowCreateValue={allowCreateValue}\r\n                placeholder={placeholder}\r\n            />\r\n        );\r\n    }\r\n\r\n    // For single-value operators\r\n    return (\r\n        <SingleValueSelector\r\n            value={row.values[0] || ''}\r\n            disabled={disabled}\r\n            updateValue={(value) => updateValues([value])}\r\n            options={options}\r\n            allowCreateValue={allowCreateValue}\r\n            placeholder={placeholder}\r\n        />\r\n    );\r\n};\r\n\r\nexport default ValueSelectorMenu;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useState, useEffect, useCallback} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport type {AccessControlVisualAST} from '@mattermost/types/access_control';\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\n\r\nimport {searchUsersForExpression} from 'mattermost-redux/actions/access_control';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport AttributeSelectorMenu from './attribute_selector_menu';\r\nimport OperatorSelectorMenu from './operator_selector_menu';\r\nimport type {TableRow} from './value_selector_menu';\r\nimport ValueSelectorMenu from './value_selector_menu';\r\n\r\nimport CELHelpModal from '../../modals/cel_help/cel_help_modal';\r\nimport TestResultsModal from '../../modals/policy_test/test_modal';\r\nimport {AddAttributeButton, TestButton, HelpText, OPERATOR_CONFIG, OPERATOR_LABELS, OperatorLabel} from '../shared';\r\n\r\nimport './table_editor.scss';\r\n\r\ninterface TableEditorProps {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onValidate?: (isValid: boolean) => void;\r\n    disabled?: boolean;\r\n    userAttributes: UserPropertyField[];\r\n    enableUserManagedAttributes: boolean;\r\n    onParseError: (error: string) => void;\r\n    channelId?: string; // Optional channelId for channel-specific context\r\n    actions: {\r\n        getVisualAST: (expr: string) => Promise<ActionResult>;\r\n    };\r\n\r\n    // Props for user self-exclusion detection\r\n    isSystemAdmin?: boolean;\r\n    validateExpressionAgainstRequester?: (expression: string) => Promise<ActionResult<{requester_matches: boolean}>>;\r\n}\r\n\r\n// Finds the first available (non-disabled) attribute from a list of user attributes.\r\n// An attribute is considered available if it doesn't have spaces in its name (CEL incompatible)\r\n// and is considered \"safe\" (synced from LDAP/SAML, admin-managed, OR enableUserManagedAttributes is true).\r\nexport const findFirstAvailableAttributeFromList = (\r\n    userAttributes: UserPropertyField[],\r\n    enableUserManagedAttributes: boolean,\r\n): UserPropertyField | undefined => {\r\n    return userAttributes.find((attr) => {\r\n        const hasSpaces = attr.name.includes(' ');\r\n        const isSynced = attr.attrs?.ldap || attr.attrs?.saml;\r\n        const isAdminManaged = attr.attrs?.managed === 'admin';\r\n        const allowed = isSynced || isAdminManaged || enableUserManagedAttributes;\r\n        return !hasSpaces && allowed;\r\n    });\r\n};\r\n\r\n// Parses a CEL (Common Expression Language) string into a structured array of TableRow objects.\r\n// This allows the expression to be displayed and edited in a user-friendly table format.\r\nexport const parseExpression = (visualAST: AccessControlVisualAST): TableRow[] => {\r\n    const tableRows: TableRow[] = [];\r\n\r\n    if (!visualAST) {\r\n        return tableRows;\r\n    }\r\n\r\n    for (const node of visualAST.conditions) {\r\n        let attr;\r\n\r\n        // Extracts the attribute name, removing the 'user.attributes.' prefix.\r\n        if (node.attribute.startsWith('user.attributes.')) {\r\n            attr = node.attribute.slice(16); // Length of 'user.attributes.'\r\n        } else {\r\n            throw new Error(`Unknown attribute: ${node.attribute}`);\r\n        }\r\n\r\n        let op = OPERATOR_LABELS[node.operator];\r\n        if (!op) {\r\n            // Fallback for unknown operators, defaulting to 'is' logic\r\n            op = OperatorLabel.IS;\r\n        }\r\n\r\n        let values;\r\n        if (Array.isArray(node.value)) {\r\n            values = node.value;\r\n        } else {\r\n            values = [node.value];\r\n        }\r\n\r\n        tableRows.push({\r\n            attribute: attr,\r\n            operator: op,\r\n            values,\r\n            attribute_type: node.attribute_type,\r\n        });\r\n    }\r\n\r\n    return tableRows;\r\n};\r\n\r\n// TableEditor provides a user-friendly table interface for constructing and editing\r\n// CEL (Common Expression Language) expressions based on user attributes.\r\n// It parses incoming CEL expressions into rows and reconstructs the expression upon changes.\r\n// The biggest limitation is that all expressions are ANDed together, so it's not possible to\r\n// have OR logic.\r\nfunction TableEditor({\r\n    value,\r\n    onChange,\r\n    onValidate,\r\n    disabled = false,\r\n    userAttributes,\r\n    enableUserManagedAttributes,\r\n    onParseError,\r\n    channelId,\r\n    actions,\r\n    isSystemAdmin = false,\r\n    validateExpressionAgainstRequester,\r\n}: TableEditorProps): JSX.Element {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const [rows, setRows] = useState<TableRow[]>([]);\r\n    const [showTestResults, setShowTestResults] = useState(false);\r\n    const [showHelpModal, setShowHelpModal] = useState(false);\r\n    const [autoOpenAttributeMenuForRow, setAutoOpenAttributeMenuForRow] = useState<number | null>(null);\r\n\r\n    // State for user self-exclusion detection (only applies to non-system-admins)\r\n    const [userWouldBeExcluded, setUserWouldBeExcluded] = useState(false);\r\n\r\n    // Effect to parse the incoming CEL expression string (value prop)\r\n    // and update the internal rows state. Handles errors during parsing.\r\n    useEffect(() => {\r\n        // Skip parsing if no expression to avoid unnecessary API calls\r\n        if (!value || value.trim() === '') {\r\n            setRows([]);\r\n            return;\r\n        }\r\n\r\n        actions.getVisualAST(value).then((result) => {\r\n            if (result.error) {\r\n                setRows([]);\r\n\r\n                // Only call onParseError for actual parsing errors, not permission errors\r\n                if (!result.error.message?.includes('403') && !result.error.message?.includes('Forbidden')) {\r\n                    onParseError(result.error.message);\r\n                }\r\n                return;\r\n            }\r\n\r\n            setRows(parseExpression(result.data));\r\n        }).catch((err) => {\r\n            setRows([]);\r\n            if (onValidate) {\r\n                onValidate(false);\r\n            }\r\n\r\n            // Only call onParseError for actual parsing errors, not permission errors\r\n            if (!err.message?.includes('403') && !err.message?.includes('Forbidden')) {\r\n                onParseError(err.message);\r\n            }\r\n        });\r\n    }, [value]);\r\n\r\n    // Effect to check if user would be excluded by their own rules\r\n    useEffect(() => {\r\n        const checkUserSelfExclusion = async () => {\r\n            // Only check for non-system admins when there's an expression and validation function\r\n            if (isSystemAdmin || !value.trim() || !validateExpressionAgainstRequester) {\r\n                setUserWouldBeExcluded(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const result = await validateExpressionAgainstRequester(value);\r\n                setUserWouldBeExcluded(!result.data?.requester_matches);\r\n            } catch (error) {\r\n                // If validation fails, assume they would not be excluded (to allow testing)\r\n                setUserWouldBeExcluded(false);\r\n            }\r\n        };\r\n\r\n        checkUserSelfExclusion();\r\n    }, [value, isSystemAdmin, validateExpressionAgainstRequester]);\r\n\r\n    // Converts the internal rows state back into a CEL expression string\r\n    // and calls the onChange and onValidate props.\r\n    const updateExpression = useCallback((newRows: TableRow[]) => {\r\n        const rowsThatCanFormExpressions = newRows.filter((row) => row.attribute); // Only include rows that have an attribute selected\r\n\r\n        const expr = rowsThatCanFormExpressions.map((row) => {\r\n            const attributeExpr = `user.attributes.${row.attribute}`;\r\n            const config = OPERATOR_CONFIG[row.operator];\r\n\r\n            // Find the attribute object to check its type\r\n            const attributeObj = userAttributes.find((attr) => attr.name === row.attribute);\r\n\r\n            if (!config) {\r\n                // Fallback for unknown operators, defaulting to 'in' logic\r\n                // This handles cases where row.operator might be an unexpected string.\r\n                const valuesStr = row.values.map((val: string) => `\"${val}\"`).join(', ');\r\n\r\n                // For multiselect, reverse the order since multiselect attributes can contain multiple values\r\n                if (attributeObj?.type === 'multiselect') {\r\n                    return `[${valuesStr}] in ${attributeExpr}`;\r\n                }\r\n                return `${attributeExpr} in [${valuesStr}]`;\r\n            }\r\n\r\n            if (config.type === 'list') { // Handles 'in'\r\n                const valuesStr = row.values.map((val: string) => `\"${val}\"`).join(', ');\r\n\r\n                // For multiselect, reverse the order since multiselect attributes can contain multiple values\r\n                if (attributeObj?.type === 'multiselect') {\r\n                    return `[${valuesStr}] ${config.celOp} ${attributeExpr}`;\r\n                }\r\n                return `${attributeExpr} ${config.celOp} [${valuesStr}]`;\r\n            }\r\n\r\n            // For 'comparison' and 'method' types, they operate on a single value.\r\n            const value = row.values.length > 0 ? row.values[0] : '';\r\n\r\n            if (config.type === 'comparison') {\r\n                return `${attributeExpr} ${config.celOp} \"${value}\"`;\r\n            }\r\n\r\n            // config.type must be 'method'\r\n            return `${attributeExpr}.${config.celOp}(\"${value}\")`;\r\n        }).join(' && ');\r\n\r\n        onChange(expr);\r\n        if (onValidate) {\r\n            // Basic validation: if we can build an expression, or if the expression is empty\r\n            // (e.g. no rows, or rows without attributes yet), it's valid from table perspective.\r\n            onValidate(expr === '' || rowsThatCanFormExpressions.length > 0);\r\n        }\r\n    }, [onChange, onValidate, userAttributes]);\r\n\r\n    // Helper function to find the first available (non-disabled) attribute\r\n    const findFirstAvailableAttribute = useCallback(() => {\r\n        return findFirstAvailableAttributeFromList(userAttributes, enableUserManagedAttributes);\r\n    }, [userAttributes, enableUserManagedAttributes]);\r\n\r\n    // Row Manipulation Handlers\r\n    const addRow = useCallback(() => {\r\n        if (userAttributes.length === 0) {\r\n            // Show a helpful message instead of silently failing\r\n            onParseError('No user attributes available. Please ensure ABAC is properly configured and you have the necessary permissions.');\r\n            return;\r\n        }\r\n\r\n        const firstAvailableAttribute = findFirstAvailableAttribute();\r\n        if (!firstAvailableAttribute) {\r\n            onParseError('No available user attributes found for rule creation.');\r\n            return;\r\n        }\r\n\r\n        setRows((currentRows) => {\r\n            const newRow = {\r\n                attribute: firstAvailableAttribute.name, // Default to the first available attribute\r\n                operator: OperatorLabel.IS, // Default operator\r\n                values: [],\r\n                attribute_type: userAttributes[0]?.type || '',\r\n            };\r\n            const newRows = [...currentRows, newRow];\r\n            updateExpression(newRows); // Ensure expression is updated immediately\r\n            setAutoOpenAttributeMenuForRow(newRows.length - 1); // Set for the new row\r\n            return newRows;\r\n        });\r\n    }, [userAttributes, updateExpression, findFirstAvailableAttribute]);\r\n\r\n    const removeRow = useCallback((index: number) => {\r\n        setRows((currentRows) => {\r\n            const newRows = currentRows.toSpliced(index, 1);\r\n            updateExpression(newRows);\r\n            return newRows;\r\n        });\r\n    }, [updateExpression]);\r\n\r\n    const updateRowAttribute = useCallback((index: number, attribute: string) => {\r\n        setRows((currentRows) => {\r\n            const newRows = [...currentRows];\r\n            const oldAttribute = newRows[index].attribute;\r\n            newRows[index] = {...newRows[index], attribute};\r\n\r\n            // If attribute changes, we are resetting values.\r\n            if (oldAttribute !== attribute) {\r\n                newRows[index].values = [];\r\n                newRows[index].operator = OperatorLabel.IS;\r\n            }\r\n            updateExpression(newRows);\r\n            return newRows;\r\n        });\r\n    }, [updateExpression]);\r\n\r\n    const updateRowOperator = useCallback((index: number, newOperator: string) => {\r\n        setRows((currentRows) => {\r\n            const oldOperator = currentRows[index].operator;\r\n            let newValues = [...currentRows[index].values]; // Start with a copy of current values\r\n\r\n            if (newOperator === OperatorLabel.IN && oldOperator !== OperatorLabel.IN) {\r\n                // Transitioning TO 'in' FROM a non-'in' (likely single-value) operator:\r\n                // Trim each value and then filter out any that become empty strings.\r\n                newValues = newValues.map((v) => v.trim()).filter((v) => v !== '');\r\n            } else if (newOperator !== OperatorLabel.IN) {\r\n                // Transitioning TO a non-'in' (single-value) operator (or staying as one):\r\n                // If there are multiple values (e.g., coming from 'in'), take only the first one.\r\n                if (newValues.length > 1) {\r\n                    newValues = [newValues[0]];\r\n                }\r\n            }\r\n\r\n            const newRows = [...currentRows];\r\n            newRows[index] = {\r\n                ...currentRows[index],\r\n                operator: newOperator,\r\n                values: newValues,\r\n            };\r\n\r\n            updateExpression(newRows);\r\n            return newRows;\r\n        });\r\n    }, [updateExpression]);\r\n\r\n    const updateRowValues = useCallback((index: number, values: string[]) => {\r\n        setRows((currentRows) => {\r\n            const newRows = [...currentRows];\r\n            newRows[index] = {...newRows[index], values};\r\n            updateExpression(newRows);\r\n            return newRows;\r\n        });\r\n    }, [updateExpression]);\r\n\r\n    return (\r\n        <div className='table-editor'>\r\n            <table className='table-editor__table'>\r\n                <thead>\r\n                    <tr className='table-editor__header-row'>\r\n                        <th className='table-editor__column-header'>\r\n                            <FormattedMessage\r\n                                id='admin.access_control.table_editor.attribute'\r\n                                defaultMessage='Attribute'\r\n                            />\r\n                        </th>\r\n                        <th className='table-editor__column-header'>\r\n                            <FormattedMessage\r\n                                id='admin.access_control.table_editor.operator'\r\n                                defaultMessage='Operator'\r\n                            />\r\n                        </th>\r\n                        <th className='table-editor__column-header'>\r\n                            <span className='table-editor__column-header-value'>\r\n                                <FormattedMessage\r\n                                    id='admin.access_control.table_editor.values'\r\n                                    defaultMessage='Values'\r\n                                />\r\n                            </span>\r\n                        </th>\r\n                        <th className='table-editor__column-header-actions'/>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {rows.length === 0 ? (\r\n                        <tr>\r\n                            <td\r\n                                colSpan={4}\r\n                                className='table-editor__blank-state'\r\n                            >\r\n                                <span>\r\n                                    {formatMessage({\r\n                                        id: 'admin.access_control.table_editor.blank_state',\r\n                                        defaultMessage: 'Select a user attribute and values to create a rule',\r\n                                    })}\r\n                                </span>\r\n                            </td>\r\n                        </tr>\r\n                    ) : (\r\n                        rows.map((row, index) => (\r\n                            <tr\r\n                                key={index}\r\n                                className='table-editor__row'\r\n                            >\r\n                                <td className='table-editor__cell'>\r\n                                    <AttributeSelectorMenu\r\n                                        currentAttribute={row.attribute}\r\n                                        availableAttributes={userAttributes}\r\n                                        disabled={disabled}\r\n                                        onChange={(attribute) => updateRowAttribute(index, attribute)}\r\n                                        menuId={`attribute-selector-menu-${index}`}\r\n                                        buttonId={`attribute-selector-button-${index}`}\r\n                                        autoOpen={index === autoOpenAttributeMenuForRow}\r\n                                        onMenuOpened={() => setAutoOpenAttributeMenuForRow(null)}\r\n                                        enableUserManagedAttributes={enableUserManagedAttributes}\r\n                                    />\r\n                                </td>\r\n                                <td className='table-editor__cell'>\r\n                                    <OperatorSelectorMenu\r\n                                        currentOperator={row.operator}\r\n                                        disabled={disabled}\r\n                                        onChange={(operator) => updateRowOperator(index, operator)}\r\n                                    />\r\n                                </td>\r\n                                <td className='table-editor__cell'>\r\n                                    <ValueSelectorMenu\r\n                                        row={row}\r\n                                        disabled={disabled}\r\n                                        updateValues={(values: string[]) => updateRowValues(index, values)}\r\n                                        options={row.attribute ? userAttributes.find((attr) => attr.name === row.attribute)?.attrs?.options || [] : []}\r\n                                    />\r\n                                </td>\r\n                                <td className='table-editor__cell-actions'>\r\n                                    <button\r\n                                        type='button'\r\n                                        className='table-editor__row-remove'\r\n                                        onClick={() => removeRow(index)}\r\n                                        disabled={disabled}\r\n                                        aria-label={formatMessage({id: 'admin.access_control.table_editor.remove_row', defaultMessage: 'Remove row'})}\r\n                                    >\r\n                                        <i className='icon icon-trash-can-outline'/>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))\r\n                    )}\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <td\r\n                            colSpan={4}\r\n                            className='table-editor__add-button-container'\r\n                        >\r\n                            <AddAttributeButton\r\n                                onClick={addRow}\r\n                                disabled={disabled || userAttributes.length === 0}\r\n                            />\r\n                        </td>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n\r\n            <div className='table-editor__actions-row'>\r\n                <HelpText\r\n                    message={formatMessage({\r\n                        id: 'admin.access_control.table_editor.help_text',\r\n                        defaultMessage: 'Each row is a single condition that must be met for a user to comply with the policy. All rules are combined with logical AND operator (`&&`).',\r\n                    })}\r\n                />\r\n                <TestButton\r\n                    onClick={() => setShowTestResults(true)}\r\n                    disabled={disabled || !value || userWouldBeExcluded}\r\n                    disabledTooltip={\r\n                        userWouldBeExcluded ?\r\n                            formatMessage({\r\n                                id: 'admin.access_control.table_editor.user_excluded_tooltip',\r\n                                defaultMessage: 'You cannot test access rules that would exclude you from the channel',\r\n                            }) :\r\n                            undefined\r\n                    }\r\n                />\r\n            </div>\r\n\r\n            {showTestResults && (\r\n                <TestResultsModal\r\n                    onExited={() => setShowTestResults(false)}\r\n                    isStacked={true}\r\n                    actions={{\r\n                        openModal: () => {},\r\n                        searchUsers: (term: string, after: string, limit: number) => {\r\n                            // Return the action for the modal to dispatch\r\n                            return searchUsersForExpression(value, term, after, limit, channelId);\r\n                        },\r\n                    }}\r\n                />\r\n            )}\r\n            {showHelpModal && (\r\n                <CELHelpModal\r\n                    onExited={() => setShowHelpModal(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TableEditor;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport Markdown from 'components/markdown';\r\n\r\nimport './cel_help_modal.scss';\r\n\r\ntype Props = {\r\n    onExited: () => void;\r\n    onHide?: () => void;\r\n};\r\n\r\nconst CELHelpModal: React.FC<Props> = ({onExited, onHide}: Props) => {\r\n    return (\r\n        <GenericModal\r\n            id='CELHelpModal'\r\n            className='cel-help-modal--centered'\r\n            aria-labelledby='CELHelpModalLabel'\r\n            onExited={onExited}\r\n            onHide={onHide}\r\n            modalHeaderText={(\r\n                <FormattedMessage\r\n                    id='admin.access_control.cel_help_modal.title'\r\n                    defaultMessage='Common Expression Language (CEL)'\r\n                />\r\n            )}\r\n            modalSubheaderText={(\r\n                <FormattedMessage\r\n                    id='admin.access_control.cel_help_modal.subheader'\r\n                    defaultMessage='With CEL you can define conditions to filter user attributes and control resource access.'\r\n                />\r\n            )}\r\n            compassDesign={true}\r\n            bodyPadding={false}\r\n            modalLocation='top'\r\n        >\r\n            <div className='cel-help-modal__content-container'>\r\n                <div className='cel-help-modal__content'>\r\n                    <Markdown\r\n                        message={'### Basic Syntax\\nCEL expressions evaluate to boolean values (`true`/`false`) to determine if access should be granted.\\n### Common Examples\\n- To match a specific program:\\n&ensp;`user.attributes.Program == \"Delta\"`\\n- To match any of multiple teams:\\n&ensp;`user.attributes.Team in [\"Sales\", \"Engineering\"]`\\n- To match an email domain:\\n&ensp;`user.attributes.Email.endsWith(\"example.com\")`\\n- To combine conditions (for this example with `OR` operator, altertanitvely use `&&` for `AND` operation):\\n&ensp;`user.attrs.Program == \"Alpha\" || user.attrs.Team == \"Operations\"`\\n### Supported Operators and functions\\n- `==`, `!=`, `&&`, `||`, `in`, `contains()`, `startsWith()`, `endsWith()`'}\r\n                    />\r\n                </div>\r\n                <div className='cel-help-additional-info-modal__content'>\r\n                    <div className='cel-help-additional-info-modal__header'>\r\n                        <i className='icon icon-information-outline'/>\r\n                        <span className='cel-help-additional-info-modal__title'>\r\n                            <FormattedMessage\r\n                                id='admin.access_control.cel_help_modal.important_notes_title'\r\n                                defaultMessage='Important Notes'\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                    <div className='cel-help-additional-info-modal__text'>\r\n                        <Markdown\r\n                            message={'- Operators like `<` or `>` are forbidden due to incorrect string comparison.\\n- Only `user.attributes` are supported; any other variables are not supported yet.'}\r\n                        />\r\n                        <FormattedMessage\r\n                            id='admin.access_control.cel_help_modal.external_link'\r\n                            defaultMessage='For more information, visit <link>CEL Documentation</link>.'\r\n                            values={{\r\n                                link: (msg: React.ReactNode) => (\r\n                                    <ExternalLink\r\n                                        href='https://cel.dev/'\r\n                                        location='cel_help_modal'\r\n                                    >\r\n                                        {msg}\r\n                                    </ExternalLink>\r\n                                ),\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default CELHelpModal;\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect, useState, useCallback} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {AccessControlTestResult} from '@mattermost/types/access_control';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SearchableUserList from 'components/searchable_user_list/searchable_user_list_container';\r\n\r\nimport type {ModalData} from 'types/actions';\r\nimport type {ActionFuncAsync} from 'types/store';\r\n\r\nimport './test_modal.scss';\r\n\r\nconst USERS_TO_FETCH = 50;\r\nconst USERS_PER_PAGE = 10;\r\n\r\ntype Props = {\r\n    onExited: () => void;\r\n    isStacked?: boolean;\r\n    actions: {\r\n        searchUsers: (term: string, after: string, limit: number) => ActionFuncAsync<AccessControlTestResult>;\r\n        openModal?: <P>(modalData: ModalData<P>) => void;\r\n    };\r\n}\r\n\r\nfunction TestResultsModal({\r\n    onExited,\r\n    isStacked = false,\r\n    actions,\r\n}: Props): JSX.Element {\r\n    const dispatch = useDispatch();\r\n    const [term, setTerm] = useState<string>('');\r\n    const [users, setUsers] = useState<UserProfile[]>([]);\r\n    const [total, setTotal] = useState<number>(0);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [cursorHistory, setCursorHistory] = useState<string[]>([]); // Stores the 'after' cursor for page 1, page 2, etc.\r\n\r\n    const fetchUsers = useCallback(async (searchTerm: string, cursor: string, reset: boolean = false) => {\r\n        setLoading(true);\r\n        const result: ActionResult<AccessControlTestResult> = await dispatch(actions.searchUsers(searchTerm, cursor, USERS_TO_FETCH));\r\n        if (result?.data) {\r\n            const newUsers = result.data.users;\r\n            if (reset) {\r\n                setUsers(newUsers);\r\n            } else {\r\n                setUsers((prevUsers) => [...prevUsers, ...newUsers]);\r\n            }\r\n            setTotal(result.data.total);\r\n        } else {\r\n            setUsers([]);\r\n            setTotal(0);\r\n        }\r\n        setLoading(false);\r\n    }, [dispatch, actions]);\r\n\r\n    useEffect(() => {\r\n        fetchUsers(term, '');\r\n    }, []);\r\n\r\n    const handleSearch = (newTerm: string) => {\r\n        setCursorHistory([]);\r\n        setTerm(newTerm);\r\n        fetchUsers(newTerm, '', true);\r\n    };\r\n\r\n    const handleNextPage = (page: number) => {\r\n        if (loading || !users.length) {\r\n            return;\r\n        }\r\n        if (page * USERS_PER_PAGE < USERS_TO_FETCH) {\r\n            return;\r\n        }\r\n        const cursorForNextPage = users[users.length - 1].id;\r\n        setCursorHistory([...cursorHistory, cursorForNextPage]);\r\n        fetchUsers(term, cursorForNextPage);\r\n    };\r\n\r\n    const modalTitle = (\r\n        <FormattedMessage\r\n            id='admin.access_control.testResults'\r\n            defaultMessage='Access Rule Test Results'\r\n        />\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            className='TestResultsModal a11y__modal'\r\n            id='testResultsModal'\r\n            show={true}\r\n            onHide={onExited}\r\n            onExited={onExited}\r\n            modalHeaderText={modalTitle}\r\n            showCloseButton={true}\r\n            bodyPadding={true}\r\n            compassDesign={true}\r\n            ariaLabel='Access Rule Test Results'\r\n            isStacked={isStacked}\r\n        >\r\n            <SearchableUserList\r\n                users={users}\r\n                usersPerPage={USERS_PER_PAGE}\r\n                total={total}\r\n                nextPage={handleNextPage}\r\n                search={handleSearch}\r\n                actionUserProps={{}}\r\n            />\r\n        </GenericModal>\r\n    );\r\n}\r\n\r\nexport default TestResultsModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, defineMessages} from 'react-intl';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\n\r\ntype Props = {\r\n\r\n    /*\r\n     * Bool whether the modal is shown\r\n     */\r\n    show: boolean;\r\n\r\n    /*\r\n     * Action to call on confirm\r\n     */\r\n    onConfirm: (checked: boolean) => void;\r\n\r\n    /*\r\n     * Action to call on cancel\r\n     */\r\n    onCancel: (checked: boolean) => void;\r\n\r\n    /*\r\n     * Channel display name\r\n     */\r\n    displayName: string;\r\n\r\n    /*\r\n     * Channel privacy setting\r\n     */\r\n    toPublic: boolean;\r\n};\r\n\r\nconst ConvertConfirmModal = ({show, onConfirm, onCancel, displayName, toPublic}: Props) => {\r\n    let titleMessage;\r\n    let convertMessage;\r\n    let confirmMessage;\r\n    let convertConfirmationMessage;\r\n    if (toPublic) {\r\n        titleMessage = messages.toPublicTitle;\r\n        convertMessage = messages.toPublicMessage;\r\n        confirmMessage = messages.toPublicConfirm;\r\n        convertConfirmationMessage = messages.toPublicMessageConfirmation;\r\n    } else {\r\n        titleMessage = messages.toPrivateTitle;\r\n        convertMessage = messages.toPrivateMessage;\r\n        confirmMessage = messages.toPrivateConfirm;\r\n        convertConfirmationMessage = messages.toPrivateMessageConfirmation;\r\n    }\r\n\r\n    const title = (\r\n        <FormattedMessage\r\n            {...titleMessage}\r\n            values={{displayName}}\r\n        />\r\n    );\r\n\r\n    const message = (\r\n        <>\r\n            <p>\r\n                <FormattedMessage\r\n                    {...convertMessage}\r\n                    values={{displayName: <strong>{displayName}</strong>}}\r\n                />\r\n            </p>\r\n            <p>\r\n                <FormattedMessage\r\n                    {...convertConfirmationMessage}\r\n                    values={{displayName: <strong>{displayName}</strong>}}\r\n                />\r\n            </p>\r\n        </>\r\n    );\r\n\r\n    const confirmButton = (\r\n        <FormattedMessage\r\n            {...confirmMessage}\r\n        />\r\n    );\r\n\r\n    const cancelButton = (\r\n        <FormattedMessage\r\n            id='admin.team_channel_settings.convertConfirmModal.cancel'\r\n            defaultMessage='No, cancel'\r\n        />\r\n    );\r\n\r\n    const modalClass = 'discard-changes-modal';\r\n\r\n    return (\r\n        <ConfirmModal\r\n            show={show}\r\n            title={title}\r\n            message={message}\r\n            modalClass={modalClass}\r\n            confirmButtonClass={'btn btn-primary'}\r\n            confirmButtonText={confirmButton}\r\n            cancelButtonText={cancelButton}\r\n            onConfirm={onConfirm}\r\n            onCancel={onCancel}\r\n        />\r\n    );\r\n};\r\n\r\nconst messages = defineMessages({\r\n    toPrivateConfirm: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPrivateConfirm',\r\n        defaultMessage: 'Yes, convert to private channel',\r\n    },\r\n    toPrivateMessage: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPrivateMessageFirstLine',\r\n        defaultMessage: 'When you convert {displayName} to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.',\r\n    },\r\n    toPrivateMessageConfirmation: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPrivateMessageSecondLine',\r\n        defaultMessage: 'Are you sure you want to convert {displayName} to a private channel?',\r\n    },\r\n    toPrivateTitle: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPrivateTitle',\r\n        defaultMessage: 'Convert {displayName} to a private channel?',\r\n    },\r\n    toPublicConfirm: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPublicConfirm',\r\n        defaultMessage: 'Yes, convert to public channel',\r\n    },\r\n    toPublicMessage: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPublicMessageFirstLine',\r\n        defaultMessage: 'When you convert {displayName} to a public channel, history and membership are preserved. Public channels are discoverable and can be joined by users on the system without invitation.',\r\n    },\r\n    toPublicMessageConfirmation: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPublicMessageSecondLine',\r\n        defaultMessage: 'Are you sure you want to convert {displayName} to a public channel?',\r\n    },\r\n    toPublicTitle: {\r\n        id: 'admin.team_channel_settings.convertConfirmModal.toPublicTitle',\r\n        defaultMessage: 'Convert {displayName} to a public channel?',\r\n    },\r\n});\r\n\r\nexport default ConvertConfirmModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useState, useEffect, useCallback} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {getProfilesByIds} from 'mattermost-redux/actions/users';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SearchableUserList from 'components/searchable_user_list/searchable_user_list_container';\r\n\r\nimport './channel_access_rules_confirm_modal.scss';\r\n\r\ntype ChannelAccessRulesConfirmModalProps = {\r\n    show: boolean;\r\n    onHide: () => void;\r\n    onConfirm: () => void;\r\n    channelName: string;\r\n    usersToAdd: string[];\r\n    usersToRemove: string[];\r\n    isProcessing?: boolean;\r\n    autoSyncEnabled?: boolean;\r\n    isStacked?: boolean;\r\n    willShowActivityWarning?: boolean;\r\n};\r\n\r\nconst USERS_PER_PAGE = 50;\r\n\r\nfunction ChannelAccessRulesConfirmModal({\r\n    show,\r\n    onHide,\r\n    onConfirm,\r\n    channelName,\r\n    usersToAdd,\r\n    usersToRemove,\r\n    isProcessing = false,\r\n    autoSyncEnabled = false,\r\n    isStacked = false,\r\n    willShowActivityWarning = false,\r\n}: ChannelAccessRulesConfirmModalProps) {\r\n    const dispatch = useDispatch();\r\n\r\n    const [showUserList, setShowUserList] = useState(false);\r\n    const [activeTab, setActiveTab] = useState<'allowed' | 'restricted'>('allowed');\r\n    const [allowedUsers, setAllowedUsers] = useState<UserProfile[]>([]);\r\n    const [restrictedUsers, setRestrictedUsers] = useState<UserProfile[]>([]);\r\n    const [filteredAllowedUsers, setFilteredAllowedUsers] = useState<UserProfile[]>([]);\r\n    const [filteredRestrictedUsers, setFilteredRestrictedUsers] = useState<UserProfile[]>([]);\r\n\r\n    // Load user profiles when modal opens or user list is shown\r\n    useEffect(() => {\r\n        if (show && showUserList) {\r\n            loadUserProfiles();\r\n        }\r\n    }, [show, showUserList]);\r\n\r\n    const loadUserProfiles = useCallback(async () => {\r\n        // Load allowed users (users to add)\r\n        if (usersToAdd.length > 0) {\r\n            const result = await dispatch(getProfilesByIds(usersToAdd) as any) as ActionResult<UserProfile[]>;\r\n            if (result?.data) {\r\n                setAllowedUsers(result.data);\r\n                setFilteredAllowedUsers(result.data);\r\n            }\r\n        }\r\n\r\n        // Load restricted users (users to remove)\r\n        if (usersToRemove.length > 0) {\r\n            const result = await dispatch(getProfilesByIds(usersToRemove) as any) as ActionResult<UserProfile[]>;\r\n            if (result?.data) {\r\n                setRestrictedUsers(result.data);\r\n                setFilteredRestrictedUsers(result.data);\r\n            }\r\n        }\r\n    }, [usersToAdd, usersToRemove, dispatch]);\r\n\r\n    const handleViewUsers = () => {\r\n        setShowUserList(true);\r\n    };\r\n\r\n    const handleHideUsers = () => {\r\n        setShowUserList(false);\r\n    };\r\n\r\n    const handleTabChange = (tab: 'allowed' | 'restricted') => {\r\n        setActiveTab(tab);\r\n    };\r\n\r\n    const handleSearch = (searchTerm: string) => {\r\n        if (searchTerm === '') {\r\n            // Reset to original data when search is empty\r\n            setFilteredAllowedUsers(allowedUsers);\r\n            setFilteredRestrictedUsers(restrictedUsers);\r\n        } else {\r\n            // Filter allowed users\r\n            const filteredAllowed = allowedUsers.filter((user) => {\r\n                return user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.first_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.last_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.nickname?.toLowerCase().includes(searchTerm.toLowerCase());\r\n            });\r\n            setFilteredAllowedUsers(filteredAllowed);\r\n\r\n            // Filter restricted users\r\n            const filteredRestricted = restrictedUsers.filter((user) => {\r\n                return user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.first_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.last_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                    user.nickname?.toLowerCase().includes(searchTerm.toLowerCase());\r\n            });\r\n            setFilteredRestrictedUsers(filteredRestricted);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        // Reset state when closing\r\n        setShowUserList(false);\r\n        setActiveTab('allowed');\r\n        setAllowedUsers([]);\r\n        setRestrictedUsers([]);\r\n        setFilteredAllowedUsers([]);\r\n        setFilteredRestrictedUsers([]);\r\n        onHide();\r\n    };\r\n\r\n    const hasChanges = usersToAdd.length > 0 || usersToRemove.length > 0;\r\n\r\n    // Don't show modal if there are no changes\r\n    if (!hasChanges) {\r\n        return null;\r\n    }\r\n\r\n    const modalTitle = (\r\n        <FormattedMessage\r\n            id={willShowActivityWarning ? 'channel_settings.access_rules.confirm_modal.title_with_warning' : 'channel_settings.access_rules.confirm_modal.title'}\r\n            defaultMessage={willShowActivityWarning ? 'Review membership impact' : 'Save and apply rules'}\r\n        />\r\n    );\r\n\r\n    const modalSubtitle = channelName;\r\n\r\n    const currentUsers = activeTab === 'allowed' ? filteredAllowedUsers : filteredRestrictedUsers;\r\n    const totalCount = activeTab === 'allowed' ? usersToAdd.length : usersToRemove.length;\r\n\r\n    // Common buttons component\r\n    const renderButtons = (leftButton: React.ReactNode) => (\r\n        <div className='ChannelAccessRulesConfirmModal__buttons'>\r\n            <div className='ChannelAccessRulesConfirmModal__buttons__left'>\r\n                {leftButton}\r\n            </div>\r\n            <div className='ChannelAccessRulesConfirmModal__buttons__right'>\r\n                <button\r\n                    className='btn btn-tertiary'\r\n                    onClick={handleClose}\r\n                    disabled={isProcessing}\r\n                >\r\n                    <FormattedMessage\r\n                        id='channel_settings.access_rules.confirm_modal.cancel'\r\n                        defaultMessage='Cancel'\r\n                    />\r\n                </button>\r\n                <button\r\n                    className='btn btn-danger'\r\n                    onClick={onConfirm}\r\n                    disabled={isProcessing}\r\n                >\r\n                    {(() => {\r\n                        if (isProcessing) {\r\n                            return (\r\n                                <>\r\n                                    <span className='icon icon-loading icon-spin'/>\r\n                                    <FormattedMessage\r\n                                        id='channel_settings.access_rules.confirm_modal.saving'\r\n                                        defaultMessage='Saving...'\r\n                                    />\r\n                                </>\r\n                            );\r\n                        }\r\n\r\n                        if (willShowActivityWarning) {\r\n                            return (\r\n                                <FormattedMessage\r\n                                    id='channel_settings.access_rules.confirm_modal.continue'\r\n                                    defaultMessage='Continue'\r\n                                />\r\n                            );\r\n                        }\r\n\r\n                        return (\r\n                            <FormattedMessage\r\n                                id={autoSyncEnabled ? 'channel_settings.access_rules.confirm_modal.save_and_apply' : 'channel_settings.access_rules.confirm_modal.save'}\r\n                                defaultMessage={autoSyncEnabled ? 'Save and apply' : 'Save'}\r\n                            />\r\n                        );\r\n                    })()}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            className='ChannelAccessRulesConfirmModal a11y__modal'\r\n            id='channel-access-rules-confirm-modal'\r\n            show={show}\r\n            onHide={handleClose}\r\n            onExited={handleClose}\r\n            compassDesign={true}\r\n            modalHeaderText={modalTitle}\r\n            modalSubheaderText={modalSubtitle}\r\n            bodyPadding={false}\r\n            isStacked={isStacked}\r\n        >\r\n            {showUserList ? (\r\n\r\n                // Detailed user list view\r\n                <div className='ChannelAccessRulesConfirmModal__details'>\r\n                    <div className='ChannelAccessRulesConfirmModal__message'>\r\n                        <FormattedMessage\r\n                            id='channel_settings.access_rules.confirm_modal.message'\r\n                            defaultMessage='Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.'\r\n                            values={{\r\n                                addCount: usersToAdd.length,\r\n                                removeCount: usersToRemove.length,\r\n                                strong: (chunks: React.ReactNode) => <strong>{chunks}</strong>,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div className='ChannelAccessRulesConfirmModal__tabs'>\r\n                        <button\r\n                            className={`ChannelAccessRulesConfirmModal__tab ${activeTab === 'allowed' ? 'active' : ''}`}\r\n                            onClick={() => handleTabChange('allowed')}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='channel_settings.access_rules.confirm_modal.allowed_tab'\r\n                                defaultMessage='Allowed ({count})'\r\n                                values={{count: usersToAdd.length}}\r\n                            />\r\n                        </button>\r\n                        <button\r\n                            className={`ChannelAccessRulesConfirmModal__tab ${activeTab === 'restricted' ? 'active' : ''}`}\r\n                            onClick={() => handleTabChange('restricted')}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='channel_settings.access_rules.confirm_modal.restricted_tab'\r\n                                defaultMessage='Restricted ({count})'\r\n                                values={{count: usersToRemove.length}}\r\n                            />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className='ChannelAccessRulesConfirmModal__userList'>\r\n                        {currentUsers.length > 0 ? (\r\n                            <SearchableUserList\r\n                                users={currentUsers}\r\n                                usersPerPage={USERS_PER_PAGE}\r\n                                total={totalCount}\r\n                                actionUserProps={{}}\r\n                                focusOnMount={false}\r\n                                nextPage={() => {}}\r\n                                search={handleSearch}\r\n                            />\r\n                        ) : (\r\n                            <div className='ChannelAccessRulesConfirmModal__noResults'>\r\n                                <FormattedMessage\r\n                                    id='channel_settings.access_rules.confirm_modal.no_users'\r\n                                    defaultMessage='No users in this category'\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {renderButtons(\r\n                        <button\r\n                            className='btn btn-tertiary'\r\n                            onClick={handleHideUsers}\r\n                            disabled={isProcessing}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='channel_settings.access_rules.confirm_modal.hide_users'\r\n                                defaultMessage='Hide users'\r\n                            />\r\n                        </button>,\r\n                    )}\r\n                </div>\r\n            ) : (\r\n\r\n                // Summary view\r\n                <div className='ChannelAccessRulesConfirmModal__summary'>\r\n                    <div className='ChannelAccessRulesConfirmModal__message'>\r\n                        <FormattedMessage\r\n                            id='channel_settings.access_rules.confirm_modal.message'\r\n                            defaultMessage='Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.'\r\n                            values={{\r\n                                addCount: usersToAdd.length,\r\n                                removeCount: usersToRemove.length,\r\n                                strong: (chunks: React.ReactNode) => <strong>{chunks}</strong>,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div className='ChannelAccessRulesConfirmModal__question'>\r\n                        <FormattedMessage\r\n                            id='channel_settings.access_rules.confirm_modal.question'\r\n                            defaultMessage='Are you sure you want to save and apply the access rules?'\r\n                        />\r\n                    </div>\r\n                    {renderButtons(\r\n                        <button\r\n                            className='btn btn-tertiary'\r\n                            onClick={handleViewUsers}\r\n                            disabled={isProcessing}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='channel_settings.access_rules.confirm_modal.view_users'\r\n                                defaultMessage='View users'\r\n                            />\r\n                        </button>,\r\n                    )}\r\n                </div>\r\n            )}\r\n        </GenericModal>\r\n    );\r\n}\r\n\r\nexport default ChannelAccessRulesConfirmModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {ChromePicker} from 'react-color';\r\nimport type {ColorResult} from 'react-color';\r\nimport tinycolor from 'tinycolor2';\r\n\r\ntype Props = {\r\n    id: string;\r\n    onChange: (color: string) => void;\r\n    value: string;\r\n    isDisabled?: boolean;\r\n}\r\n\r\ntype State = {\r\n    focused: boolean;\r\n    isOpened: boolean;\r\n    value: string;\r\n}\r\n\r\nexport default class ColorInput extends React.PureComponent<Props, State> {\r\n    private colorPicker: React.RefObject<HTMLDivElement>;\r\n    private colorInput: React.RefObject<HTMLInputElement>;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.colorPicker = React.createRef();\r\n        this.colorInput = React.createRef();\r\n\r\n        this.state = {\r\n            focused: false,\r\n            isOpened: false,\r\n            value: props.value,\r\n        };\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (!state.focused && props.value !== state.value) {\r\n            return {\r\n                value: props.value,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {isOpened: prevIsOpened} = prevState;\r\n        const {isOpened} = this.state;\r\n\r\n        if (isOpened !== prevIsOpened) {\r\n            if (isOpened) {\r\n                document.addEventListener('click', this.checkClick, {capture: true});\r\n            } else {\r\n                document.removeEventListener('click', this.checkClick);\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkClick = (e: MouseEvent): void => {\r\n        if (!this.colorPicker.current || !this.colorPicker.current.contains(e.target as Element)) {\r\n            this.setState({isOpened: false});\r\n        }\r\n    };\r\n\r\n    private togglePicker = () => {\r\n        if (!this.state.isOpened && this.colorInput.current) {\r\n            this.colorInput.current.focus();\r\n        }\r\n        this.setState({isOpened: !this.state.isOpened});\r\n    };\r\n\r\n    public handleColorChange = (newColorData: ColorResult) => {\r\n        this.setState({focused: false});\r\n        this.props.onChange(newColorData.hex);\r\n    };\r\n\r\n    private onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n        }\r\n\r\n        this.setState({value});\r\n    };\r\n\r\n    private onFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\r\n        this.setState({\r\n            focused: true,\r\n        });\r\n\r\n        if (event.target) {\r\n            event.target.setSelectionRange(1, event.target.value.length);\r\n        }\r\n    };\r\n\r\n    private onBlur = () => {\r\n        const value = this.state.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n\r\n            this.setState({\r\n                value: normalizedColor,\r\n            });\r\n        } else {\r\n            this.setState({\r\n                value: this.props.value,\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            focused: false,\r\n        });\r\n    };\r\n\r\n    private onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        // open picker on enter or space\r\n        if (event.key === 'Enter' || event.key === ' ') {\r\n            this.togglePicker();\r\n        }\r\n    };\r\n\r\n    public render() {\r\n        const {id} = this.props;\r\n        const {isOpened, value} = this.state;\r\n\r\n        return (\r\n            <div className='color-input input-group'>\r\n                <input\r\n                    id={`${id}-inputColorValue`}\r\n                    ref={this.colorInput}\r\n                    className='form-control'\r\n                    type='text'\r\n                    value={value}\r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                    onFocus={this.onFocus}\r\n                    onKeyDown={this.onKeyDown}\r\n                    maxLength={7}\r\n                    disabled={this.props.isDisabled}\r\n                    data-testid='color-inputColorValue'\r\n\r\n                />\r\n                {!this.props.isDisabled &&\r\n                    <span\r\n                        id={`${id}-squareColorIcon`}\r\n                        className='input-group-addon color-pad'\r\n                        onClick={this.togglePicker}\r\n                    >\r\n                        <i\r\n                            id={`${id}-squareColorIconValue`}\r\n                            className='color-icon'\r\n                            style={{\r\n                                backgroundColor: value,\r\n                            }}\r\n                        />\r\n                    </span>\r\n                }\r\n                {isOpened && (\r\n                    <div\r\n                        ref={this.colorPicker}\r\n                        className='color-popover'\r\n                        id={`${id}-ChromePickerModal`}\r\n                    >\r\n                        <ChromePicker\r\n                            color={value}\r\n                            onChange={this.handleColorChange}\r\n                            disableAlpha={true}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useMemo} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport type {AccessControlVisualAST, AccessControlTestResult, AccessControlPolicy, AccessControlPolicyActiveUpdate} from '@mattermost/types/access_control';\r\nimport type {ChannelMembership} from '@mattermost/types/channels';\r\nimport type {JobTypeBase} from '@mattermost/types/jobs';\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\n\r\nimport {\r\n    getAccessControlFields,\r\n    getVisualAST,\r\n    searchUsersForExpression,\r\n    getAccessControlPolicy,\r\n    createAccessControlPolicy,\r\n    deleteAccessControlPolicy,\r\n    validateExpressionAgainstRequester,\r\n    createAccessControlSyncJob,\r\n    updateAccessControlPoliciesActive,\r\n} from 'mattermost-redux/actions/access_control';\r\nimport {getChannelMembers} from 'mattermost-redux/actions/channels';\r\nimport {createJob} from 'mattermost-redux/actions/jobs';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nexport interface ChannelAccessControlActions {\r\n    getAccessControlFields: (after: string, limit: number) => Promise<ActionResult<UserPropertyField[]>>;\r\n    getVisualAST: (expression: string) => Promise<ActionResult<AccessControlVisualAST>>;\r\n    searchUsers: (expression: string, term: string, after: string, limit: number) => Promise<ActionResult<AccessControlTestResult>>;\r\n    getChannelPolicy: (channelId: string) => Promise<ActionResult<AccessControlPolicy>>;\r\n    saveChannelPolicy: (policy: AccessControlPolicy) => Promise<ActionResult<AccessControlPolicy>>;\r\n    deleteChannelPolicy: (policyId: string) => Promise<ActionResult>;\r\n    getChannelMembers: (channelId: string, page?: number, perPage?: number) => Promise<ActionResult<ChannelMembership[]>>;\r\n    createJob: (job: JobTypeBase & { data: any }) => Promise<ActionResult>;\r\n    updateAccessControlPoliciesActive: (statuses: AccessControlPolicyActiveUpdate[]) => Promise<ActionResult>;\r\n    validateExpressionAgainstRequester: (expression: string) => Promise<ActionResult<{requester_matches: boolean}>>;\r\n    createAccessControlSyncJob: (jobData: {policy_id: string}) => Promise<ActionResult>;\r\n}\r\n\r\n/**\r\n * Hook that provides access control actions for both System Console and Channel Settings contexts.\r\n * This is a thin wrapper around the existing redux actions that provides:\r\n * - Consistent interface for both system and channel contexts\r\n * - Channel-specific security for channel admin contexts\r\n * - Simplified usage in components without needing to import redux actions directly\r\n * - Improved readability and maintainability of components\r\n * - Easier testing and mocking in unit tests\r\n * - Centralized access control logic for easier updates and changes\r\n * - Single source of truth for ABAC actions for the channel context\r\n *\r\n * @param channelId - Optional channel ID for channel-specific context. Required for channel admin contexts, optional for system admin contexts.\r\n * @returns Object containing access control action functions\r\n */\r\nexport const useChannelAccessControlActions = (channelId?: string): ChannelAccessControlActions => {\r\n    const dispatch = useDispatch();\r\n\r\n    return useMemo(() => ({\r\n\r\n        /**\r\n         * Get available user attribute fields for access control rules\r\n         */\r\n        getAccessControlFields: (after: string, limit: number) => {\r\n            return dispatch(getAccessControlFields(after, limit, channelId));\r\n        },\r\n\r\n        /**\r\n         * Convert a CEL expression to a visual AST for table editor display\r\n         */\r\n        getVisualAST: (expression: string) => {\r\n            return dispatch(getVisualAST(expression, channelId));\r\n        },\r\n\r\n        /**\r\n         * Search users that match a given access control expression\r\n         */\r\n        searchUsers: (expression: string, term: string, after: string, limit: number) => {\r\n            return dispatch(searchUsersForExpression(expression, term, after, limit, channelId));\r\n        },\r\n\r\n        /**\r\n         * Get the access control policy for a specific channel\r\n         */\r\n        getChannelPolicy: (channelId: string) => {\r\n            return dispatch(getAccessControlPolicy(channelId));\r\n        },\r\n\r\n        /**\r\n         * Save or update the access control policy for a channel\r\n         */\r\n        saveChannelPolicy: (policy: AccessControlPolicy) => {\r\n            return dispatch(createAccessControlPolicy(policy));\r\n        },\r\n\r\n        /**\r\n         * Delete the access control policy for a channel\r\n         */\r\n        deleteChannelPolicy: (policyId: string) => {\r\n            return dispatch(deleteAccessControlPolicy(policyId));\r\n        },\r\n\r\n        /**\r\n         * Get channel members for a specific channel\r\n         */\r\n        getChannelMembers: (channelId: string, page = 0, perPage = 200) => {\r\n            return dispatch(getChannelMembers(channelId, page, perPage));\r\n        },\r\n\r\n        /**\r\n         * Create a job for access control synchronization\r\n         */\r\n        createJob: (job: JobTypeBase & { data: any }) => {\r\n            return dispatch(createJob(job));\r\n        },\r\n\r\n        /**\r\n         * Validate if the current user (requester) matches an access control expression\r\n         */\r\n        validateExpressionAgainstRequester: (expression: string) => {\r\n            return dispatch(validateExpressionAgainstRequester(expression, channelId));\r\n        },\r\n\r\n        /**\r\n         * Create an access control sync job with deduplication\r\n         */\r\n        createAccessControlSyncJob: (jobData: {policy_id: string}) => {\r\n            return dispatch(createAccessControlSyncJob(jobData));\r\n        },\r\n\r\n        /**\r\n         * Update the active statuses of access control policies\r\n         */\r\n        updateAccessControlPoliciesActive: (statuses: AccessControlPolicyActiveUpdate[]) => {\r\n            return dispatch(updateAccessControlPoliciesActive(statuses));\r\n        },\r\n    }), [dispatch, channelId]);\r\n};\r\n\r\nexport default useChannelAccessControlActions;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {batchActions} from 'redux-batched-actions';\r\n\r\nimport type {AccessControlPoliciesResult, AccessControlPolicy, AccessControlPolicyActiveUpdate, AccessControlTestResult} from '@mattermost/types/access_control';\r\nimport type {ChannelSearchOpts, ChannelsWithTotalCount} from '@mattermost/types/channels';\r\nimport type {ServerError} from '@mattermost/types/errors';\r\n\r\nimport {AdminTypes, ChannelTypes, UserTypes} from 'mattermost-redux/action_types';\r\nimport {Client4} from 'mattermost-redux/client';\r\nimport type {ActionFuncAsync} from 'mattermost-redux/types/actions';\r\n\r\nimport {bindClientFunc, forceLogoutIfNecessary} from './helpers';\r\n\r\nexport function getAccessControlPolicy(id: string, channelId?: string) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.getAccessControlPolicy,\r\n        onSuccess: [AdminTypes.RECEIVED_ACCESS_CONTROL_POLICY],\r\n        params: [\r\n            id,\r\n            channelId,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function createAccessControlPolicy(policy: AccessControlPolicy): ActionFuncAsync<AccessControlPolicy> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.updateOrCreateAccessControlPolicy(policy);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n\r\n        dispatch(\r\n            {type: AdminTypes.CREATE_ACCESS_CONTROL_POLICY_SUCCESS, data},\r\n        );\r\n\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function deleteAccessControlPolicy(id: string) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.deleteAccessControlPolicy,\r\n        onSuccess: [AdminTypes.DELETE_ACCESS_CONTROL_POLICY_SUCCESS],\r\n        params: [\r\n            id,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function searchAccessControlPolicies(term: string, type: string, after: string, limit: number): ActionFuncAsync<AccessControlPoliciesResult> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.searchAccessControlPolicies(term, type, after, limit);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n\r\n        dispatch(\r\n            {type: AdminTypes.RECEIVED_ACCESS_CONTROL_POLICIES_SEARCH, data: data.policies},\r\n        );\r\n\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function searchAccessControlPolicyChannels(id: string, term: string, opts: ChannelSearchOpts): ActionFuncAsync<ChannelsWithTotalCount> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.searchChildAccessControlPolicyChannels(id, term, opts);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n\r\n        const childs: Record<string, string[]> = {};\r\n        childs[id] = data.channels.map((channel) => channel.id);\r\n\r\n        dispatch(batchActions([\r\n            {type: AdminTypes.RECEIVED_ACCESS_CONTROL_CHILD_POLICIES, data: childs},\r\n            {type: ChannelTypes.RECEIVED_CHANNELS, data: data.channels},\r\n        ]));\r\n\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function assignChannelsToAccessControlPolicy(policyId: string, channelIds: string[]) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.assignChannelsToAccessControlPolicy,\r\n        onSuccess: [AdminTypes.ASSIGN_CHANNELS_TO_ACCESS_CONTROL_POLICY_SUCCESS],\r\n        params: [\r\n            policyId,\r\n            channelIds,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function unassignChannelsFromAccessControlPolicy(policyId: string, channelIds: string[]) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.unassignChannelsFromAccessControlPolicy,\r\n        onSuccess: [AdminTypes.UNASSIGN_CHANNELS_FROM_ACCESS_CONTROL_POLICY_SUCCESS],\r\n        params: [\r\n            policyId,\r\n            channelIds,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function getAccessControlFields(after: string, limit: number, channelId?: string) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.getAccessControlFields,\r\n        params: [\r\n            after,\r\n            limit,\r\n            channelId,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function updateAccessControlPolicyActive(policyId: string, active: boolean) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.updateAccessControlPolicyActive,\r\n        params: [\r\n            policyId,\r\n            active,\r\n        ],\r\n    });\r\n}\r\n\r\nexport function searchUsersForExpression(expression: string, term: string, after: string, limit: number, channelId?: string): ActionFuncAsync<AccessControlTestResult> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.testAccessControlExpression(expression, term, after, limit, channelId);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n\r\n        dispatch(\r\n            {type: UserTypes.RECEIVED_PROFILES, data: data.users},\r\n        );\r\n\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function getVisualAST(expression: string, channelId?: string) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.expressionToVisualFormat,\r\n        params: [expression, channelId],\r\n    });\r\n}\r\n\r\nexport function validateExpressionAgainstRequester(expression: string, channelId?: string): ActionFuncAsync<{requester_matches: boolean}> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.validateExpressionAgainstRequester(expression, channelId);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function createAccessControlSyncJob(jobData: {policy_id: string}): ActionFuncAsync<any> {\r\n    return async (dispatch, getState) => {\r\n        let data;\r\n        try {\r\n            data = await Client4.createAccessControlSyncJob(jobData);\r\n        } catch (error) {\r\n            forceLogoutIfNecessary(error as ServerError, dispatch, getState);\r\n            return {error};\r\n        }\r\n        return {data};\r\n    };\r\n}\r\n\r\nexport function updateAccessControlPoliciesActive(states: AccessControlPolicyActiveUpdate[]) {\r\n    return bindClientFunc({\r\n        clientFunc: Client4.updateAccessControlPoliciesActive,\r\n        params: [states],\r\n    });\r\n}\r\n"],"names":["CELOperator","OperatorLabel","OPERATOR_LABELS","EQUALS","IS","NOT_EQUALS","IS_NOT","STARTS_WITH","ENDS_WITH","CONTAINS","IN","OPERATOR_CONFIG","type","celOp","hasUsableAttributes","userAttributes","enableUserManagedAttributes","some","attr","_attr$attrs","_attr$attrs2","_attr$attrs3","hasSpaces","name","includes","isSynced","attrs","ldap","saml","isAdminManaged","managed","TestButton","_ref","onClick","disabled","disabledTooltip","button","React","className","FormattedMessage","id","defaultMessage","WithTooltip","title","AddAttributeButton","_ref2","HelpText","_ref3","message","onLearnMoreClick","Markdown","options","mentionHighlight","href","propTypes","_pt","isRequired","AttributeIcon","props","attribute","iconProps","_objectWithoutProperties","_excluded","_attribute$attrs","valueType","value_type","EmailOutlineIcon","LinkVariantIcon","PoundIcon","ChevronDownCircleOutlineIcon","FormatListBulletedIcon","MenuVariantIcon","AttributeSelectorMenu","currentAttribute","availableAttributes","onChange","menuId","buttonId","autoOpen","onMenuOpened","formatMessage","useIntl","filter","setFilter","useState","prevAutoOpen","useRef","onFilterChange","useCallback","e","target","value","useMemo","toLowerCase","handleAttributeChange","selectedAttributeObject","find","useEffect","current","buttonElement","document","getElementById","click","Menu","menuButton","class","classNames","children","dataTestId","menu","key","placeholder","map","option","_option$attrs","_option$attrs2","_option$attrs3","allowed","menuItem","concat","role","forceCloseOnSelect","undefined","labels","leadingElement","size","trailingElements","InformationOutlineIcon","ShieldAlertOutlineIcon","color","SyncIcon","CheckIcon","tooltipContent","OperatorSelectorMenu","currentOperator","handleOperatorChange","descriptor","currentOperatorDescriptor","getOperatorDescriptor","CurrentOperatorIcon","icon","filteredOperators","Object","values","OPERATOR_DESCRIPTORS","desc","label","Icon","operatorValue","is","EqualIcon","defineMessage","NotEqualVariantIcon","ElementOfIcon","FunctionIcon","updateValues","allowCreateValue","actualAllowCreateForMenu","length","filteredOptions","defaultMultiPlaceholder","defaultCreatePlaceholder","handleSelectItem","newValues","v","handleCreateValue","valueToCreate","trimmedValue","trim","handleInputKeyDownForMenu","stopPropagation","preventDefault","handleRemoveValue","event","valueToRemove","cellContents","visualPlaceholderText","actualTextDisplayed","useStyle","tabIndex","onKeyDown","CloseIcon","ChevronDownIcon","isSelected","opt","updateValue","inputValue","setInputValue","isEditing","setIsEditing","hasOptions","commitInputValue","handleKeyDownSimpleInput","defaultPlaceholder","onFocus","onBlur","maxLength","Constants","MAX_CUSTOM_ATTRIBUTE_LENGTH","ValueSelectorMenu","row","operator","MultiValueSelector","SingleValueSelector","attribute_type","TableEditor","onValidate","onParseError","channelId","actions","isSystemAdmin","validateExpressionAgainstRequester","rows","setRows","showTestResults","setShowTestResults","showHelpModal","setShowHelpModal","autoOpenAttributeMenuForRow","setAutoOpenAttributeMenuForRow","userWouldBeExcluded","setUserWouldBeExcluded","getVisualAST","then","result","_result$error$message","_result$error$message2","error","visualAST","tableRows","node","conditions","startsWith","Error","slice","op","Array","isArray","push","parseExpression","data","catch","err","_err$message","_err$message2","async","_result$data","requester_matches","checkUserSelfExclusion","updateExpression","newRows","rowsThatCanFormExpressions","expr","attributeExpr","config","attributeObj","valuesStr","val","join","findFirstAvailableAttribute","findFirstAvailableAttributeFromList","addRow","firstAvailableAttribute","currentRows","_userAttributes$","removeRow","index","toSpliced","updateRowAttribute","oldAttribute","_objectSpread","updateRowOperator","newOperator","oldOperator","updateRowValues","colSpan","_userAttributes$find","_userAttributes$find$","TestResultsModal","onExited","isStacked","openModal","searchUsers","term","after","limit","searchUsersForExpression","CELHelpModal","onHide","GenericModal","modalHeaderText","modalSubheaderText","compassDesign","bodyPadding","modalLocation","link","msg","ExternalLink","location","dispatch","useDispatch","setTerm","users","setUsers","total","setTotal","loading","setLoading","cursorHistory","setCursorHistory","fetchUsers","searchTerm","cursor","reset","arguments","newUsers","prevUsers","modalTitle","show","showCloseButton","ariaLabel","SearchableUserList","usersPerPage","nextPage","page","cursorForNextPage","search","newTerm","actionUserProps","ConvertConfirmModal","titleMessage","convertMessage","confirmMessage","convertConfirmationMessage","onConfirm","onCancel","displayName","toPublic","messages","toPublicTitle","toPublicMessage","toPublicConfirm","toPublicMessageConfirmation","toPrivateTitle","toPrivateMessage","toPrivateConfirm","toPrivateMessageConfirmation","assign","confirmButton","cancelButton","ConfirmModal","modalClass","confirmButtonClass","confirmButtonText","cancelButtonText","defineMessages","ChannelAccessRulesConfirmModal","channelName","usersToAdd","usersToRemove","isProcessing","autoSyncEnabled","willShowActivityWarning","showUserList","setShowUserList","activeTab","setActiveTab","allowedUsers","setAllowedUsers","restrictedUsers","setRestrictedUsers","filteredAllowedUsers","setFilteredAllowedUsers","filteredRestrictedUsers","setFilteredRestrictedUsers","loadUserProfiles","getProfilesByIds","handleTabChange","tab","handleClose","modalSubtitle","currentUsers","totalCount","renderButtons","leftButton","addCount","removeCount","strong","chunks","count","focusOnMount","filteredAllowed","user","_user$first_name","_user$last_name","_user$email","_user$nickname","username","first_name","last_name","email","nickname","filteredRestricted","_user$first_name2","_user$last_name2","_user$email2","_user$nickname2","handleHideUsers","handleViewUsers","ColorInput","constructor","super","_defineProperty","this","colorPicker","contains","setState","isOpened","state","colorInput","focus","newColorData","focused","hex","tinycolor","normalizedColor","toHex","isValid","setSelectionRange","togglePicker","getDerivedStateFromProps","componentDidUpdate","prevProps","prevState","prevIsOpened","addEventListener","checkClick","capture","removeEventListener","render","ref","isDisabled","style","backgroundColor","ChromePicker","handleColorChange","disableAlpha","useChannelAccessControlActions","getAccessControlFields","expression","getChannelPolicy","getAccessControlPolicy","saveChannelPolicy","policy","createAccessControlPolicy","deleteChannelPolicy","policyId","deleteAccessControlPolicy","getChannelMembers","perPage","createJob","job","createAccessControlSyncJob","jobData","updateAccessControlPoliciesActive","statuses","bindClientFunc","clientFunc","Client4","onSuccess","AdminTypes","RECEIVED_ACCESS_CONTROL_POLICY","params","getState","updateOrCreateAccessControlPolicy","forceLogoutIfNecessary","CREATE_ACCESS_CONTROL_POLICY_SUCCESS","DELETE_ACCESS_CONTROL_POLICY_SUCCESS","searchAccessControlPolicies","RECEIVED_ACCESS_CONTROL_POLICIES_SEARCH","policies","searchAccessControlPolicyChannels","opts","searchChildAccessControlPolicyChannels","childs","channels","channel","batchActions","RECEIVED_ACCESS_CONTROL_CHILD_POLICIES","ChannelTypes","RECEIVED_CHANNELS","assignChannelsToAccessControlPolicy","channelIds","ASSIGN_CHANNELS_TO_ACCESS_CONTROL_POLICY_SUCCESS","unassignChannelsFromAccessControlPolicy","UNASSIGN_CHANNELS_FROM_ACCESS_CONTROL_POLICY_SUCCESS","updateAccessControlPolicyActive","active","testAccessControlExpression","UserTypes","RECEIVED_PROFILES","expressionToVisualFormat","states"],"sourceRoot":""}