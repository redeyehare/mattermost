{"version":3,"file":"6532.a0eace21c00262c45155.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/more_direct_channels/list_item/user_details/user_details.tsx","webpack://mattermost-webapp/./src/components/more_direct_channels/list_item/user_details/index.ts","webpack://mattermost-webapp/./src/components/more_direct_channels/types.ts","webpack://mattermost-webapp/./src/components/more_direct_channels/list_item/list_item.tsx","webpack://mattermost-webapp/./src/components/more_direct_channels/list_item/index.ts","webpack://mattermost-webapp/./src/components/more_direct_channels/list/list.tsx","webpack://mattermost-webapp/./src/components/more_direct_channels/list/index.ts","webpack://mattermost-webapp/./src/components/more_direct_channels/more_direct_channels.tsx","webpack://mattermost-webapp/./src/components/more_direct_channels/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {Client4} from 'mattermost-redux/client';\r\nimport {getRemoteDisplayName} from 'mattermost-redux/selectors/entities/shared_channels';\r\nimport {isGuest} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport CustomStatusEmoji from 'components/custom_status/custom_status_emoji';\r\nimport ProfilePicture from 'components/profile_picture';\r\nimport SharedUserIndicator from 'components/shared_user_indicator';\r\nimport BotTag from 'components/widgets/tag/bot_tag';\r\nimport GuestTag from 'components/widgets/tag/guest_tag';\r\n\r\nimport {displayEntireNameForUser} from 'utils/utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\ntype Props = {\r\n    currentUserId: string;\r\n    option: UserProfile;\r\n    status: string;\r\n    actions: {\r\n        fetchRemoteClusterInfo: (remoteId: string, forceRefresh?: boolean) => void;\r\n    };\r\n};\r\n\r\nexport default function UserDetails(props: Props): JSX.Element {\r\n    const {currentUserId, option, status, actions} = props;\r\n\r\n    const remoteDisplayName = useSelector((state: GlobalState) => (\r\n        option.remote_id ? getRemoteDisplayName(state, option.remote_id) : null\r\n    ));\r\n\r\n    // Fetch remote info when component mounts for remote users\r\n    useEffect(() => {\r\n        if (option.remote_id) {\r\n            actions.fetchRemoteClusterInfo(option.remote_id);\r\n        }\r\n    }, [option.remote_id]);\r\n\r\n    const {\r\n        id,\r\n        delete_at: deleteAt,\r\n        is_bot: isBot = false,\r\n        last_picture_update: lastPictureUpdate,\r\n    } = option;\r\n\r\n    const displayName = displayEntireNameForUser(option);\r\n\r\n    let modalName: React.ReactNode = displayName;\r\n    if (option.id === currentUserId) {\r\n        modalName = (\r\n            <FormattedMessage\r\n                id='more_direct_channels.directchannel.you'\r\n                defaultMessage='{displayname} (you)'\r\n                values={{\r\n                    displayname: displayName,\r\n                }}\r\n            />\r\n        );\r\n    } else if (option.delete_at) {\r\n        modalName = (\r\n            <FormattedMessage\r\n                id='more_direct_channels.directchannel.deactivated'\r\n                defaultMessage='{displayname} - Deactivated'\r\n                values={{\r\n                    displayname: displayName,\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ProfilePicture\r\n                src={Client4.getProfilePictureUrl(id, lastPictureUpdate)}\r\n                status={!deleteAt && !isBot ? status : undefined}\r\n                size='md'\r\n            />\r\n            <div className='more-modal__details'>\r\n                <div className='more-modal__name'>\r\n                    {modalName}\r\n                    {isBot && <BotTag/>}\r\n                    {isGuest(option.roles) && <GuestTag/>}\r\n                    {option.remote_id && (\r\n                        <SharedUserIndicator\r\n                            withTooltip={true}\r\n                            className='more-modal__shared-icon'\r\n                            remoteNames={remoteDisplayName ? [remoteDisplayName] : undefined}\r\n                        />\r\n                    )}\r\n                    <CustomStatusEmoji\r\n                        userID={option.id}\r\n                        showTooltip={true}\r\n                        emojiSize={15}\r\n                        spanStyle={{\r\n                            display: 'flex',\r\n                            flex: '0 0 auto',\r\n                            alignItems: 'center',\r\n                        }}\r\n                    />\r\n                </div>\r\n                {!isBot && (\r\n                    <div className='more-modal__description'>\r\n                        {option.email}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {fetchRemoteClusterInfo} from 'mattermost-redux/actions/shared_channels';\r\nimport {getCurrentUserId, getStatusForUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport UserDetails from './user_details';\r\n\r\ntype OwnProps = {\r\n    option: UserProfile;\r\n}\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        status: getStatusForUserId(state, ownProps.option.id),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            fetchRemoteClusterInfo,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDetails);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {Value} from 'components/multiselect/multiselect';\r\n\r\n// Not to be confused with the GroupChannel type used for LDAP groups\r\nexport type GroupChannel = Channel & {\r\n    profiles: UserProfile[];\r\n}\r\n\r\nexport function isGroupChannel(option: UserProfile | GroupChannel): option is GroupChannel {\r\n    return (option as GroupChannel)?.type === 'G';\r\n}\r\n\r\nexport type Option = (UserProfile & {last_post_at?: number}) | GroupChannel;\r\n\r\nexport type OptionValue = Option & Value;\r\n\r\nexport function optionValue(option: Option): OptionValue {\r\n    return {\r\n        value: option.id,\r\n        label: isGroupChannel(option) ? option.display_name : option.username,\r\n        ...option,\r\n    };\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport Timestamp from 'components/timestamp';\r\n\r\nimport UserDetails from './user_details';\r\n\r\nimport {isGroupChannel} from '../types';\r\nimport type {\r\n    GroupChannel,\r\n    OptionValue,\r\n} from '../types';\r\n\r\nconst TIME_SPEC: React.ComponentProps<typeof Timestamp> = {\r\n    useTime: false,\r\n    style: 'long',\r\n    ranges: [\r\n        {within: ['minute', -1], display: ['second', 0]},\r\n        {within: ['hour', -1], display: ['minute']},\r\n        {within: ['hour', -24], display: ['hour']},\r\n        {within: ['day', -30], display: ['day']},\r\n        {within: ['month', -11], display: ['month']},\r\n        {within: ['year', -1000], display: ['year']},\r\n    ],\r\n};\r\n\r\nexport type Props = {\r\n    option: OptionValue;\r\n    isMobileView: boolean;\r\n    isSelected: boolean;\r\n    add: (value: OptionValue) => void;\r\n    select: (value: OptionValue) => void;\r\n}\r\n\r\nconst ListItem = React.forwardRef((props: Props, ref?: React.Ref<HTMLDivElement>) => {\r\n    const {\r\n        option,\r\n        isMobileView,\r\n        isSelected,\r\n        add,\r\n        select,\r\n    } = props;\r\n    const intl = useIntl();\r\n\r\n    const {last_post_at: lastPostAt} = option;\r\n\r\n    let details;\r\n    if (isGroupChannel(option)) {\r\n        details = <GMDetails option={option}/>;\r\n    } else {\r\n        details = <UserDetails option={option}/>;\r\n    }\r\n\r\n    const handleClick = useCallback(() => add(option), [option, add]);\r\n    const handleMouseEnter = useCallback(() => select(option), [option, select]);\r\n\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className={classNames('more-modal__row clickable', {'more-modal__row--selected': isSelected})}\r\n            onClick={handleClick}\r\n            onMouseEnter={handleMouseEnter}\r\n        >\r\n            {details}\r\n\r\n            {isMobileView && Boolean(lastPostAt) &&\r\n                <div className='more-modal__lastPostAt'>\r\n                    <Timestamp\r\n                        {...TIME_SPEC}\r\n                        value={lastPostAt}\r\n                    />\r\n                </div>\r\n            }\r\n\r\n            <div className='more-modal__actions'>\r\n                <button\r\n                    className='more-modal__actions--round'\r\n                    aria-label={intl.formatMessage({\r\n                        id: 'more_direct_channels.new_convo_add.label',\r\n                        defaultMessage: 'Add option {label}',\r\n                    }, {label: option.label})}\r\n                >\r\n                    <i className='icon icon-plus'/>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\nListItem.displayName = 'ListItem';\r\n\r\nexport default ListItem;\r\n\r\nfunction GMDetails(props: {option: GroupChannel}) {\r\n    const {option} = props;\r\n\r\n    return (\r\n        <>\r\n            <div className='more-modal__gm-icon'>\r\n                {option.profiles.length}\r\n            </div>\r\n            <div className='more-modal__details'>\r\n                <div className='more-modal__name'>\r\n                    <span>\r\n                        {option.profiles.map((profile) => `@${profile.username}`).join(', ')}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ListItem from './list_item';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(ListItem);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useMemo} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport MultiSelect from 'components/multiselect/multiselect';\r\nimport NewChannelModal from 'components/new_channel_modal/new_channel_modal';\r\n\r\nimport Constants, {ModalIdentifiers} from 'utils/constants';\r\n\r\nimport ListItem from '../list_item';\r\nimport {optionValue} from '../types';\r\nimport type {Option, OptionValue} from '../types';\r\n\r\nconst MAX_SELECTABLE_VALUES = Constants.MAX_USERS_IN_GM - 1;\r\nexport const USERS_PER_PAGE = 50;\r\n\r\ntype Props = {\r\n    addValue: (value: OptionValue) => void;\r\n    currentUserId: string;\r\n    handleDelete: (values: OptionValue[]) => void;\r\n    handlePageChange: (page: number, prevPage: number) => void;\r\n    handleSubmit: (values?: OptionValue[]) => void;\r\n    handleHide: () => void;\r\n    isExistingChannel: boolean;\r\n    loading: boolean;\r\n    options: Option[];\r\n    saving: boolean;\r\n    search: (term: string) => void;\r\n    selectedItemRef: React.RefObject<HTMLDivElement>;\r\n    totalCount: number;\r\n    users: UserProfile[];\r\n\r\n    /**\r\n     * An array of values that have been selected by the user in the multiselect.\r\n     */\r\n    values: OptionValue[];\r\n}\r\n\r\nconst List = React.forwardRef((props: Props, ref?: React.Ref<MultiSelect<OptionValue>>) => {\r\n    const renderOptionValue = useCallback((\r\n        option: OptionValue,\r\n        isSelected: boolean,\r\n        add: (value: OptionValue) => void,\r\n        select: (value: OptionValue) => void,\r\n    ) => {\r\n        return (\r\n            <ListItem\r\n                ref={isSelected ? props.selectedItemRef : undefined}\r\n                key={'more_direct_channels_list_' + option.value}\r\n                option={option}\r\n                isSelected={isSelected}\r\n                add={add}\r\n                select={select}\r\n            />\r\n        );\r\n    }, [props.selectedItemRef]);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const handleSubmitImmediatelyOn = useCallback((value: OptionValue) => {\r\n        return value.id === props.currentUserId || Boolean(value.delete_at);\r\n    }, [props.currentUserId]);\r\n\r\n    const handleCreateChannel = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\r\n        e.preventDefault();\r\n        props.handleHide();\r\n        dispatch(openModal({modalId: ModalIdentifiers.NEW_CHANNEL_MODAL, dialogType: NewChannelModal}));\r\n    };\r\n\r\n    const intl = useIntl();\r\n\r\n    let note;\r\n    if (props.isExistingChannel) {\r\n        if (props.values.length >= MAX_SELECTABLE_VALUES) {\r\n            note = (\r\n                <FormattedMessage\r\n                    id='more_direct_channels.new_convo_note.full'\r\n                    defaultMessage={'You\\'ve reached the maximum number of people for this conversation. Consider creating a private channel instead.'}\r\n                />\r\n            );\r\n        } else {\r\n            note = (\r\n                <FormattedMessage\r\n                    id='more_direct_channels.new_convo_note'\r\n                    defaultMessage={'This will start a new conversation. If you\\'re adding a lot of people, consider creating a private channel instead.'}\r\n                />\r\n            );\r\n        }\r\n    }\r\n\r\n    let remainingText;\r\n    if (MAX_SELECTABLE_VALUES > props.values.length) {\r\n        remainingText = (\r\n            <FormattedMessage\r\n                id={'multiselect.numPeopleRemaining'}\r\n                defaultMessage={'Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {person} other {people}}. '}\r\n                values={{\r\n                    num: MAX_SELECTABLE_VALUES - props.values.length,\r\n                }}\r\n            />\r\n        );\r\n    } else {\r\n        remainingText = (\r\n            <FormattedMessage\r\n                id={'multiselect.maxPeople'}\r\n                defaultMessage={'Use ↑↓ to browse, ↵ to select. You can\\'t add more than {num} people. Please <a>create a channel</a> to include more people.'}\r\n                values={{\r\n                    num: MAX_SELECTABLE_VALUES,\r\n                    a: (chunks: React.ReactNode) => {\r\n                        return (\r\n                            <a\r\n                                href='#'\r\n                                onClick={(e) => handleCreateChannel(e)}\r\n                            >{chunks}</a>\r\n                        );\r\n                    },\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    const options = useMemo(() => {\r\n        return props.options.map(optionValue);\r\n    }, [props.options]);\r\n\r\n    return (\r\n        <MultiSelect<OptionValue>\r\n            ref={ref}\r\n            options={options}\r\n            optionRenderer={renderOptionValue}\r\n            intl={intl}\r\n            selectedItemRef={props.selectedItemRef}\r\n            values={props.values}\r\n            valueRenderer={renderValue}\r\n            ariaLabelRenderer={renderAriaLabel}\r\n            perPage={USERS_PER_PAGE}\r\n            handlePageChange={props.handlePageChange}\r\n            handleInput={props.search}\r\n            handleDelete={props.handleDelete}\r\n            handleAdd={props.addValue}\r\n            handleSubmit={props.handleSubmit}\r\n            noteText={note}\r\n            maxValues={MAX_SELECTABLE_VALUES}\r\n            numRemainingText={remainingText}\r\n            buttonSubmitText={\r\n                <FormattedMessage\r\n                    id='multiselect.go'\r\n                    defaultMessage='Go'\r\n                />\r\n            }\r\n            buttonSubmitLoadingText={\r\n                <FormattedMessage\r\n                    id='multiselect.loading'\r\n                    defaultMessage='Loading...'\r\n                />\r\n            }\r\n            submitImmediatelyOn={handleSubmitImmediatelyOn}\r\n            saving={props.saving}\r\n            loading={props.loading}\r\n            users={props.users}\r\n            totalCount={props.totalCount}\r\n            placeholderText={intl.formatMessage({id: 'multiselect.placeholder', defaultMessage: 'Search and add members'})}\r\n        />\r\n    );\r\n});\r\n\r\nexport default List;\r\n\r\nfunction renderValue(props: {data: OptionValue}) {\r\n    return (props.data as UserProfile).username;\r\n}\r\n\r\nfunction renderAriaLabel(option: OptionValue) {\r\n    return (option as UserProfile)?.username ?? '';\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getAllChannels, getChannelsWithUserProfiles} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\nimport {getUserIdFromChannelName} from 'mattermost-redux/utils/channel_utils';\r\nimport {filterProfilesStartingWithTerm} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport List from './list';\r\n\r\nimport type {Option, OptionValue} from '../types';\r\n\r\ntype OwnProps = {\r\n    users: UserProfile[];\r\n    values: OptionValue[];\r\n}\r\n\r\nexport function makeGetOptions(): (state: GlobalState, users: UserProfile[], values: OptionValue[]) => Option[] {\r\n    // Gets all loaded DMs (as UserProfiles)\r\n    const getUsersWithDMs = createSelector(\r\n        'getUsersWithDMs',\r\n        getCurrentUserId,\r\n        getAllChannels,\r\n        (state: GlobalState, users: UserProfile[]) => users,\r\n        (currentUserId, allChannels, users) => {\r\n            const directChannels = Object.values(allChannels).filter((channel) => channel.type === Constants.DM_CHANNEL);\r\n\r\n            // Gets all loaded DMs (as UserProfiles)\r\n            const usersWithDMs: Array<UserProfile & {last_post_at: number}> = [];\r\n            for (const channel of directChannels) {\r\n                const otherUserId = getUserIdFromChannelName(currentUserId, channel.name);\r\n                const otherUser = users.find((user) => user.id === otherUserId);\r\n\r\n                if (!otherUser) {\r\n                    // The user doesn't match the search filter\r\n                    continue;\r\n                }\r\n\r\n                if (channel.last_post_at === 0) {\r\n                    // The DM channel exists but has no messages in it\r\n                    continue;\r\n                }\r\n\r\n                usersWithDMs.push({\r\n                    ...otherUser,\r\n                    last_post_at: channel.last_post_at,\r\n                });\r\n            }\r\n\r\n            return usersWithDMs;\r\n        },\r\n    );\r\n\r\n    // Gets GM channels matching the search term and selected values\r\n    const getFilteredGroupChannels = createSelector(\r\n        'getFilteredGroupChannels',\r\n        getChannelsWithUserProfiles,\r\n        (state: GlobalState) => state.views.search.modalSearch,\r\n        (state: GlobalState, values: OptionValue[]) => values,\r\n        (channelsWithProfiles, searchTerm, values) => {\r\n            return channelsWithProfiles.filter((channel) => {\r\n                if (searchTerm) {\r\n                    // Check that at least one of the users in the channel matches the search term\r\n                    const matches = filterProfilesStartingWithTerm(channel.profiles, searchTerm);\r\n                    if (matches.length === 0) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if (values) {\r\n                    // Check that all of the selected users are in the channel\r\n                    const valuesInProfiles = values.every((value) => channel.profiles.find((user) => user.id === value.id));\r\n                    if (!valuesInProfiles) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                // Only include GM channels with messages in them\r\n                return channel.last_post_at > 0;\r\n            });\r\n        },\r\n    );\r\n\r\n    return createSelector(\r\n        'makeGetOptions',\r\n        getUsersWithDMs,\r\n        (state: GlobalState, users: UserProfile[], values: OptionValue[]) => getFilteredGroupChannels(state, values),\r\n        (state: GlobalState, users: UserProfile[]) => users,\r\n        (state: GlobalState) => Boolean(state.views.search.modalSearch),\r\n        (usersWithDMs, filteredGroupChannels, users, isSearch) => {\r\n            // Recent DMs (as UserProfiles) and GMs sorted by recent activity\r\n            const recents = [...usersWithDMs, ...filteredGroupChannels].\r\n                sort((a, b) => b.last_post_at - a.last_post_at);\r\n\r\n            // Only show the 20 most recent DMs and GMs when no search term has been entered. If a search term has been\r\n            // entered, `users` is expected to have already been filtered by it\r\n            if (!isSearch && recents.length > 0) {\r\n                return recents.slice(0, 20);\r\n            }\r\n\r\n            // Other users sorted by whether or not they've been deactivated followed by alphabetically\r\n            const usersWithoutDMs = users.\r\n                filter((user) => user.delete_at === 0 && !usersWithDMs.some((other) => other.id === user.id)).\r\n                map((user) => ({...user, last_post_at: 0}));\r\n            usersWithoutDMs.sort((a, b) => {\r\n                return a.username.localeCompare(b.username);\r\n            });\r\n\r\n            // Returns an array containing:\r\n            //  1. All recent DMs (represented by UserProfiles) and GMs matching the filter\r\n            //      - GMs are also filtered to only show ones containing each selected user\r\n            //  2. Other non-deactivated users sorted by username\r\n            return [\r\n                ...recents,\r\n                ...usersWithoutDMs,\r\n            ];\r\n        },\r\n    );\r\n}\r\n\r\nfunction makeMapStateToProps() {\r\n    const getOptions = makeGetOptions();\r\n\r\n    return (state: GlobalState, ownProps: OwnProps) => {\r\n        return {\r\n            options: getOptions(state, ownProps.users, ownProps.values),\r\n        };\r\n    };\r\n}\r\n\r\nexport default connect(makeMapStateToProps)(List);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport debounce from 'lodash/debounce';\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport type MultiSelect from 'components/multiselect/multiselect';\r\n\r\nimport {focusElement} from 'utils/a11y_utils';\r\nimport {getHistory} from 'utils/browser_history';\r\nimport Constants from 'utils/constants';\r\n\r\nimport List from './list';\r\nimport {USERS_PER_PAGE} from './list/list';\r\nimport {isGroupChannel, optionValue} from './types';\r\nimport type {OptionValue} from './types';\r\n\r\nexport type Props = {\r\n    currentUserId: string;\r\n    currentTeamId?: string;\r\n    currentTeamName?: string;\r\n    searchTerm: string;\r\n    users: UserProfile[];\r\n    totalCount: number;\r\n\r\n    /*\r\n    * List of current channel members of existing channel\r\n    */\r\n    currentChannelMembers?: UserProfile[];\r\n\r\n    /*\r\n    * Whether the modal is for existing channel or not\r\n    */\r\n    isExistingChannel: boolean;\r\n\r\n    /*\r\n    * The mode by which direct messages are restricted, if at all.\r\n    */\r\n    restrictDirectMessage?: string;\r\n    onModalDismissed?: () => void;\r\n    onExited?: () => void;\r\n    actions: {\r\n        getProfiles: (page?: number, perPage?: number, options?: any) => Promise<ActionResult>;\r\n        getProfilesInTeam: (teamId: string, page: number, perPage?: number, sort?: string, options?: any) => Promise<ActionResult>;\r\n        loadProfilesMissingStatus: (users: UserProfile[]) => void;\r\n        getTotalUsersStats: () => void;\r\n        loadStatusesForProfilesList: (users: UserProfile[]) => void;\r\n        loadProfilesForGroupChannels: (groupChannels: Channel[]) => void;\r\n        openDirectChannelToUserId: (userId: string) => Promise<ActionResult>;\r\n        openGroupChannelToUserIds: (userIds: string[]) => Promise<ActionResult>;\r\n        searchProfiles: (term: string, options: any) => Promise<ActionResult<UserProfile[]>>;\r\n        searchGroupChannels: (term: string) => Promise<ActionResult<Channel[]>>;\r\n        setModalSearchTerm: (term: string) => void;\r\n        canUserDirectMessage: (userId: string, otherUserId: string) => Promise<ActionResult<{can_dm: boolean}>>;\r\n    };\r\n    focusOriginElement: string;\r\n}\r\n\r\ntype State = {\r\n    values: OptionValue[];\r\n    show: boolean;\r\n    search: boolean;\r\n    saving: boolean;\r\n    loadingUsers: boolean;\r\n    directMessageCapabilityCache: Record<string, boolean>;\r\n}\r\n\r\nexport default class MoreDirectChannels extends React.PureComponent<Props, State> {\r\n    searchTimeoutId: any;\r\n    exitToChannel?: string;\r\n    multiselect: React.RefObject<MultiSelect<OptionValue>>;\r\n    selectedItemRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.searchTimeoutId = 0;\r\n        this.multiselect = React.createRef();\r\n        this.selectedItemRef = React.createRef();\r\n\r\n        const values: OptionValue[] = [];\r\n        if (props.currentChannelMembers) {\r\n            for (let i = 0; i < props.currentChannelMembers.length; i++) {\r\n                const user = Object.assign({}, props.currentChannelMembers[i]);\r\n                if (user.id === props.currentUserId) {\r\n                    continue;\r\n                }\r\n                values.push(optionValue(user));\r\n            }\r\n        }\r\n\r\n        this.state = {\r\n            values,\r\n            show: true,\r\n            search: false,\r\n            saving: false,\r\n            loadingUsers: true,\r\n            directMessageCapabilityCache: {},\r\n        };\r\n    }\r\n\r\n    loadModalData = () => {\r\n        this.getUserProfiles();\r\n        this.props.actions.getTotalUsersStats();\r\n        this.props.actions.loadProfilesMissingStatus(this.props.users);\r\n        this.checkDMCapabilities(this.props.users);\r\n    };\r\n\r\n    checkDMCapabilities = async (users: UserProfile[]) => {\r\n        const {currentUserId} = this.props;\r\n        const {directMessageCapabilityCache} = this.state;\r\n        const usersToCheck = users.filter((user) =>\r\n            user.id !== currentUserId &&\r\n            user.remote_id &&\r\n            !(user.id in directMessageCapabilityCache),\r\n        );\r\n\r\n        if (usersToCheck.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const promises = usersToCheck.map(async (user) => {\r\n            try {\r\n                const result = await this.props.actions.canUserDirectMessage(currentUserId, user.id);\r\n                return {userId: user.id, canDM: result.data?.can_dm ?? false};\r\n            } catch {\r\n                return {userId: user.id, canDM: false};\r\n            }\r\n        });\r\n\r\n        const results = await Promise.all(promises);\r\n        const newCache = {...directMessageCapabilityCache};\r\n        results.forEach(({userId, canDM}) => {\r\n            newCache[userId] = canDM;\r\n        });\r\n\r\n        this.setState({directMessageCapabilityCache: newCache});\r\n    };\r\n\r\n    updateFromProps(prevProps: Props) {\r\n        if (prevProps.searchTerm !== this.props.searchTerm) {\r\n            clearTimeout(this.searchTimeoutId);\r\n\r\n            const searchTerm = this.props.searchTerm;\r\n            if (searchTerm === '') {\r\n                this.resetPaging();\r\n            } else {\r\n                const teamId = this.props.restrictDirectMessage === 'any' ? '' : this.props.currentTeamId;\r\n\r\n                this.searchTimeoutId = setTimeout(\r\n                    async () => {\r\n                        this.setUsersLoadingState(true);\r\n                        const [{data: profilesData}, {data: groupChannelsData}] = await Promise.all([\r\n                            this.props.actions.searchProfiles(searchTerm, {team_id: teamId}),\r\n                            this.props.actions.searchGroupChannels(searchTerm),\r\n                        ]);\r\n                        if (profilesData) {\r\n                            this.props.actions.loadStatusesForProfilesList(profilesData);\r\n                        }\r\n                        if (groupChannelsData) {\r\n                            this.props.actions.loadProfilesForGroupChannels(groupChannelsData);\r\n                        }\r\n                        this.resetPaging();\r\n                        this.setUsersLoadingState(false);\r\n                    },\r\n                    Constants.SEARCH_TIMEOUT_MILLISECONDS,\r\n                );\r\n            }\r\n        }\r\n\r\n        if (prevProps.users.length !== this.props.users.length) {\r\n            this.props.actions.loadProfilesMissingStatus(this.props.users);\r\n            this.checkDMCapabilities(this.props.users);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        this.updateFromProps(prevProps);\r\n    }\r\n\r\n    setUsersLoadingState = (loadingState: boolean) => {\r\n        this.setState({loadingUsers: loadingState});\r\n    };\r\n\r\n    handleHide = () => {\r\n        this.props.actions.setModalSearchTerm('');\r\n        this.setState({show: false});\r\n    };\r\n\r\n    handleExit = () => {\r\n        this.props.onExited?.();\r\n        this.props.onModalDismissed?.();\r\n\r\n        if (this.exitToChannel) {\r\n            getHistory().push(this.exitToChannel);\r\n        } else if (this.props.focusOriginElement) {\r\n            setTimeout(() => {\r\n                focusElement(this.props.focusOriginElement, true);\r\n            }, 0);\r\n        }\r\n    };\r\n\r\n    handleSubmit = (values = this.state.values) => {\r\n        const {actions} = this.props;\r\n\r\n        if (this.state.saving) {\r\n            return;\r\n        }\r\n\r\n        const userIds = values.map((v) => v.id);\r\n        if (userIds.length === 0) {\r\n            return;\r\n        }\r\n\r\n        this.setState({saving: true});\r\n\r\n        const done = (result: any) => {\r\n            const {data, error} = result;\r\n            this.setState({saving: false});\r\n\r\n            if (!error) {\r\n                this.exitToChannel = '/' + this.props.currentTeamName + '/channels/' + data.name;\r\n                this.handleHide();\r\n            }\r\n        };\r\n\r\n        if (userIds.length === 1) {\r\n            actions.openDirectChannelToUserId(userIds[0]).then(done);\r\n        } else {\r\n            actions.openGroupChannelToUserIds(userIds).then(done);\r\n        }\r\n    };\r\n\r\n    addValue = (value: OptionValue) => {\r\n        if (isGroupChannel(value)) {\r\n            this.addUsers(value.profiles);\r\n        } else {\r\n            const values = [...this.state.values];\r\n            if (!values.includes(value)) {\r\n                values.push(value);\r\n            }\r\n            this.setState({values});\r\n        }\r\n    };\r\n\r\n    addUsers = (users: UserProfile[]) => {\r\n        const values = [...this.state.values];\r\n        const existingUserIds = values.map((user) => user.id);\r\n        for (const user of users) {\r\n            if (!existingUserIds.includes(user.id)) {\r\n                values.push(optionValue(user));\r\n            }\r\n        }\r\n        this.setState({values});\r\n    };\r\n\r\n    getUserProfiles = (page?: number) => {\r\n        const pageNum = page ? page + 1 : 0;\r\n        if (this.props.restrictDirectMessage === 'any') {\r\n            this.props.actions.getProfiles(pageNum, USERS_PER_PAGE * 2).then(() => {\r\n                this.setUsersLoadingState(false);\r\n            });\r\n        } else {\r\n            this.props.actions.getProfilesInTeam(this.props.currentTeamId || '', pageNum, USERS_PER_PAGE * 2).then(() => {\r\n                this.setUsersLoadingState(false);\r\n            });\r\n        }\r\n    };\r\n\r\n    handlePageChange = (page: number, prevPage: number) => {\r\n        if (page > prevPage) {\r\n            this.setUsersLoadingState(true);\r\n            this.getUserProfiles(page);\r\n        }\r\n    };\r\n\r\n    resetPaging = () => {\r\n        this.multiselect.current?.resetPaging();\r\n    };\r\n\r\n    search = debounce((term: string) => {\r\n        this.props.actions.setModalSearchTerm(term);\r\n    }, 250);\r\n\r\n    handleDelete = (values: OptionValue[]) => {\r\n        this.setState({values});\r\n    };\r\n\r\n    getDirectMessageableUsers = (): UserProfile[] => {\r\n        const {users} = this.props;\r\n        const {directMessageCapabilityCache} = this.state;\r\n\r\n        return users.filter((user) => {\r\n            // For remote users, check if they can be DMed\r\n            if (user.remote_id) {\r\n                // If we haven't checked this user yet, hide them until we have the result\r\n                if (!(user.id in directMessageCapabilityCache)) {\r\n                    return false;\r\n                }\r\n\r\n                // Only show if they can be DMed\r\n                return directMessageCapabilityCache[user.id];\r\n            }\r\n\r\n            // Show local users (including self)\r\n            return true;\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const filteredUsers = this.getDirectMessageableUsers();\r\n        const body = (\r\n            <List\r\n                addValue={this.addValue}\r\n                currentUserId={this.props.currentUserId}\r\n                handleDelete={this.handleDelete}\r\n                handlePageChange={this.handlePageChange}\r\n                handleSubmit={this.handleSubmit}\r\n                handleHide={this.handleHide}\r\n                isExistingChannel={this.props.isExistingChannel}\r\n                loading={this.state.loadingUsers}\r\n                saving={this.state.saving}\r\n                search={this.search}\r\n                selectedItemRef={this.selectedItemRef}\r\n                totalCount={this.props.totalCount}\r\n                users={filteredUsers}\r\n                values={this.state.values}\r\n            />\r\n        );\r\n\r\n        const modalHeaderText = (\r\n            <FormattedMessage\r\n                id='more_direct_channels.title'\r\n                defaultMessage='Direct Messages'\r\n            />\r\n        );\r\n\r\n        return (\r\n            <GenericModal\r\n                id='moreDmModal'\r\n                className='a11y__modal more-modal more-direct-channels more-direct-channels-generic-modal'\r\n                show={this.state.show}\r\n                modalHeaderText={modalHeaderText}\r\n                onExited={this.handleExit}\r\n                onHide={this.handleExit}\r\n                compassDesign={true}\r\n                bodyPadding={false}\r\n                onEntered={this.loadModalData}\r\n                modalLocation={'top'}\r\n                delayFocusTrap={true}\r\n            >\r\n                <div role='application'>\r\n                    {body}\r\n                </div>\r\n            </GenericModal>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {searchGroupChannels} from 'mattermost-redux/actions/channels';\r\nimport {\r\n    getProfiles,\r\n    getProfilesInTeam,\r\n    getTotalUsersStats,\r\n    searchProfiles,\r\n    canUserDirectMessage,\r\n} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getFeatureFlagValue} from 'mattermost-redux/selectors/entities/general';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\nimport {\r\n    getCurrentUserId,\r\n    getProfiles as selectProfiles,\r\n    getProfilesInCurrentChannel,\r\n    getProfilesInCurrentTeam,\r\n    makeSearchProfilesStartingWithTerm,\r\n    searchProfilesInCurrentTeam,\r\n    getTotalUsersStats as getTotalUsersStatsSelector,\r\n} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {openDirectChannelToUserId, openGroupChannelToUserIds} from 'actions/channel_actions';\r\nimport {loadStatusesForProfilesList, loadProfilesMissingStatus} from 'actions/status_actions';\r\nimport {loadProfilesForGroupChannels} from 'actions/user_actions';\r\nimport {setModalSearchTerm} from 'actions/views/search';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport MoreDirectChannels from './more_direct_channels';\r\n\r\ntype OwnProps = {\r\n    isExistingChannel: boolean;\r\n}\r\n\r\nexport const makeMapStateToProps = () => {\r\n    const searchProfilesStartingWithTerm = makeSearchProfilesStartingWithTerm();\r\n\r\n    return (state: GlobalState, ownProps: OwnProps) => {\r\n        const currentUserId = getCurrentUserId(state);\r\n        let currentChannelMembers;\r\n        if (ownProps.isExistingChannel) {\r\n            currentChannelMembers = getProfilesInCurrentChannel(state);\r\n        }\r\n\r\n        const config = getConfig(state);\r\n        const restrictDirectMessage = config.RestrictDirectMessage;\r\n\r\n        const searchTerm = state.views.search.modalSearch;\r\n\r\n        let filters;\r\n        const enableSharedChannelsDMs = getFeatureFlagValue(state, 'EnableSharedChannelsDMs') === 'true';\r\n        if (!enableSharedChannelsDMs) {\r\n            filters = {exclude_remote: true};\r\n        }\r\n\r\n        let users: UserProfile[];\r\n        if (searchTerm) {\r\n            if (restrictDirectMessage === 'any') {\r\n                users = searchProfilesStartingWithTerm(state, searchTerm, false, filters);\r\n            } else {\r\n                users = searchProfilesInCurrentTeam(state, searchTerm, false, filters);\r\n            }\r\n        } else if (restrictDirectMessage === 'any') {\r\n            users = selectProfiles(state, filters);\r\n        } else {\r\n            users = getProfilesInCurrentTeam(state, filters);\r\n        }\r\n\r\n        const team = getCurrentTeam(state);\r\n        const stats = getTotalUsersStatsSelector(state) || {total_users_count: 0};\r\n\r\n        return {\r\n            currentTeamId: team?.id,\r\n            currentTeamName: team?.name,\r\n            searchTerm,\r\n            users,\r\n            currentChannelMembers,\r\n            currentUserId,\r\n            restrictDirectMessage,\r\n            totalCount: stats.total_users_count ?? 0,\r\n        };\r\n    };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getProfiles,\r\n            getProfilesInTeam,\r\n            loadProfilesMissingStatus,\r\n            getTotalUsersStats,\r\n            loadStatusesForProfilesList,\r\n            loadProfilesForGroupChannels,\r\n            openDirectChannelToUserId,\r\n            openGroupChannelToUserIds,\r\n            searchProfiles,\r\n            searchGroupChannels,\r\n            setModalSearchTerm,\r\n            canUserDirectMessage,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(makeMapStateToProps, mapDispatchToProps)(MoreDirectChannels);\r\n"],"names":["UserDetails","props","currentUserId","option","status","actions","remoteDisplayName","useSelector","state","remote_id","getRemoteDisplayName","useEffect","fetchRemoteClusterInfo","id","delete_at","deleteAt","is_bot","isBot","last_picture_update","lastPictureUpdate","displayName","displayEntireNameForUser","modalName","React","FormattedMessage","defaultMessage","values","displayname","ProfilePicture","src","Client4","getProfilePictureUrl","undefined","size","className","BotTag","isGuest","roles","GuestTag","SharedUserIndicator","withTooltip","remoteNames","CustomStatusEmoji","userID","showTooltip","emojiSize","spanStyle","display","flex","alignItems","email","propTypes","_pt","isRequired","connect","ownProps","getCurrentUserId","getStatusForUserId","dispatch","bindActionCreators","isGroupChannel","type","optionValue","_objectSpread","value","label","display_name","username","TIME_SPEC","useTime","style","ranges","within","ListItem","ref","isMobileView","isSelected","add","select","intl","useIntl","last_post_at","lastPostAt","details","GMDetails","handleClick","useCallback","handleMouseEnter","classNames","onClick","onMouseEnter","Boolean","Timestamp","Object","assign","formatMessage","profiles","length","map","profile","concat","join","getIsMobileView","forwardRef","MAX_SELECTABLE_VALUES","Constants","MAX_USERS_IN_GM","List","renderOptionValue","selectedItemRef","key","useDispatch","handleSubmitImmediatelyOn","note","remainingText","isExistingChannel","num","a","chunks","href","e","preventDefault","handleHide","openModal","modalId","ModalIdentifiers","NEW_CHANNEL_MODAL","dialogType","NewChannelModal","handleCreateChannel","options","useMemo","MultiSelect","optionRenderer","valueRenderer","renderValue","ariaLabelRenderer","renderAriaLabel","perPage","handlePageChange","handleInput","search","handleDelete","handleAdd","addValue","handleSubmit","noteText","maxValues","numRemainingText","buttonSubmitText","buttonSubmitLoadingText","submitImmediatelyOn","saving","loading","users","totalCount","placeholderText","data","_username","getOptions","getUsersWithDMs","createSelector","getAllChannels","allChannels","directChannels","filter","channel","DM_CHANNEL","usersWithDMs","otherUserId","getUserIdFromChannelName","name","otherUser","find","user","push","getFilteredGroupChannels","getChannelsWithUserProfiles","views","modalSearch","channelsWithProfiles","searchTerm","filterProfilesStartingWithTerm","every","filteredGroupChannels","isSearch","recents","sort","b","slice","usersWithoutDMs","some","other","localeCompare","makeGetOptions","MoreDirectChannels","constructor","_this","super","this","_defineProperty","getUserProfiles","getTotalUsersStats","loadProfilesMissingStatus","checkDMCapabilities","async","directMessageCapabilityCache","usersToCheck","promises","_result$data$can_dm","_result$data","result","canUserDirectMessage","userId","canDM","can_dm","_unused","results","Promise","all","newCache","forEach","_ref","setState","loadingState","loadingUsers","setModalSearchTerm","show","_this$props$onExited","_this$props","_this$props$onModalDi","_this$props2","onExited","call","onModalDismissed","exitToChannel","getHistory","focusOriginElement","setTimeout","focusElement","arguments","userIds","v","done","error","currentTeamName","openDirectChannelToUserId","then","openGroupChannelToUserIds","addUsers","includes","existingUserIds","page","pageNum","restrictDirectMessage","getProfiles","USERS_PER_PAGE","setUsersLoadingState","getProfilesInTeam","currentTeamId","prevPage","_this$multiselect$cur","multiselect","current","resetPaging","debounce","term","searchTimeoutId","currentChannelMembers","i","updateFromProps","prevProps","clearTimeout","teamId","profilesData","groupChannelsData","searchProfiles","team_id","searchGroupChannels","loadStatusesForProfilesList","loadProfilesForGroupChannels","SEARCH_TIMEOUT_MILLISECONDS","componentDidUpdate","render","filteredUsers","getDirectMessageableUsers","body","modalHeaderText","GenericModal","handleExit","onHide","compassDesign","bodyPadding","onEntered","loadModalData","modalLocation","delayFocusTrap","role","makeMapStateToProps","searchProfilesStartingWithTerm","makeSearchProfilesStartingWithTerm","_stats$total_users_co","getProfilesInCurrentChannel","getConfig","RestrictDirectMessage","filters","getFeatureFlagValue","exclude_remote","searchProfilesInCurrentTeam","selectProfiles","getProfilesInCurrentTeam","team","getCurrentTeam","stats","getTotalUsersStatsSelector","total_users_count"],"sourceRoot":""}