{"version":3,"file":"5968.361c6cb399a1a978fba6.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/common/back_button.tsx","webpack://mattermost-webapp/./src/components/password_reset_send_link/password_reset_send_link.tsx","webpack://mattermost-webapp/./src/components/password_reset_send_link/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport {Link} from 'react-router-dom';\r\n\r\ntype Props = {\r\n\r\n    /**\r\n     * URL to return to\r\n     */\r\n    url?: string;\r\n\r\n    className?: string;\r\n\r\n    /**\r\n     * onClick handler when user clicks back button\r\n     */\r\n    onClick?: React.EventHandler<React.MouseEvent>;\r\n}\r\n\r\nconst BackButton = ({url = '/', className, onClick}: Props): JSX.Element => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <div className={classNames('signup-header', className)}>\r\n            <Link\r\n                data-testid='back_button'\r\n                onClick={onClick}\r\n                to={url}\r\n            >\r\n                <span\r\n                    id='back_button_icon'\r\n                    className='fa fa-1x fa-angle-left'\r\n                    title={formatMessage({id: 'generic_icons.back', defaultMessage: 'Back Icon'})}\r\n                />\r\n                <FormattedMessage\r\n                    id='web.header.back'\r\n                    defaultMessage='Back'\r\n                />\r\n            </Link>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BackButton;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {defineMessage, FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {isEmail} from 'mattermost-redux/utils/helpers';\r\n\r\nimport BackButton from 'components/common/back_button';\r\nimport Input from 'components/widgets/inputs/input/input';\r\n\r\nexport interface Props {\r\n    intl: IntlShape;\r\n    siteName?: string;\r\n    actions: {\r\n        sendPasswordResetEmail: (email: string) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\ninterface State {\r\n    error: React.ReactNode;\r\n    updateText: React.ReactNode;\r\n}\r\n\r\nexport class PasswordResetSendLink extends React.PureComponent<Props, State> {\r\n    state = {\r\n        error: null,\r\n        updateText: null,\r\n    };\r\n    resetForm = React.createRef<HTMLFormElement>();\r\n    emailInput = React.createRef<HTMLInputElement>();\r\n\r\n    componentDidMount() {\r\n        const {intl, siteName} = this.props;\r\n        document.title = intl.formatMessage(\r\n            {\r\n                id: 'password_form.pageTitle',\r\n                defaultMessage: 'Password Reset | {siteName}',\r\n            },\r\n            {siteName: siteName || 'Mattermost'},\r\n        );\r\n    }\r\n\r\n    handleSendLink = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const email = this.emailInput.current!.value.trim().toLowerCase();\r\n        if (!email || !isEmail(email)) {\r\n            this.setState({\r\n                error: (\r\n                    <FormattedMessage\r\n                        id='password_send.error'\r\n                        defaultMessage='Please enter a valid email address.'\r\n                    />\r\n                ),\r\n            });\r\n            return;\r\n        }\r\n\r\n        // End of error checking clear error\r\n        this.setState({error: null});\r\n\r\n        const {data, error} = await this.props.actions.sendPasswordResetEmail(email);\r\n        if (data) {\r\n            this.setState({\r\n                error: null,\r\n                updateText: (\r\n                    <div\r\n                        id='passwordResetEmailSent'\r\n                        className='reset-form alert alert-success'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='password_send.link'\r\n                            defaultMessage='If the account exists, a password reset email will be sent to:'\r\n                        />\r\n                        <div>\r\n                            <b>{email}</b>\r\n                        </div>\r\n                        <br/>\r\n                        <FormattedMessage\r\n                            id='password_send.checkInbox'\r\n                            defaultMessage='Please check your inbox.'\r\n                        />\r\n                    </div>\r\n                ),\r\n            });\r\n            if (this.resetForm.current) {\r\n                this.resetForm.current.hidden = true;\r\n            }\r\n        } else if (error) {\r\n            this.setState({\r\n                error: error.message,\r\n                updateText: null,\r\n            });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let error = null;\r\n        if (this.state.error) {\r\n            error = (\r\n                <div className='form-group has-error'>\r\n                    <label className='control-label'>{this.state.error}</label>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let formClass = 'form-group';\r\n        if (error) {\r\n            formClass += ' has-error';\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <BackButton/>\r\n                <div className='col-sm-12'>\r\n                    <div className='signup-team__container'>\r\n                        <FormattedMessage\r\n                            id='password_send.title'\r\n                            tagName='h1'\r\n                            defaultMessage='Password Reset'\r\n                        />\r\n                        {this.state.updateText}\r\n                        <form\r\n                            onSubmit={this.handleSendLink}\r\n                            ref={this.resetForm}\r\n                        >\r\n                            <p>\r\n                                <FormattedMessage\r\n                                    id='password_send.description'\r\n                                    defaultMessage='To reset your password, enter the email address you used to sign up'\r\n                                />\r\n                            </p>\r\n                            <div className={formClass}>\r\n                                <Input\r\n                                    id='passwordResetEmailInput'\r\n                                    type='email'\r\n                                    name='email'\r\n                                    label={defineMessage({\r\n                                        id: 'password_send.email',\r\n                                        defaultMessage: 'Email',\r\n                                    })}\r\n                                    placeholder={defineMessage({\r\n                                        id: 'password_send.email.placeholder',\r\n                                        defaultMessage: 'Enter the email address you used to sign up',\r\n                                    })}\r\n                                    ref={this.emailInput}\r\n                                    spellCheck='false'\r\n                                    autoFocus={true}\r\n                                />\r\n                            </div>\r\n                            {error}\r\n                            <button\r\n                                id='passwordResetButton'\r\n                                type='submit'\r\n                                className='btn btn-primary'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='password_send.reset'\r\n                                    defaultMessage='Reset my password'\r\n                                />\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(PasswordResetSendLink);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {sendPasswordResetEmail} from 'mattermost-redux/actions/users';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport PasswordResetSendLink from './password_reset_send_link';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {siteName: getConfig(state).SiteName};\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    actions: bindActionCreators({\r\n        sendPasswordResetEmail,\r\n    }, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PasswordResetSendLink);\r\n"],"names":["BackButton","_ref","url","className","onClick","formatMessage","useIntl","React","classNames","Link","to","id","title","defaultMessage","FormattedMessage","propTypes","_pt","PasswordResetSendLink","constructor","arguments","_defineProperty","error","updateText","async","e","preventDefault","email","this","emailInput","current","value","trim","toLowerCase","isEmail","setState","data","props","actions","sendPasswordResetEmail","resetForm","hidden","message","componentDidMount","intl","siteName","document","render","state","formClass","tagName","onSubmit","handleSendLink","ref","Input","type","name","label","defineMessage","placeholder","spellCheck","autoFocus","isRequired","injectIntl","connect","getConfig","SiteName","dispatch","bindActionCreators"],"sourceRoot":""}