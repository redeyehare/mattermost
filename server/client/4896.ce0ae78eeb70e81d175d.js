"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[4896],{29064:(e,t,a)=>{a.d(t,{$9:()=>_,Js:()=>d,OT:()=>b,XH:()=>m,gV:()=>p,us:()=>h,vD:()=>g});var n=a(62688),s=a.n(n),r=(a(57406),a(55448),a(36418)),l=a.n(r),o=a(14778),i=a(18515),c=a(87131);let u=function(e){return e.EQUALS="==",e.NOT_EQUALS="!=",e.STARTS_WITH="startsWith",e.ENDS_WITH="endsWith",e.CONTAINS="contains",e.IN="in",e}({}),d=function(e){return e.IS="is",e.IS_NOT="is not",e.STARTS_WITH="starts with",e.ENDS_WITH="ends with",e.CONTAINS="contains",e.IN="in",e}({});const m={[u.EQUALS]:d.IS,[u.NOT_EQUALS]:d.IS_NOT,[u.STARTS_WITH]:d.STARTS_WITH,[u.ENDS_WITH]:d.ENDS_WITH,[u.CONTAINS]:d.CONTAINS,[u.IN]:d.IN},p={[d.IS]:{type:"comparison",celOp:u.EQUALS},[d.IS_NOT]:{type:"comparison",celOp:u.NOT_EQUALS},[d.STARTS_WITH]:{type:"method",celOp:u.STARTS_WITH},[d.ENDS_WITH]:{type:"method",celOp:u.ENDS_WITH},[d.CONTAINS]:{type:"method",celOp:u.CONTAINS},[d.IN]:{type:"list",celOp:u.IN}};function b(e,t){return e.some((e=>{var a,n,s;const r=e.name.includes(" "),l=(null===(a=e.attrs)||void 0===a?void 0:a.ldap)||(null===(n=e.attrs)||void 0===n?void 0:n.saml),o="admin"===(null===(s=e.attrs)||void 0===s?void 0:s.managed);return!r&&(l||o||t)}))}function g(e){let{onClick:t,disabled:a,disabledTooltip:n}=e;const s=l().createElement("button",{className:"btn btn-sm btn-tertiary",onClick:t,disabled:a},l().createElement("i",{className:"icon icon-lock-outline"}),l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.test_access_rule",defaultMessage:"Test access rule"}));return a&&n?l().createElement(c.A,{title:n},s):s}function h(e){let{onClick:t,disabled:a}=e;return l().createElement("button",{className:"btn btn-sm btn-tertiary",onClick:t,disabled:a},l().createElement("i",{className:"icon icon-plus"}),l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.add_attribute",defaultMessage:"Add attribute"}))}function _(e){let{message:t,onLearnMoreClick:a}=e;return l().createElement("div",{className:"editor__help-text"},l().createElement(i.A,{message:t,options:{mentionHighlight:!1}}),a&&l().createElement("a",{href:"#",className:"editor__learn-more",onClick:a},l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.learnMore",defaultMessage:"Learn more about creating access expressions with examples."})))}g.propTypes={onClick:s().func.isRequired,disabled:s().bool.isRequired,disabledTooltip:s().string},h.propTypes={onClick:s().func.isRequired,disabled:s().bool.isRequired},_.propTypes={message:s().string.isRequired,onLearnMoreClick:s().func}},68611:(e,t,a)=>{a.d(t,{Ay:()=>L});var n=a(62688),s=a.n(n),r=(a(57406),a(55448),a(17046),a(12401),a(76685),a(43813),a(4290),a(36418)),l=a.n(r),o=a(14778),i=a(87461),c=a(71633),u=a.n(c),d=a(85406),m=a(70669),p=a(87131);const b=["attribute"],g=e=>{const{attribute:t}=e,a=function(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,b);if(t){var n;const e=null===(n=t.attrs)||void 0===n?void 0:n.value_type;if("email"===e)return l().createElement(d.EmailOutlineIcon,a);if("url"===e)return l().createElement(d.LinkVariantIcon,a);if("phone"===e)return l().createElement(d.PoundIcon,a);switch(t.type){case"select":return l().createElement(d.ChevronDownCircleOutlineIcon,a);case"multiselect":return l().createElement(d.FormatListBulletedIcon,a);default:return l().createElement(d.MenuVariantIcon,a)}}return l().createElement(d.MenuVariantIcon,a)},h=e=>{let{currentAttribute:t,availableAttributes:a,disabled:n,onChange:s,menuId:i,buttonId:c,autoOpen:b=!1,onMenuOpened:h,enableUserManagedAttributes:_}=e;const{formatMessage:v}=(0,o.useIntl)(),[f,C]=(0,r.useState)(""),E=(0,r.useRef)(!1),y=(0,r.useCallback)((e=>{C(e.target.value)}),[]),S=(0,r.useMemo)((()=>a.filter((e=>e.name.toLowerCase().includes(f.toLowerCase())))),[a,f]),M=l().useCallback((e=>{s(e),C("")}),[s]),N=(0,r.useMemo)((()=>a.find((e=>e.name===t))),[t,a]);return(0,r.useEffect)((()=>{if(b&&!E.current){const e=document.getElementById(c);null==e||e.click(),h&&h()}E.current=b}),[b,c,h]),l().createElement(m.mc,{menuButton:{id:c,class:u()("btn btn-transparent field-selector-menu-button",{disabled:n}),children:l().createElement(l().Fragment,null,l().createElement(g,{attribute:N}),t||v({id:"admin.access_control.table_editor.selector.select_attribute",defaultMessage:"Select attribute"})),dataTestId:"attributeSelectorMenuButton",disabled:n},menu:{id:i,"aria-label":"Select attribute",className:"select-attribute-mui-menu"}},l().createElement(m.i6,{key:"filter_attributes",id:"filter_attributes",type:"text",placeholder:v({id:"admin.access_control.table_editor.selector.filter_attributes",defaultMessage:"Search attributes..."}),className:"attribute-selector-search",value:f,onChange:y}),S.map((e=>{var a,n,s;const{name:r}=e,o=r.includes(" "),i=(null===(a=e.attrs)||void 0===a?void 0:a.ldap)||(null===(n=e.attrs)||void 0===n?void 0:n.saml),c="admin"===(null===(s=e.attrs)||void 0===s?void 0:s.managed),u=i||c||_,b=l().createElement(m.q7,{id:"attribute-".concat(r),key:r,role:"menuitemradio",forceCloseOnSelect:!0,"aria-checked":r===t,onClick:o?void 0:()=>M(r),labels:l().createElement("span",null,r),disabled:o||!u,leadingElement:l().createElement(g,{attribute:e,size:18}),trailingElements:l().createElement(l().Fragment,null,o&&l().createElement(d.InformationOutlineIcon,{size:18}),!u&&!i&&l().createElement(d.ShieldAlertOutlineIcon,{size:18,color:"rgba(var(--center-channel-color-rgb), 0.5)"}),i&&l().createElement(d.SyncIcon,{size:18,color:"rgba(var(--center-channel-color-rgb), 0.5)"}),r===t&&l().createElement(d.CheckIcon,null))});let h=null;return o?h=v({id:"admin.access_control.table_editor.attribute_spaces_not_supported",defaultMessage:"CEL is not compatible with variable names containing spaces"}):u?i&&(h=v({id:"admin.access_control.table_editor.attribute_synced",defaultMessage:"This attribute is synced from an external source"})):h=v({id:"admin.access_control.table_editor.not_safe_to_use",defaultMessage:"Values for this attribute are managed by users and should not be used for access control. Please link attribute to AD/LDAP for use in access policies."}),h?l().createElement(p.A,{key:r,title:h},l().createElement("div",{className:"menu-item-tooltip-wrapper"},b)):b})))};h.propTypes={currentAttribute:s().string.isRequired,availableAttributes:s().array.isRequired,disabled:s().bool.isRequired,onChange:s().func.isRequired,menuId:s().string.isRequired,buttonId:s().string.isRequired,autoOpen:s().bool,onMenuOpened:s().func,enableUserManagedAttributes:s().bool.isRequired};const _=h;var v=a(29064);const f=e=>{let{currentOperator:t,disabled:a,onChange:n}=e;const{formatMessage:s}=(0,o.useIntl)(),[i,c]=(0,r.useState)(""),p=l().useCallback((e=>{n(e.id),c("")}),[n]),b=(0,r.useMemo)((()=>E(t)),[t]),g=b.icon,h=l().useCallback((e=>{c(e.target.value)}),[]),_=(0,r.useMemo)((()=>Object.values(y).filter((e=>s(e.label).toLowerCase().includes(i.toLowerCase())))),[i,s]);return l().createElement(m.mc,{menuButton:{id:"operator-selector-button",class:u()("btn btn-transparent field-selector-menu-button",{disabled:a}),children:l().createElement(l().Fragment,null,l().createElement(g,{size:18,color:"rgba(var(--center-channel-color-rgb), 0.64)"}),l().createElement(o.FormattedMessage,b.label)),dataTestId:"operatorSelectorMenuButton",disabled:a},menu:{id:"operator-selector-menu","aria-label":"Select operator",className:"select-operator-mui-menu"}},l().createElement(m.i6,{key:"filter_operators",id:"filter_operators",type:"text",placeholder:s({id:"admin.access_control.table_editor.selector.filter_operators",defaultMessage:"Search operators..."}),className:"attribute-selector-search",value:i,onChange:h}),_.map((e=>{const{id:t,icon:a,label:n}=e;return l().createElement(m.q7,{id:t,key:t,role:"menuitemradio",forceCloseOnSelect:!0,"aria-checked":t===b.id,onClick:()=>p(e),labels:l().createElement(o.FormattedMessage,n),leadingElement:l().createElement(a,{size:18}),trailingElements:t===b.id&&l().createElement(d.CheckIcon,null)})})))};f.propTypes={currentOperator:s().string.isRequired,disabled:s().bool.isRequired,onChange:s().func.isRequired};const C=f,E=e=>{for(const t of Object.values(y))if(t.id===e)return t;return y.is},y={[v.Js.IS]:{id:v.Js.IS,icon:d.EqualIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.is",defaultMessage:"is"})},[v.Js.IS_NOT]:{id:v.Js.IS_NOT,icon:d.NotEqualVariantIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.is_not",defaultMessage:"is not"})},[v.Js.IN]:{id:v.Js.IN,icon:d.ElementOfIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.in",defaultMessage:"in"})},[v.Js.STARTS_WITH]:{id:v.Js.STARTS_WITH,icon:d.FunctionIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.starts_with",defaultMessage:"starts with"})},[v.Js.ENDS_WITH]:{id:v.Js.ENDS_WITH,icon:d.FunctionIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.ends_with",defaultMessage:"ends with"})},[v.Js.CONTAINS]:{id:v.Js.CONTAINS,icon:d.FunctionIcon,label:(0,o.defineMessage)({id:"admin.access_control.table_editor.operator.contains",defaultMessage:"contains"})}},S=e=>{let{values:t,disabled:a,updateValues:n,options:s=[],allowCreateValue:i=!1,placeholder:c}=e;const{formatMessage:p}=(0,o.useIntl)(),[b,g]=(0,r.useState)(""),h=!(s.length>0)||i,_=(0,r.useCallback)((e=>{g(e.target.value)}),[]),v=(0,r.useMemo)((()=>s.filter((e=>(e.name||"").toLowerCase().includes(b.toLowerCase())))),[s,b]),f=p({id:"admin.access_control.table_editor.values.select_values",defaultMessage:"Select values..."}),C=p({id:"admin.access_control.table_editor.values.create_placeholder",defaultMessage:"Type to create value"}),E=(0,r.useCallback)((e=>{const a=t.includes(e)?t.filter((t=>t!==e)):[...t,e];n(a)}),[t,n]),y=(0,r.useCallback)((e=>{const a=e.trim();a&&!t.includes(a)&&(n([...t,a]),g(""))}),[t,n]),S=(0,r.useCallback)((e=>{"Tab"!==e.key&&e.stopPropagation(),"Enter"===e.key&&h&&b.trim()&&(e.preventDefault(),y(b))}),[h,b,y]),M=(0,r.useCallback)(((e,a)=>{e.stopPropagation();const s=t.filter((e=>e!==a));n(s)}),[t,n]),N=(0,r.useMemo)((()=>{if(0===t.length){let e=f;h&&0===s.length&&(e=C);const t=c||e,a=t===f||t===C;return l().createElement("span",{className:u()({"value-selector-menu-button__placeholder":a})},t)}return l().createElement("div",{className:"value-selector-menu-button__multi-values-container"},t.map((e=>l().createElement("div",{key:e,className:"select__multi-value"},l().createElement("div",{className:"select__multi-value__label"},e),!a&&l().createElement("div",{className:"select__multi-value__remove",onClick:t=>M(t,e),role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||M(t,e)}},l().createElement(d.CloseIcon,{size:12}))))))}),[t,a]);return l().createElement("div",{className:"values-editor"},l().createElement(m.mc,{menuButton:{id:"value-selector-button",class:u()("btn btn-transparent field-selector-menu-button",{disabled:a}),children:l().createElement("span",{className:"value-selector-menu-button__inner-wrapper"},N,l().createElement(d.ChevronDownIcon,{size:18,color:"rgba(var(--center-channel-color-rgb), 0.5)"})),dataTestId:"valueSelectorMenuButton",disabled:a},menu:{id:"value-selector-menu","aria-label":c||f,className:"select-value-mui-menu"}},l().createElement(m.i6,{key:"filter_values",id:"filter_values",type:"text",placeholder:p({id:"admin.access_control.table_editor.selector.filter_or_create",defaultMessage:"Search or create value..."}),className:"attribute-selector-search",value:b,onChange:_,onKeyDown:S}),v.map((e=>{const a=e.name||"",n=e.id||a,s=t.includes(a);return l().createElement(m.q7,{id:"value-option-".concat(n),key:n,role:"menuitemcheckbox",forceCloseOnSelect:!1,"aria-checked":s,onClick:()=>E(a),labels:l().createElement("span",null,a),trailingElements:s&&l().createElement(d.CheckIcon,null)})})),h&&b.trim()&&!v.some((e=>e.name===b.trim()))&&l().createElement(m.q7,{id:"create-value-option",key:"create-value-option",onClick:()=>y(b),labels:l().createElement("span",null,p({id:"admin.access_control.table_editor.create_value",defaultMessage:'Create "{value}"'},{value:b.trim()}))})))};var M=a(78451);const N=e=>{let{value:t,disabled:a,updateValue:n,options:s=[],allowCreateValue:i=!1,placeholder:c}=e;const{formatMessage:p}=(0,o.useIntl)(),[b,g]=(0,r.useState)(""),[h,_]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1),C=s.length>0,E=(0,r.useCallback)((()=>{const e=h.trim();e&&n(e),_(""),f(!1)}),[h,n]),y=(0,r.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),E())}),[E]),S=(0,r.useCallback)((e=>{g(e.target.value)}),[]),N=(0,r.useMemo)((()=>s.filter((e=>(e.name||"").toLowerCase().includes(b.toLowerCase())))),[s,b]),A=p({id:"admin.access_control.table_editor.value.select_value",defaultMessage:"Select value"}),T=(0,r.useCallback)((e=>{n(e),g("")}),[n]),w=(0,r.useCallback)((e=>{const t=e.trim();t&&n(t),g("")}),[n]),k=(0,r.useCallback)((e=>{"Tab"!==e.key&&e.stopPropagation(),"Enter"===e.key&&i&&b.trim()&&(e.preventDefault(),w(b))}),[i,b,w]);if(!C)return l().createElement("div",{className:"values-editor"},l().createElement("input",{type:"text",className:"values-editor__simple-input",value:v?h:t,onChange:e=>_(e.target.value),onKeyDown:y,onFocus:()=>{f(!0),t&&_(t)},onBlur:E,placeholder:c||p({id:"admin.access_control.table_editor.value.placeholder",defaultMessage:"Add value..."}),disabled:a,maxLength:M.Ay.MAX_CUSTOM_ATTRIBUTE_LENGTH}));const O=t||c||A,I=O===A;return l().createElement("div",{className:"values-editor"},l().createElement(m.mc,{menuButton:{id:"value-selector-button",class:u()("btn btn-transparent field-selector-menu-button",{disabled:a}),children:l().createElement("span",{className:"value-selector-menu-button__inner-wrapper"},l().createElement("span",{className:u()({"value-selector-menu-button__placeholder":I})},O),l().createElement(d.ChevronDownIcon,{size:18,color:"rgba(var(--center-channel-color-rgb), 0.5)"})),dataTestId:"valueSelectorMenuButton",disabled:a},menu:{id:"value-selector-menu","aria-label":c||A,className:"select-value-mui-menu"}},l().createElement(m.i6,{key:"filter_values",id:"filter_values",type:"text",placeholder:p({id:"admin.access_control.table_editor.selector.filter_or_create",defaultMessage:"Search or create value..."}),className:"attribute-selector-search",value:b,onChange:S,onKeyDown:k}),N.map((e=>{const a=e.name||"",n=e.id||a,s=t===a;return l().createElement(m.q7,{id:"value-option-".concat(n),key:n,role:"menuitemradio",forceCloseOnSelect:!0,"aria-checked":s,onClick:()=>T(a),labels:l().createElement("span",null,a),trailingElements:s&&l().createElement(d.CheckIcon,null)})})),i&&b.trim()&&!N.some((e=>e.name===b.trim()))&&l().createElement(m.q7,{id:"create-value-option",key:"create-value-option",onClick:()=>w(b),labels:l().createElement("span",null,p({id:"admin.access_control.table_editor.create_value",defaultMessage:'Create "{value}"'},{value:b.trim()}))})))},A=e=>{let{row:t,disabled:a,updateValues:n,options:s=[],allowCreateValue:r=!1,placeholder:o}=e;return"in"===t.operator?l().createElement(S,{values:t.values,disabled:a,updateValues:n,options:s,allowCreateValue:r,placeholder:o}):l().createElement(N,{value:t.values[0]||"",disabled:a,updateValue:e=>n([e]),options:s,allowCreateValue:r,placeholder:o})};A.propTypes={row:s().shape({attribute:s().string.isRequired,operator:s().string.isRequired,values:s().arrayOf(s().string).isRequired,attribute_type:s().string.isRequired}).isRequired,disabled:s().bool.isRequired,updateValues:s().func.isRequired,options:s().array,allowCreateValue:s().bool,placeholder:s().string};const T=A;var w=a(62100),k=a(1643);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){R(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function P(e){let{value:t,onChange:a,onValidate:n,disabled:s=!1,userAttributes:c,enableUserManagedAttributes:u,onParseError:d,channelId:m,actions:p,isSystemAdmin:b=!1,validateExpressionAgainstRequester:g}=e;const{formatMessage:h}=(0,o.useIntl)(),[f,E]=(0,r.useState)([]),[y,S]=(0,r.useState)(!1),[M,N]=(0,r.useState)(!1),[A,O]=(0,r.useState)(null),[R,P]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&""!==t.trim()?p.getVisualAST(t).then((e=>{var t,a;if(e.error)return E([]),void(null!==(t=e.error.message)&&void 0!==t&&t.includes("403")||null!==(a=e.error.message)&&void 0!==a&&a.includes("Forbidden")||d(e.error.message));E((e=>{const t=[];if(!e)return t;for(const a of e.conditions){let e;if(!a.attribute.startsWith("user.attributes."))throw new Error("Unknown attribute: ".concat(a.attribute));e=a.attribute.slice(16);let n,s=v.XH[a.operator];s||(s=v.Js.IS),n=Array.isArray(a.value)?a.value:[a.value],t.push({attribute:e,operator:s,values:n,attribute_type:a.attribute_type})}return t})(e.data))})).catch((e=>{var t,a;E([]),n&&n(!1),null!==(t=e.message)&&void 0!==t&&t.includes("403")||null!==(a=e.message)&&void 0!==a&&a.includes("Forbidden")||d(e.message)})):E([])}),[t]),(0,r.useEffect)((()=>{(async()=>{if(!b&&t.trim()&&g)try{var e;const a=await g(t);P(!(null!==(e=a.data)&&void 0!==e&&e.requester_matches))}catch(e){P(!1)}else P(!1)})()}),[t,b,g]);const L=(0,r.useCallback)((e=>{const t=e.filter((e=>e.attribute)),s=t.map((e=>{const t="user.attributes.".concat(e.attribute),a=v.gV[e.operator],n=c.find((t=>t.name===e.attribute));if(!a){const a=e.values.map((e=>'"'.concat(e,'"'))).join(", ");return"multiselect"===(null==n?void 0:n.type)?"[".concat(a,"] in ").concat(t):"".concat(t," in [").concat(a,"]")}if("list"===a.type){const s=e.values.map((e=>'"'.concat(e,'"'))).join(", ");return"multiselect"===(null==n?void 0:n.type)?"[".concat(s,"] ").concat(a.celOp," ").concat(t):"".concat(t," ").concat(a.celOp," [").concat(s,"]")}const s=e.values.length>0?e.values[0]:"";return"comparison"===a.type?"".concat(t," ").concat(a.celOp,' "').concat(s,'"'):"".concat(t,".").concat(a.celOp,'("').concat(s,'")')})).join(" && ");a(s),n&&n(""===s||t.length>0)}),[a,n,c]),F=(0,r.useCallback)((()=>((e,t)=>e.find((e=>{var a,n,s;const r=e.name.includes(" "),l=(null===(a=e.attrs)||void 0===a?void 0:a.ldap)||(null===(n=e.attrs)||void 0===n?void 0:n.saml),o="admin"===(null===(s=e.attrs)||void 0===s?void 0:s.managed);return!r&&(l||o||t)})))(c,u)),[c,u]),q=(0,r.useCallback)((()=>{if(0===c.length)return void d("No user attributes available. Please ensure ABAC is properly configured and you have the necessary permissions.");const e=F();e?E((t=>{var a;const n=[...t,{attribute:e.name,operator:v.Js.IS,values:[],attribute_type:(null===(a=c[0])||void 0===a?void 0:a.type)||""}];return L(n),O(n.length-1),n})):d("No available user attributes found for rule creation.")}),[c,L,F]),x=(0,r.useCallback)((e=>{E((t=>{const a=t.toSpliced(e,1);return L(a),a}))}),[L]),D=(0,r.useCallback)(((e,t)=>{E((a=>{const n=[...a],s=n[e].attribute;return n[e]=I(I({},n[e]),{},{attribute:t}),s!==t&&(n[e].values=[],n[e].operator=v.Js.IS),L(n),n}))}),[L]),H=(0,r.useCallback)(((e,t)=>{E((a=>{const n=a[e].operator;let s=[...a[e].values];t===v.Js.IN&&n!==v.Js.IN?s=s.map((e=>e.trim())).filter((e=>""!==e)):t!==v.Js.IN&&s.length>1&&(s=[s[0]]);const r=[...a];return r[e]=I(I({},a[e]),{},{operator:t,values:s}),L(r),r}))}),[L]),U=(0,r.useCallback)(((e,t)=>{E((a=>{const n=[...a];return n[e]=I(I({},n[e]),{},{values:t}),L(n),n}))}),[L]);return l().createElement("div",{className:"table-editor"},l().createElement("table",{className:"table-editor__table"},l().createElement("thead",null,l().createElement("tr",{className:"table-editor__header-row"},l().createElement("th",{className:"table-editor__column-header"},l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.attribute",defaultMessage:"Attribute"})),l().createElement("th",{className:"table-editor__column-header"},l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.operator",defaultMessage:"Operator"})),l().createElement("th",{className:"table-editor__column-header"},l().createElement("span",{className:"table-editor__column-header-value"},l().createElement(o.FormattedMessage,{id:"admin.access_control.table_editor.values",defaultMessage:"Values"}))),l().createElement("th",{className:"table-editor__column-header-actions"}))),l().createElement("tbody",null,0===f.length?l().createElement("tr",null,l().createElement("td",{colSpan:4,className:"table-editor__blank-state"},l().createElement("span",null,h({id:"admin.access_control.table_editor.blank_state",defaultMessage:"Select a user attribute and values to create a rule"})))):f.map(((e,t)=>{var a,n;return l().createElement("tr",{key:t,className:"table-editor__row"},l().createElement("td",{className:"table-editor__cell"},l().createElement(_,{currentAttribute:e.attribute,availableAttributes:c,disabled:s,onChange:e=>D(t,e),menuId:"attribute-selector-menu-".concat(t),buttonId:"attribute-selector-button-".concat(t),autoOpen:t===A,onMenuOpened:()=>O(null),enableUserManagedAttributes:u})),l().createElement("td",{className:"table-editor__cell"},l().createElement(C,{currentOperator:e.operator,disabled:s,onChange:e=>H(t,e)})),l().createElement("td",{className:"table-editor__cell"},l().createElement(T,{row:e,disabled:s,updateValues:e=>U(t,e),options:e.attribute&&(null===(a=c.find((t=>t.name===e.attribute)))||void 0===a||null===(n=a.attrs)||void 0===n?void 0:n.options)||[]})),l().createElement("td",{className:"table-editor__cell-actions"},l().createElement("button",{type:"button",className:"table-editor__row-remove",onClick:()=>x(t),disabled:s,"aria-label":h({id:"admin.access_control.table_editor.remove_row",defaultMessage:"Remove row"})},l().createElement("i",{className:"icon icon-trash-can-outline"}))))}))),l().createElement("tfoot",null,l().createElement("tr",null,l().createElement("td",{colSpan:4,className:"table-editor__add-button-container"},l().createElement(v.us,{onClick:q,disabled:s||0===c.length}))))),l().createElement("div",{className:"table-editor__actions-row"},l().createElement(v.$9,{message:h({id:"admin.access_control.table_editor.help_text",defaultMessage:"Each row is a single condition that must be met for a user to comply with the policy. All rules are combined with logical AND operator (`&&`)."})}),l().createElement(v.vD,{onClick:()=>S(!0),disabled:s||!t||R,disabledTooltip:R?h({id:"admin.access_control.table_editor.user_excluded_tooltip",defaultMessage:"You cannot test access rules that would exclude you from the channel"}):void 0})),y&&l().createElement(k.A,{onExited:()=>S(!1),isStacked:!0,actions:{openModal:()=>{},searchUsers:(e,a,n)=>(0,i.Yz)(t,e,a,n,m)}}),M&&l().createElement(w.A,{onExited:()=>N(!1)}))}P.propTypes={value:s().string.isRequired,onChange:s().func.isRequired,onValidate:s().func,disabled:s().bool,userAttributes:s().array.isRequired,enableUserManagedAttributes:s().bool.isRequired,onParseError:s().func.isRequired,channelId:s().string,actions:s().shape({getVisualAST:s().func.isRequired}).isRequired,isSystemAdmin:s().bool,validateExpressionAgainstRequester:s().func};const L=P},62100:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(62688),s=a.n(n),r=a(36418),l=a.n(r),o=a(14778),i=a(14696),c=a(17518),u=a(18515);const d=e=>{let{onExited:t,onHide:a}=e;return l().createElement(i.zW,{id:"CELHelpModal",className:"cel-help-modal--centered","aria-labelledby":"CELHelpModalLabel",onExited:t,onHide:a,modalHeaderText:l().createElement(o.FormattedMessage,{id:"admin.access_control.cel_help_modal.title",defaultMessage:"Common Expression Language (CEL)"}),modalSubheaderText:l().createElement(o.FormattedMessage,{id:"admin.access_control.cel_help_modal.subheader",defaultMessage:"With CEL you can define conditions to filter user attributes and control resource access."}),compassDesign:!0,bodyPadding:!1,modalLocation:"top"},l().createElement("div",{className:"cel-help-modal__content-container"},l().createElement("div",{className:"cel-help-modal__content"},l().createElement(u.A,{message:'### Basic Syntax\nCEL expressions evaluate to boolean values (`true`/`false`) to determine if access should be granted.\n### Common Examples\n- To match a specific program:\n&ensp;`user.attributes.Program == "Delta"`\n- To match any of multiple teams:\n&ensp;`user.attributes.Team in ["Sales", "Engineering"]`\n- To match an email domain:\n&ensp;`user.attributes.Email.endsWith("example.com")`\n- To combine conditions (for this example with `OR` operator, altertanitvely use `&&` for `AND` operation):\n&ensp;`user.attrs.Program == "Alpha" || user.attrs.Team == "Operations"`\n### Supported Operators and functions\n- `==`, `!=`, `&&`, `||`, `in`, `contains()`, `startsWith()`, `endsWith()`'})),l().createElement("div",{className:"cel-help-additional-info-modal__content"},l().createElement("div",{className:"cel-help-additional-info-modal__header"},l().createElement("i",{className:"icon icon-information-outline"}),l().createElement("span",{className:"cel-help-additional-info-modal__title"},l().createElement(o.FormattedMessage,{id:"admin.access_control.cel_help_modal.important_notes_title",defaultMessage:"Important Notes"}))),l().createElement("div",{className:"cel-help-additional-info-modal__text"},l().createElement(u.A,{message:"- Operators like `<` or `>` are forbidden due to incorrect string comparison.\n- Only `user.attributes` are supported; any other variables are not supported yet."}),l().createElement(o.FormattedMessage,{id:"admin.access_control.cel_help_modal.external_link",defaultMessage:"For more information, visit <link>CEL Documentation</link>.",values:{link:e=>l().createElement(c.A,{href:"https://cel.dev/",location:"cel_help_modal"},e)}})))))};d.propTypes={onExited:s().func.isRequired,onHide:s().func};const m=d},1643:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(62688),s=a.n(n),r=(a(17046),a(43813),a(36418)),l=a.n(r),o=a(14778),i=a(37270),c=a(14696),u=a(24876);function d(e){let{onExited:t,isStacked:a=!1,actions:n}=e;const s=(0,i.useDispatch)(),[d,m]=(0,r.useState)(""),[p,b]=(0,r.useState)([]),[g,h]=(0,r.useState)(0),[_,v]=(0,r.useState)(!0),[f,C]=(0,r.useState)([]),E=(0,r.useCallback)((async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(!0);const r=await s(n.searchUsers(e,t,50));if(null!=r&&r.data){const e=r.data.users;b(a?e:t=>[...t,...e]),h(r.data.total)}else b([]),h(0);v(!1)}),[s,n]);(0,r.useEffect)((()=>{E(d,"")}),[]);const y=l().createElement(o.FormattedMessage,{id:"admin.access_control.testResults",defaultMessage:"Access Rule Test Results"});return l().createElement(c.zW,{className:"TestResultsModal a11y__modal",id:"testResultsModal",show:!0,onHide:t,onExited:t,modalHeaderText:y,showCloseButton:!0,bodyPadding:!0,compassDesign:!0,ariaLabel:"Access Rule Test Results",isStacked:a},l().createElement(u.A,{users:p,usersPerPage:10,total:g,nextPage:e=>{if(_||!p.length)return;if(10*e<50)return;const t=p[p.length-1].id;C([...f,t]),E(d,t)},search:e=>{C([]),m(e),E(e,"",!0)},actionUserProps:{}}))}d.propTypes={onExited:s().func.isRequired,isStacked:s().bool,actions:s().shape({searchUsers:s().func.isRequired,openModal:s().func}).isRequired};const m=d},45495:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(62688),s=a.n(n),r=(a(29206),a(36418)),l=a.n(r),o=a(14778),i=a(17461);const c=e=>{let t,a,n,s,{show:r,onConfirm:c,onCancel:d,displayName:m,toPublic:p}=e;p?(t=u.toPublicTitle,a=u.toPublicMessage,n=u.toPublicConfirm,s=u.toPublicMessageConfirmation):(t=u.toPrivateTitle,a=u.toPrivateMessage,n=u.toPrivateConfirm,s=u.toPrivateMessageConfirmation);const b=l().createElement(o.FormattedMessage,Object.assign({},t,{values:{displayName:m}})),g=l().createElement(l().Fragment,null,l().createElement("p",null,l().createElement(o.FormattedMessage,Object.assign({},a,{values:{displayName:l().createElement("strong",null,m)}}))),l().createElement("p",null,l().createElement(o.FormattedMessage,Object.assign({},s,{values:{displayName:l().createElement("strong",null,m)}})))),h=l().createElement(o.FormattedMessage,n),_=l().createElement(o.FormattedMessage,{id:"admin.team_channel_settings.convertConfirmModal.cancel",defaultMessage:"No, cancel"});return l().createElement(i.A,{show:r,title:b,message:g,modalClass:"discard-changes-modal",confirmButtonClass:"btn btn-primary",confirmButtonText:h,cancelButtonText:_,onConfirm:c,onCancel:d})};c.propTypes={show:s().bool.isRequired,onConfirm:s().func.isRequired,onCancel:s().func.isRequired,displayName:s().string.isRequired,toPublic:s().bool.isRequired};const u=(0,o.defineMessages)({toPrivateConfirm:{id:"admin.team_channel_settings.convertConfirmModal.toPrivateConfirm",defaultMessage:"Yes, convert to private channel"},toPrivateMessage:{id:"admin.team_channel_settings.convertConfirmModal.toPrivateMessageFirstLine",defaultMessage:"When you convert {displayName} to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only."},toPrivateMessageConfirmation:{id:"admin.team_channel_settings.convertConfirmModal.toPrivateMessageSecondLine",defaultMessage:"Are you sure you want to convert {displayName} to a private channel?"},toPrivateTitle:{id:"admin.team_channel_settings.convertConfirmModal.toPrivateTitle",defaultMessage:"Convert {displayName} to a private channel?"},toPublicConfirm:{id:"admin.team_channel_settings.convertConfirmModal.toPublicConfirm",defaultMessage:"Yes, convert to public channel"},toPublicMessage:{id:"admin.team_channel_settings.convertConfirmModal.toPublicMessageFirstLine",defaultMessage:"When you convert {displayName} to a public channel, history and membership are preserved. Public channels are discoverable and can be joined by users on the system without invitation."},toPublicMessageConfirmation:{id:"admin.team_channel_settings.convertConfirmModal.toPublicMessageSecondLine",defaultMessage:"Are you sure you want to convert {displayName} to a public channel?"},toPublicTitle:{id:"admin.team_channel_settings.convertConfirmModal.toPublicTitle",defaultMessage:"Convert {displayName} to a public channel?"}}),d=c},54226:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(62688),s=a.n(n),r=(a(17046),a(43813),a(57406),a(55448),a(36418)),l=a.n(r),o=a(14778),i=a(37270),c=a(14696),u=a(17085),d=a(24876);function m(e){let{show:t,onHide:a,onConfirm:n,channelName:s,usersToAdd:m,usersToRemove:p,isProcessing:b=!1,autoSyncEnabled:g=!1,isStacked:h=!1,willShowActivityWarning:_=!1}=e;const v=(0,i.useDispatch)(),[f,C]=(0,r.useState)(!1),[E,y]=(0,r.useState)("allowed"),[S,M]=(0,r.useState)([]),[N,A]=(0,r.useState)([]),[T,w]=(0,r.useState)([]),[k,O]=(0,r.useState)([]);(0,r.useEffect)((()=>{t&&f&&I()}),[t,f]);const I=(0,r.useCallback)((async()=>{if(m.length>0){const e=await v((0,u.G1)(m));null!=e&&e.data&&(M(e.data),w(e.data))}if(p.length>0){const e=await v((0,u.G1)(p));null!=e&&e.data&&(A(e.data),O(e.data))}}),[m,p,v]),R=e=>{y(e)},P=()=>{C(!1),y("allowed"),M([]),A([]),w([]),O([]),a()};if(!(m.length>0||p.length>0))return null;const L=l().createElement(o.FormattedMessage,{id:_?"channel_settings.access_rules.confirm_modal.title_with_warning":"channel_settings.access_rules.confirm_modal.title",defaultMessage:_?"Review membership impact":"Save and apply rules"}),F=s,q="allowed"===E?T:k,x="allowed"===E?m.length:p.length,D=e=>l().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons"},l().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons__left"},e),l().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons__right"},l().createElement("button",{className:"btn btn-tertiary",onClick:P,disabled:b},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.cancel",defaultMessage:"Cancel"})),l().createElement("button",{className:"btn btn-danger",onClick:n,disabled:b},b?l().createElement(l().Fragment,null,l().createElement("span",{className:"icon icon-loading icon-spin"}),l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.saving",defaultMessage:"Saving..."})):_?l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.continue",defaultMessage:"Continue"}):l().createElement(o.FormattedMessage,{id:g?"channel_settings.access_rules.confirm_modal.save_and_apply":"channel_settings.access_rules.confirm_modal.save",defaultMessage:g?"Save and apply":"Save"}))));return l().createElement(c.zW,{className:"ChannelAccessRulesConfirmModal a11y__modal",id:"channel-access-rules-confirm-modal",show:t,onHide:P,onExited:P,compassDesign:!0,modalHeaderText:L,modalSubheaderText:F,bodyPadding:!1,isStacked:h},f?l().createElement("div",{className:"ChannelAccessRulesConfirmModal__details"},l().createElement("div",{className:"ChannelAccessRulesConfirmModal__message"},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.message",defaultMessage:"Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.",values:{addCount:m.length,removeCount:p.length,strong:e=>l().createElement("strong",null,e)}})),l().createElement("div",{className:"ChannelAccessRulesConfirmModal__tabs"},l().createElement("button",{className:"ChannelAccessRulesConfirmModal__tab ".concat("allowed"===E?"active":""),onClick:()=>R("allowed")},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.allowed_tab",defaultMessage:"Allowed ({count})",values:{count:m.length}})),l().createElement("button",{className:"ChannelAccessRulesConfirmModal__tab ".concat("restricted"===E?"active":""),onClick:()=>R("restricted")},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.restricted_tab",defaultMessage:"Restricted ({count})",values:{count:p.length}}))),l().createElement("div",{className:"ChannelAccessRulesConfirmModal__userList"},q.length>0?l().createElement(d.A,{users:q,usersPerPage:50,total:x,actionUserProps:{},focusOnMount:!1,nextPage:()=>{},search:e=>{if(""===e)w(S),O(N);else{const t=S.filter((t=>{var a,n,s,r;return t.username.toLowerCase().includes(e.toLowerCase())||(null===(a=t.first_name)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null===(n=t.last_name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(r=t.nickname)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))}));w(t);const a=N.filter((t=>{var a,n,s,r;return t.username.toLowerCase().includes(e.toLowerCase())||(null===(a=t.first_name)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null===(n=t.last_name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(r=t.nickname)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))}));O(a)}}}):l().createElement("div",{className:"ChannelAccessRulesConfirmModal__noResults"},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.no_users",defaultMessage:"No users in this category"}))),D(l().createElement("button",{className:"btn btn-tertiary",onClick:()=>{C(!1)},disabled:b},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.hide_users",defaultMessage:"Hide users"})))):l().createElement("div",{className:"ChannelAccessRulesConfirmModal__summary"},l().createElement("div",{className:"ChannelAccessRulesConfirmModal__message"},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.message",defaultMessage:"Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.",values:{addCount:m.length,removeCount:p.length,strong:e=>l().createElement("strong",null,e)}})),l().createElement("div",{className:"ChannelAccessRulesConfirmModal__question"},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.question",defaultMessage:"Are you sure you want to save and apply the access rules?"})),D(l().createElement("button",{className:"btn btn-tertiary",onClick:()=>{C(!0)},disabled:b},l().createElement(o.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.view_users",defaultMessage:"View users"})))))}m.propTypes={show:s().bool.isRequired,onHide:s().func.isRequired,onConfirm:s().func.isRequired,channelName:s().string.isRequired,usersToAdd:s().arrayOf(s().string).isRequired,usersToRemove:s().arrayOf(s().string).isRequired,isProcessing:s().bool,autoSyncEnabled:s().bool,isStacked:s().bool,willShowActivityWarning:s().bool};const p=m},61295:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(62688),s=a.n(n),r=(a(4290),a(36418)),l=a.n(r),o=a(47011),i=a(11038);function c(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends l().PureComponent{constructor(e){super(e),c(this,"checkClick",(e=>{this.colorPicker.current&&this.colorPicker.current.contains(e.target)||this.setState({isOpened:!1})})),c(this,"togglePicker",(()=>{!this.state.isOpened&&this.colorInput.current&&this.colorInput.current.focus(),this.setState({isOpened:!this.state.isOpened})})),c(this,"handleColorChange",(e=>{this.setState({focused:!1}),this.props.onChange(e.hex)})),c(this,"onChange",(e=>{const t=e.target.value,a=(0,i.A)(t),n="#"+a.toHex();a.isValid()&&this.props.onChange(n),this.setState({value:t})})),c(this,"onFocus",(e=>{this.setState({focused:!0}),e.target&&e.target.setSelectionRange(1,e.target.value.length)})),c(this,"onBlur",(()=>{const e=this.state.value,t=(0,i.A)(e),a="#"+t.toHex();t.isValid()?(this.props.onChange(a),this.setState({value:a})):this.setState({value:this.props.value}),this.setState({focused:!1})})),c(this,"onKeyDown",(e=>{"Enter"!==e.key&&" "!==e.key||this.togglePicker()})),this.colorPicker=l().createRef(),this.colorInput=l().createRef(),this.state={focused:!1,isOpened:!1,value:e.value}}static getDerivedStateFromProps(e,t){return t.focused||e.value===t.value?null:{value:e.value}}componentDidUpdate(e,t){const{isOpened:a}=t,{isOpened:n}=this.state;n!==a&&(n?document.addEventListener("click",this.checkClick,{capture:!0}):document.removeEventListener("click",this.checkClick))}render(){const{id:e}=this.props,{isOpened:t,value:a}=this.state;return l().createElement("div",{className:"color-input input-group"},l().createElement("input",{id:"".concat(e,"-inputColorValue"),ref:this.colorInput,className:"form-control",type:"text",value:a,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown,maxLength:7,disabled:this.props.isDisabled,"data-testid":"color-inputColorValue"}),!this.props.isDisabled&&l().createElement("span",{id:"".concat(e,"-squareColorIcon"),className:"input-group-addon color-pad",onClick:this.togglePicker},l().createElement("i",{id:"".concat(e,"-squareColorIconValue"),className:"color-icon",style:{backgroundColor:a}})),t&&l().createElement("div",{ref:this.colorPicker,className:"color-popover",id:"".concat(e,"-ChromePickerModal")},l().createElement(o.xk,{color:a,onChange:this.handleColorChange,disableAlpha:!0})))}}c(u,"propTypes",{id:s().string.isRequired,onChange:s().func.isRequired,value:s().string.isRequired,isDisabled:s().bool})},53779:(e,t,a)=>{a.d(t,{V:()=>i});var n=a(36418),s=a(37270),r=a(87461),l=a(30413),o=a(81149);const i=e=>{const t=(0,s.useDispatch)();return(0,n.useMemo)((()=>({getAccessControlFields:(a,n)=>t((0,r.R5)(a,n,e)),getVisualAST:a=>t((0,r.ps)(a,e)),searchUsers:(a,n,s,l)=>t((0,r.Yz)(a,n,s,l,e)),getChannelPolicy:e=>t((0,r.Ar)(e)),saveChannelPolicy:e=>t((0,r.IS)(e)),deleteChannelPolicy:e=>t((0,r.fQ)(e)),getChannelMembers:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return t((0,l.p6)(e,a,n))},createJob:e=>t((0,o._S)(e)),validateExpressionAgainstRequester:a=>t((0,r.Q6)(a,e)),createAccessControlSyncJob:e=>t((0,r.G$)(e)),updateAccessControlPoliciesActive:e=>t((0,r.X)(e))})),[t,e])}},87461:(e,t,a)=>{a.d(t,{Ar:()=>o,G$:()=>f,GF:()=>m,IS:()=>i,Q6:()=>v,R5:()=>b,U8:()=>d,X:()=>C,Yz:()=>h,a5:()=>u,fQ:()=>c,kj:()=>p,lJ:()=>g,ps:()=>_}),a(43813);var n=a(77798),s=a(23877),r=a(40693),l=a(87988);function o(e,t){return(0,l.n4)({clientFunc:r.mT.getAccessControlPolicy,onSuccess:[s.JU.RECEIVED_ACCESS_CONTROL_POLICY],params:[e,t]})}function i(e){return async(t,a)=>{let n;try{n=await r.mT.updateOrCreateAccessControlPolicy(e)}catch(e){return(0,l.UP)(e,t,a),{error:e}}return t({type:s.JU.CREATE_ACCESS_CONTROL_POLICY_SUCCESS,data:n}),{data:n}}}function c(e){return(0,l.n4)({clientFunc:r.mT.deleteAccessControlPolicy,onSuccess:[s.JU.DELETE_ACCESS_CONTROL_POLICY_SUCCESS],params:[e]})}function u(e,t,a,n){return async(o,i)=>{let c;try{c=await r.mT.searchAccessControlPolicies(e,t,a,n)}catch(e){return(0,l.UP)(e,o,i),{error:e}}return o({type:s.JU.RECEIVED_ACCESS_CONTROL_POLICIES_SEARCH,data:c.policies}),{data:c}}}function d(e,t,a){return async(o,i)=>{let c;try{c=await r.mT.searchChildAccessControlPolicyChannels(e,t,a)}catch(e){return(0,l.UP)(e,o,i),{error:e}}const u={};return u[e]=c.channels.map((e=>e.id)),o((0,n.OJ)([{type:s.JU.RECEIVED_ACCESS_CONTROL_CHILD_POLICIES,data:u},{type:s.rb.RECEIVED_CHANNELS,data:c.channels}])),{data:c}}}function m(e,t){return(0,l.n4)({clientFunc:r.mT.assignChannelsToAccessControlPolicy,onSuccess:[s.JU.ASSIGN_CHANNELS_TO_ACCESS_CONTROL_POLICY_SUCCESS],params:[e,t]})}function p(e,t){return(0,l.n4)({clientFunc:r.mT.unassignChannelsFromAccessControlPolicy,onSuccess:[s.JU.UNASSIGN_CHANNELS_FROM_ACCESS_CONTROL_POLICY_SUCCESS],params:[e,t]})}function b(e,t,a){return(0,l.n4)({clientFunc:r.mT.getAccessControlFields,params:[e,t,a]})}function g(e,t){return(0,l.n4)({clientFunc:r.mT.updateAccessControlPolicyActive,params:[e,t]})}function h(e,t,a,n,o){return async(i,c)=>{let u;try{u=await r.mT.testAccessControlExpression(e,t,a,n,o)}catch(e){return(0,l.UP)(e,i,c),{error:e}}return i({type:s.zO.RECEIVED_PROFILES,data:u.users}),{data:u}}}function _(e,t){return(0,l.n4)({clientFunc:r.mT.expressionToVisualFormat,params:[e,t]})}function v(e,t){return async(a,n)=>{let s;try{s=await r.mT.validateExpressionAgainstRequester(e,t)}catch(e){return(0,l.UP)(e,a,n),{error:e}}return{data:s}}}function f(e){return async(t,a)=>{let n;try{n=await r.mT.createAccessControlSyncJob(e)}catch(e){return(0,l.UP)(e,t,a),{error:e}}return{data:n}}}function C(e){return(0,l.n4)({clientFunc:r.mT.updateAccessControlPoliciesActive,params:[e]})}}}]);
//# sourceMappingURL=4896.ce0ae78eeb70e81d175d.js.map