{"version":3,"file":"5648.0772b449d418e7c3f509.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/actions/views/login.ts","webpack://mattermost-webapp/./src/components/desktop_auth_token.tsx","webpack://mattermost-webapp/./src/components/external_login_button/external_login_button.tsx","webpack://mattermost-webapp/./src/components/header_footer_route/content_layouts/alternate_link.tsx","webpack://mattermost-webapp/./src/components/header_footer_route/content_layouts/column.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/entra_id_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/lock_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/login_gitlab_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/login_google_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/login_openid_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/inputs/password_input/password_input.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {batchActions} from 'redux-batched-actions';\r\n\r\nimport type {ServerError} from '@mattermost/types/errors';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\nimport {logError} from 'mattermost-redux/actions/errors';\r\nimport {loadRolesIfNeeded} from 'mattermost-redux/actions/roles';\r\nimport {Client4} from 'mattermost-redux/client';\r\n\r\nimport type {ActionFuncAsync, DispatchFunc} from 'types/store';\r\n\r\nasync function handleLoginSuccess(dispatch: DispatchFunc, loggedInUserProfile: UserProfile) {\r\n    dispatch(\r\n        batchActions([\r\n            {\r\n                type: UserTypes.LOGIN_SUCCESS,\r\n            },\r\n            {\r\n                type: UserTypes.RECEIVED_ME,\r\n                data: loggedInUserProfile,\r\n            },\r\n        ]),\r\n    );\r\n\r\n    dispatch(loadRolesIfNeeded(loggedInUserProfile.roles.split(' ')));\r\n}\r\n\r\nasync function performLogin(\r\n    dispatch: DispatchFunc,\r\n    loginFunc: () => Promise<UserProfile>,\r\n) {\r\n    dispatch({type: UserTypes.LOGIN_REQUEST, data: null});\r\n\r\n    try {\r\n        // This is partial user profile we received when we login. We still need to make getMe for complete user profile.\r\n        const loggedInUserProfile = await loginFunc();\r\n\r\n        await handleLoginSuccess(dispatch, loggedInUserProfile);\r\n    } catch (error) {\r\n        dispatch({\r\n            type: UserTypes.LOGIN_FAILURE,\r\n            error,\r\n        });\r\n        dispatch(logError(error as ServerError));\r\n        return {error};\r\n    }\r\n\r\n    return {data: true};\r\n}\r\n\r\nexport function login(loginId: string, password: string, mfaToken = ''): ActionFuncAsync {\r\n    return async (dispatch) => {\r\n        return performLogin(dispatch, () => Client4.login(loginId, password, mfaToken));\r\n    };\r\n}\r\n\r\nexport function loginWithDesktopToken(token: string): ActionFuncAsync {\r\n    return async (dispatch) => {\r\n        return performLogin(dispatch, () => Client4.loginWithDesktopToken(token));\r\n    };\r\n}\r\n\r\nexport function loginById(id: string, password: string): ActionFuncAsync {\r\n    return async (dispatch) => {\r\n        return performLogin(dispatch, () => Client4.loginById(id, password, ''));\r\n    };\r\n}\r\n\r\nexport function getUserLoginType(loginId: string): ActionFuncAsync<{auth_service: 'magic_link' | ''; is_deactivated: boolean }> {\r\n    return async (dispatch) => {\r\n        try {\r\n            const response = await Client4.getUserLoginType(loginId);\r\n            return {data: {auth_service: response.auth_service ?? '', is_deactivated: response.is_deactivated ?? false}};\r\n        } catch (error) {\r\n            dispatch(logError(error as ServerError));\r\n            return {error};\r\n        }\r\n    };\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport crypto from 'crypto';\r\nimport React, {useEffect, useState} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\n\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {redirectUserToDefaultTeam} from 'actions/global_actions';\r\nimport {loginWithDesktopToken} from 'actions/views/login';\r\n\r\nimport DesktopApp from 'utils/desktop_api';\r\nimport {isDesktopApp} from 'utils/user_agent';\r\n\r\nimport './desktop_auth_token.scss';\r\n\r\nconst BOTTOM_MESSAGE_TIMEOUT = 10000;\r\nconst DESKTOP_AUTH_PREFIX = 'desktop_auth_client_token';\r\n\r\nenum DesktopAuthStatus {\r\n    None,\r\n    WaitingForBrowser,\r\n    LoggedIn,\r\n    Authenticating,\r\n    Error,\r\n}\r\n\r\ntype Props = {\r\n    href: string;\r\n    onLogin: () => void;\r\n}\r\n\r\nconst DesktopAuthToken: React.FC<Props> = ({href, onLogin}: Props) => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const {search} = useLocation();\r\n    const query = new URLSearchParams(search);\r\n\r\n    const serverToken = query.get('server_token');\r\n    const receivedClientToken = query.get('client_token');\r\n    const redirectTo = query.get('redirect_to');\r\n    const currentUser = useSelector(getCurrentUser);\r\n    const storedClientToken = sessionStorage.getItem(DESKTOP_AUTH_PREFIX);\r\n    const [status, setStatus] = useState(serverToken ? DesktopAuthStatus.LoggedIn : DesktopAuthStatus.None);\r\n    const [showBottomMessage, setShowBottomMessage] = useState<boolean>();\r\n\r\n    const tryDesktopLogin = async () => {\r\n        if (!(serverToken && receivedClientToken === storedClientToken)) {\r\n            setStatus(DesktopAuthStatus.Error);\r\n            return;\r\n        }\r\n\r\n        sessionStorage.removeItem(DESKTOP_AUTH_PREFIX);\r\n        const {error: loginError} = await dispatch(loginWithDesktopToken(serverToken));\r\n\r\n        if (loginError && loginError.server_error_id && loginError.server_error_id.length !== 0) {\r\n            setStatus(DesktopAuthStatus.Error);\r\n            return;\r\n        }\r\n\r\n        setStatus(DesktopAuthStatus.LoggedIn);\r\n        await onLogin();\r\n    };\r\n\r\n    const openExternalLoginURL = async () => {\r\n        const desktopToken = `${DesktopApp.isDev() ? 'dev-' : ''}${crypto.randomBytes(32).toString('hex')}`.slice(0, 64);\r\n        sessionStorage.setItem(DESKTOP_AUTH_PREFIX, desktopToken);\r\n        const parsedURL = new URL(href);\r\n\r\n        const params = new URLSearchParams(parsedURL.searchParams);\r\n        params.set('desktop_token', desktopToken);\r\n\r\n        window.open(`${parsedURL.origin}${parsedURL.pathname}?${params.toString()}`);\r\n        setStatus(DesktopAuthStatus.WaitingForBrowser);\r\n    };\r\n\r\n    const forwardToDesktopApp = () => {\r\n        const url = new URL(window.location.href);\r\n        let protocol = 'mattermost';\r\n        if (url.searchParams.get('isDesktopDev')) {\r\n            protocol = 'mattermost-dev';\r\n        }\r\n\r\n        window.location.href = url.toString().replace(url.protocol, `${protocol}:`);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            if (redirectTo && redirectTo.match(/^\\/([^/]|$)/)) {\r\n                history.push(redirectTo);\r\n                return;\r\n            }\r\n            redirectUserToDefaultTeam();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setShowBottomMessage(false);\r\n\r\n        const timeout = setTimeout(() => {\r\n            setShowBottomMessage(true);\r\n        }, BOTTOM_MESSAGE_TIMEOUT) as unknown as number;\r\n\r\n        return () => {\r\n            clearTimeout(timeout);\r\n        };\r\n    }, [status]);\r\n\r\n    useEffect(() => {\r\n        if (serverToken) {\r\n            if (storedClientToken) {\r\n                tryDesktopLogin();\r\n            } else if (!isDesktopApp()) {\r\n                forwardToDesktopApp();\r\n            }\r\n            return;\r\n        }\r\n\r\n        openExternalLoginURL();\r\n    }, [serverToken]);\r\n\r\n    let mainMessage;\r\n    let subMessage;\r\n    let bottomMessage;\r\n\r\n    if (status === DesktopAuthStatus.WaitingForBrowser) {\r\n        mainMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.polling.redirectingToBrowser'\r\n                defaultMessage='Redirecting to browser...'\r\n            />\r\n        );\r\n        subMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.polling.awaitingToken'\r\n                defaultMessage='Authenticating in the browser, awaiting valid token.'\r\n            />\r\n        );\r\n\r\n        bottomMessage = null;\r\n    }\r\n\r\n    if (status === DesktopAuthStatus.LoggedIn) {\r\n        mainMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.complete.youAreNowLoggedIn'\r\n                defaultMessage='You are now logged in'\r\n            />\r\n        );\r\n        subMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.complete.openMattermost'\r\n                defaultMessage='Click on <b>Open Mattermost</b> in the browser prompt to <a>launch the desktop app</a>'\r\n                values={{\r\n                    a: (chunks: React.ReactNode) => {\r\n                        return (\r\n                            <a onClick={forwardToDesktopApp}>\r\n                                {chunks}\r\n                            </a>\r\n                        );\r\n                    },\r\n                    b: (chunks: React.ReactNode) => (<b>{chunks}</b>),\r\n                }}\r\n            />\r\n        );\r\n\r\n        bottomMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.complete.havingTrouble'\r\n                defaultMessage='Having trouble logging in? <a>Open Mattermost in your browser</a>'\r\n                values={{\r\n                    a: (chunks: React.ReactNode) => {\r\n                        return (\r\n                            <a onClick={() => history.push('/')}>\r\n                                {chunks}\r\n                            </a>\r\n                        );\r\n                    },\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    if (status === DesktopAuthStatus.Error) {\r\n        mainMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.error.somethingWentWrong'\r\n                defaultMessage='Something went wrong'\r\n            />\r\n        );\r\n        subMessage = (\r\n            <FormattedMessage\r\n                id='desktop_auth_token.error.restartFlow'\r\n                defaultMessage={'Click <a>here</a> to try again.'}\r\n                values={{\r\n                    a: (chunks: React.ReactNode) => {\r\n                        return (\r\n                            <a onClick={() => history.push('/')}>\r\n                                {chunks}\r\n                            </a>\r\n                        );\r\n                    },\r\n                }}\r\n            />\r\n        );\r\n        bottomMessage = null;\r\n    }\r\n\r\n    return (\r\n        <div className='DesktopAuthToken'>\r\n            <h1 className='DesktopAuthToken__main'>\r\n                {mainMessage}\r\n            </h1>\r\n            <p className={classNames('DesktopAuthToken__sub', {complete: status === DesktopAuthStatus.LoggedIn})}>\r\n                {subMessage}\r\n            </p>\r\n            <div className='DesktopAuthToken__bottom'>\r\n                {showBottomMessage ? bottomMessage : null}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DesktopAuthToken;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\n\r\nimport './external_login_button.scss';\r\n\r\nexport type ExternalLoginButtonType = {\r\n    id: string;\r\n    url: string;\r\n    icon: React.ReactNode;\r\n    label: string;\r\n    style?: React.CSSProperties;\r\n    direction?: 'row' | 'column';\r\n    onClick: (event: React.MouseEvent<HTMLAnchorElement>) => void;\r\n};\r\n\r\nconst ExternalLoginButton = ({\r\n    id,\r\n    url,\r\n    icon,\r\n    label,\r\n    style,\r\n    direction = 'row',\r\n    onClick,\r\n}: ExternalLoginButtonType) => (\r\n    <a\r\n        id={id}\r\n        className={classNames('external-login-button', {'direction-column': direction === 'column'}, id)}\r\n        href={url}\r\n        style={style}\r\n        onClick={onClick}\r\n    >\r\n        {icon}\r\n        <span className='external-login-button-label'>\r\n            {label}\r\n        </span>\r\n    </a>\r\n);\r\n\r\nexport default ExternalLoginButton;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport './alternate_link.scss';\r\n\r\ntype AlternateLinkProps = {\r\n    className?: string;\r\n    alternateMessage?: string;\r\n    alternateLinkPath?: string;\r\n    alternateLinkLabel?: string;\r\n}\r\n\r\nconst AlternateLink = ({className, alternateMessage, alternateLinkPath, alternateLinkLabel}: AlternateLinkProps) => {\r\n    if (!alternateMessage && !alternateLinkPath && !alternateLinkLabel) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={classNames('alternate-link', className)}\r\n            data-testid='alternate-link'\r\n        >\r\n            {alternateMessage && (\r\n                <span className='alternate-link__message'>\r\n                    {alternateMessage}\r\n                </span>\r\n            )}\r\n            {alternateLinkPath && alternateLinkLabel && (\r\n                <Link\r\n                    className='alternate-link__link'\r\n                    to={{\r\n                        pathname: alternateLinkPath,\r\n                        search: location.search,\r\n                    }}\r\n                >\r\n                    {alternateLinkLabel}\r\n                </Link>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AlternateLink;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {type ReactNode} from 'react';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport './column.scss';\r\n\r\ntype ColumnProps = {\r\n    title: ReactNode;\r\n    message: ReactNode;\r\n    SVGElement?: React.ReactNode;\r\n    extraContent?: React.ReactNode;\r\n    onEnterKeyDown?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nconst Column = ({title, message, SVGElement, extraContent, onEnterKeyDown}: ColumnProps) => {\r\n    const handleOnEnterKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (onEnterKeyDown && e.key === Constants.KeyCodes.ENTER[0]) {\r\n            onEnterKeyDown(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className='content-layout-column'\r\n            onKeyDown={handleOnEnterKeyDown}\r\n            tabIndex={0}\r\n        >\r\n            <div className='content-layout-column-svg'>\r\n                {SVGElement}\r\n            </div>\r\n            <h1 className='content-layout-column-title'>\r\n                {title}\r\n            </h1>\r\n            <p className='content-layout-column-message'>\r\n                {message}\r\n            </p>\r\n            {extraContent && (\r\n                <div className='content-layout-column-extra-content'>\r\n                    {extraContent}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Column;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nexport default function EntraIdIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='16'\r\n                height='16'\r\n                viewBox='0 0 16 16'\r\n                fill='none'\r\n                xmlns='http://www.w3.org/2000/svg'\r\n            >\r\n                <path\r\n                    d='M3.38 12.473c0.345 0.215 0.918 0.454 1.524 0.454 0.552 0 1.065 -0.16 1.49 -0.433l0.002 -0.001L8 11.491V15.111a1.387 1.387 0 0 1 -0.732 -0.208z'\r\n                    fill='#225086'\r\n                />\r\n                <path\r\n                    d='m6.98 1.34 -6.667 7.52c-0.515 0.581 -0.38 1.46 0.287 1.876l2.779 1.737c0.345 0.215 0.918 0.454 1.524 0.454 0.552 0 1.065 -0.16 1.49 -0.433l0.002 -0.001L8 11.491l-3.879 -2.425 3.88 -4.377V0.889c-0.377 0 -0.753 0.15 -1.02 0.451Z'\r\n                    fill='#6df'\r\n                />\r\n                <path\r\n                    points='4.636 10.199 4.688 10.231 9 12.927 9.001 12.927 9.001 12.927 9.001 5.276 9 5.275 4.636 10.199'\r\n                    fill='#cbf8ff'\r\n                    d='M4.121 9.066L4.167 9.094L8 11.491L8.001 11.491L8.001 11.491L8.001 4.69L8 4.689L4.121 9.066Z'\r\n                />\r\n                <path\r\n                    d='M15.399 10.736c0.668 -0.417 0.802 -1.295 0.287 -1.876l-4.374 -4.934a2.756 2.756 0 0 0 -1.167 -0.259c-0.822 0 -1.557 0.355 -2.046 0.912l-0.097 0.109 3.879 4.377 -3.88 2.425v3.62c0.255 0 0.509 -0.069 0.732 -0.208l6.667 -4.167Z'\r\n                    fill='#074793'\r\n                />\r\n                <path\r\n                    d='M8.001 0.889v3.8l0.097 -0.109a2.711 2.711 0 0 1 2.046 -0.912c0.42 0 0.814 0.095 1.167 0.259l-2.292 -2.586A1.351 1.351 0 0 0 8 0.89Z'\r\n                    fill='#0294e4'\r\n                />\r\n                <path\r\n                    points='13.365 10.199 13.365 10.199 13.365 10.199 9.001 5.276 9.001 12.926 13.365 10.199'\r\n                    fill='#96bcc2'\r\n                    d='M11.88 9.066L11.88 9.066L11.88 9.066L8.001 4.69L8.001 11.49L11.88 9.066Z'\r\n                />\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function LockIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    const {formatMessage} = useIntl();\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='12px'\r\n                height='13px'\r\n                viewBox='0 0 13 15'\r\n                role='presentation'\r\n                aria-label={formatMessage({id: 'generic_icons.channel.private', defaultMessage: 'Private Channel Icon'})}\r\n            >\r\n                <g\r\n                    stroke='none'\r\n                    strokeWidth='1'\r\n                    fill='inherit'\r\n                    fillRule='evenodd'\r\n                >\r\n                    <g\r\n                        transform='translate(-116.000000, -175.000000)'\r\n                        fillRule='nonzero'\r\n                        fill='inherit'\r\n                    >\r\n                        <g transform='translate(95.000000, 0.000000)'>\r\n                            <g transform='translate(20.000000, 113.000000)'>\r\n                                <g transform='translate(1.000000, 62.000000)'>\r\n                                    <path d='M12.0714286,6.5 L11.1428571,6.5 L11.1428571,4.64285714 C11.1428571,2.07814286 9.06471429,0 6.5,0 C3.93528571,0 1.85714286,2.07814286 1.85714286,4.64285714 L1.85714286,6.5 L0.928571429,6.5 C0.415071429,6.5 0,7.00792857 0,7.52142857 L0,13.9285714 C0,14.4420714 0.415071429,14.8571429 0.928571429,14.8571429 L12.0714286,14.8571429 C12.5849286,14.8571429 13,14.4420714 13,13.9285714 L13,7.52142857 C13,7.00792857 12.5849286,6.5 12.0714286,6.5 Z M6.5,1.85714286 C8.03585714,1.85714286 9.28571429,3.107 9.28571429,4.64285714 L9.28571429,6.5 L8.35714286,6.5 L4.64285714,6.5 L3.71428571,6.5 L3.71428571,4.64285714 C3.71428571,3.107 4.96414286,1.85714286 6.5,1.85714286 Z'/>\r\n                                </g>\r\n                            </g>\r\n                        </g>\r\n                    </g>\r\n                </g>\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function LoginGitlabIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='17'\r\n                height='16'\r\n                viewBox='0 0 17 16'\r\n                fill='none'\r\n                xmlns='http://www.w3.org/2000/svg'\r\n                aria-label={formatMessage({id: 'generic_icons.login.gitlab', defaultMessage: 'Gitlab Icon'})}\r\n            >\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M8.83325 15.4909L11.7793 6.45337H5.88745L8.83334 15.4909H8.83325Z'\r\n                    fill='#E24329'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M8.83339 15.4909L5.88737 6.45337H1.75854L8.83347 15.4908L8.83339 15.4909Z'\r\n                    fill='#FC6D26'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M1.75846 6.45329L0.863125 9.19966C0.781518 9.45021 0.870921 9.72467 1.08477 9.87941L8.83325 15.4908L1.75846 6.45325V6.45329Z'\r\n                    fill='#FCA326'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M1.75859 6.45333H5.88742L4.11296 1.01011C4.02169 0.73003 3.62418 0.73003 3.53296 1.01011L1.75854 6.45333H1.75859Z'\r\n                    fill='#E24329'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M8.83325 15.4909L11.7793 6.45337H15.9081L8.83334 15.4908L8.83325 15.4909Z'\r\n                    fill='#FC6D26'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M15.908 6.45329L16.8034 9.19966C16.885 9.45021 16.7956 9.72467 16.5817 9.87941L8.83325 15.4908L15.908 6.45325V6.45329Z'\r\n                    fill='#FCA326'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M15.9081 6.45333H11.7793L13.5538 1.01011C13.6451 0.73003 14.0426 0.73003 14.1338 1.01011L15.9082 6.45333H15.9081Z'\r\n                    fill='#E24329'\r\n                />\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function LoginGoggleIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='17'\r\n                height='16'\r\n                viewBox='0 0 17 16'\r\n                fill='none'\r\n                xmlns='http://www.w3.org/2000/svg'\r\n                aria-label={formatMessage({id: 'generic_icons.login.google', defaultMessage: 'Google Icon'})}\r\n            >\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M15.5787 8.16364C15.5787 7.6531 15.5329 7.16219 15.4478 6.69092H8.66675V9.47601H12.5417C12.3747 10.376 11.8675 11.1386 11.1049 11.6491V13.4556H13.4318C14.7933 12.2022 15.5787 10.3564 15.5787 8.16364Z'\r\n                    fill='#4285F4'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M8.66685 15.2C10.6108 15.2 12.2407 14.5553 13.4319 13.4557L11.105 11.6491C10.4603 12.0811 9.63558 12.3364 8.66685 12.3364C6.79158 12.3364 5.2043 11.0699 4.63812 9.36804H2.23267V11.2335C3.41739 13.5866 5.8523 15.2 8.66685 15.2Z'\r\n                    fill='#34A853'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M4.63807 9.36806C4.49407 8.93606 4.41225 8.4746 4.41225 8.00006C4.41225 7.52551 4.49407 7.06406 4.63807 6.63206V4.7666H2.23261C1.74498 5.7386 1.4668 6.83824 1.4668 8.00006C1.4668 9.16187 1.74498 10.2615 2.23261 11.2335L4.63807 9.36806Z'\r\n                    fill='#FBBC05'\r\n                />\r\n                <path\r\n                    fillRule='evenodd'\r\n                    clipRule='evenodd'\r\n                    d='M8.66685 3.66369C9.72394 3.66369 10.673 4.02696 11.4192 4.74041L13.4843 2.67532C12.2374 1.5135 10.6076 0.800049 8.66685 0.800049C5.8523 0.800049 3.41739 2.4135 2.23267 4.76659L4.63812 6.63205C5.2043 4.93023 6.79158 3.66369 8.66685 3.66369Z'\r\n                    fill='#EA4335'\r\n                />\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function LoginOpenIdIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='16'\r\n                height='16'\r\n                viewBox='0 0 16 16'\r\n                fill='none'\r\n                xmlns='http://www.w3.org/2000/svg'\r\n                aria-label={formatMessage({id: 'generic_icons.login.openid', defaultMessage: 'OpenID Icon'})}\r\n            >\r\n                <path\r\n                    d='M7.19995 1.2V15.2L9.59995 14V0L7.19995 1.2Z'\r\n                    fill='#F48018'\r\n                />\r\n                <path\r\n                    d='M15.6652 5.3302L16.0001 8.80002L11.313 7.85391'\r\n                    fill='#AEB0B3'\r\n                />\r\n                <path\r\n                    d='M10 4.61206V6.19484C11.015 6.37555 12.0439 6.71905 12.768 7.17939L14.4821 6.09046C13.3141 5.34815 11.686 4.82159 10 4.61206ZM2.42378 9.90251C2.42378 8.13669 4.2954 6.64895 6.84567 6.19484V4.61206C2.94414 5.09733 0 7.28065 0 9.90251C0 12.5244 3.08942 14.8262 7.2 15.2V13.6001C4.43386 13.2433 2.42378 11.7657 2.42378 9.90251Z'\r\n                    fill='#AEB0B3'\r\n                />\r\n            </svg>\r\n\r\n        </span>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useState} from 'react';\r\nimport type {ChangeEventHandler, FocusEventHandler} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {ItemStatus} from 'utils/constants';\r\n\r\nimport Input from '../input/input';\r\nimport type {CustomMessageInputType, SIZE} from '../input/input';\r\n\r\nimport './password_input.scss';\r\n\r\ntype PasswordInputProps = {\r\n    className?: string;\r\n    value: string;\r\n    onChange: ChangeEventHandler<HTMLInputElement>;\r\n    onBlur?: FocusEventHandler<HTMLInputElement>;\r\n    onFocus?: FocusEventHandler<HTMLInputElement>;\r\n    hasError?: boolean;\r\n    info?: string;\r\n    error?: string;\r\n    createMode?: boolean;\r\n    disabled?: boolean;\r\n    inputSize?: SIZE;\r\n};\r\n\r\nconst PasswordInput = React.forwardRef((\r\n    {\r\n        className,\r\n        value,\r\n        onChange,\r\n        onBlur,\r\n        onFocus,\r\n        hasError,\r\n        info,\r\n        error,\r\n        createMode,\r\n        disabled,\r\n        inputSize,\r\n        ...otherProps\r\n    }: PasswordInputProps,\r\n    ref?: React.Ref<HTMLInputElement>,\r\n) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const toggleShowPassword = () => setShowPassword(!showPassword);\r\n\r\n    const customMessageError: CustomMessageInputType | null = error ? {type: ItemStatus.ERROR, value: error} : null;\r\n    const customMessageInfo: CustomMessageInputType | null = info ? {type: ItemStatus.INFO, value: info} : null;\r\n    const customMessage = error ? customMessageError : customMessageInfo;\r\n\r\n    const placeHolder = createMode ? formatMessage({id: 'widget.passwordInput.createPassword', defaultMessage: 'Choose a Password'}) : formatMessage({id: 'widget.passwordInput.password', defaultMessage: 'Password'});\r\n\r\n    return (\r\n        <Input\r\n            className={classNames('password-input', className)}\r\n            wrapperClassName={'password-input-with-toggle'}\r\n            name='password-input'\r\n            type={showPassword && !disabled ? 'text' : 'password'}\r\n            inputSize={inputSize}\r\n            addon={\r\n                <button\r\n                    id='password_toggle'\r\n                    type='button'\r\n                    aria-label={formatMessage({\r\n                        id: showPassword ? 'widget.passwordInput.hidePassword' : 'widget.passwordInput.showPassword',\r\n                        defaultMessage: showPassword ? 'Hide password' : 'Show password',\r\n                    })}\r\n                    className='password-input-toggle'\r\n                    onClick={toggleShowPassword}\r\n                    disabled={disabled}\r\n                >\r\n                    <i\r\n                        className={showPassword && !disabled ? 'icon-eye-off-outline' : 'icon-eye-outline'}\r\n                        aria-hidden='true'\r\n                    />\r\n                </button>\r\n            }\r\n            value={value}\r\n            onChange={onChange}\r\n            onBlur={onBlur}\r\n            onFocus={onFocus}\r\n            placeholder={placeHolder}\r\n            hasError={hasError}\r\n            customMessage={error || info ? customMessage : undefined}\r\n            disabled={disabled}\r\n            ref={ref}\r\n            {...otherProps}\r\n        />\r\n    );\r\n});\r\n\r\nexport default PasswordInput;\r\n"],"names":["async","performLogin","dispatch","loginFunc","type","UserTypes","LOGIN_REQUEST","data","loggedInUserProfile","batchActions","LOGIN_SUCCESS","RECEIVED_ME","loadRolesIfNeeded","roles","split","handleLoginSuccess","error","LOGIN_FAILURE","logError","login","loginId","password","mfaToken","arguments","length","undefined","Client4","loginWithDesktopToken","token","loginById","id","getUserLoginType","_response$auth_servic","_response$is_deactiva","response","auth_service","is_deactivated","DESKTOP_AUTH_PREFIX","DesktopAuthStatus","DesktopAuthToken","_ref","href","onLogin","useDispatch","history","useHistory","search","useLocation","query","URLSearchParams","serverToken","get","receivedClientToken","redirectTo","currentUser","useSelector","getCurrentUser","storedClientToken","sessionStorage","getItem","status","setStatus","useState","LoggedIn","None","showBottomMessage","setShowBottomMessage","forwardToDesktopApp","url","URL","window","location","protocol","searchParams","toString","replace","concat","mainMessage","subMessage","bottomMessage","useEffect","match","push","redirectUserToDefaultTeam","timeout","setTimeout","clearTimeout","Error","removeItem","loginError","server_error_id","tryDesktopLogin","isDesktopApp","desktopToken","DesktopApp","isDev","crypto","slice","setItem","parsedURL","params","set","open","origin","pathname","WaitingForBrowser","openExternalLoginURL","React","FormattedMessage","defaultMessage","values","a","chunks","onClick","b","className","classNames","complete","propTypes","_pt","isRequired","ExternalLoginButton","icon","label","style","direction","AlternateLink","alternateMessage","alternateLinkPath","alternateLinkLabel","Link","to","Column","title","message","SVGElement","extraContent","onEnterKeyDown","onKeyDown","e","key","Constants","KeyCodes","ENTER","tabIndex","EntraIdIcon","props","width","height","viewBox","fill","xmlns","d","points","LockIcon","formatMessage","useIntl","role","stroke","strokeWidth","fillRule","transform","LoginGitlabIcon","clipRule","LoginGoggleIcon","LoginOpenIdIcon","ref","value","onChange","onBlur","onFocus","hasError","info","createMode","disabled","inputSize","otherProps","_objectWithoutProperties","_excluded","showPassword","setShowPassword","customMessageError","ItemStatus","ERROR","customMessageInfo","INFO","customMessage","placeHolder","Input","Object","assign","wrapperClassName","name","addon","toggleShowPassword","placeholder"],"sourceRoot":""}