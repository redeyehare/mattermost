{"version":3,"file":"5200.70f19b4666ba015167dd.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/actions/views/mfa.js","webpack://mattermost-webapp/./src/components/color_input.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/join_leave_section/join_leave_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/join_leave_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/performance_debugging_section/performance_debugging_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/performance_debugging_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/user_settings_advanced.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/color_chooser/color_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/custom_theme_chooser/custom_theme_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/theme_thumbnail.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/premade_theme_chooser/premade_theme_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/premade_theme_chooser/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/user_settings_theme.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/manage_languages/manage_languages.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/manage_languages/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/manage_timezones/manage_timezones.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/manage_timezones/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/render_emoticons_as_emoji/render_emoticons_as_emoji.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/render_emoticons_as_emoji/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_display.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/index.ts","webpack://mattermost-webapp/./src/components/setting_picture.tsx","webpack://mattermost-webapp/./src/components/user_settings/general/user_settings_general.tsx","webpack://mattermost-webapp/./src/components/user_settings/general/index.ts","webpack://mattermost-webapp/./src/components/user_settings/notifications/index.ts","webpack://mattermost-webapp/./src/components/user_settings/plugin/plugin_action.tsx","webpack://mattermost-webapp/./src/utils/plugins/preferences.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/radio_option.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/radio.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/plugin_setting.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/index.tsx","webpack://mattermost-webapp/./src/components/access_history_modal/access_history_modal.tsx","webpack://mattermost-webapp/./src/components/access_history_modal/index.ts","webpack://mattermost-webapp/./src/components/activity_log_modal/components/device_icon.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/components/more_info.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/components/activity_log.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/activity_log_modal.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/mfa_section/mfa_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/mfa_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/user_access_token_section/user_access_token_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/user_access_token_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/user_settings_security.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/limit_visible_gms_dms/limit_visible_gms_dms.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/limit_visible_gms_dms/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/show_unreads_category/show_unreads_category.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/show_unreads_category/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/user_settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/index.ts","webpack://mattermost-webapp/./src/components/user_settings/index.tsx","webpack://mattermost-webapp/./src/components/widgets/smart_loader/index.tsx","webpack://mattermost-webapp/./src/components/user_settings/modal/user_settings_modal.tsx","webpack://mattermost-webapp/../node_modules/react-select/creatable/dist/react-select-creatable.esm.js","webpack://mattermost-webapp/../node_modules/react-select/dist/useCreatable-84008237.esm.js"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport * as UserActions from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nexport function activateMfa(code) {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.updateUserMfa(currentUserId, true, code));\r\n    };\r\n}\r\n\r\nexport function deactivateMfa() {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.updateUserMfa(currentUserId, false));\r\n    };\r\n}\r\n\r\nexport function generateMfaSecret() {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.generateMfaSecret(currentUserId));\r\n    };\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {ChromePicker} from 'react-color';\r\nimport type {ColorResult} from 'react-color';\r\nimport tinycolor from 'tinycolor2';\r\n\r\ntype Props = {\r\n    id: string;\r\n    onChange: (color: string) => void;\r\n    value: string;\r\n    isDisabled?: boolean;\r\n}\r\n\r\ntype State = {\r\n    focused: boolean;\r\n    isOpened: boolean;\r\n    value: string;\r\n}\r\n\r\nexport default class ColorInput extends React.PureComponent<Props, State> {\r\n    private colorPicker: React.RefObject<HTMLDivElement>;\r\n    private colorInput: React.RefObject<HTMLInputElement>;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.colorPicker = React.createRef();\r\n        this.colorInput = React.createRef();\r\n\r\n        this.state = {\r\n            focused: false,\r\n            isOpened: false,\r\n            value: props.value,\r\n        };\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (!state.focused && props.value !== state.value) {\r\n            return {\r\n                value: props.value,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {isOpened: prevIsOpened} = prevState;\r\n        const {isOpened} = this.state;\r\n\r\n        if (isOpened !== prevIsOpened) {\r\n            if (isOpened) {\r\n                document.addEventListener('click', this.checkClick, {capture: true});\r\n            } else {\r\n                document.removeEventListener('click', this.checkClick);\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkClick = (e: MouseEvent): void => {\r\n        if (!this.colorPicker.current || !this.colorPicker.current.contains(e.target as Element)) {\r\n            this.setState({isOpened: false});\r\n        }\r\n    };\r\n\r\n    private togglePicker = () => {\r\n        if (!this.state.isOpened && this.colorInput.current) {\r\n            this.colorInput.current.focus();\r\n        }\r\n        this.setState({isOpened: !this.state.isOpened});\r\n    };\r\n\r\n    public handleColorChange = (newColorData: ColorResult) => {\r\n        this.setState({focused: false});\r\n        this.props.onChange(newColorData.hex);\r\n    };\r\n\r\n    private onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n        }\r\n\r\n        this.setState({value});\r\n    };\r\n\r\n    private onFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\r\n        this.setState({\r\n            focused: true,\r\n        });\r\n\r\n        if (event.target) {\r\n            event.target.setSelectionRange(1, event.target.value.length);\r\n        }\r\n    };\r\n\r\n    private onBlur = () => {\r\n        const value = this.state.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n\r\n            this.setState({\r\n                value: normalizedColor,\r\n            });\r\n        } else {\r\n            this.setState({\r\n                value: this.props.value,\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            focused: false,\r\n        });\r\n    };\r\n\r\n    private onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        // open picker on enter or space\r\n        if (event.key === 'Enter' || event.key === ' ') {\r\n            this.togglePicker();\r\n        }\r\n    };\r\n\r\n    public render() {\r\n        const {id} = this.props;\r\n        const {isOpened, value} = this.state;\r\n\r\n        return (\r\n            <div className='color-input input-group'>\r\n                <input\r\n                    id={`${id}-inputColorValue`}\r\n                    ref={this.colorInput}\r\n                    className='form-control'\r\n                    type='text'\r\n                    value={value}\r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                    onFocus={this.onFocus}\r\n                    onKeyDown={this.onKeyDown}\r\n                    maxLength={7}\r\n                    disabled={this.props.isDisabled}\r\n                    data-testid='color-inputColorValue'\r\n\r\n                />\r\n                {!this.props.isDisabled &&\r\n                    <span\r\n                        id={`${id}-squareColorIcon`}\r\n                        className='input-group-addon color-pad'\r\n                        onClick={this.togglePicker}\r\n                    >\r\n                        <i\r\n                            id={`${id}-squareColorIconValue`}\r\n                            className='color-icon'\r\n                            style={{\r\n                                backgroundColor: value,\r\n                            }}\r\n                        />\r\n                    </span>\r\n                }\r\n                {isOpened && (\r\n                    <div\r\n                        ref={this.colorPicker}\r\n                        className='color-popover'\r\n                        id={`${id}-ChromePickerModal`}\r\n                    >\r\n                        <ChromePicker\r\n                            color={value}\r\n                            onChange={this.handleColorChange}\r\n                            disableAlpha={true}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\nexport type Tab = {\r\n    icon: string | {url: string};\r\n    iconTitle: string;\r\n    name: string;\r\n    uiName: string;\r\n    newGroup?: boolean;\r\n    display?: boolean; // Controls whether the tab is displayed, defaults to true\r\n}\r\n\r\nexport type Props = {\r\n    activeTab?: string;\r\n    tabs: Tab[];\r\n    pluginTabs?: Tab[];\r\n    updateTab: (name: string) => void;\r\n    isMobileView: boolean;\r\n};\r\n\r\nexport default class SettingsSidebar extends React.PureComponent<Props> {\r\n    buttonRefs: Map<string, HTMLButtonElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.buttonRefs = new Map();\r\n    }\r\n\r\n    // Get all visible tabs in the correct order\r\n    private getVisibleTabs(): Tab[] {\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n        const visiblePluginTabs = this.props.pluginTabs?.filter((tab) => tab.display !== false) || [];\r\n        return [...visibleTabs, ...visiblePluginTabs];\r\n    }\r\n\r\n    public handleClick = (tab: Tab, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        this.props.updateTab(tab.name);\r\n        (e.target as Element).closest('.settings-modal')?.classList.add('display--content');\r\n    };\r\n\r\n    public handleKeyDown = (tab: Tab, e: React.KeyboardEvent) => {\r\n        // Only handle UP and DOWN arrow keys\r\n        if (!isKeyPressed(e, Constants.KeyCodes.UP) && !isKeyPressed(e, Constants.KeyCodes.DOWN)) {\r\n            return;\r\n        }\r\n\r\n        // Prevent scrolling\r\n        e.preventDefault();\r\n\r\n        // Get all visible tabs\r\n        const visibleTabs = this.getVisibleTabs();\r\n\r\n        // If no tabs are visible, do nothing\r\n        if (visibleTabs.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Find the current tab's position in the visible tabs\r\n        const currentIndex = visibleTabs.findIndex((t) => t.name === tab.name);\r\n\r\n        // If tab not found in visible tabs, do nothing\r\n        if (currentIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        let nextIndex: number;\r\n\r\n        // Determine which tab to focus based on the key pressed\r\n        if (isKeyPressed(e, Constants.KeyCodes.UP)) {\r\n            // UP arrow key - move to previous tab or wrap to last\r\n            nextIndex = currentIndex > 0 ? currentIndex - 1 : visibleTabs.length - 1;\r\n        } else {\r\n            // DOWN arrow key - move to next tab or wrap to first\r\n            nextIndex = currentIndex < visibleTabs.length - 1 ? currentIndex + 1 : 0;\r\n        }\r\n\r\n        // Get the target tab\r\n        const targetTab = visibleTabs[nextIndex];\r\n\r\n        // Update the active tab\r\n        this.props.updateTab(targetTab.name);\r\n\r\n        // Focus the target tab button directly\r\n        const targetButton = this.buttonRefs.get(targetTab.name);\r\n        if (targetButton) {\r\n            // Use direct focus instead of a11yFocus to ensure Cypress tests can detect the focus change\r\n            targetButton.focus();\r\n        }\r\n    };\r\n\r\n    private renderTab(tab: Tab) {\r\n        const key = `${tab.name}_li`;\r\n        const isActive = this.props.activeTab === tab.name;\r\n\r\n        let icon;\r\n        if (typeof tab.icon === 'string') {\r\n            icon = (\r\n                <i\r\n                    className={tab.icon}\r\n                    title={tab.iconTitle}\r\n                />\r\n            );\r\n        } else {\r\n            icon = (\r\n                <img\r\n                    src={tab.icon.url}\r\n                    alt={tab.iconTitle}\r\n                    className='icon'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <React.Fragment key={key}>\r\n                {tab.newGroup && <hr/>}\r\n                <button\r\n                    data-testid={`${tab.name}-tab-button`}\r\n                    ref={(element: HTMLButtonElement) => {\r\n                        if (element) {\r\n                            this.buttonRefs.set(tab.name, element);\r\n                        } else {\r\n                            this.buttonRefs.delete(tab.name);\r\n                        }\r\n                    }}\r\n                    id={`${tab.name}Button`}\r\n                    className={classNames('cursor--pointer style--none nav-pills__tab', {active: isActive})}\r\n                    onClick={this.handleClick.bind(null, tab)}\r\n                    onKeyDown={this.handleKeyDown.bind(null, tab)}\r\n                    aria-label={tab.uiName.toLowerCase()}\r\n                    role='tab'\r\n                    aria-selected={isActive}\r\n                    tabIndex={!isActive && !this.props.isMobileView ? -1 : 0}\r\n                    aria-controls={`${tab.name}Settings`}\r\n                >\r\n                    {icon}\r\n                    {tab.uiName}\r\n                </button>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    public render() {\r\n        // Filter regular tabs and plugin tabs separately for rendering\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n\r\n        // Map regular tabs\r\n        const tabList = visibleTabs.map((tab) => this.renderTab(tab));\r\n\r\n        let pluginTabList: React.ReactNode;\r\n        if (this.props.pluginTabs?.length) {\r\n            const visiblePluginTabs = this.props.pluginTabs.filter((tab) => tab.display !== false);\r\n            if (visiblePluginTabs.length) {\r\n                pluginTabList = (\r\n                    <>\r\n                        <hr/>\r\n                        <div\r\n                            role='group'\r\n                            aria-labelledby='userSettingsModal.pluginPreferences.header'\r\n                        >\r\n                            <div\r\n                                key={'plugin preferences heading'}\r\n                                role='heading'\r\n                                className={'header'}\r\n                                aria-level={3}\r\n                                id='userSettingsModal_pluginPreferences_header'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id={'userSettingsModal.pluginPreferences.header'}\r\n                                    defaultMessage={'PLUGIN PREFERENCES'}\r\n                                />\r\n                            </div>\r\n                            {visiblePluginTabs.map((tab) => this.renderTab(tab))}\r\n                        </div>\r\n                    </>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='tabList'\r\n                className='nav nav-pills nav-stacked'\r\n                role='tablist'\r\n                aria-orientation='vertical'\r\n            >\r\n                <div role='group'>\r\n                    {tabList}\r\n                </div>\r\n                {pluginTabList}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport SettingsSidebar from './settings_sidebar';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SettingsSidebar);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {ReactNode, RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {AdvancedSections} from 'utils/constants';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    joinLeave: string;\r\n    onUpdateSection: (section?: string) => void;\r\n    renderOnOffLabel: (label: string) => ReactNode;\r\n    actions: {\r\n        savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    joinLeaveState: string;\r\n    isSaving?: boolean;\r\n    serverError?: string;\r\n}\r\n\r\nexport default class JoinLeaveSection extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            joinLeaveState: props.joinLeave,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    public handleOnChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        const value = e.currentTarget.value;\r\n\r\n        this.setState({joinLeaveState: value});\r\n        a11yFocus(e.currentTarget);\r\n    };\r\n\r\n    public handleUpdateSection = (section?: string): void => {\r\n        if (!section) {\r\n            this.setState({joinLeaveState: this.props.joinLeave});\r\n        }\r\n\r\n        this.props.onUpdateSection(section);\r\n    };\r\n\r\n    public handleSubmit = (): void => {\r\n        const {actions, userId, onUpdateSection} = this.props;\r\n        const joinLeavePreference = {category: Preferences.CATEGORY_ADVANCED_SETTINGS, user_id: userId, name: Preferences.ADVANCED_FILTER_JOIN_LEAVE, value: this.state.joinLeaveState};\r\n        actions.savePreferences(userId, [joinLeavePreference]);\r\n\r\n        onUpdateSection();\r\n    };\r\n\r\n    public render(): React.ReactNode {\r\n        const {joinLeaveState} = this.state;\r\n        if (this.props.active) {\r\n            return (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.joinLeaveTitle'\r\n                            defaultMessage='Enable Join/Leave Messages'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='joinLeaveSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.joinLeaveTitle'\r\n                                    defaultMessage='Enable Join/Leave Messages'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='joinLeaveOn'\r\n                                        type='radio'\r\n                                        value={'true'}\r\n                                        name={AdvancedSections.JOIN_LEAVE}\r\n                                        checked={joinLeaveState === 'true'}\r\n                                        onChange={this.handleOnChange}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='joinLeaveOff'\r\n                                        type='radio'\r\n                                        value={'false'}\r\n                                        name={AdvancedSections.JOIN_LEAVE}\r\n                                        checked={joinLeaveState === 'false'}\r\n                                        onChange={this.handleOnChange}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.joinLeaveDesc'\r\n                                    defaultMessage='When \"On\", System Messages saying a user has joined or left a channel will be visible. When \"Off\", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    setting={AdvancedSections.JOIN_LEAVE}\r\n                    submit={this.handleSubmit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMin\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.joinLeaveTitle'\r\n                        defaultMessage='Enable Join/Leave Messages'\r\n                    />\r\n                }\r\n                describe={this.props.renderOnOffLabel(joinLeaveState!)}\r\n                section={AdvancedSections.JOIN_LEAVE}\r\n                updateSection={this.handleUpdateSection}\r\n                ref={this.minRef}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {get} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './join_leave_section';\r\nimport JoinLeaveSection from './join_leave_section';\r\n\r\nexport function mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const config = getConfig(state);\r\n    const enableJoinLeaveMessage = config.EnableJoinLeaveMessageByDefault === 'true';\r\n    const userPreference = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        joinLeave: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, Preferences.ADVANCED_FILTER_JOIN_LEAVE, enableJoinLeaveMessage.toString(), userPreference),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinLeaveSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState, useRef, useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {AdvancedSections} from 'utils/constants';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n}\r\n\r\ntype Props = PropsFromRedux & OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    onUpdateSection: (section?: string) => void;\r\n};\r\n\r\nexport default function PerformanceDebuggingSection(props: Props) {\r\n    const minRef = useRef<SettingItemMinComponent>(null);\r\n    const prevActiveRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (prevActiveRef.current && !props.active && props.areAllSectionsInactive) {\r\n            minRef.current?.focus();\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        prevActiveRef.current = props.active;\r\n    }, [props.active]);\r\n\r\n    if (!props.performanceDebuggingEnabled) {\r\n        return null;\r\n    }\r\n\r\n    let settings;\r\n    if (props.active) {\r\n        settings = <PerformanceDebuggingSectionExpanded {...props}/>;\r\n    } else {\r\n        settings = (\r\n            <PerformanceDebuggingSectionCollapsed\r\n                {...props}\r\n                ref={minRef}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {settings}\r\n            <div className='divider-light'/>\r\n        </>\r\n    );\r\n}\r\n\r\nconst PerformanceDebuggingSectionCollapsed = React.forwardRef<SettingItemMinComponent, Props>((props, ref) => {\r\n    let settingsEnabled = 0;\r\n\r\n    if (props.disableClientPlugins) {\r\n        settingsEnabled += 1;\r\n    }\r\n    if (props.disableTypingMessages) {\r\n        settingsEnabled += 1;\r\n    }\r\n\r\n    let description;\r\n    if (settingsEnabled === 0) {\r\n        description = (\r\n            <FormattedMessage\r\n                id='user.settings.advance.performance.noneEnabled'\r\n                defaultMessage='No settings enabled'\r\n            />\r\n        );\r\n    } else {\r\n        description = (\r\n            <FormattedMessage\r\n                id='user.settings.advance.performance.settingsEnabled'\r\n                defaultMessage='{count, number} {count, plural, one {setting} other {settings}} enabled'\r\n                values={{count: settingsEnabled}}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.advance.performance.title'\r\n                    defaultMessage='Performance Debugging'\r\n                />\r\n            }\r\n            describe={description}\r\n            section={AdvancedSections.PERFORMANCE_DEBUGGING}\r\n            updateSection={props.onUpdateSection}\r\n            ref={ref}\r\n        />\r\n    );\r\n});\r\n\r\nfunction PerformanceDebuggingSectionExpanded(props: Props) {\r\n    const [disableClientPlugins, setDisableClientPlugins] = useState(props.disableClientPlugins);\r\n    const [disableTypingMessages, setDisableTypingMessages] = useState(props.disableTypingMessages);\r\n\r\n    const handleSubmit = useCallback(() => {\r\n        if (!props.userId) {\r\n            return;\r\n        }\r\n\r\n        const preferences = [];\r\n\r\n        if (disableClientPlugins !== props.disableClientPlugins) {\r\n            preferences.push({\r\n                user_id: props.userId,\r\n                category: Preferences.CATEGORY_PERFORMANCE_DEBUGGING,\r\n                name: Preferences.NAME_DISABLE_CLIENT_PLUGINS,\r\n                value: disableClientPlugins.toString(),\r\n            });\r\n        }\r\n        if (disableTypingMessages !== props.disableTypingMessages) {\r\n            preferences.push({\r\n                user_id: props.userId,\r\n                category: Preferences.CATEGORY_PERFORMANCE_DEBUGGING,\r\n                name: Preferences.NAME_DISABLE_TYPING_MESSAGES,\r\n                value: disableTypingMessages.toString(),\r\n            });\r\n        }\r\n\r\n        if (preferences.length !== 0 && props.userId) {\r\n            props.savePreferences(props.userId, preferences);\r\n        }\r\n\r\n        props.onUpdateSection('');\r\n    }, [\r\n        props.userId,\r\n        props.onUpdateSection,\r\n        props.savePreferences,\r\n        disableClientPlugins,\r\n        disableTypingMessages,\r\n    ]);\r\n\r\n    return (\r\n        <SettingItemMax\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.advance.performance.title'\r\n                    defaultMessage='Performance Debugging'\r\n                />\r\n            }\r\n            inputs={[\r\n                <fieldset key='settings'>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={disableClientPlugins}\r\n                                onChange={(e) => {\r\n                                    setDisableClientPlugins(e.target.checked);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.performance.disableClientPlugins'\r\n                                defaultMessage='Disable Client-side Plugins'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={disableTypingMessages}\r\n                                onChange={(e) => {\r\n                                    setDisableTypingMessages(e.target.checked);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.performance.disableTypingMessages'\r\n                                defaultMessage='Disable \"User is typing...\" messages'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='mt-5'>\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.performance.info1'\r\n                            defaultMessage=\"You may enable these settings temporarily to help isolate performance issues while debugging. We don't recommend leaving these settings enabled for an extended period of time as they can negatively impact your user experience.\"\r\n                        />\r\n                        <br/>\r\n                        <br/>\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.performance.info2'\r\n                            defaultMessage='You may need to refresh the page before these settings take effect.'\r\n                        />\r\n                    </div>\r\n                </fieldset>,\r\n            ]}\r\n            submit={handleSubmit}\r\n            updateSection={props.onUpdateSection}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {isPerformanceDebuggingEnabled} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool, getUserPreferences} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './performance_debugging_section';\r\nimport PerformanceDebuggingSection from './performance_debugging_section';\r\n\r\nfunction mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const userPreferences = props.adminMode && props.userId ? getUserPreferences(state, props.userId) : undefined;\r\n\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        disableClientPlugins: getBool(state, Preferences.CATEGORY_PERFORMANCE_DEBUGGING, Preferences.NAME_DISABLE_CLIENT_PLUGINS, undefined, userPreferences),\r\n        disableTypingMessages: getBool(state, Preferences.CATEGORY_PERFORMANCE_DEBUGGING, Preferences.NAME_DISABLE_TYPING_MESSAGES, undefined, userPreferences),\r\n        performanceDebuggingEnabled: isPerformanceDebuggingEnabled(state),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(PerformanceDebuggingSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage, defineMessages} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {emitUserLoggedOutEvent} from 'actions/global_actions';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport Constants, {AdvancedSections, Preferences} from 'utils/constants';\r\nimport {isMac} from 'utils/user_agent';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nimport JoinLeaveSection from './join_leave_section';\r\nimport PerformanceDebuggingSection from './performance_debugging_section';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\ntype Settings = {\r\n    [key: string]: string | undefined;\r\n    send_on_ctrl_enter: Props['sendOnCtrlEnter'];\r\n    code_block_ctrl_enter: Props['codeBlockOnCtrlEnter'];\r\n    formatting: Props['formatting'];\r\n    join_leave: Props['joinLeave'];\r\n    sync_drafts: Props['syncDrafts'];\r\n};\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    user: UserProfile;\r\n    userPreferences?: PreferencesType;\r\n    updateSection: (section?: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n}\r\n\r\nexport type Props = OwnProps & PropsFromRedux;\r\n\r\ntype State = {\r\n    settings: Settings;\r\n    isSaving: boolean;\r\n    showDeactivateAccountModal: boolean;\r\n    serverError: string;\r\n}\r\n\r\nexport default class AdvancedSettingsDisplay extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = this.getStateFromProps();\r\n    }\r\n\r\n    getStateFromProps = (): State => {\r\n        const settings: Settings = {\r\n            send_on_ctrl_enter: this.props.sendOnCtrlEnter,\r\n            code_block_ctrl_enter: this.props.codeBlockOnCtrlEnter,\r\n            formatting: this.props.formatting,\r\n            join_leave: this.props.joinLeave,\r\n            sync_drafts: this.props.syncDrafts,\r\n            [Preferences.UNREAD_SCROLL_POSITION]: this.props.unreadScrollPosition,\r\n        };\r\n\r\n        const isSaving = false;\r\n\r\n        const showDeactivateAccountModal = false;\r\n\r\n        return {\r\n            settings,\r\n            isSaving,\r\n            showDeactivateAccountModal,\r\n            serverError: '',\r\n        };\r\n    };\r\n\r\n    updateSetting = (setting: string, value: string, e?: React.ChangeEvent): void => {\r\n        const settings = this.state.settings;\r\n        settings[setting] = value;\r\n\r\n        this.setState((prevState) => ({...prevState, ...settings}));\r\n        a11yFocus(e?.currentTarget as HTMLElement);\r\n    };\r\n\r\n    handleSubmit = async (settings: string[]): Promise<void> => {\r\n        if (!this.props.user) {\r\n            return;\r\n        }\r\n\r\n        const preferences: PreferenceType[] = [];\r\n        const {actions, user} = this.props;\r\n        const userId = user.id;\r\n\r\n        // this should be refactored so we can actually be certain about what type everything is\r\n        (Array.isArray(settings) ? settings : [settings]).forEach((setting) => {\r\n            preferences.push({\r\n                user_id: userId,\r\n                category: Constants.Preferences.CATEGORY_ADVANCED_SETTINGS,\r\n                name: setting,\r\n                value: this.state.settings[setting]!,\r\n            });\r\n        });\r\n\r\n        this.setState({isSaving: true});\r\n        await actions.savePreferences(userId, preferences);\r\n\r\n        this.handleUpdateSection('');\r\n    };\r\n\r\n    handleDeactivateAccountSubmit = async (): Promise<void> => {\r\n        const userId = this.props.user.id;\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        this.props.actions.updateUserActive(userId, false).\r\n            then(({error}) => {\r\n                if (error) {\r\n                    this.setState({serverError: error.message});\r\n                }\r\n            });\r\n\r\n        const {data, error} = await this.props.actions.revokeAllSessionsForUser(userId);\r\n        if (data) {\r\n            emitUserLoggedOutEvent();\r\n        } else if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    handleShowDeactivateAccountModal = (): void => {\r\n        this.setState({\r\n            showDeactivateAccountModal: true,\r\n        });\r\n    };\r\n\r\n    handleHideDeactivateAccountModal = (): void => {\r\n        this.setState({\r\n            showDeactivateAccountModal: false,\r\n        });\r\n    };\r\n\r\n    handleUpdateSection = (section?: string): void => {\r\n        if (!section) {\r\n            this.setState(this.getStateFromProps());\r\n        }\r\n        this.setState({isSaving: false});\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    // This function changes ctrl to cmd when OS is mac\r\n    getCtrlSendText = () => {\r\n        const description = defineMessages({\r\n            default: {\r\n                id: 'user.settings.advance.sendDesc',\r\n                defaultMessage: 'When enabled, CTRL + ENTER will send the message and ENTER inserts a new line.',\r\n            },\r\n            mac: {\r\n                id: 'user.settings.advance.sendDesc.mac',\r\n                defaultMessage: 'When enabled,  + ENTER will send the message and ENTER inserts a new line.',\r\n            },\r\n        });\r\n        const title = defineMessages({\r\n            default: {\r\n                id: 'user.settings.advance.sendTitle',\r\n                defaultMessage: 'Send Messages on CTRL+ENTER',\r\n            },\r\n            mac: {\r\n                id: 'user.settings.advance.sendTitle.mac',\r\n                defaultMessage: 'Send Messages on +ENTER',\r\n            },\r\n        });\r\n        if (isMac()) {\r\n            return {\r\n                ctrlSendTitle: title.mac,\r\n                ctrlSendDesc: description.mac,\r\n            };\r\n        }\r\n        return {\r\n            ctrlSendTitle: title.default,\r\n            ctrlSendDesc: description.default,\r\n        };\r\n    };\r\n\r\n    renderOnOffLabel(enabled: string): JSX.Element {\r\n        if (enabled === 'false') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.off'\r\n                    defaultMessage='Off'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.on'\r\n                defaultMessage='On'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderUnreadScrollPositionLabel(option?: string): JSX.Element {\r\n        if (option === Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.startFromLeftOff'\r\n                    defaultMessage='Start me where I left off'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.startFromNewest'\r\n                defaultMessage='Start me at the newest message'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderCtrlEnterLabel(): JSX.Element {\r\n        const ctrlEnter = this.state.settings.send_on_ctrl_enter;\r\n        const codeBlockCtrlEnter = this.state.settings.code_block_ctrl_enter;\r\n        if (ctrlEnter === 'false' && codeBlockCtrlEnter === 'false') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.off'\r\n                    defaultMessage='Off'\r\n                />\r\n            );\r\n        } else if (ctrlEnter === 'true' && codeBlockCtrlEnter === 'true') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.onForAllMessages'\r\n                    defaultMessage='On for all messages'\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.onForCode'\r\n                defaultMessage='On only for code blocks starting with ```'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderFormattingSection = () => {\r\n        const active = this.props.activeSection === 'formatting';\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.formattingTitle'\r\n                            defaultMessage='Enable Post Formatting'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='formattingSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.formattingTitle'\r\n                                    defaultMessage='Enable Post Formatting'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='postFormattingOn'\r\n                                        type='radio'\r\n                                        name='formatting'\r\n                                        checked={this.state.settings.formatting !== 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'formatting', 'true')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='postFormattingOff'\r\n                                        type='radio'\r\n                                        name='formatting'\r\n                                        checked={this.state.settings.formatting === 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'formatting', 'false')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.formattingDesc'\r\n                                    defaultMessage='If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    submit={this.handleSubmit.bind(this, ['formatting'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.formattingTitle'\r\n                        defaultMessage='Enable Post Formatting'\r\n                    />\r\n                }\r\n                describe={this.renderOnOffLabel(this.state.settings.formatting)}\r\n                section={'formatting'}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderUnreadScrollPositionSection = () => {\r\n        const active = this.props.activeSection === Preferences.UNREAD_SCROLL_POSITION;\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.unreadScrollPositionTitle'\r\n                            defaultMessage='Scroll position when viewing an unread channel'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='unreadScrollPositionSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.unreadScrollPositionTitle'\r\n                                    defaultMessage='Scroll position when viewing an unread channel'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='unreadPositionStartFromLeftOff'\r\n                                        type='radio'\r\n                                        name='unreadScrollPosition'\r\n                                        checked={this.state.settings.unread_scroll_position === Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT}\r\n                                        onChange={this.updateSetting.bind(this, Preferences.UNREAD_SCROLL_POSITION, Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT)}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.startFromLeftOff'\r\n                                        defaultMessage='Start me where I left off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='unreadPositionStartFromNewest'\r\n                                        type='radio'\r\n                                        name='unreadScrollPosition'\r\n                                        checked={this.state.settings.unread_scroll_position === Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST}\r\n                                        onChange={this.updateSetting.bind(this, Preferences.UNREAD_SCROLL_POSITION, Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST)}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.startFromNewest'\r\n                                        defaultMessage='Start me at the newest message'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.unreadScrollPositionDesc'\r\n                                    defaultMessage='Choose your scroll position when you view an unread channel. Channels will always be marked as read when viewed.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    submit={this.handleSubmit.bind(this, [Preferences.UNREAD_SCROLL_POSITION])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.unreadScrollPositionTitle'\r\n                        defaultMessage='Scroll position when viewing an unread channel'\r\n                    />\r\n                }\r\n                describe={this.renderUnreadScrollPositionLabel(this.state.settings[Preferences.UNREAD_SCROLL_POSITION])}\r\n                section={Preferences.UNREAD_SCROLL_POSITION}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderSyncDraftsSection = () => {\r\n        const active = this.props.activeSection === AdvancedSections.SYNC_DRAFTS;\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.syncDrafts.Title'\r\n                            defaultMessage='Allow message drafts to sync with the server'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='syncDraftsSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.syncDrafts.Title'\r\n                                    defaultMessage='Allow message drafts to sync with the server'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='syncDraftsOn'\r\n                                        type='radio'\r\n                                        name='syncDrafts'\r\n                                        checked={this.state.settings.sync_drafts !== 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'sync_drafts', 'true')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='syncDraftsOff'\r\n                                        type='radio'\r\n                                        name='syncDrafts'\r\n                                        checked={this.state.settings.sync_drafts === 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'sync_drafts', 'false')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.syncDrafts.Desc'\r\n                                    defaultMessage='When enabled, message drafts are synced with the server so they can be accessed from any device. When disabled, message drafts are only saved locally on the device where they are composed.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    setting={AdvancedSections.SYNC_DRAFTS}\r\n                    submit={this.handleSubmit.bind(this, ['sync_drafts'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.syncDrafts.Title'\r\n                        defaultMessage='Allow message drafts to sync with the server'\r\n                    />\r\n                }\r\n                describe={this.renderOnOffLabel(this.state.settings.sync_drafts)}\r\n                section={AdvancedSections.SYNC_DRAFTS}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderCtrlSendSection = () => {\r\n        const active = this.props.activeSection === 'advancedCtrlSend';\r\n        const serverError = this.state.serverError || null;\r\n        const {ctrlSendTitle, ctrlSendDesc} = this.getCtrlSendText();\r\n        let max = null;\r\n        if (active) {\r\n            const ctrlSendActive = [\r\n                this.state.settings.send_on_ctrl_enter === 'true',\r\n                this.state.settings.send_on_ctrl_enter === 'false' && this.state.settings.code_block_ctrl_enter === 'true',\r\n                this.state.settings.send_on_ctrl_enter === 'false' && this.state.settings.code_block_ctrl_enter === 'false',\r\n            ];\r\n\r\n            const inputs = [\r\n                <fieldset key='ctrlSendSetting'>\r\n                    <legend className='form-legend hidden-label'>\r\n                        <FormattedMessage {...ctrlSendTitle}/>\r\n                    </legend>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOn'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[0]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'true');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'true');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.onForAllMessages'\r\n                                defaultMessage='On for all messages'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOnForCode'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[1]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'false');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'true');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.onForCode'\r\n                                defaultMessage='On only for code blocks starting with ```'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOff'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[2]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'false');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'false');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.off'\r\n                                defaultMessage='Off'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div>\r\n                        <br/>\r\n                        <FormattedMessage {...ctrlSendDesc}/>\r\n                    </div>\r\n                </fieldset>,\r\n            ];\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage {...ctrlSendTitle}/>\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={this.handleSubmit.bind(this, ['send_on_ctrl_enter', 'code_block_ctrl_enter'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage {...ctrlSendTitle}/>\r\n                }\r\n                describe={this.renderCtrlEnterLabel()}\r\n                section={'advancedCtrlSend'}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const ctrlSendSection = this.renderCtrlSendSection();\r\n\r\n        const formattingSection = this.renderFormattingSection();\r\n        let formattingSectionDivider = null;\r\n        if (formattingSection) {\r\n            formattingSectionDivider = <div className='divider-light'/>;\r\n        }\r\n\r\n        let deactivateAccountSection: ReactNode = '';\r\n        let makeConfirmationModal: ReactNode = '';\r\n\r\n        if (this.props.user.auth_service === '' && this.props.enableUserDeactivation && !this.props.adminMode) {\r\n            const active = this.props.activeSection === 'deactivateAccount';\r\n            let max = null;\r\n            if (active) {\r\n                max = (\r\n                    <SettingItemMax\r\n                        title={\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.deactivateAccountTitle'\r\n                                defaultMessage='Deactivate Account'\r\n                            />\r\n                        }\r\n                        inputs={[\r\n                            <div key='formattingSetting'>\r\n                                <div>\r\n                                    <br/>\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.deactivateDesc'\r\n                                        defaultMessage='Deactivating your account removes your ability to log in to this server and disables all email and mobile notifications. To reactivate your account, contact your System Administrator.'\r\n                                    />\r\n                                </div>\r\n                            </div>,\r\n                        ]}\r\n                        saveButtonText={'Deactivate'}\r\n                        saveButtonClassName={'btn-danger'}\r\n                        setting={'deactivateAccount'}\r\n                        submit={this.handleShowDeactivateAccountModal}\r\n                        saving={this.state.isSaving}\r\n                        serverError={this.state.serverError}\r\n                        updateSection={this.handleUpdateSection}\r\n                    />\r\n                );\r\n            }\r\n            deactivateAccountSection = (\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.deactivateAccountTitle'\r\n                            defaultMessage='Deactivate Account'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.deactivateDescShort'\r\n                            defaultMessage=\"Click 'Edit' to deactivate your account\"\r\n                        />\r\n                    }\r\n                    section={'deactivateAccount'}\r\n                    updateSection={this.handleUpdateSection}\r\n                    max={max}\r\n                />\r\n            );\r\n\r\n            const confirmButtonClass = 'btn btn-danger';\r\n            const deactivateMemberButton = (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.deactivate_member_modal.deactivateButton'\r\n                    defaultMessage='Yes, deactivate my account'\r\n                />\r\n            );\r\n\r\n            makeConfirmationModal = (\r\n                <ConfirmModal\r\n                    show={this.state.showDeactivateAccountModal}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.confirmDeactivateAccountTitle'\r\n                            defaultMessage='Confirm Deactivation'\r\n                        />\r\n                    }\r\n                    message={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.confirmDeactivateDesc'\r\n                            defaultMessage='Are you sure you want to deactivate your account? This can only be reversed by your System Administrator.'\r\n                        />\r\n                    }\r\n                    confirmButtonClass={confirmButtonClass}\r\n                    confirmButtonText={deactivateMemberButton}\r\n                    onConfirm={this.handleDeactivateAccountSubmit}\r\n                    onCancel={this.handleHideDeactivateAccountModal}\r\n                />\r\n            );\r\n        }\r\n\r\n        const unreadScrollPositionSection = this.renderUnreadScrollPositionSection();\r\n        let unreadScrollPositionSectionDivider = null;\r\n        if (unreadScrollPositionSection) {\r\n            unreadScrollPositionSectionDivider = <div className='divider-light'/>;\r\n        }\r\n\r\n        let syncDraftsSection = null;\r\n        let syncDraftsSectionDivider = null;\r\n        if (this.props.syncedDraftsAreAllowed) {\r\n            syncDraftsSection = this.renderSyncDraftsSection();\r\n            if (syncDraftsSection) {\r\n                syncDraftsSectionDivider = <div className='divider-light'/>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='advancedSettings'\r\n                aria-labelledby='advancedButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.title'\r\n                            defaultMessage='Advanced Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.title'\r\n                                defaultMessage='Advanced Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {ctrlSendSection}\r\n                    {formattingSectionDivider}\r\n                    {formattingSection}\r\n                    <div className='divider-light'/>\r\n                    <JoinLeaveSection\r\n                        active={this.props.activeSection === AdvancedSections.JOIN_LEAVE}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        onUpdateSection={this.handleUpdateSection}\r\n                        renderOnOffLabel={this.renderOnOffLabel}\r\n                        adminMode={this.props.adminMode}\r\n                        userPreferences={this.props.userPreferences}\r\n                        userId={this.props.user.id}\r\n                    />\r\n                    <PerformanceDebuggingSection\r\n                        active={this.props.activeSection === AdvancedSections.PERFORMANCE_DEBUGGING}\r\n                        onUpdateSection={this.handleUpdateSection}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        adminMode={this.props.adminMode}\r\n                        userId={this.props.user.id}\r\n                    />\r\n                    {unreadScrollPositionSectionDivider}\r\n                    {unreadScrollPositionSection}\r\n                    {syncDraftsSectionDivider}\r\n                    {syncDraftsSection}\r\n                    {formattingSectionDivider}\r\n                    {deactivateAccountSection}\r\n                    <div className='divider-dark'/>\r\n                    {makeConfirmationModal}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {updateUserActive, revokeAllSessionsForUser} from 'mattermost-redux/actions/users';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    get,\r\n    getUnreadScrollPositionPreference,\r\n    makeGetCategory, makeGetUserCategory,\r\n    syncedDraftsAreAllowed,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AdvancedSettingsDisplay from './user_settings_advanced';\r\nimport type {OwnProps} from './user_settings_advanced';\r\n\r\nconst getAdvancedSettingsCategory = makeGetCategory('getAdvancedSettingsCategory', Preferences.CATEGORY_ADVANCED_SETTINGS);\r\n\r\nfunction makeMapStateToProps() {\r\n    const getUserAdvancedSettingsCategory = makeGetUserCategory('getAdvancedSettingsCategory', Preferences.CATEGORY_ADVANCED_SETTINGS);\r\n\r\n    return (state: GlobalState, props: OwnProps) => {\r\n        const config = getConfig(state);\r\n\r\n        const enableUserDeactivation = config.EnableUserDeactivation === 'true';\r\n        const enableJoinLeaveMessage = config.EnableJoinLeaveMessageByDefault === 'true';\r\n\r\n        const userPreferences = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n        const advancedSettingsCategory = userPreferences ? getUserAdvancedSettingsCategory(state, props.user.id) : getAdvancedSettingsCategory(state);\r\n\r\n        return {\r\n            advancedSettingsCategory,\r\n            sendOnCtrlEnter: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter', 'false', userPreferences),\r\n            codeBlockOnCtrlEnter: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'code_block_ctrl_enter', 'true', userPreferences),\r\n            formatting: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'formatting', 'true', userPreferences),\r\n            joinLeave: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'join_leave', enableJoinLeaveMessage.toString(), userPreferences),\r\n            syncDrafts: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'sync_drafts', 'true', userPreferences),\r\n            user: props.adminMode && props.user ? props.user : getCurrentUser(state),\r\n            unreadScrollPosition: getUnreadScrollPositionPreference(state, userPreferences),\r\n            enableUserDeactivation,\r\n            syncedDraftsAreAllowed: syncedDraftsAreAllowed(state),\r\n        };\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n            updateUserActive,\r\n            revokeAllSessionsForUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(makeMapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(AdvancedSettingsDisplay);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport ColorInput from 'components/color_input';\r\n\r\ntype Props = {\r\n    id: string;\r\n    label: React.ReactNode;\r\n    value: string;\r\n    onChange?: (id: string, newColor: string) => void;\r\n}\r\n\r\nexport default function ColorChooser(props: Props) {\r\n    const handleChange = (newColor: string) => {\r\n        props.onChange?.(props.id, newColor);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <label\r\n                className='custom-label'\r\n                htmlFor={`${props.id}-inputColorValue`}\r\n            >\r\n                {props.label}\r\n            </label>\r\n            <ColorInput\r\n                id={props.id}\r\n                value={props.value}\r\n                onChange={handleChange}\r\n            />\r\n        </>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {createRef} from 'react';\r\nimport type {ChangeEvent, ClipboardEvent, MouseEvent, RefObject} from 'react';\r\nimport {defineMessages, FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape, MessageDescriptor} from 'react-intl';\r\n\r\nimport type {Theme} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {setThemeDefaults} from 'mattermost-redux/utils/theme_utils';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport ColorChooser from '../color_chooser/color_chooser';\r\n\r\nconst COPY_SUCCESS_INTERVAL = 3000;\r\n\r\nconst messages: Record<string, MessageDescriptor> = defineMessages({\r\n    sidebarBg: {\r\n        id: 'user.settings.custom_theme.sidebarBg',\r\n        defaultMessage: 'Sidebar BG',\r\n    },\r\n    sidebarText: {\r\n        id: 'user.settings.custom_theme.sidebarText',\r\n        defaultMessage: 'Sidebar Text',\r\n    },\r\n    sidebarHeaderBg: {\r\n        id: 'user.settings.custom_theme.sidebarHeaderBg',\r\n        defaultMessage: 'Sidebar Header BG',\r\n    },\r\n    sidebarTeamBarBg: {\r\n        id: 'user.settings.custom_theme.sidebarTeamBarBg',\r\n        defaultMessage: 'Team Sidebar BG',\r\n    },\r\n    sidebarHeaderTextColor: {\r\n        id: 'user.settings.custom_theme.sidebarHeaderTextColor',\r\n        defaultMessage: 'Sidebar Header Text',\r\n    },\r\n    sidebarUnreadText: {\r\n        id: 'user.settings.custom_theme.sidebarUnreadText',\r\n        defaultMessage: 'Sidebar Unread Text',\r\n    },\r\n    sidebarTextHoverBg: {\r\n        id: 'user.settings.custom_theme.sidebarTextHoverBg',\r\n        defaultMessage: 'Sidebar Text Hover BG',\r\n    },\r\n    sidebarTextActiveBorder: {\r\n        id: 'user.settings.custom_theme.sidebarTextActiveBorder',\r\n        defaultMessage: 'Sidebar Text Active Border',\r\n    },\r\n    sidebarTextActiveColor: {\r\n        id: 'user.settings.custom_theme.sidebarTextActiveColor',\r\n        defaultMessage: 'Sidebar Text Active Color',\r\n    },\r\n    onlineIndicator: {\r\n        id: 'user.settings.custom_theme.onlineIndicator',\r\n        defaultMessage: 'Online Indicator',\r\n    },\r\n    awayIndicator: {\r\n        id: 'user.settings.custom_theme.awayIndicator',\r\n        defaultMessage: 'Away Indicator',\r\n    },\r\n    dndIndicator: {\r\n        id: 'user.settings.custom_theme.dndIndicator',\r\n        defaultMessage: 'Do Not Disturb Indicator',\r\n    },\r\n    mentionBg: {\r\n        id: 'user.settings.custom_theme.mentionBg',\r\n        defaultMessage: 'Mention Jewel BG',\r\n    },\r\n    mentionColor: {\r\n        id: 'user.settings.custom_theme.mentionColor',\r\n        defaultMessage: 'Mention Jewel Text',\r\n    },\r\n    centerChannelBg: {\r\n        id: 'user.settings.custom_theme.centerChannelBg',\r\n        defaultMessage: 'Center Channel BG',\r\n    },\r\n    centerChannelColor: {\r\n        id: 'user.settings.custom_theme.centerChannelColor',\r\n        defaultMessage: 'Center Channel Text',\r\n    },\r\n    newMessageSeparator: {\r\n        id: 'user.settings.custom_theme.newMessageSeparator',\r\n        defaultMessage: 'New Message Separator',\r\n    },\r\n    linkColor: {\r\n        id: 'user.settings.custom_theme.linkColor',\r\n        defaultMessage: 'Link Color',\r\n    },\r\n    buttonBg: {\r\n        id: 'user.settings.custom_theme.buttonBg',\r\n        defaultMessage: 'Button BG',\r\n    },\r\n    buttonColor: {\r\n        id: 'user.settings.custom_theme.buttonColor',\r\n        defaultMessage: 'Button Text',\r\n    },\r\n    errorTextColor: {\r\n        id: 'user.settings.custom_theme.errorTextColor',\r\n        defaultMessage: 'Error Text Color',\r\n    },\r\n    mentionHighlightBg: {\r\n        id: 'user.settings.custom_theme.mentionHighlightBg',\r\n        defaultMessage: 'Mention Highlight BG',\r\n    },\r\n    mentionHighlightLink: {\r\n        id: 'user.settings.custom_theme.mentionHighlightLink',\r\n        defaultMessage: 'Mention Highlight Link',\r\n    },\r\n    codeTheme: {\r\n        id: 'user.settings.custom_theme.codeTheme',\r\n        defaultMessage: 'Code Theme',\r\n    },\r\n});\r\n\r\ntype Props = {\r\n    theme: Theme;\r\n    updateTheme: (theme: Theme) => void;\r\n    intl: IntlShape;\r\n};\r\n\r\ntype State = {\r\n    copyTheme: string;\r\n};\r\n\r\nexport class CustomThemeChooser extends React.PureComponent<Props, State> {\r\n    textareaRef: RefObject<HTMLTextAreaElement>;\r\n    sidebarStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    centerChannelStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    linkAndButtonStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    sidebarStylesRef: RefObject<HTMLDivElement>;\r\n    centerChannelStylesRef: RefObject<HTMLDivElement>;\r\n    linkAndButtonStylesRef: RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.textareaRef = createRef();\r\n        this.sidebarStylesHeaderRef = createRef();\r\n        this.centerChannelStylesHeaderRef = createRef();\r\n        this.linkAndButtonStylesHeaderRef = createRef();\r\n        this.sidebarStylesRef = createRef();\r\n        this.centerChannelStylesRef = createRef();\r\n        this.linkAndButtonStylesRef = createRef();\r\n\r\n        const copyTheme = this.setCopyTheme(this.props.theme);\r\n\r\n        this.state = {\r\n            copyTheme,\r\n        };\r\n    }\r\n    handleColorChange = (settingId: string, color: string) => {\r\n        const {updateTheme, theme} = this.props;\r\n        if (theme[settingId] !== color) {\r\n            const newTheme: Theme = {\r\n                ...theme,\r\n                type: 'custom',\r\n                [settingId]: color,\r\n            };\r\n\r\n            // For backwards compatibility\r\n            if (settingId === 'mentionBg') {\r\n                newTheme.mentionBj = color;\r\n            }\r\n\r\n            updateTheme(newTheme);\r\n\r\n            const copyTheme = this.setCopyTheme(newTheme);\r\n\r\n            this.setState({\r\n                copyTheme,\r\n            });\r\n        }\r\n    };\r\n\r\n    setCopyTheme(theme: Theme) {\r\n        const copyTheme = Object.assign({}, theme);\r\n        delete copyTheme.type;\r\n        delete copyTheme.image;\r\n\r\n        return JSON.stringify(copyTheme);\r\n    }\r\n\r\n    pasteBoxChange = (e: ClipboardEvent<HTMLTextAreaElement>) => {\r\n        let text = '';\r\n\r\n        if ((window as any).clipboardData && (window as any).clipboardData.getData) { // IE\r\n            text = (window as any).clipboardData.getData('Text');\r\n        } else {\r\n            text = e.clipboardData.getData('Text');//e.clipboardData.getData('text/plain');\r\n        }\r\n\r\n        if (text.length === 0) {\r\n            return;\r\n        }\r\n\r\n        let theme;\r\n        try {\r\n            theme = JSON.parse(text);\r\n        } catch (err) {\r\n            return;\r\n        }\r\n\r\n        theme = setThemeDefaults(theme);\r\n\r\n        this.setState({\r\n            copyTheme: JSON.stringify(theme),\r\n        });\r\n\r\n        theme.type = 'custom';\r\n        this.props.updateTheme(theme);\r\n    };\r\n\r\n    onChangeHandle = (e: ChangeEvent<HTMLTextAreaElement>) => e.stopPropagation();\r\n\r\n    selectTheme = () => {\r\n        this.textareaRef.current?.focus();\r\n        this.textareaRef.current?.setSelectionRange(0, this.state.copyTheme.length);\r\n    };\r\n\r\n    toggleSidebarStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.sidebarStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.sidebarStylesHeaderRef.current?.classList.contains('open');\r\n        this.sidebarStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.sidebarStylesRef.current);\r\n    };\r\n\r\n    toggleCenterChannelStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.centerChannelStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.centerChannelStylesHeaderRef.current?.classList.contains('open');\r\n        this.centerChannelStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.centerChannelStylesRef.current);\r\n    };\r\n\r\n    toggleLinkAndButtonStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.linkAndButtonStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.linkAndButtonStylesHeaderRef.current?.classList.contains('open');\r\n        this.linkAndButtonStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.linkAndButtonStylesRef.current);\r\n    };\r\n\r\n    toggleSection(node: HTMLElement | null) {\r\n        if (!node) {\r\n            return;\r\n        }\r\n        node.classList.toggle('open');\r\n\r\n        // set overflow after animation, so the colorchooser is fully shown\r\n        node.ontransitionend = () => {\r\n            if (node.classList.contains('open')) {\r\n                node.style.overflowY = 'inherit';\r\n            } else {\r\n                node.style.overflowY = 'hidden';\r\n            }\r\n        };\r\n    }\r\n\r\n    onCodeThemeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const theme: Theme = {\r\n            ...this.props.theme,\r\n            type: 'custom',\r\n            codeTheme: e.target.value,\r\n        };\r\n\r\n        this.props.updateTheme(theme);\r\n    };\r\n\r\n    copyTheme = () => {\r\n        this.selectTheme();\r\n        document.execCommand('copy');\r\n        this.showCopySuccess();\r\n    };\r\n\r\n    showCopySuccess = () => {\r\n        const copySuccess: HTMLElement | null = document.querySelector('.copy-theme-success');\r\n        if (copySuccess) {\r\n            copySuccess.style.display = 'inline-block';\r\n            setTimeout(() => {\r\n                copySuccess.style.display = 'none';\r\n            }, COPY_SUCCESS_INTERVAL);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {intl, theme} = this.props;\r\n        const sidebarElements: JSX.Element[] = [];\r\n        const centerChannelElements: JSX.Element[] = [];\r\n        const linkAndButtonElements: JSX.Element[] = [];\r\n        Constants.THEME_ELEMENTS.forEach((element, index) => {\r\n            if (element.id === 'codeTheme') {\r\n                const codeThemeOptions: JSX.Element[] = [];\r\n                let codeThemeURL = '';\r\n\r\n                element.themes?.forEach((codeTheme, codeThemeIndex) => {\r\n                    if (codeTheme.id === theme[element.id]) {\r\n                        codeThemeURL = codeTheme.iconURL;\r\n                    }\r\n                    codeThemeOptions.push(\r\n                        <option\r\n                            key={'code-theme-key' + codeThemeIndex}\r\n                            value={codeTheme.id}\r\n                        >\r\n                            {codeTheme.uiName}\r\n                        </option>,\r\n                    );\r\n                });\r\n\r\n                centerChannelElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <label\r\n                            className='custom-label'\r\n                            htmlFor='codeThemeSelect'\r\n                        >\r\n                            <FormattedMessage {...messages[element.id]}/>\r\n                        </label>\r\n                        <div\r\n                            className='input-group theme-group group--code dropdown'\r\n                            id={element.id}\r\n                        >\r\n                            <select\r\n                                id='codeThemeSelect'\r\n                                className='form-control'\r\n                                defaultValue={theme[element.id]}\r\n                                onChange={this.onCodeThemeChange}\r\n                            >\r\n                                {codeThemeOptions}\r\n                            </select>\r\n                            <WithTooltip\r\n                                title={\r\n                                    <div className='code-popover'>\r\n                                        <img\r\n                                            width='200'\r\n                                            alt={'code theme image'}\r\n                                            src={codeThemeURL}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            >\r\n                                <span className='input-group-addon'>\r\n                                    <img\r\n                                        alt={'code theme image'}\r\n                                        src={codeThemeURL}\r\n                                    />\r\n                                </span>\r\n                            </WithTooltip>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (element.group === 'centerChannelElements') {\r\n                centerChannelElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={theme[element.id] || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            } else if (element.group === 'sidebarElements') {\r\n                // Need to support old typo mentionBj element for mentionBg\r\n                let color = theme[element.id];\r\n                if (!color && element.id === 'mentionBg') {\r\n                    color = theme.mentionBj;\r\n                }\r\n\r\n                sidebarElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={color || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            } else {\r\n                linkAndButtonElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={theme[element.id] || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            }\r\n        });\r\n\r\n        const pasteBox = (\r\n            <div className='col-sm-12'>\r\n                <label\r\n                    className='custom-label'\r\n                    htmlFor='pasteBox'\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.custom_theme.copyPaste'\r\n                        defaultMessage='Copy to share or paste theme colors here:'\r\n                    />\r\n                </label>\r\n                <textarea\r\n                    ref={this.textareaRef}\r\n                    className='form-control'\r\n                    id='pasteBox'\r\n                    value={this.state.copyTheme}\r\n                    onCopy={this.showCopySuccess}\r\n                    onPaste={this.pasteBoxChange}\r\n                    onChange={this.onChangeHandle}\r\n                    onClick={this.selectTheme}\r\n                />\r\n                <div className='mt-3'>\r\n                    <button\r\n                        className='btn btn-tertiary'\r\n                        onClick={this.copyTheme}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.custom_theme.copyThemeColors'\r\n                            defaultMessage='Copy Theme Colors'\r\n                        />\r\n                    </button>\r\n                    <span\r\n                        className='alert alert-success copy-theme-success'\r\n                        role='alert'\r\n                        style={{display: 'none'}}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.custom_theme.copied'\r\n                            defaultMessage=' Copied'\r\n                        />\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div\r\n                id='customThemesSection'\r\n                className='appearance-section pt-2'\r\n                aria-labelledby='customThemes'\r\n            >\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.sidebarStylesHeaderRef}\r\n                            id='sidebarStylesAccordion'\r\n                            onClick={this.toggleSidebarStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='sidebarStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.sidebarTitle'\r\n                                defaultMessage='Sidebar Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        ref={this.sidebarStylesRef}\r\n                        id='sidebarStylesSection'\r\n                        aria-labelledby='sidebarStylesAccordion'\r\n                        className='theme-elements__body'\r\n                    >\r\n                        {sidebarElements}\r\n                    </div>\r\n                </div>\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.centerChannelStylesHeaderRef}\r\n                            id='centerChannelStylesAccordion'\r\n                            onClick={this.toggleCenterChannelStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='centerChannelStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.centerChannelTitle'\r\n                                defaultMessage='Center Channel Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        ref={this.centerChannelStylesRef}\r\n                        id='centerChannelStylesSection'\r\n                        className='theme-elements__body'\r\n                        aria-labelledby='centerChannelStylesAccordion'\r\n                    >\r\n                        {centerChannelElements}\r\n                    </div>\r\n                </div>\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.linkAndButtonStylesHeaderRef}\r\n                            id='linkAndButtonsStylesAccordion'\r\n                            onClick={this.toggleLinkAndButtonStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='linkAndButtonsStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.linkButtonTitle'\r\n                                defaultMessage='Link and Button Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        id='linkAndButtonsStylesSection'\r\n                        ref={this.linkAndButtonStylesRef}\r\n                        className='theme-elements__body'\r\n                        aria-labelledby='linkAndButtonsStylesAccordion'\r\n                    >\r\n                        {linkAndButtonElements}\r\n                    </div>\r\n                </div>\r\n                <div className='row mt-3'>\r\n                    {pasteBox}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(CustomThemeChooser);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable react/jsx-max-props-per-line */\r\n\r\nimport React from 'react';\r\n\r\ntype ThemeThumbnailProps = {\r\n    themeName?: string;\r\n    themeKey: string;\r\n    sidebarBg: string;\r\n    sidebarText: string;\r\n    sidebarUnreadText: string;\r\n    onlineIndicator: string;\r\n    awayIndicator: string;\r\n    dndIndicator: string;\r\n    centerChannelColor: string;\r\n    centerChannelBg: string;\r\n    newMessageSeparator: string;\r\n    buttonBg: string;\r\n}\r\n\r\nfunction ThemeThumbnail({\r\n    themeName,\r\n    themeKey,\r\n    sidebarBg = '#174AB5',\r\n    sidebarText = '#86A1D9',\r\n    sidebarUnreadText = 'white',\r\n    onlineIndicator = '#3DB887',\r\n    awayIndicator = '#FFBC1F',\r\n    dndIndicator = '#D24B4E',\r\n    centerChannelColor = '#E0E1E3',\r\n    centerChannelBg = 'white',\r\n    newMessageSeparator = '#1C58D9',\r\n    buttonBg = '#15B7B7',\r\n}: ThemeThumbnailProps): JSX.Element {\r\n    return (\r\n        <svg width='112' height='86' viewBox='0 0 112 86' fill='none' xmlns='http://www.w3.org/2000/svg' aria-labelledby={`${themeKey}-theme-icon`} role='img'>\r\n            <title id={`${themeKey}-theme-icon`}>{`${themeName} theme icon`}</title>\r\n            <rect style={{fill: centerChannelBg}} x='0' y='0' width='112' height='86'/>\r\n            <g>\r\n                <rect style={{fill: centerChannelBg}} x='50' y='-1' width='63' height='88'/>\r\n                <g>\r\n                    <rect style={{fill: centerChannelColor}} x='55' y='75' width='52' height='6' rx='3'/>\r\n                    <rect style={{fill: centerChannelBg}} x='56' y='76' width='50' height='4' rx='2'/>\r\n                </g>\r\n                <rect style={{fill: buttonBg}} x='71' y='65' width='22' height='5' rx='2.5'/>\r\n                <rect style={{fill: newMessageSeparator}} x='50' y='32' width='62' height='1'/>\r\n                <g style={{fill: centerChannelColor}}>\r\n                    <rect x='55' y='5' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='14' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='23' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='38' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='47' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='56' width='52' height='4' rx='2'/>\r\n                </g>\r\n            </g>\r\n            <g>\r\n                <rect style={{fill: sidebarBg}} x='-1' y='-1' width='51' height='88'/>\r\n                <g style={{fill: sidebarText}}>\r\n                    <circle cx='7' cy='61' r='2'/>\r\n                    <circle cx='7' cy='70' r='2'/>\r\n                    <circle cx='7' cy='43' r='2'/>\r\n                    <circle cx='7' cy='34' r='2'/>\r\n                    <circle cx='7' cy='16' r='2'/>\r\n                    <circle cx='7' cy='7' r='2'/>\r\n                    <rect x='11' y='5' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='14' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='32' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='41' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='50' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='59' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='68' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='77' width='28' height='4' rx='2'/>\r\n                </g>\r\n                <circle style={{fill: dndIndicator}} cx='7' cy='79' r='2'/>\r\n                <circle style={{fill: awayIndicator}} cx='7' cy='52' r='2'/>\r\n                <circle style={{fill: onlineIndicator}} cx='7' cy='25' r='2'/>\r\n                <g style={{fill: sidebarUnreadText}}>\r\n                    <circle cx='43' cy='25' r='2'/>\r\n                    <rect x='11' y='23' width='28' height='4' rx='2'/>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default ThemeThumbnail;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {Theme, ThemeKey} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {changeOpacity} from 'mattermost-redux/utils/theme_utils';\r\n\r\nimport {toTitleCase} from 'utils/utils';\r\n\r\nimport ThemeThumbnail from '../theme_thumbnail';\r\n\r\ntype Props = {\r\n    theme: Theme;\r\n    updateTheme: (theme: Theme) => void;\r\n    allowedThemes: string[];\r\n}\r\n\r\nconst PremadeThemeChooser = ({theme, updateTheme, allowedThemes = []}: Props) => {\r\n    const premadeThemes = [];\r\n    const hasAllowedThemes = allowedThemes.length > 1 || (allowedThemes[0] && allowedThemes[0].trim().length > 0);\r\n\r\n    for (const k in Preferences.THEMES) {\r\n        if (Object.hasOwn(Preferences.THEMES, k)) {\r\n            if (hasAllowedThemes && allowedThemes.indexOf(k) < 0) {\r\n                continue;\r\n            }\r\n\r\n            const premadeTheme: Theme = Object.assign({}, Preferences.THEMES[k as ThemeKey]);\r\n\r\n            let activeClass = '';\r\n            if (premadeTheme.type === theme.type) {\r\n                activeClass = 'active';\r\n            }\r\n\r\n            premadeThemes.push(\r\n                <div\r\n                    className='col-xs-6 col-sm-3 premade-themes'\r\n                    key={'premade-theme-key' + k}\r\n                >\r\n                    <button\r\n                        id={`premadeTheme${premadeTheme.type?.replace(' ', '')}`}\r\n                        className={`premadeThemeButton ${activeClass}`}\r\n                        onClick={() => updateTheme(premadeTheme)}\r\n                    >\r\n                        <label>\r\n                            <ThemeThumbnail\r\n                                themeKey={k}\r\n                                themeName={premadeTheme.type}\r\n                                sidebarBg={premadeTheme.sidebarBg}\r\n                                sidebarText={changeOpacity(premadeTheme.sidebarText, 0.48)}\r\n                                sidebarUnreadText={premadeTheme.sidebarUnreadText}\r\n                                onlineIndicator={premadeTheme.onlineIndicator}\r\n                                awayIndicator={premadeTheme.awayIndicator}\r\n                                dndIndicator={premadeTheme.dndIndicator}\r\n                                centerChannelColor={changeOpacity(premadeTheme.centerChannelColor, 0.16)}\r\n                                centerChannelBg={premadeTheme.centerChannelBg}\r\n                                newMessageSeparator={premadeTheme.newMessageSeparator}\r\n                                buttonBg={premadeTheme.buttonBg}\r\n                            />\r\n                            <div className='theme-label'>{toTitleCase(premadeTheme.type || '')}</div>\r\n                        </label>\r\n                    </button>\r\n                </div>,\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id='premadeThemesSection'\r\n            className='row appearance-section'\r\n            aria-labelledby='standardThemes'\r\n        >\r\n            <div className='clearfix'>\r\n                {premadeThemes}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PremadeThemeChooser;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport PremadeThemeChooser from './premade_theme_chooser';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config = getConfig(state);\r\n\r\n    const allowedThemes = (config.AllowedThemes && config.AllowedThemes.split(',')) || [];\r\n\r\n    return {\r\n        allowedThemes,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(PremadeThemeChooser);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {Theme} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {Constants} from 'utils/constants';\r\nimport {applyTheme} from 'utils/utils';\r\n\r\nimport type {ModalData} from 'types/actions';\r\n\r\nimport CustomThemeChooser from './custom_theme_chooser/custom_theme_chooser';\r\nimport PremadeThemeChooser from './premade_theme_chooser';\r\n\r\ntype Props = {\r\n    currentTeamId: string;\r\n    theme: Theme;\r\n    selected: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    updateSection: (section: string) => void;\r\n    setRequireConfirm?: (requireConfirm: boolean) => void;\r\n    allowCustomThemes: boolean;\r\n    showAllTeamsCheckbox: boolean;\r\n    applyToAllTeams: boolean;\r\n    actions: {\r\n        saveTheme: (teamId: string, theme: Theme) => void;\r\n        deleteTeamSpecificThemes: () => void;\r\n        openModal: <P>(modalData: ModalData<P>) => void;\r\n    };\r\n};\r\n\r\ntype State = {\r\n    isSaving: boolean;\r\n    type: string;\r\n    showAllTeamsCheckbox: boolean;\r\n    applyToAllTeams: boolean;\r\n    serverError: string;\r\n    theme: Theme;\r\n};\r\n\r\nexport default class ThemeSetting extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n    originalTheme: Theme;\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...this.getStateFromProps(props),\r\n            isSaving: false,\r\n            serverError: '',\r\n        };\r\n\r\n        this.originalTheme = Object.assign({}, this.state.theme);\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.selected && !this.props.selected) {\r\n            this.resetFields();\r\n        }\r\n        if (prevProps.selected && !this.props.selected && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.props.selected) {\r\n            applyTheme(this.props.theme);\r\n        }\r\n    }\r\n\r\n    getStateFromProps(props = this.props): State {\r\n        const theme = {...props.theme};\r\n        if (!theme.codeTheme) {\r\n            theme.codeTheme = Constants.DEFAULT_CODE_THEME;\r\n        }\r\n\r\n        return {\r\n            theme,\r\n            type: theme.type || 'premade',\r\n            showAllTeamsCheckbox: props.showAllTeamsCheckbox,\r\n            applyToAllTeams: props.applyToAllTeams,\r\n            serverError: '',\r\n            isSaving: false,\r\n        };\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    submitTheme = async (): Promise<void> => {\r\n        const teamId = this.state.applyToAllTeams ? '' : this.props.currentTeamId;\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.actions.saveTheme(teamId, this.state.theme);\r\n\r\n        if (this.state.applyToAllTeams) {\r\n            await this.props.actions.deleteTeamSpecificThemes();\r\n        }\r\n\r\n        this.props.setRequireConfirm?.(false);\r\n        this.originalTheme = Object.assign({}, this.state.theme);\r\n        this.props.updateSection('');\r\n        this.setState({isSaving: false});\r\n    };\r\n\r\n    updateTheme = (theme: Theme): void => {\r\n        let themeChanged = this.state.theme.length === theme.length;\r\n        if (!themeChanged) {\r\n            for (const field in theme) {\r\n                if (Object.hasOwn(theme, field)) {\r\n                    if (this.state.theme[field] !== theme[field]) {\r\n                        themeChanged = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.props.setRequireConfirm?.(themeChanged);\r\n\r\n        this.setState({theme});\r\n        applyTheme(theme);\r\n    };\r\n\r\n    updateType = (type: string): void => this.setState({type});\r\n\r\n    resetFields = (): void => {\r\n        const state = this.getStateFromProps();\r\n        state.serverError = '';\r\n        this.setState(state);\r\n\r\n        applyTheme(state.theme);\r\n\r\n        this.props.setRequireConfirm?.(false);\r\n    };\r\n\r\n    handleUpdateSection = (section: string): void => this.props.updateSection(section);\r\n\r\n    render() {\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = this.state.serverError;\r\n        }\r\n\r\n        const displayCustom = this.state.type === 'custom';\r\n\r\n        let custom;\r\n        let premade;\r\n        if (displayCustom && this.props.allowCustomThemes) {\r\n            custom = (\r\n                <div key='customThemeChooser'>\r\n                    <CustomThemeChooser\r\n                        theme={this.state.theme}\r\n                        updateTheme={this.updateTheme}\r\n                    />\r\n                </div>\r\n            );\r\n        } else {\r\n            premade = (\r\n                <div key='premadeThemeChooser'>\r\n                    <br/>\r\n                    <PremadeThemeChooser\r\n                        theme={this.state.theme}\r\n                        updateTheme={this.updateTheme}\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let themeUI;\r\n        if (this.props.selected) {\r\n            const inputs = [];\r\n\r\n            if (this.props.allowCustomThemes) {\r\n                inputs.push(\r\n                    <div\r\n                        key='premadeCustom'\r\n                        className='user-settings__radio-group-inline'\r\n                    >\r\n                        <div className='radio radio-inline'>\r\n                            <label>\r\n                                <input\r\n                                    id='standardThemes'\r\n                                    type='radio'\r\n                                    name='theme'\r\n                                    checked={!displayCustom}\r\n                                    onChange={this.updateType.bind(this, 'premade')}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.premadeThemes'\r\n                                    defaultMessage='Premade Themes'\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                        <div className='radio radio-inline'>\r\n                            <label>\r\n                                <input\r\n                                    id='customThemes'\r\n                                    type='radio'\r\n                                    name='theme'\r\n                                    checked={displayCustom}\r\n                                    onChange={this.updateType.bind(this, 'custom')}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.customTheme'\r\n                                    defaultMessage='Custom Theme'\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(premade, custom);\r\n\r\n                inputs.push(\r\n                    <div key='otherThemes'>\r\n                        <br/>\r\n                        <ExternalLink\r\n                            id='otherThemes'\r\n                            href='http://docs.mattermost.com/help/settings/theme-colors.html#custom-theme-examples'\r\n                            location='user_settings_theme'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.display.theme.otherThemes'\r\n                                defaultMessage='See other themes'\r\n                            />\r\n                        </ExternalLink>\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            let allTeamsCheckbox = null;\r\n            if (this.state.showAllTeamsCheckbox) {\r\n                allTeamsCheckbox = (\r\n                    <div className='checkbox user-settings__submit-checkbox'>\r\n                        <label>\r\n                            <input\r\n                                id='applyThemeToAllTeams'\r\n                                type='checkbox'\r\n                                checked={this.state.applyToAllTeams}\r\n                                onChange={(e) => this.setState({applyToAllTeams: e.target.checked})}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.display.theme.applyToAllTeams'\r\n                                defaultMessage='Apply new theme to all my teams'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            themeUI = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.title'\r\n                            defaultMessage='Theme'\r\n                        />\r\n                    }\r\n                    inputs={\r\n                        <fieldset>\r\n                            <legend className='hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.title'\r\n                                    defaultMessage='Theme'\r\n                                />\r\n                            </legend>\r\n                            <div>\r\n                                {inputs}\r\n                            </div>\r\n                        </fieldset>\r\n                    }\r\n                    submitExtra={allTeamsCheckbox}\r\n                    submit={this.submitTheme}\r\n                    disableEnterSubmit={true}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    isFullWidth={true}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        } else {\r\n            themeUI = (\r\n                <SettingItemMin\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.title'\r\n                            defaultMessage='Theme'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.describe'\r\n                            defaultMessage='Open to manage your theme'\r\n                        />\r\n                    }\r\n                    section={'theme'}\r\n                    updateSection={this.handleUpdateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return themeUI;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {saveTheme, deleteTeamSpecificThemes} from 'mattermost-redux/actions/preferences';\r\nimport {getTheme, getThemePreferences} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentTeamId, getMyTeamsCount} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport UserSettingsTheme from './user_settings_theme';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentTeamId: getCurrentTeamId(state),\r\n        theme: getTheme(state),\r\n        applyToAllTeams: getThemePreferences(state).length <= 1,\r\n        showAllTeamsCheckbox: getMyTeamsCount(state) > 1,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            saveTheme,\r\n            deleteTeamSpecificThemes,\r\n            openModal,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserSettingsTheme);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {StylesConfig, OnChangeValue, AriaOnFocus, AriaOnChange} from 'react-select';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport type {Language} from 'i18n/i18n';\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\ntype Actions = {\r\n    updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n    patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n};\r\n\r\ntype Props = {\r\n    intl: IntlShape;\r\n    user: UserProfile;\r\n    locale: string;\r\n    locales: Record<string, Language>;\r\n    updateSection: (section: string) => void;\r\n    actions: Actions;\r\n    adminMode?: boolean;\r\n};\r\n\r\ntype SelectedOption = {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ntype State = {\r\n    isSaving: boolean;\r\n    openMenu: boolean;\r\n    locale: string;\r\n    serverError?: string;\r\n    selectedOption: SelectedOption;\r\n};\r\n\r\nexport class ManageLanguage extends React.PureComponent<Props, State> {\r\n    reactSelectContainer: React.RefObject<HTMLDivElement>;\r\n    constructor(props: Props) {\r\n        super(props);\r\n        const userLocale = props.locale;\r\n        const selectedOption = {\r\n            value: props.locales[userLocale].value,\r\n            label: props.locales[userLocale].name,\r\n        };\r\n        this.reactSelectContainer = React.createRef();\r\n\r\n        this.state = {\r\n            locale: props.locale,\r\n            selectedOption,\r\n            isSaving: false,\r\n            openMenu: false,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const reactSelectContainer = this.reactSelectContainer.current;\r\n        if (reactSelectContainer) {\r\n            reactSelectContainer.addEventListener(\r\n                'keydown',\r\n                this.handleContainerKeyDown,\r\n            );\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.reactSelectContainer.current) {\r\n            this.reactSelectContainer.current.removeEventListener(\r\n                'keydown',\r\n                this.handleContainerKeyDown,\r\n            );\r\n        }\r\n    }\r\n\r\n    handleContainerKeyDown = (e: KeyboardEvent) => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (isKeyPressed(e, Constants.KeyCodes.ESCAPE) && this.state.openMenu) {\r\n            modalBody?.classList.remove('no-scroll');\r\n            this.setState({openMenu: false});\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (e: React.KeyboardEvent) => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (isKeyPressed(e, Constants.KeyCodes.ENTER)) {\r\n            modalBody?.classList.add('no-scroll');\r\n            this.setState({openMenu: true});\r\n        }\r\n    };\r\n\r\n    setLanguage = (selectedOption: OnChangeValue<SelectedOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            this.setState({\r\n                locale: selectedOption.value,\r\n                selectedOption,\r\n            });\r\n        }\r\n    };\r\n\r\n    changeLanguage = () => {\r\n        if (this.props.user.locale === this.state.locale) {\r\n            this.props.updateSection('');\r\n        } else {\r\n            this.submitUser({\r\n                ...this.props.user,\r\n                locale: this.state.locale,\r\n            });\r\n        }\r\n    };\r\n\r\n    submitUser = (user: UserProfile) => {\r\n        this.setState({isSaving: true});\r\n\r\n        const action = this.props.adminMode ? this.props.actions.patchUser : this.props.actions.updateMe;\r\n        action(user).then((res) => {\r\n            if ('data' in res) {\r\n                this.setState({isSaving: false});\r\n            } else if ('error' in res) {\r\n                let serverError;\r\n                const {error} = res;\r\n                if (error instanceof Error) {\r\n                    serverError = error.message;\r\n                } else {\r\n                    serverError = error;\r\n                }\r\n                this.setState({serverError, isSaving: false});\r\n            }\r\n        });\r\n    };\r\n\r\n    handleMenuClose = () => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (modalBody) {\r\n            modalBody.classList.remove('no-scroll');\r\n        }\r\n        this.setState({openMenu: false});\r\n    };\r\n\r\n    handleMenuOpen = () => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (modalBody) {\r\n            modalBody.classList.add('no-scroll');\r\n        }\r\n        this.setState({openMenu: true});\r\n    };\r\n\r\n    render() {\r\n        const {intl, locales} = this.props;\r\n\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = (\r\n                <label className='has-error'>{this.state.serverError}</label>\r\n            );\r\n        }\r\n\r\n        const options: SelectedOption[] = [];\r\n\r\n        const languages = Object.keys(locales).\r\n            map((l) => {\r\n                return {\r\n                    value: locales[l].value as string,\r\n                    name: locales[l].name,\r\n                    order: locales[l].order,\r\n                };\r\n            }).\r\n            sort((a, b) => a.order - b.order);\r\n\r\n        languages.forEach((lang) => {\r\n            options.push({value: lang.value, label: lang.name});\r\n        });\r\n\r\n        const reactStyles = {\r\n            menuPortal: (provided) => ({\r\n                ...provided,\r\n                zIndex: 9999,\r\n            }),\r\n        } satisfies StylesConfig<SelectedOption, boolean>;\r\n\r\n        const onFocusMessage: AriaOnFocus<SelectedOption> = ({focused}) => {\r\n            return `option ${focused.label} focused`;\r\n        };\r\n\r\n        const onChangeMessage: AriaOnChange<SelectedOption, boolean> = (option) => {\r\n            return `option ${option.label} selected`;\r\n        };\r\n\r\n        const interfaceLanguageLabelAria = intl.formatMessage({id: 'user.settings.languages.dropdown.arialabel', defaultMessage: 'Dropdown selector to change the interface language'});\r\n\r\n        const input = (\r\n            <div key='changeLanguage'>\r\n                <br/>\r\n                <label\r\n                    aria-label={interfaceLanguageLabelAria}\r\n                    className='control-label'\r\n                    id='changeInterfaceLanguageLabel'\r\n                    htmlFor='displayLanguage'\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.change'\r\n                        defaultMessage='Change interface language'\r\n                    />\r\n                </label>\r\n                <div\r\n                    ref={this.reactSelectContainer}\r\n                    className='pt-2'\r\n                >\r\n                    <ReactSelect\r\n                        className='react-select react-select-top'\r\n                        classNamePrefix='react-select'\r\n                        ariaLiveMessages={{\r\n                            onFocus: onFocusMessage,\r\n                            onChange: onChangeMessage,\r\n                        }}\r\n                        id='displayLanguage'\r\n                        menuIsOpen={this.state.openMenu}\r\n                        menuPortalTarget={document.body}\r\n                        styles={reactStyles}\r\n                        options={options}\r\n                        isClearable={false}\r\n                        onChange={this.setLanguage}\r\n                        onKeyDown={this.handleKeyDown}\r\n                        value={this.state.selectedOption}\r\n                        onMenuClose={this.handleMenuClose}\r\n                        onMenuOpen={this.handleMenuOpen}\r\n                        aria-labelledby='changeInterfaceLanguageLabel'\r\n                        aria-live='assertive'\r\n                    />\r\n                    {serverError}\r\n                </div>\r\n                <div>\r\n                    <br/>\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.promote1'\r\n                        defaultMessage='Select which language Mattermost displays in the user interface.'\r\n                    />\r\n                    <p/>\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.promote2'\r\n                        defaultMessage='Would you like to help with translations? Join the <link>Mattermost Translation Server</link> to contribute.'\r\n                        values={{\r\n                            link: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='http://translate.mattermost.com'\r\n                                    location='manage_languages'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.display.language'\r\n                        defaultMessage='Language'\r\n                    />\r\n                }\r\n                submit={this.changeLanguage}\r\n                saving={this.state.isSaving}\r\n                inputs={[input]}\r\n                updateSection={this.props.updateSection}\r\n                disableEnterSubmit={true}\r\n            />\r\n        );\r\n    }\r\n}\r\nexport default injectIntl(ManageLanguage);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\n\r\nimport {getLanguages} from 'i18n/i18n';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ManageLanguages from './manage_languages';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        locales: getLanguages(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageLanguages);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, StylesConfig} from 'react-select';\r\nimport type {Timezone} from 'timezones.json';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {getTimezoneLabel} from 'mattermost-redux/utils/timezone_utils';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport {getBrowserTimezone} from 'utils/timezone';\r\n\r\ntype Actions = {\r\n    updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n    patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n}\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    useAutomaticTimezone: boolean;\r\n    automaticTimezone: string;\r\n    manualTimezone: string;\r\n    timezones: Timezone[];\r\n    timezoneLabel: string;\r\n    actions: Actions;\r\n    adminMode?: boolean;\r\n}\r\ntype SelectedOption = {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ntype State = {\r\n    useAutomaticTimezone: boolean;\r\n    automaticTimezone: string;\r\n    manualTimezone: string;\r\n    isSaving: boolean;\r\n    serverError?: string;\r\n    openMenu: boolean;\r\n    selectedOption: SelectedOption;\r\n}\r\n\r\nexport default class ManageTimezones extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            useAutomaticTimezone: props.useAutomaticTimezone,\r\n            automaticTimezone: props.automaticTimezone,\r\n            manualTimezone: props.manualTimezone,\r\n            isSaving: false,\r\n            openMenu: false,\r\n            selectedOption: {label: props.timezoneLabel, value: props.useAutomaticTimezone ? props.automaticTimezone : props.manualTimezone},\r\n        };\r\n    }\r\n\r\n    onChange = (selectedOption: OnChangeValue<SelectedOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            this.setState({\r\n                manualTimezone: selectedOption.value,\r\n                selectedOption,\r\n            });\r\n        }\r\n    };\r\n\r\n    timezoneNotChanged = () => {\r\n        const {\r\n            useAutomaticTimezone,\r\n            automaticTimezone,\r\n            manualTimezone,\r\n        } = this.state;\r\n\r\n        const {\r\n            useAutomaticTimezone: oldUseAutomaticTimezone,\r\n            automaticTimezone: oldAutomaticTimezone,\r\n            manualTimezone: oldManualTimezone,\r\n        } = this.props;\r\n\r\n        return (\r\n            useAutomaticTimezone === oldUseAutomaticTimezone &&\r\n            automaticTimezone === oldAutomaticTimezone &&\r\n            manualTimezone === oldManualTimezone\r\n        );\r\n    };\r\n\r\n    changeTimezone = () => {\r\n        if (this.timezoneNotChanged()) {\r\n            this.props.updateSection('');\r\n            return;\r\n        }\r\n\r\n        this.submitUser();\r\n    };\r\n\r\n    submitUser = () => {\r\n        const {user} = this.props;\r\n        const {useAutomaticTimezone, automaticTimezone, manualTimezone} = this.state;\r\n\r\n        const timezone = {\r\n            useAutomaticTimezone: useAutomaticTimezone.toString(),\r\n            automaticTimezone,\r\n            manualTimezone,\r\n        };\r\n\r\n        const updatedUser = {\r\n            ...user,\r\n            timezone,\r\n        };\r\n\r\n        const action = this.props.adminMode ? this.props.actions.patchUser : this.props.actions.updateMe;\r\n        action(updatedUser).\r\n            then((res) => {\r\n                if ('data' in res) {\r\n                    this.props.updateSection('');\r\n                } else if ('error' in res) {\r\n                    const {error} = res;\r\n                    let serverError;\r\n                    if (error instanceof Error) {\r\n                        serverError = error.message;\r\n                    } else {\r\n                        serverError = error as string;\r\n                    }\r\n                    this.setState({serverError, isSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    handleAutomaticTimezone = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const useAutomaticTimezone = e.target.checked;\r\n        let automaticTimezone = '';\r\n        let timezoneLabel: string;\r\n        let selectedOptionValue: string;\r\n\r\n        if (useAutomaticTimezone) {\r\n            automaticTimezone = getBrowserTimezone();\r\n            timezoneLabel = getTimezoneLabel(this.props.timezones, automaticTimezone);\r\n            selectedOptionValue = automaticTimezone;\r\n        } else {\r\n            timezoneLabel = getTimezoneLabel(this.props.timezones, getBrowserTimezone());\r\n            selectedOptionValue = getBrowserTimezone();\r\n            this.setState({\r\n                manualTimezone: getBrowserTimezone(),\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            useAutomaticTimezone,\r\n            automaticTimezone,\r\n            selectedOption: {label: timezoneLabel, value: selectedOptionValue},\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {timezones} = this.props;\r\n        const {useAutomaticTimezone} = this.state;\r\n\r\n        let index = 0;\r\n        let previousTimezone: Timezone;\r\n\r\n        const timeOptions = this.props.timezones.map((timeObject) => {\r\n            if (timeObject.utc[index] === previousTimezone?.utc[index]) {\r\n                index++;\r\n            } else {\r\n                // It's safe to use the first item since consecutive timezones\r\n                // don't have the same 'utc' array.\r\n                index = index === 0 ? index : 0;\r\n            }\r\n\r\n            previousTimezone = timeObject;\r\n\r\n            // Some more context on why different 'utc' items are used can be found here.\r\n            // https://github.com/mattermost/mattermost/pull/29290#issuecomment-2478492626\r\n            return {\r\n                value: timeObject.utc[index],\r\n                label: timeObject.text,\r\n            };\r\n        });\r\n\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = <label className='has-error'>{this.state.serverError}</label>;\r\n        }\r\n\r\n        const inputs = [];\r\n\r\n        // These are passed to the 'key' prop and should all be unique.\r\n        const inputId = {\r\n            automaticTimezoneInput: 1,\r\n            manualTimezoneInput: 2,\r\n            message: 3,\r\n        };\r\n\r\n        const reactStyles = {\r\n\r\n            menuPortal: (provided) => ({\r\n                ...provided,\r\n                zIndex: 9999,\r\n            }),\r\n\r\n        } satisfies StylesConfig<SelectedOption, boolean>;\r\n\r\n        const noTimezonesFromServer = timezones.length === 0;\r\n        const automaticTimezoneInput = (\r\n            <div\r\n                className='checkbox'\r\n                key={inputId.automaticTimezoneInput}\r\n            >\r\n                <label>\r\n                    <input\r\n                        id='automaticTimezoneInput'\r\n                        type='checkbox'\r\n                        checked={useAutomaticTimezone}\r\n                        onChange={this.handleAutomaticTimezone}\r\n                        disabled={noTimezonesFromServer}\r\n                    />\r\n                    <FormattedMessage\r\n                        id='user.settings.timezones.automatic'\r\n                        defaultMessage='Automatic'\r\n                    />\r\n\r\n                </label>\r\n            </div>\r\n        );\r\n\r\n        const manualTimezoneInput = (\r\n            <div\r\n                className='pt-2'\r\n                key={inputId.manualTimezoneInput}\r\n            >\r\n                <ReactSelect\r\n                    className='react-select react-select-top'\r\n                    classNamePrefix='react-select'\r\n                    id='displayTimezone'\r\n                    menuPortalTarget={document.body}\r\n                    styles={reactStyles}\r\n                    options={timeOptions}\r\n                    isClearable={false}\r\n                    onChange={this.onChange}\r\n                    value={this.state.selectedOption}\r\n                    aria-labelledby='changeInterfaceTimezoneLabel'\r\n                    isDisabled={useAutomaticTimezone}\r\n                />\r\n                {serverError}\r\n            </div>\r\n        );\r\n\r\n        inputs.push(automaticTimezoneInput);\r\n\r\n        inputs.push(manualTimezoneInput);\r\n\r\n        inputs.push(\r\n            <div key={inputId.message}>\r\n                <br/>\r\n                <FormattedMessage\r\n                    id='user.settings.timezones.promote'\r\n                    defaultMessage='Select the time zone used for timestamps in the user interface and email notifications.'\r\n                />\r\n            </div>,\r\n        );\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.display.timezone'\r\n                        defaultMessage='Timezone'\r\n                    />\r\n                }\r\n                containerStyle='timezone-container'\r\n                submit={this.changeTimezone}\r\n                saving={this.state.isSaving}\r\n                inputs={inputs}\r\n                updateSection={this.props.updateSection}\r\n                disableEnterSubmit={true}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\nimport timezones from 'timezones.json';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getCurrentTimezoneLabel} from 'mattermost-redux/selectors/entities/timezone';\r\n\r\nimport ManageTimezones from './manage_timezones';\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const timezoneLabel = getCurrentTimezoneLabel(state);\r\n    return {\r\n        timezones,\r\n        timezoneLabel,\r\n    };\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTimezones);\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nexport type Actions = {\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n};\r\n\r\nexport type OwnProps = {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    adminMode?: boolean;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    renderEmoticonsAsEmoji: string;\r\n    actions: Actions;\r\n}\r\n\r\nconst RenderEmoticonsAsEmoji: React.FC<Props> = ({user, renderEmoticonsAsEmoji, updateSection, actions}) => {\r\n    const [value, setValue] = useState<string>(renderEmoticonsAsEmoji);\r\n    const [isSaving, setIsSaving] = useState<boolean>(false);\r\n\r\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setValue(e.currentTarget.value);\r\n    }, []);\r\n\r\n    const submitPreference = useCallback(() => {\r\n        setIsSaving(true);\r\n        const pref: PreferenceType = {\r\n            user_id: user.id,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.RENDER_EMOTICONS_AS_EMOJI,\r\n            value,\r\n        };\r\n        actions.savePreferences(user.id, [pref]);\r\n        setIsSaving(false);\r\n        updateSection('');\r\n    }, [user.id, updateSection, actions, value]);\r\n\r\n    const changePreference = useCallback(() => {\r\n        if (value === renderEmoticonsAsEmoji) {\r\n            updateSection('');\r\n            return;\r\n        }\r\n\r\n        submitPreference();\r\n    }, [renderEmoticonsAsEmoji, updateSection, value, submitPreference]);\r\n\r\n    const options = [\r\n        {\r\n            option: 'true',\r\n            inputId: 'renderEmoticonsAsEmojiOn',\r\n            messageId: 'user.settings.advance.on',\r\n            defaultMessage: 'On',\r\n        },\r\n        {\r\n            option: 'false',\r\n            inputId: 'renderEmoticonsAsEmojiOff',\r\n            messageId: 'user.settings.advance.off',\r\n            defaultMessage: 'Off',\r\n        },\r\n    ];\r\n\r\n    const input = (\r\n        <fieldset key='renderEmoticonsAsEmojiSetting'>\r\n            <legend className='form-legend hidden-label'>\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                    defaultMessage='Render emoticons as emojis'\r\n                />\r\n            </legend>\r\n            {options.map(({option, inputId, messageId, defaultMessage}) => {\r\n                return (\r\n                    <div\r\n                        className='radio'\r\n                        key={option}\r\n                    >\r\n                        <label>\r\n                            <input\r\n                                id={inputId}\r\n                                type='radio'\r\n                                name='renderEmoticonsAsEmoji'\r\n                                value={option}\r\n                                checked={value === option}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id={messageId}\r\n                                defaultMessage={defaultMessage}\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            })}\r\n            <div className='mt-5'>\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiDesc'\r\n                    defaultMessage='When enabled, text emoticons in messages will be rendered as emojis (For example :D as )'\r\n                />\r\n            </div>\r\n        </fieldset>\r\n    );\r\n\r\n    return (\r\n        <SettingItemMax\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                    defaultMessage='Render emoticons as emojis'\r\n                />\r\n            }\r\n            inputs={[input]}\r\n            submit={changePreference}\r\n            saving={isSaving}\r\n            updateSection={updateSection}\r\n            disableEnterSubmit={true}\r\n        />\r\n    );\r\n};\r\n\r\nexport default RenderEmoticonsAsEmoji;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\n\r\nimport RenderEmoticonsAsEmoji from './render_emoticons_as_emoji';\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(RenderEmoticonsAsEmoji);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport deepEqual from 'fast-deep-equal';\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {FormattedMessage, defineMessage} from 'react-intl';\r\nimport type {Timezone} from 'timezones.json';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile, UserTimezone} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport ThemeSetting from 'components/user_settings/display/user_settings_theme';\r\n\r\nimport {getLanguageInfo} from 'i18n/i18n';\r\nimport type {Language} from 'i18n/i18n';\r\nimport Constants from 'utils/constants';\r\nimport {getBrowserTimezone} from 'utils/timezone';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nimport ManageLanguages from './manage_languages';\r\nimport ManageTimezones from './manage_timezones';\r\nimport RenderEmoticonsAsEmoji from './render_emoticons_as_emoji';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst Preferences = Constants.Preferences;\r\n\r\nfunction getDisplayStateFromProps(props: Props) {\r\n    return {\r\n        militaryTime: props.militaryTime,\r\n        teammateNameDisplay: props.teammateNameDisplay,\r\n        availabilityStatusOnPosts: props.availabilityStatusOnPosts,\r\n        channelDisplayMode: props.channelDisplayMode,\r\n        messageDisplay: props.messageDisplay,\r\n        colorizeUsernames: props.colorizeUsernames,\r\n        collapseDisplay: props.collapseDisplay,\r\n        collapsedReplyThreads: props.collapsedReplyThreads,\r\n        linkPreviewDisplay: props.linkPreviewDisplay,\r\n        lastActiveDisplay: props.lastActiveDisplay.toString(),\r\n        oneClickReactionsOnPosts: props.oneClickReactionsOnPosts,\r\n        clickToReply: props.clickToReply,\r\n    };\r\n}\r\n\r\ntype ChildOption = {\r\n    label: MessageDescriptor;\r\n    value: string;\r\n    display: string;\r\n    more: MessageDescriptor;\r\n};\r\n\r\ntype Option = {\r\n    value: string;\r\n    radionButtonText: {\r\n        label: MessageDescriptor;\r\n        more?: MessageDescriptor;\r\n    };\r\n    childOption?: ChildOption;\r\n}\r\n\r\ntype SectionProps ={\r\n    section: string;\r\n    display: string;\r\n    defaultDisplay: string;\r\n    value: string;\r\n    title: MessageDescriptor;\r\n    firstOption: Option;\r\n    secondOption: Option;\r\n    thirdOption?: Option;\r\n    description: MessageDescriptor;\r\n    disabled?: boolean;\r\n    onSubmit?: () => void;\r\n}\r\n\r\nexport type OwnProps = {\r\n    user: UserProfile;\r\n    adminMode?: boolean;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    activeSection?: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm?: () => void;\r\n    timezones: Timezone[];\r\n    userTimezone: UserTimezone;\r\n    allowCustomThemes: boolean;\r\n    enableLinkPreviews: boolean;\r\n    locales: Record<string, Language>;\r\n    userLocale: string;\r\n    enableThemeSelection: boolean;\r\n    configTeammateNameDisplay: string;\r\n    shouldAutoUpdateTimezone: boolean | string;\r\n    lockTeammateNameDisplay: boolean;\r\n    militaryTime: string;\r\n    teammateNameDisplay: string;\r\n    availabilityStatusOnPosts: string;\r\n    channelDisplayMode: string;\r\n    messageDisplay: string;\r\n    colorizeUsernames: string;\r\n    collapseDisplay: string;\r\n    collapsedReplyThreads: string;\r\n    collapsedReplyThreadsAllowUserPreference: boolean;\r\n    clickToReply: string;\r\n    linkPreviewDisplay: string;\r\n    oneClickReactionsOnPosts: string;\r\n    emojiPickerEnabled: boolean;\r\n    timezoneLabel: string;\r\n    lastActiveDisplay: boolean;\r\n    lastActiveTimeEnabled: boolean;\r\n    renderEmoticonsAsEmoji: string;\r\n    actions: {\r\n        savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n        autoUpdateTimezone: (deviceTimezone: string) => void;\r\n        updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n        patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    [key: string]: any;\r\n    isSaving: boolean;\r\n    militaryTime: string;\r\n    teammateNameDisplay: string;\r\n    availabilityStatusOnPosts: string;\r\n    channelDisplayMode: string;\r\n    messageDisplay: string;\r\n    colorizeUsernames: string;\r\n    collapseDisplay: string;\r\n    collapsedReplyThreads: string;\r\n    linkPreviewDisplay: string;\r\n    lastActiveDisplay: string;\r\n    oneClickReactionsOnPosts: string;\r\n    clickToReply: string;\r\n    handleSubmit?: () => void;\r\n    serverError?: string;\r\n}\r\n\r\nexport default class UserSettingsDisplay extends React.PureComponent<Props, State> {\r\n    public prevSections: {\r\n        theme: string;\r\n\r\n        clock: string;\r\n        linkpreview: string;\r\n        message_display: string;\r\n        channel_display_mode: string;\r\n        languages: string;\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...getDisplayStateFromProps(props),\r\n            isSaving: false,\r\n        };\r\n\r\n        this.prevSections = {\r\n            theme: 'dummySectionName', // dummy value that should never match any section name\r\n            clock: 'theme',\r\n            linkpreview: 'clock',\r\n            message_display: 'linkpreview',\r\n            channel_display_mode: 'message_display',\r\n            languages: 'channel_display_mode',\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {actions, shouldAutoUpdateTimezone} = this.props;\r\n\r\n        if (shouldAutoUpdateTimezone) {\r\n            actions.autoUpdateTimezone(getBrowserTimezone());\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (this.props.teammateNameDisplay !== prevProps.teammateNameDisplay) {\r\n            this.updateState();\r\n        }\r\n    }\r\n\r\n    submitLastActive = () => {\r\n        const {user, actions} = this.props;\r\n        const {lastActiveDisplay} = this.state;\r\n\r\n        const updatedUser = {\r\n            ...user,\r\n            props: {\r\n                ...user.props,\r\n                show_last_active: lastActiveDisplay,\r\n            },\r\n        };\r\n\r\n        const action = this.props.adminMode ? actions.patchUser : actions.updateMe;\r\n        action(updatedUser).\r\n            then((res) => {\r\n                if ('data' in res) {\r\n                    this.props.updateSection('');\r\n                } else if ('error' in res) {\r\n                    const {error} = res;\r\n                    let serverError;\r\n                    if (error instanceof Error) {\r\n                        serverError = error.message;\r\n                    } else {\r\n                        serverError = error as string;\r\n                    }\r\n                    this.setState({serverError, isSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        const userId = this.props.user.id;\r\n\r\n        const timePreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.USE_MILITARY_TIME,\r\n            value: this.state.militaryTime,\r\n        };\r\n        const availabilityStatusOnPostsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.AVAILABILITY_STATUS_ON_POSTS,\r\n            value: this.state.availabilityStatusOnPosts,\r\n        };\r\n        const teammateNameDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.NAME_NAME_FORMAT,\r\n            value: this.state.teammateNameDisplay,\r\n        };\r\n        const channelDisplayModePreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.CHANNEL_DISPLAY_MODE,\r\n            value: this.state.channelDisplayMode,\r\n        };\r\n        const messageDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.MESSAGE_DISPLAY,\r\n            value: this.state.messageDisplay,\r\n        };\r\n        const colorizeUsernamesPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLORIZE_USERNAMES,\r\n            value: this.state.colorizeUsernames,\r\n        };\r\n        const collapseDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLLAPSE_DISPLAY,\r\n            value: this.state.collapseDisplay,\r\n        };\r\n        const collapsedReplyThreadsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLLAPSED_REPLY_THREADS,\r\n            value: this.state.collapsedReplyThreads,\r\n        };\r\n        const linkPreviewDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.LINK_PREVIEW_DISPLAY,\r\n            value: this.state.linkPreviewDisplay,\r\n        };\r\n        const oneClickReactionsOnPostsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.ONE_CLICK_REACTIONS_ENABLED,\r\n            value: this.state.oneClickReactionsOnPosts,\r\n        };\r\n        const clickToReplyPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.CLICK_TO_REPLY,\r\n            value: this.state.clickToReply,\r\n        };\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        const preferences = [\r\n            timePreference,\r\n            channelDisplayModePreference,\r\n            messageDisplayPreference,\r\n            collapsedReplyThreadsPreference,\r\n            clickToReplyPreference,\r\n            collapseDisplayPreference,\r\n            linkPreviewDisplayPreference,\r\n            teammateNameDisplayPreference,\r\n            availabilityStatusOnPostsPreference,\r\n            oneClickReactionsOnPostsPreference,\r\n            colorizeUsernamesPreference,\r\n        ];\r\n\r\n        await this.props.actions.savePreferences(userId, preferences);\r\n\r\n        this.updateSection('');\r\n    };\r\n\r\n    handleClockRadio = (militaryTime: string) => {\r\n        this.setState({militaryTime});\r\n    };\r\n\r\n    handleTeammateNameDisplayRadio = (teammateNameDisplay: string) => {\r\n        this.setState({teammateNameDisplay});\r\n    };\r\n\r\n    handleAvailabilityStatusRadio = (availabilityStatusOnPosts: string) => {\r\n        this.setState({availabilityStatusOnPosts});\r\n    };\r\n\r\n    handleChannelDisplayModeRadio(channelDisplayMode: string) {\r\n        this.setState({channelDisplayMode});\r\n    }\r\n\r\n    handlemessageDisplayRadio(messageDisplay: string) {\r\n        this.setState({messageDisplay});\r\n    }\r\n\r\n    handleCollapseRadio(collapseDisplay: string) {\r\n        this.setState({collapseDisplay});\r\n    }\r\n\r\n    handleCollapseReplyThreadsRadio(collapsedReplyThreads: string) {\r\n        this.setState({collapsedReplyThreads});\r\n    }\r\n\r\n    handleLastActiveRadio(lastActiveDisplay: string) {\r\n        this.setState({lastActiveDisplay});\r\n    }\r\n\r\n    handleLinkPreviewRadio(linkPreviewDisplay: string) {\r\n        this.setState({linkPreviewDisplay});\r\n    }\r\n\r\n    handleOneClickReactionsRadio = (oneClickReactionsOnPosts: string) => {\r\n        this.setState({oneClickReactionsOnPosts});\r\n    };\r\n\r\n    handleClickToReplyRadio = (clickToReply: string) => {\r\n        this.setState({clickToReply});\r\n    };\r\n\r\n    handleOnChange(e: React.ChangeEvent, display: {[key: string]: any}) {\r\n        this.setState({...display});\r\n        a11yFocus(e.currentTarget as HTMLElement);\r\n    }\r\n\r\n    updateSection = (section: string) => {\r\n        this.updateState();\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    updateState = () => {\r\n        const newState = getDisplayStateFromProps(this.props);\r\n        if (!deepEqual(newState, this.state)) {\r\n            this.setState(newState);\r\n        }\r\n\r\n        this.setState({isSaving: false});\r\n    };\r\n\r\n    createSection(props: SectionProps) {\r\n        const {\r\n            section,\r\n            display,\r\n            value,\r\n            title,\r\n            firstOption,\r\n            secondOption,\r\n            thirdOption,\r\n            description,\r\n            disabled,\r\n            onSubmit,\r\n        } = props;\r\n        let extraInfo = null;\r\n        let submit: (() => Promise<void>) | (() => void) | null = onSubmit || this.handleSubmit;\r\n\r\n        const firstMessage = (\r\n            <FormattedMessage\r\n                id={firstOption.radionButtonText.label.id}\r\n                defaultMessage={firstOption.radionButtonText.label.defaultMessage}\r\n            />\r\n        );\r\n\r\n        let moreColon;\r\n        let firstMessageMore;\r\n        if (firstOption.radionButtonText.more?.id) {\r\n            moreColon = ': ';\r\n            firstMessageMore = (\r\n                <span className='font-weight--normal'>\r\n                    <FormattedMessage\r\n                        id={firstOption.radionButtonText.more.id}\r\n                        defaultMessage={firstOption.radionButtonText.more.defaultMessage}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        const secondMessage = (\r\n            <FormattedMessage\r\n                id={secondOption.radionButtonText.label.id}\r\n                defaultMessage={secondOption.radionButtonText.label.defaultMessage}\r\n            />\r\n        );\r\n\r\n        let secondMessageMore;\r\n        if (secondOption.radionButtonText.more?.id) {\r\n            secondMessageMore = (\r\n                <span className='font-weight--normal'>\r\n                    <FormattedMessage\r\n                        id={secondOption.radionButtonText.more.id}\r\n                        defaultMessage={secondOption.radionButtonText.more.defaultMessage}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let thirdMessage;\r\n        if (thirdOption) {\r\n            thirdMessage = (\r\n                <FormattedMessage\r\n                    id={thirdOption.radionButtonText.label.id}\r\n                    defaultMessage={thirdOption.radionButtonText.label.defaultMessage}\r\n                />\r\n            );\r\n        }\r\n\r\n        const messageTitle = (\r\n            <FormattedMessage\r\n                id={title.id}\r\n                defaultMessage={title.defaultMessage}\r\n            />\r\n        );\r\n\r\n        const messageDesc = (\r\n            <FormattedMessage\r\n                id={description.id}\r\n                defaultMessage={description.defaultMessage}\r\n            />\r\n        );\r\n\r\n        const active = this.props.activeSection === section;\r\n        let max = null;\r\n        if (active) {\r\n            const format = [false, false, false];\r\n            let childOptionToShow: ChildOption | undefined;\r\n            if (value === firstOption.value) {\r\n                format[0] = true;\r\n                childOptionToShow = firstOption.childOption;\r\n            } else if (value === secondOption.value) {\r\n                format[1] = true;\r\n                childOptionToShow = secondOption.childOption;\r\n            } else {\r\n                format[2] = true;\r\n                if (thirdOption) {\r\n                    childOptionToShow = thirdOption.childOption;\r\n                }\r\n            }\r\n\r\n            const name = section + 'Format';\r\n            const key = section + 'UserDisplay';\r\n\r\n            const firstDisplay = {\r\n                [display]: firstOption.value,\r\n            };\r\n\r\n            const secondDisplay = {\r\n                [display]: secondOption.value,\r\n            };\r\n\r\n            let thirdSection;\r\n            if (thirdOption && thirdMessage) {\r\n                const thirdDisplay = {\r\n                    [display]: thirdOption.value,\r\n                };\r\n\r\n                thirdSection = (\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'C'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[2]}\r\n                                onChange={(e) => this.handleOnChange(e, thirdDisplay)}\r\n                            />\r\n                            {thirdMessage}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            let childOptionSection;\r\n            if (childOptionToShow) {\r\n                const childDisplay = childOptionToShow.display;\r\n                childOptionSection = (\r\n                    <div className='checkbox'>\r\n                        <hr/>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'childOption'}\r\n                                type='checkbox'\r\n                                name={childOptionToShow.label.id}\r\n                                checked={childOptionToShow.value === 'true'}\r\n                                onChange={(e) => {\r\n                                    this.handleOnChange(e, {[childDisplay]: e.target.checked ? 'true' : 'false'});\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id={childOptionToShow.label.id}\r\n                                defaultMessage={childOptionToShow.label.defaultMessage}\r\n                            />\r\n                            {moreColon}\r\n                            <span className='font-weight--normal'>\r\n                                <FormattedMessage\r\n                                    id={childOptionToShow.more.id}\r\n                                    defaultMessage={childOptionToShow.more.defaultMessage}\r\n                                />\r\n                            </span>\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            let inputs = [\r\n                <fieldset key={key}>\r\n                    <legend className='form-legend hidden-label'>\r\n                        {messageTitle}\r\n                    </legend>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'A'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[0]}\r\n                                onChange={(e) => this.handleOnChange(e, firstDisplay)}\r\n                            />\r\n                            {firstMessage}\r\n                            {moreColon}\r\n                            {firstMessageMore}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'B'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[1]}\r\n                                onChange={(e) => this.handleOnChange(e, secondDisplay)}\r\n                            />\r\n                            {secondMessage}\r\n                            {moreColon}\r\n                            {secondMessageMore}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    {thirdSection}\r\n                    <div>\r\n                        <br/>\r\n                        {messageDesc}\r\n                    </div>\r\n                    {childOptionSection}\r\n                </fieldset>,\r\n            ];\r\n\r\n            if (display === 'teammateNameDisplay' && disabled) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.display.teammateNameDisplay'\r\n                            defaultMessage='This field is handled through your System Administrator. If you want to change it, you need to do so through your System Administrator.'\r\n                        />\r\n                    </span>\r\n                );\r\n                submit = null;\r\n                inputs = [];\r\n            }\r\n            max = (\r\n                <SettingItemMax\r\n                    title={messageTitle}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    extraInfo={extraInfo}\r\n                    updateSection={this.updateSection}\r\n                />);\r\n        }\r\n\r\n        let describe;\r\n        if (value === firstOption.value) {\r\n            describe = firstMessage;\r\n        } else if (value === secondOption.value) {\r\n            describe = secondMessage;\r\n        } else {\r\n            describe = thirdMessage;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={messageTitle}\r\n                    describe={describe}\r\n                    section={section}\r\n                    updateSection={this.updateSection}\r\n                    max={max}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const collapseSection = this.createSection({\r\n            section: 'collapse',\r\n            display: 'collapseDisplay',\r\n            value: this.state.collapseDisplay,\r\n            defaultDisplay: 'false',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.collapseDisplay',\r\n                defaultMessage: 'Default Appearance of Image Previews',\r\n            }),\r\n            firstOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.collapseOn',\r\n                        defaultMessage: 'Expanded',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.collapseOff',\r\n                        defaultMessage: 'Collapsed',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.collapseDesc',\r\n                defaultMessage: 'Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.',\r\n            }),\r\n        });\r\n\r\n        let linkPreviewSection = null;\r\n\r\n        if (this.props.enableLinkPreviews) {\r\n            linkPreviewSection = this.createSection({\r\n                section: 'linkpreview',\r\n                display: 'linkPreviewDisplay',\r\n                value: this.state.linkPreviewDisplay,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.linkPreviewDisplay',\r\n                    defaultMessage: 'Website Link Previews',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.linkPreviewOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.linkPreviewOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.linkPreviewDesc',\r\n                    defaultMessage: 'When available, the first web link in a message will show a preview of the website content below the message.',\r\n                }),\r\n            });\r\n            this.prevSections.message_display = 'linkpreview';\r\n        } else {\r\n            this.prevSections.message_display = this.prevSections.linkpreview;\r\n        }\r\n\r\n        let lastActiveSection = null;\r\n\r\n        if (this.props.lastActiveTimeEnabled) {\r\n            lastActiveSection = this.createSection({\r\n                section: 'lastactive',\r\n                display: 'lastActiveDisplay',\r\n                value: this.state.lastActiveDisplay,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.lastActiveDisplay',\r\n                    defaultMessage: 'Share last active time',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.lastActiveOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.lastActiveOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.lastActiveDesc',\r\n                    defaultMessage: 'When enabled, other users will see when you were last active.',\r\n                }),\r\n                onSubmit: this.submitLastActive,\r\n            });\r\n        }\r\n\r\n        const clockSection = this.createSection({\r\n            section: 'clock',\r\n            display: 'militaryTime',\r\n            value: this.state.militaryTime,\r\n            defaultDisplay: 'false',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.clockDisplay',\r\n                defaultMessage: 'Clock Display',\r\n            }),\r\n            firstOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.normalClock',\r\n                        defaultMessage: '12-hour clock (example: 4:00 PM)',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.militaryClock',\r\n                        defaultMessage: '24-hour clock (example: 16:00)',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.preferTime',\r\n                defaultMessage: 'Select how you prefer time displayed.',\r\n            }),\r\n        });\r\n\r\n        const teammateNameDisplaySection = this.createSection({\r\n            section: Preferences.NAME_NAME_FORMAT,\r\n            display: 'teammateNameDisplay',\r\n            value: this.props.lockTeammateNameDisplay ? this.props.configTeammateNameDisplay : this.state.teammateNameDisplay,\r\n            defaultDisplay: this.props.configTeammateNameDisplay,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.teammateNameDisplayTitle',\r\n                defaultMessage: 'Teammate Name Display',\r\n            }),\r\n            firstOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayUsername',\r\n                        defaultMessage: 'Show username',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayNicknameFullname',\r\n                        defaultMessage: 'Show nickname if one exists, otherwise show first and last name',\r\n                    }),\r\n                },\r\n            },\r\n            thirdOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayFullname',\r\n                        defaultMessage: 'Show first and last name',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.teammateNameDisplayDescription',\r\n                defaultMessage: 'Set how to display other user\\'s names in posts and the Direct Messages list.',\r\n            }),\r\n            disabled: this.props.lockTeammateNameDisplay,\r\n        });\r\n\r\n        const availabilityStatusOnPostsSection = this.createSection({\r\n            section: 'availabilityStatus',\r\n            display: 'availabilityStatusOnPosts',\r\n            value: this.state.availabilityStatusOnPosts,\r\n            defaultDisplay: 'true',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.availabilityStatusOnPostsTitle',\r\n                defaultMessage: 'Show user availability on posts',\r\n            }),\r\n            firstOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.on',\r\n                        defaultMessage: 'On',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.off',\r\n                        defaultMessage: 'Off',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.availabilityStatusOnPostsDescription',\r\n                defaultMessage: 'When enabled, online availability is displayed on profile images in the message list.',\r\n            }),\r\n        });\r\n\r\n        let timezoneSelection;\r\n        if (!this.props.shouldAutoUpdateTimezone) {\r\n            const userTimezone = this.props.userTimezone;\r\n            const active = this.props.activeSection === 'timezone';\r\n            let max = null;\r\n            if (active) {\r\n                max = (\r\n                    <ManageTimezones\r\n                        user={this.props.user}\r\n                        useAutomaticTimezone={Boolean(userTimezone.useAutomaticTimezone)}\r\n                        automaticTimezone={userTimezone.automaticTimezone}\r\n                        manualTimezone={userTimezone.manualTimezone}\r\n                        updateSection={this.updateSection}\r\n                        adminMode={this.props.adminMode}\r\n                    />\r\n                );\r\n            }\r\n            timezoneSelection = (\r\n                <div>\r\n                    <SettingItem\r\n                        active={active}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        title={\r\n                            <FormattedMessage\r\n                                id='user.settings.display.timezone'\r\n                                defaultMessage='Timezone'\r\n                            />\r\n                        }\r\n                        describe={this.props.timezoneLabel}\r\n                        section={'timezone'}\r\n                        updateSection={this.updateSection}\r\n                        max={max}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const messageDisplaySection = this.createSection({\r\n            section: Preferences.MESSAGE_DISPLAY,\r\n            display: 'messageDisplay',\r\n            value: this.state.messageDisplay,\r\n            defaultDisplay: Preferences.MESSAGE_DISPLAY_CLEAN,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.messageDisplayTitle',\r\n                defaultMessage: 'Message Display',\r\n            }),\r\n            firstOption: {\r\n                value: Preferences.MESSAGE_DISPLAY_CLEAN,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayClean',\r\n                        defaultMessage: 'Standard',\r\n                    }),\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCleanDes',\r\n                        defaultMessage: 'Easy to scan and read.',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Preferences.MESSAGE_DISPLAY_COMPACT,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCompact',\r\n                        defaultMessage: 'Compact',\r\n                    }),\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCompactDes',\r\n                        defaultMessage: 'Fit as many messages on the screen as we can.',\r\n                    }),\r\n                },\r\n                childOption: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.colorize',\r\n                        defaultMessage: 'Colorize usernames',\r\n                    }),\r\n                    value: this.state.colorizeUsernames,\r\n                    display: 'colorizeUsernames',\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.colorizeDes',\r\n                        defaultMessage: 'Use colors to distinguish users in compact mode',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.messageDisplayDescription',\r\n                defaultMessage: 'Select how messages in a channel should be displayed.',\r\n            }),\r\n        });\r\n\r\n        let collapsedReplyThreads;\r\n\r\n        if (this.props.collapsedReplyThreadsAllowUserPreference) {\r\n            collapsedReplyThreads = this.createSection({\r\n                section: Preferences.COLLAPSED_REPLY_THREADS,\r\n                display: 'collapsedReplyThreads',\r\n                value: this.state.collapsedReplyThreads,\r\n                defaultDisplay: Preferences.COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT,\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.collapsedReplyThreadsTitle',\r\n                    defaultMessage: 'Threaded Discussions',\r\n                }),\r\n                firstOption: {\r\n                    value: Preferences.COLLAPSED_REPLY_THREADS_ON,\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.collapsedReplyThreadsOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: Preferences.COLLAPSED_REPLY_THREADS_OFF,\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.collapsedReplyThreadsOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.collapsedReplyThreadsDescription',\r\n                    defaultMessage: 'When enabled, reply messages are not shown in the channel and you\\'ll be notified about threads you\\'re following in the \"Threads\" view.',\r\n                }),\r\n            });\r\n        }\r\n\r\n        const clickToReply = this.createSection({\r\n            section: Preferences.CLICK_TO_REPLY,\r\n            display: 'clickToReply',\r\n            value: this.state.clickToReply,\r\n            defaultDisplay: 'true',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.clickToReply',\r\n                defaultMessage: 'Click to open threads',\r\n            }),\r\n            firstOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.on',\r\n                        defaultMessage: 'On',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.off',\r\n                        defaultMessage: 'Off',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.clickToReplyDescription',\r\n                defaultMessage: 'When enabled, click anywhere on a message to open the reply thread.',\r\n            }),\r\n        });\r\n\r\n        const channelDisplayModeSection = this.createSection({\r\n            section: Preferences.CHANNEL_DISPLAY_MODE,\r\n            display: 'channelDisplayMode',\r\n            value: this.state.channelDisplayMode,\r\n            defaultDisplay: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.channelDisplayTitle',\r\n                defaultMessage: 'Channel Display',\r\n            }),\r\n            firstOption: {\r\n                value: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.fullScreen',\r\n                        defaultMessage: 'Full width',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Preferences.CHANNEL_DISPLAY_MODE_CENTERED,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.fixedWidthCentered',\r\n                        defaultMessage: 'Fixed width, centered',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.channeldisplaymode',\r\n                defaultMessage: 'Select the width of the center channel.',\r\n            }),\r\n        });\r\n\r\n        let languagesSection;\r\n        const userLocale = this.props.userLocale;\r\n        const localeName = getLanguageInfo(userLocale).name;\r\n\r\n        languagesSection = (\r\n            <div>\r\n                <SettingItem\r\n                    active={this.props.activeSection === 'languages'}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.language'\r\n                            defaultMessage='Language'\r\n                        />\r\n                    }\r\n                    describe={localeName}\r\n                    section={'languages'}\r\n                    updateSection={this.updateSection}\r\n                    max={(\r\n                        <ManageLanguages\r\n                            user={this.props.user}\r\n                            locale={userLocale}\r\n                            updateSection={this.updateSection}\r\n                            adminMode={this.props.adminMode}\r\n                        />\r\n                    )}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n\r\n        if (Object.keys(this.props.locales).length === 1) {\r\n            languagesSection = null;\r\n        }\r\n\r\n        let themeSection;\r\n        if (this.props.enableThemeSelection && !this.props.adminMode) {\r\n            themeSection = (\r\n                <div>\r\n                    <ThemeSetting\r\n                        selected={this.props.activeSection === 'theme'}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        updateSection={this.updateSection}\r\n                        setRequireConfirm={this.props.setRequireConfirm}\r\n                        allowCustomThemes={this.props.allowCustomThemes}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let oneClickReactionsOnPostsSection;\r\n        if (this.props.emojiPickerEnabled) {\r\n            oneClickReactionsOnPostsSection = this.createSection({\r\n                section: Preferences.ONE_CLICK_REACTIONS_ENABLED,\r\n                display: 'oneClickReactionsOnPosts',\r\n                value: this.state.oneClickReactionsOnPosts,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.oneClickReactionsOnPostsTitle',\r\n                    defaultMessage: 'Quick reactions on messages',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.sidebar.on',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.sidebar.off',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.oneClickReactionsOnPostsDescription',\r\n                    defaultMessage: 'When enabled, you can react in one-click with recently used reactions when hovering over a message.',\r\n                }),\r\n            });\r\n        }\r\n\r\n        const renderEmoticonsAsEmojiSection = (\r\n            <div>\r\n                <SettingItem\r\n                    active={this.props.activeSection === 'renderEmoticonsAsEmoji'}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                            defaultMessage='Render emoticons as emojis'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        this.props.renderEmoticonsAsEmoji === 'true' ? (\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.on'\r\n                                defaultMessage='On'\r\n                            />\r\n                        ) : (\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.off'\r\n                                defaultMessage='Off'\r\n                            />\r\n                        )\r\n                    }\r\n                    section='renderEmoticonsAsEmoji'\r\n                    updateSection={this.updateSection}\r\n                    max={(\r\n                        <RenderEmoticonsAsEmoji\r\n                            renderEmoticonsAsEmoji={this.props.renderEmoticonsAsEmoji}\r\n                            user={this.props.user}\r\n                            updateSection={this.updateSection}\r\n                            adminMode={this.props.adminMode}\r\n                            userPreferences={this.props.userPreferences}\r\n                        />\r\n                    )}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div\r\n                id='displaySettings'\r\n                aria-labelledby='displayButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.title'\r\n                            defaultMessage='Display Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        id='displaySettingsTitle'\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.display.title'\r\n                                defaultMessage='Display Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {themeSection}\r\n                    {collapsedReplyThreads}\r\n                    {clockSection}\r\n                    {teammateNameDisplaySection}\r\n                    {availabilityStatusOnPostsSection}\r\n                    {lastActiveSection}\r\n                    {timezoneSelection}\r\n                    {linkPreviewSection}\r\n                    {collapseSection}\r\n                    {messageDisplaySection}\r\n                    {clickToReply}\r\n                    {channelDisplayModeSection}\r\n                    {oneClickReactionsOnPostsSection}\r\n                    {renderEmoticonsAsEmojiSection}\r\n                    {languagesSection}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\nimport timezones from 'timezones.json';\r\n\r\nimport {CollapsedThreads} from '@mattermost/types/config';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {autoUpdateTimezone} from 'mattermost-redux/actions/timezone';\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    get,\r\n    isCollapsedThreadsAllowed,\r\n    getCollapsedThreadsPreference,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {\r\n    generateCurrentTimezoneLabel,\r\n    getCurrentTimezoneFull,\r\n    getCurrentTimezoneLabel,\r\n    getTimezoneForUserProfile,\r\n} from 'mattermost-redux/selectors/entities/timezone';\r\nimport {getCurrentUserId, getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {getUserCurrentTimezone} from 'mattermost-redux/utils/timezone_utils';\r\n\r\nimport {getLanguages, isLanguageAvailable} from 'i18n/i18n';\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './user_settings_display';\r\nimport UserSettingsDisplay from './user_settings_display';\r\n\r\nexport function makeMapStateToProps() {\r\n    return (state: GlobalState, props: OwnProps) => {\r\n        const config = getConfig(state);\r\n        const currentUserId = getCurrentUserId(state);\r\n        const userTimezone = props.adminMode ? getTimezoneForUserProfile(props.user) : getCurrentTimezoneFull(state);\r\n        const automaticTimezoneNotSet = userTimezone && userTimezone.useAutomaticTimezone && !userTimezone.automaticTimezone;\r\n        const shouldAutoUpdateTimezone = !userTimezone || automaticTimezoneNotSet;\r\n        const timezoneLabel = props.adminMode ? generateCurrentTimezoneLabel(getUserCurrentTimezone(userTimezone)) : getCurrentTimezoneLabel(state);\r\n        const allowCustomThemes = config.AllowCustomThemes === 'true';\r\n        const enableLinkPreviews = config.EnableLinkPreviews === 'true';\r\n        const enableThemeSelection = config.EnableThemeSelection === 'true';\r\n        const lockTeammateNameDisplay = getLicense(state).LockTeammateNameDisplay === 'true' && config.LockTeammateNameDisplay === 'true';\r\n        const configTeammateNameDisplay = config.TeammateNameDisplay as string;\r\n        const emojiPickerEnabled = config.EnableEmojiPicker === 'true';\r\n        const lastActiveTimeEnabled = config.EnableLastActiveTime === 'true';\r\n        const userPreference = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n\r\n        let lastActiveDisplay = true;\r\n        const user = props.adminMode ? props.user : getUser(state, currentUserId);\r\n        if (user.props?.show_last_active === 'false') {\r\n            lastActiveDisplay = false;\r\n        }\r\n\r\n        let userLocale = props.user.locale;\r\n        if (!isLanguageAvailable(state, userLocale)) {\r\n            userLocale = config.DefaultClientLocale as string;\r\n        }\r\n\r\n        return {\r\n            lockTeammateNameDisplay,\r\n            allowCustomThemes,\r\n            configTeammateNameDisplay,\r\n            enableLinkPreviews,\r\n            locales: getLanguages(state),\r\n            userLocale,\r\n            enableThemeSelection,\r\n            timezones,\r\n            timezoneLabel,\r\n            userTimezone,\r\n            shouldAutoUpdateTimezone,\r\n            availabilityStatusOnPosts: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.AVAILABILITY_STATUS_ON_POSTS, Preferences.AVAILABILITY_STATUS_ON_POSTS_DEFAULT, userPreference),\r\n            militaryTime: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.USE_MILITARY_TIME, Preferences.USE_MILITARY_TIME_DEFAULT, userPreference),\r\n            teammateNameDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.NAME_NAME_FORMAT, configTeammateNameDisplay, userPreference),\r\n            channelDisplayMode: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.CHANNEL_DISPLAY_MODE, Preferences.CHANNEL_DISPLAY_MODE_DEFAULT, userPreference),\r\n            messageDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT, userPreference),\r\n            colorizeUsernames: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLORIZE_USERNAMES, Preferences.COLORIZE_USERNAMES_DEFAULT, userPreference),\r\n            collapseDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLLAPSE_DISPLAY, Preferences.COLLAPSE_DISPLAY_DEFAULT, userPreference),\r\n            collapsedReplyThreadsAllowUserPreference: isCollapsedThreadsAllowed(state) && getConfig(state).CollapsedThreads !== CollapsedThreads.ALWAYS_ON,\r\n            collapsedReplyThreads: getCollapsedThreadsPreference(state),\r\n            clickToReply: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.CLICK_TO_REPLY, Preferences.CLICK_TO_REPLY_DEFAULT, userPreference),\r\n            linkPreviewDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.LINK_PREVIEW_DISPLAY, Preferences.LINK_PREVIEW_DISPLAY_DEFAULT, userPreference),\r\n            oneClickReactionsOnPosts: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.ONE_CLICK_REACTIONS_ENABLED, Preferences.ONE_CLICK_REACTIONS_ENABLED_DEFAULT, userPreference),\r\n            renderEmoticonsAsEmoji: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.RENDER_EMOTICONS_AS_EMOJI, Preferences.RENDER_EMOTICONS_AS_EMOJI_DEFAULT, userPreference),\r\n            emojiPickerEnabled,\r\n            lastActiveDisplay,\r\n            lastActiveTimeEnabled,\r\n        };\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            autoUpdateTimezone,\r\n            savePreferences,\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(makeMapStateToProps, mapDispatchToProps)(UserSettingsDisplay);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {Component, createRef} from 'react';\r\nimport type {ChangeEvent, CSSProperties, MouseEvent, ReactNode, RefObject} from 'react';\r\nimport {defineMessage, FormattedMessage} from 'react-intl';\r\n\r\nimport FormError from 'components/form_error';\r\nimport LoadingWrapper from 'components/widgets/loading/loading_wrapper';\r\n\r\nimport {Constants} from 'utils/constants';\r\nimport * as FileUtils from 'utils/file_utils';\r\nimport {localizeMessage} from 'utils/utils';\r\n\r\nimport WithTooltip from './with_tooltip';\r\n\r\ntype Props = {\r\n    clientError?: ReactNode;\r\n    serverError?: ReactNode;\r\n    src?: string | null;\r\n    defaultImageSrc?: string;\r\n    file?: File | null;\r\n    loadingPicture?: boolean;\r\n    submitActive?: boolean;\r\n    onRemove?: () => void;\r\n    onSetDefault?: (() => Promise<void>) | null;\r\n    onSubmit?: (() => void) | null;\r\n    title?: string;\r\n    onFileChange?: (e: ChangeEvent<HTMLInputElement>) => void;\r\n    updateSection?: (e: MouseEvent<HTMLButtonElement>) => void;\r\n    imageContext?: string;\r\n    maxFileSize?: number;\r\n    helpText?: ReactNode;\r\n}\r\n\r\ntype State = {\r\n    image: string | null;\r\n    removeSrc: boolean;\r\n    setDefaultSrc: boolean;\r\n    orientationStyles?: CSSProperties;\r\n}\r\n\r\nexport default class SettingPicture extends Component<Props, State> {\r\n    static defaultProps = {\r\n        imageContext: 'profile',\r\n    };\r\n    private readonly settingList: RefObject<HTMLDivElement>;\r\n    private readonly selectInput: RefObject<HTMLInputElement>;\r\n    private readonly confirmButton: RefObject<HTMLButtonElement>;\r\n    private previewBlob: string | null;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.settingList = createRef();\r\n        this.selectInput = createRef();\r\n        this.confirmButton = createRef();\r\n        this.previewBlob = null;\r\n\r\n        this.state = {\r\n            image: null,\r\n            removeSrc: false,\r\n            setDefaultSrc: false,\r\n        };\r\n    }\r\n\r\n    focusFirstElement() {\r\n        this.settingList.current?.focus();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.focusFirstElement();\r\n\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.addEventListener('input', this.handleFileSelected);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (this.props.file && prevProps.file !== this.props.file) {\r\n            this.setPicture(this.props.file);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.previewBlob) {\r\n            URL.revokeObjectURL(this.previewBlob);\r\n        }\r\n\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.removeEventListener('input', this.handleFileSelected);\r\n        }\r\n    }\r\n\r\n    handleCancel = (e: MouseEvent<HTMLButtonElement>) => {\r\n        this.setState({removeSrc: false, setDefaultSrc: false});\r\n        this.props.updateSection?.(e);\r\n    };\r\n\r\n    handleFileSelected = () => {\r\n        if (this.confirmButton.current) {\r\n            this.confirmButton.current.focus();\r\n        }\r\n    };\r\n\r\n    handleSave = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        if (this.props.loadingPicture) {\r\n            return;\r\n        }\r\n        if (this.state.removeSrc) {\r\n            this.props.onRemove?.();\r\n        } else if (this.state.setDefaultSrc) {\r\n            this.props.onSetDefault?.();\r\n        } else {\r\n            this.props.onSubmit?.();\r\n        }\r\n    };\r\n\r\n    handleRemoveSrc = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        this.setState({removeSrc: true});\r\n        this.focusFirstElement();\r\n    };\r\n\r\n    handleSetDefaultSrc = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        this.setState({setDefaultSrc: true});\r\n        this.focusFirstElement();\r\n    };\r\n\r\n    handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({removeSrc: false, setDefaultSrc: false});\r\n        this.props.onFileChange?.(e);\r\n    };\r\n\r\n    handleInputFile = () => {\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.value = '';\r\n            this.selectInput.current.click();\r\n        }\r\n    };\r\n\r\n    setPicture = (file: File) => {\r\n        if (file) {\r\n            this.previewBlob = URL.createObjectURL(file);\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                const orientation = FileUtils.getExifOrientation(e.target!.result! as ArrayBuffer);\r\n                const orientationStyles = FileUtils.getOrientationStyles(orientation);\r\n\r\n                this.setState({\r\n                    image: this.previewBlob,\r\n                    orientationStyles,\r\n                });\r\n            };\r\n            reader.readAsArrayBuffer(file);\r\n        }\r\n    };\r\n\r\n    renderImg = () => {\r\n        const imageContext = this.props.imageContext;\r\n\r\n        if (this.props.file) {\r\n            const imageStyles = {\r\n                backgroundImage: 'url(' + this.state.image + ')',\r\n                ...this.state.orientationStyles,\r\n            };\r\n\r\n            return (\r\n                <div className={`${imageContext}-img-preview`}>\r\n                    <div className='img-preview__image'>\r\n                        <div\r\n                            style={imageStyles}\r\n                            className={`${imageContext}-img-preview`}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (this.state.setDefaultSrc) {\r\n            return (\r\n                <img\r\n                    className={`${imageContext}-img`}\r\n                    alt={`${imageContext} image`}\r\n                    src={this.props.defaultImageSrc}\r\n                />\r\n            );\r\n        }\r\n\r\n        if (this.props.src && !this.state.removeSrc) {\r\n            const imageElement = (\r\n                <img\r\n                    className={`${imageContext}-img`}\r\n                    alt={`${imageContext} image`}\r\n                    src={this.props.src}\r\n                />\r\n            );\r\n            if (!this.props.onRemove && !this.props.onSetDefault) {\r\n                return imageElement;\r\n            }\r\n\r\n            let title;\r\n            let handler;\r\n            if (this.props.onRemove) {\r\n                title = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.remove'\r\n                        defaultMessage='Remove This Icon'\r\n                    />\r\n                );\r\n                handler = this.handleRemoveSrc;\r\n            } else if (this.props.onSetDefault) {\r\n                title = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.remove_profile_picture'\r\n                        defaultMessage='Remove Profile Picture'\r\n                    />\r\n                );\r\n                handler = this.handleSetDefaultSrc;\r\n            }\r\n\r\n            return (\r\n                <div className={`${imageContext}-img__container`}>\r\n                    <div\r\n                        className='img-preview__image'\r\n                        aria-hidden={true}\r\n                    >\r\n                        {imageElement}\r\n                    </div>\r\n                    <WithTooltip\r\n                        title={title ?? ''}\r\n                        disabled={!title}\r\n                    >\r\n                        <button\r\n                            data-testid='removeSettingPicture'\r\n                            className={`${imageContext}-img__remove`}\r\n                            onClick={handler}\r\n                        >\r\n                            <span aria-hidden={true}>{''}</span>\r\n                            <span className='sr-only'>{title}</span>\r\n                        </button>\r\n                    </WithTooltip>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    render() {\r\n        const img = this.renderImg();\r\n\r\n        let confirmButtonClass = 'btn';\r\n        let disableSaveButtonFocus = false;\r\n        if (this.props.submitActive || this.state.removeSrc || this.state.setDefaultSrc) {\r\n            confirmButtonClass += ' btn-primary';\r\n        } else {\r\n            confirmButtonClass += ' btn-inactive disabled';\r\n            disableSaveButtonFocus = true;\r\n        }\r\n\r\n        let imgRender;\r\n        if (img) {\r\n            imgRender = (\r\n                <li\r\n                    className='setting-list-item'\r\n                    role='presentation'\r\n                >\r\n                    {img}\r\n                </li>\r\n            );\r\n        }\r\n\r\n        let buttonRender;\r\n        if (this.props.onSubmit) {\r\n            buttonRender = (\r\n                <span>\r\n                    <input\r\n                        data-testid='uploadPicture'\r\n                        ref={this.selectInput}\r\n                        className='hidden'\r\n                        accept={Constants.ACCEPT_STATIC_IMAGE}\r\n                        type='file'\r\n                        onChange={this.handleFileChange}\r\n                        disabled={this.props.loadingPicture}\r\n                        aria-hidden={true}\r\n                        tabIndex={-1}\r\n                    />\r\n                    <button\r\n                        data-testid='inputSettingPictureButton'\r\n                        className='btn btn-primary btn-file'\r\n                        disabled={this.props.loadingPicture}\r\n                        onClick={this.handleInputFile}\r\n                        aria-label={localizeMessage({id: 'setting_picture.select', defaultMessage: 'Select'})}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='setting_picture.select'\r\n                            defaultMessage='Select'\r\n                        />\r\n                    </button>\r\n                    <button\r\n                        tabIndex={disableSaveButtonFocus ? -1 : 0}\r\n                        data-testid='saveSettingPicture'\r\n                        disabled={disableSaveButtonFocus}\r\n                        ref={this.confirmButton}\r\n                        className={confirmButtonClass}\r\n                        onClick={this.handleSave}\r\n                        aria-label={this.props.loadingPicture ? localizeMessage({id: 'setting_picture.uploading', defaultMessage: 'Uploading...'}) : localizeMessage({id: 'setting_picture.save', defaultMessage: 'Save'})}\r\n                    >\r\n                        <LoadingWrapper\r\n                            loading={this.props.loadingPicture}\r\n                            text={defineMessage({id: 'setting_picture.uploading', defaultMessage: 'Uploading...'})}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='setting_picture.save'\r\n                                defaultMessage='Save'\r\n                            />\r\n                        </LoadingWrapper>\r\n                    </button>\r\n                </span>\r\n            );\r\n        }\r\n        return (\r\n            <section className='section-max form-horizontal'>\r\n                <h4 className='col-xs-12 section-title'>\r\n                    {this.props.title}\r\n                </h4>\r\n                <div className='col-sm-10 col-sm-offset-2'>\r\n                    <div\r\n                        className='setting-list'\r\n                        ref={this.settingList}\r\n                        tabIndex={-1}\r\n                        aria-label={this.props.title}\r\n                        aria-describedby='setting-picture__helptext'\r\n                    >\r\n                        {imgRender}\r\n                        <div\r\n                            id='setting-picture__helptext'\r\n                            className='setting-list-item pt-3'\r\n                        >\r\n                            {this.props.helpText}\r\n                        </div>\r\n                        <div\r\n                            className='setting-list-item'\r\n                        >\r\n                            <hr/>\r\n                            <FormError\r\n                                errors={[this.props.clientError, this.props.serverError]}\r\n                                type={'modal'}\r\n                            />\r\n                            {buttonRender}\r\n                            <button\r\n                                data-testid='cancelSettingPicture'\r\n                                className='btn btn-tertiary theme ml-2'\r\n                                onClick={this.handleCancel}\r\n                                aria-label={localizeMessage({id: 'setting_picture.cancel', defaultMessage: 'Cancel'})}\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='setting_picture.cancel'\r\n                                    defaultMessage='Cancel'\r\n                                />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React, {PureComponent} from 'react';\r\nimport {defineMessage, defineMessages, FormattedDate, FormattedMessage, FormattedList, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, ActionMeta, StylesConfig} from 'react-select';\r\n\r\nimport type {UserPropertyField, PropertyFieldOption} from '@mattermost/types/properties';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {LogErrorOptions} from 'mattermost-redux/actions/errors';\r\nimport {LogErrorBarMode} from 'mattermost-redux/actions/errors';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {isEmail} from 'mattermost-redux/utils/helpers';\r\n\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingPicture from 'components/setting_picture';\r\nimport Input from 'components/widgets/inputs/input/input';\r\nimport LoadingWrapper from 'components/widgets/loading/loading_wrapper';\r\n\r\nimport {AnnouncementBarMessages, AnnouncementBarTypes, AcceptedProfileImageTypes, Constants, ValidationErrors} from 'utils/constants';\r\nimport {validHttpUrl} from 'utils/url';\r\nimport * as Utils from 'utils/utils';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst holders = defineMessages({\r\n    usernameReserved: {\r\n        id: 'user.settings.general.usernameReserved',\r\n        defaultMessage: 'This username is reserved, please choose a new one.',\r\n    },\r\n    usernameGroupNameUniqueness: {\r\n        id: 'user.settings.general.usernameGroupNameUniqueness',\r\n        defaultMessage: 'This username conflicts with an existing group name.',\r\n    },\r\n    usernameRestrictions: {\r\n        id: 'user.settings.general.usernameRestrictions',\r\n        defaultMessage: \"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-', and '_'.\",\r\n    },\r\n    validEmail: {\r\n        id: 'user.settings.general.validEmail',\r\n        defaultMessage: 'Please enter a valid email address.',\r\n    },\r\n    validUrl: {\r\n        id: 'user.settings.general.validUrl',\r\n        defaultMessage: 'Please enter a valid url.',\r\n    },\r\n    emailMatch: {\r\n        id: 'user.settings.general.emailMatch',\r\n        defaultMessage: 'The new emails you entered do not match.',\r\n    },\r\n    incorrectPassword: {\r\n        id: 'user.settings.general.incorrectPassword',\r\n        defaultMessage: 'Your password is incorrect.',\r\n    },\r\n    emptyPassword: {\r\n        id: 'user.settings.general.emptyPassword',\r\n        defaultMessage: 'Please enter your current password.',\r\n    },\r\n    validImage: {\r\n        id: 'user.settings.general.validImage',\r\n        defaultMessage: 'Only BMP, JPG, JPEG, or PNG images may be used for profile pictures',\r\n    },\r\n    imageTooLarge: {\r\n        id: 'user.settings.general.imageTooLarge',\r\n        defaultMessage: 'Unable to upload profile image. File is too large.',\r\n    },\r\n    uploadImage: {\r\n        id: 'user.settings.general.uploadImage',\r\n        defaultMessage: \"Click 'Edit' to upload an image.\",\r\n    },\r\n    uploadImageMobile: {\r\n        id: 'user.settings.general.mobile.uploadImage',\r\n        defaultMessage: 'Click to upload an image',\r\n    },\r\n    fullName: {\r\n        id: 'user.settings.general.fullName',\r\n        defaultMessage: 'Full Name',\r\n    },\r\n    nickname: {\r\n        id: 'user.settings.general.nickname',\r\n        defaultMessage: 'Nickname',\r\n    },\r\n    username: {\r\n        id: 'user.settings.general.username',\r\n        defaultMessage: 'Username',\r\n    },\r\n    profilePicture: {\r\n        id: 'user.settings.general.profilePicture',\r\n        defaultMessage: 'Profile Picture',\r\n    },\r\n    close: {\r\n        id: 'user.settings.general.close',\r\n        defaultMessage: 'Close',\r\n    },\r\n    position: {\r\n        id: 'user.settings.general.position',\r\n        defaultMessage: 'Position',\r\n    },\r\n});\r\n\r\nexport type SelectOption = {\r\n    value: string;\r\n    label: string;\r\n};\r\n\r\nconst selectStyles: StylesConfig<SelectOption, true> = {\r\n    valueContainer: (baseStyles) => ({\r\n        ...baseStyles,\r\n        height: 'auto',\r\n        minHeight: '38px',\r\n        flexWrap: 'wrap',\r\n        whiteSpace: 'normal',\r\n    }),\r\n    multiValue: (baseStyles) => ({\r\n        ...baseStyles,\r\n        margin: '2px',\r\n    }),\r\n    control: (baseStyles) => ({\r\n        ...baseStyles,\r\n        height: 'auto',\r\n        minHeight: '38px',\r\n    }),\r\n    multiValueLabel: (baseStyles) => ({\r\n        ...baseStyles,\r\n        padding: '2px 6px',\r\n    }),\r\n};\r\n\r\nexport type Props = {\r\n    intl: IntlShape;\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    updateTab: (notifications: string) => void;\r\n    activeSection?: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    isMobileView: boolean;\r\n    maxFileSize: number;\r\n    customProfileAttributeFields: UserPropertyField[];\r\n    actions: {\r\n        logError: ({message, type}: {message: any; type: string}, options?: LogErrorOptions) => void;\r\n        clearErrors: () => void;\r\n        updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n        sendVerificationEmail: (email: string) => Promise<ActionResult>;\r\n        setDefaultProfileImage: (id: string) => void;\r\n        uploadProfileImage: (id: string, file: File) => Promise<ActionResult>;\r\n        getCustomProfileAttributeValues: (userID: string) => Promise<ActionResult<Record<string, string | string[]>>>;\r\n        saveCustomProfileAttribute: (userID: string, attributeID: string, attributeValue: string | string[]) => Promise<ActionResult<Record<string, string | string[]>>>;\r\n    };\r\n    requireEmailVerification?: boolean;\r\n    ldapFirstNameAttributeSet?: boolean;\r\n    ldapLastNameAttributeSet?: boolean;\r\n    samlFirstNameAttributeSet?: boolean;\r\n    samlLastNameAttributeSet?: boolean;\r\n    ldapNicknameAttributeSet?: boolean;\r\n    samlNicknameAttributeSet?: boolean;\r\n    ldapPositionAttributeSet?: boolean;\r\n    samlPositionAttributeSet?: boolean;\r\n    ldapPictureAttributeSet?: boolean;\r\n    enableCustomProfileAttributes: boolean;\r\n}\r\n\r\ntype State = {\r\n    username: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    nickname: string;\r\n    position: string;\r\n    originalEmail: string;\r\n    email: string;\r\n    confirmEmail: string;\r\n    currentPassword: string;\r\n    pictureFile: File | null;\r\n    loadingPicture: boolean;\r\n    sectionIsSaving: boolean;\r\n    showSpinner: boolean;\r\n    resendStatus?: string;\r\n    pictureError?: string | null;\r\n    serverError?: string;\r\n    emailError?: string;\r\n    customAttributeValues: Record<string, string | string[]>;\r\n}\r\n\r\nexport class UserSettingsGeneralTab extends PureComponent<Props, State> {\r\n    public submitActive = false;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = this.setupInitialState(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.enableCustomProfileAttributes && !this.props.user.custom_profile_attributes) {\r\n            this.props.actions.getCustomProfileAttributeValues(this.props.user.id);\r\n        }\r\n    }\r\n\r\n    handleEmailResend = (email: string) => {\r\n        this.setState({resendStatus: 'sending', showSpinner: true});\r\n        this.props.actions.sendVerificationEmail(email).then(({data, error: err}) => {\r\n            if (data) {\r\n                this.setState({resendStatus: 'success'});\r\n            } else if (err) {\r\n                this.setState({resendStatus: 'failure'});\r\n            }\r\n        });\r\n    };\r\n\r\n    createEmailResendLink = (email: string) => {\r\n        return (\r\n            <span className='resend-verification-wrapper'>\r\n                <LoadingWrapper\r\n                    loading={this.state.showSpinner}\r\n                    text={defineMessage({id: 'user.settings.general.sending', defaultMessage: 'Sending'})}\r\n                >\r\n                    <a\r\n                        onClick={() => {\r\n                            this.handleEmailResend(email);\r\n                            setTimeout(() => {\r\n                                this.setState({\r\n                                    showSpinner: false,\r\n                                });\r\n                            }, 500);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.general.sendAgain'\r\n                            defaultMessage='Send again'\r\n                        />\r\n                    </a>\r\n                </LoadingWrapper>\r\n            </span>\r\n        );\r\n    };\r\n\r\n    submitUsername = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const username = this.state.username.trim().toLowerCase();\r\n\r\n        if (user.username === username) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.username = username;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitNickname = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const nickname = this.state.nickname.trim();\r\n\r\n        if (user.nickname === nickname) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.nickname = nickname;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitName = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const firstName = this.state.firstName.trim();\r\n        const lastName = this.state.lastName.trim();\r\n\r\n        if (user.first_name === firstName && user.last_name === lastName) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.first_name = firstName;\r\n        user.last_name = lastName;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitEmail = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const confirmEmail = this.state.confirmEmail.trim().toLowerCase();\r\n        const currentPassword = this.state.currentPassword;\r\n\r\n        if (email === user.email && (confirmEmail === '' || confirmEmail === user.email)) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.email = email;\r\n        user.password = currentPassword;\r\n        this.submitUser(user, true);\r\n    };\r\n\r\n    isEmailValid = () => {\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const confirmEmail = this.state.confirmEmail.trim().toLowerCase();\r\n        const currentPassword = this.state.currentPassword;\r\n\r\n        if (email === '' || !isEmail(email)) {\r\n            return false;\r\n        }\r\n\r\n        if (email !== confirmEmail) {\r\n            return false;\r\n        }\r\n\r\n        if (currentPassword === '') {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    submitUser = (user: UserProfile, emailUpdated: boolean) => {\r\n        const {formatMessage} = this.props.intl;\r\n        this.setState({sectionIsSaving: true});\r\n\r\n        this.props.actions.updateMe(user).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n\r\n                    const verificationEnabled = this.props.requireEmailVerification && emailUpdated;\r\n                    if (verificationEnabled) {\r\n                        this.props.actions.clearErrors();\r\n                        this.props.actions.logError({\r\n                            message: AnnouncementBarMessages.EMAIL_VERIFICATION_REQUIRED,\r\n                            type: AnnouncementBarTypes.SUCCESS,\r\n                        }, {errorBarMode: LogErrorBarMode.Always});\r\n                    }\r\n                } else if (err) {\r\n                    let serverError;\r\n                    if (err.server_error_id &&\r\n                        err.server_error_id === 'api.user.check_user_password.invalid.app_error') {\r\n                        serverError = formatMessage(holders.incorrectPassword);\r\n                    } else if (err.server_error_id === 'app.user.group_name_conflict') {\r\n                        serverError = formatMessage(holders.usernameGroupNameUniqueness);\r\n                    } else if (err.message) {\r\n                        serverError = err.message;\r\n                    } else {\r\n                        serverError = err;\r\n                    }\r\n                    this.setState({serverError, emailError: '', sectionIsSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    setDefaultProfilePicture = async () => {\r\n        try {\r\n            await this.props.actions.setDefaultProfileImage(this.props.user.id);\r\n            this.updateSection('');\r\n            this.submitActive = false;\r\n        } catch (err) {\r\n            let serverError;\r\n            if (err.message) {\r\n                serverError = err.message;\r\n            } else {\r\n                serverError = err;\r\n            }\r\n            this.setState({serverError, emailError: '', pictureError: '', sectionIsSaving: false});\r\n        }\r\n    };\r\n\r\n    submitPicture = () => {\r\n        if (!this.state.pictureFile) {\r\n            return;\r\n        }\r\n\r\n        if (!this.submitActive) {\r\n            return;\r\n        }\r\n\r\n        const {formatMessage} = this.props.intl;\r\n        const file = this.state.pictureFile;\r\n\r\n        if (!AcceptedProfileImageTypes.includes(file.type)) {\r\n            this.setState({pictureError: formatMessage(holders.validImage), serverError: ''});\r\n            return;\r\n        } else if (file.size > this.props.maxFileSize) {\r\n            this.setState({pictureError: formatMessage(holders.imageTooLarge), serverError: ''});\r\n            return;\r\n        }\r\n\r\n        this.setState({loadingPicture: true});\r\n\r\n        this.props.actions.uploadProfileImage(this.props.user.id, file).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n                    this.submitActive = false;\r\n                } else if (err) {\r\n                    const state = this.setupInitialState(this.props);\r\n                    state.serverError = err.message;\r\n                    this.setState(state);\r\n                }\r\n            });\r\n    };\r\n\r\n    submitPosition = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const position = this.state.position.trim();\r\n\r\n        if (user.position === position) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.position = position;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitAttribute = async (settings: string[]) => {\r\n        const attributeID = settings[0];\r\n        const attributeField = this.props.customProfileAttributeFields.find((field) => field.id === attributeID);\r\n        if (attributeField === undefined) {\r\n            return;\r\n        }\r\n        let attributeValue: string | string[] = this.state.customAttributeValues?.[attributeID];\r\n\r\n        if (typeof attributeValue === 'string' && attributeField.attrs && attributeField.attrs.value_type) {\r\n            if (attributeField.attrs.value_type === 'email') {\r\n                if (attributeValue !== '' && !isEmail(attributeValue)) {\r\n                    this.setState({emailError: '', serverError: ''});\r\n                    return;\r\n                }\r\n            }\r\n            if (attributeField.attrs.value_type === 'url') {\r\n                if (attributeValue !== '') {\r\n                    const validURL = validHttpUrl(attributeValue);\r\n                    if (!validURL) {\r\n                        this.setState({emailError: '', serverError: ''});\r\n                        return;\r\n                    }\r\n                    let validLink = validURL.toString();\r\n                    if (validLink.endsWith('/')) {\r\n                        validLink = validLink.slice(0, -1);\r\n                    }\r\n                    attributeValue = validLink;\r\n                }\r\n            }\r\n        }\r\n        if (attributeField.type === 'multiselect' && !attributeValue) {\r\n            attributeValue = [];\r\n        }\r\n\r\n        this.setState({sectionIsSaving: true});\r\n\r\n        this.props.actions.saveCustomProfileAttribute(this.props.user.id, attributeID, attributeValue as string).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n                    this.setState({customAttributeValues: {...this.state.customAttributeValues, ...data}});\r\n                } else if (err) {\r\n                    const serverError = err.message;\r\n                    this.setState({serverError, emailError: '', sectionIsSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    updateUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({username: e.target.value});\r\n    };\r\n\r\n    updateFirstName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({firstName: e.target.value});\r\n    };\r\n\r\n    updateLastName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({lastName: e.target.value});\r\n    };\r\n\r\n    updateNickname = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({nickname: e.target.value});\r\n    };\r\n\r\n    updatePosition = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({position: e.target.value});\r\n    };\r\n\r\n    updateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({email: e.target.value});\r\n    };\r\n\r\n    updateConfirmEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({confirmEmail: e.target.value});\r\n    };\r\n\r\n    updateCurrentPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({currentPassword: e.target.value});\r\n    };\r\n\r\n    updatePicture = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            this.setState({pictureFile: e.target.files[0]});\r\n\r\n            this.submitActive = true;\r\n            this.setState({pictureError: null});\r\n        } else {\r\n            this.setState({pictureFile: null});\r\n        }\r\n    };\r\n\r\n    updateSelectAttribute = (selectedOption: OnChangeValue<SelectOption, boolean>, action: ActionMeta<SelectOption>, fieldID: string) => {\r\n        const attributeValues = {...this.state.customAttributeValues};\r\n\r\n        if (!selectedOption) {\r\n            attributeValues[fieldID] = '';\r\n        } else if (Array.isArray(selectedOption)) {\r\n            // Handle multi-select\r\n            attributeValues[fieldID] = selectedOption.\r\n                filter((option): option is SelectOption =>\r\n                    Boolean(option && Object.hasOwn(option, 'value'))).\r\n                map((option) => option.value);\r\n        } else if ('value' in selectedOption) {\r\n            // Handle single select\r\n            attributeValues[fieldID] = selectedOption.value || '';\r\n        } else {\r\n            attributeValues[fieldID] = '';\r\n        }\r\n\r\n        this.setState({customAttributeValues: attributeValues});\r\n    };\r\n\r\n    updateAttribute = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const attributeValues = Object.assign({}, this.state.customAttributeValues);\r\n        const id = e.target.id.substring(e.target.id.indexOf('_') + 1);\r\n        attributeValues[id] = e.target.value;\r\n        this.setState({customAttributeValues: attributeValues});\r\n    };\r\n\r\n    updateSection = (section: string) => {\r\n        this.setState(Object.assign({}, this.setupInitialState(this.props), {pictureError: '', serverError: '', emailError: '', sectionIsSaving: false}));\r\n        this.submitActive = false;\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    setupInitialState(props: Props) {\r\n        const user = props.user;\r\n        return {\r\n            username: user.username,\r\n            firstName: user.first_name,\r\n            lastName: user.last_name,\r\n            nickname: user.nickname,\r\n            position: user.position,\r\n            originalEmail: user.email,\r\n            email: '',\r\n            confirmEmail: '',\r\n            currentPassword: '',\r\n            pictureFile: null,\r\n            loadingPicture: false,\r\n            sectionIsSaving: false,\r\n            showSpinner: false,\r\n            serverError: '',\r\n            customAttributeValues: user.custom_profile_attributes || {},\r\n        };\r\n    }\r\n\r\n    createEmailSection() {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'email';\r\n        let max = null;\r\n        if (active) {\r\n            const emailVerificationEnabled = this.props.requireEmailVerification;\r\n            const inputs = [];\r\n\r\n            let helpText = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emailHelp1'\r\n                    defaultMessage='Email is used for sign-in, notifications, and password reset. Email requires verification if changed.'\r\n                />\r\n            );\r\n\r\n            if (!emailVerificationEnabled) {\r\n                helpText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.emailHelp3'\r\n                        defaultMessage='Email is used for sign-in, notifications, and password reset.'\r\n                    />\r\n                );\r\n            }\r\n\r\n            let submit = null;\r\n\r\n            if (this.props.user.auth_service === '') {\r\n                inputs.push(\r\n                    <div key='currentEmailSetting'>\r\n                        <div className='form-group'>\r\n                            <span className='as-bs-label col-sm-5 control-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.currentEmail'\r\n                                    defaultMessage='Current Email'\r\n                                />\r\n                            </span>\r\n                            <div className='col-sm-7'>\r\n                                <span className='as-bs-label control-label word-break--all text-left'>{this.state.originalEmail}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='emailSetting'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='primaryEmail'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.newEmail'\r\n                                    defaultMessage='New Email'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    autoFocus={true}\r\n                                    id='primaryEmail'\r\n                                    name='primaryEmail'\r\n                                    type='email'\r\n                                    onChange={this.updateEmail}\r\n                                    maxLength={Constants.MAX_EMAIL_LENGTH}\r\n                                    value={this.state.email}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.newEmail', defaultMessage: 'New Email'})}\r\n                                    validate={(value) => {\r\n                                        if (value === '' || !isEmail(value as string)) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.validEmail),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='confirmEmailSetting'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='confirmEmail'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.confirmEmail'\r\n                                    defaultMessage='Confirm Email'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    id='confirmEmail'\r\n                                    name='confirmEmail'\r\n                                    type='email'\r\n                                    onChange={this.updateConfirmEmail}\r\n                                    maxLength={Constants.MAX_EMAIL_LENGTH}\r\n                                    value={this.state.confirmEmail}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.confirmEmail', defaultMessage: 'Confirm Email'})}\r\n                                    validate={(value) => {\r\n                                        if (this.state.email !== value) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.emailMatch),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='currentPassword'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='currentPassword'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.currentPassword'\r\n                                    defaultMessage='Current Password'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    id='currentPassword'\r\n                                    name='currentPassword'\r\n                                    type='password'\r\n                                    onChange={this.updateCurrentPassword}\r\n                                    value={this.state.currentPassword}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.currentPassword', defaultMessage: 'Current Password'})}\r\n                                    validate={(value) => {\r\n                                        if (value === '') {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.emptyPassword),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n\r\n                submit = this.submitEmail;\r\n            } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailGitlabCantUpdate'\r\n                                defaultMessage='Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailGoogleCantUpdate'\r\n                                defaultMessage='Login occurs through Google Apps. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.OFFICE365_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailOffice365CantUpdate'\r\n                                defaultMessage='Login occurs through Entra ID. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.OPENID_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailOpenIdCantUpdate'\r\n                                defaultMessage='Login occurs through OpenID Connect. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='pb-2'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailLdapCantUpdate'\r\n                                defaultMessage='Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='pb-2'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailSamlCantUpdate'\r\n                                defaultMessage='Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.general.email'\r\n                            defaultMessage='Email'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    isValid={this.isEmailValid()}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (this.props.user.auth_service === '') {\r\n            describe = this.props.user.email;\r\n        } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginGitlab'\r\n                    defaultMessage='Login done through GitLab ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginGoogle'\r\n                    defaultMessage='Login done through Google Apps ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.OFFICE365_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginOffice365'\r\n                    defaultMessage='Login done through Entra ID ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginLdap'\r\n                    defaultMessage='Login done through AD/LDAP ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginSaml'\r\n                    defaultMessage='Login done through SAML ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.general.email'\r\n                        defaultMessage='Email'\r\n                    />\r\n                }\r\n                describe={describe}\r\n                section={'email'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    }\r\n\r\n    createNameSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'name';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if (\r\n                (this.props.user.auth_service === Constants.LDAP_SERVICE &&\r\n                    (this.props.ldapFirstNameAttributeSet || this.props.ldapLastNameAttributeSet)) ||\r\n                (this.props.user.auth_service === Constants.SAML_SERVICE &&\r\n                    (this.props.samlFirstNameAttributeSet || this.props.samlLastNameAttributeSet)) ||\r\n                (Constants.OAUTH_SERVICES.includes(this.props.user.auth_service))\r\n            ) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                inputs.push(\r\n                    <div\r\n                        key='firstNameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='firstName'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.general.firstName'\r\n                                defaultMessage='First Name'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='firstName'\r\n                                name='firstName'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updateFirstName}\r\n                                maxLength={Constants.MAX_FIRSTNAME_LENGTH}\r\n                                value={this.state.firstName}\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.firstName', defaultMessage: 'First Name'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='lastNameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='lastName'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.general.lastName'\r\n                                defaultMessage='Last Name'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='lastName'\r\n                                name='lastName'\r\n                                type='text'\r\n                                onChange={this.updateLastName}\r\n                                maxLength={Constants.MAX_LASTNAME_LENGTH}\r\n                                value={this.state.lastName}\r\n                                aria-label={formatMessage({id: 'user.settings.general.lastName', defaultMessage: 'Last Name'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                const notifClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\r\n                    e.preventDefault();\r\n                    this.updateSection('');\r\n                    this.props.updateTab('notifications');\r\n                };\r\n\r\n                const notifLink = (\r\n                    <a\r\n                        href='#'\r\n                        onClick={notifClick.bind(this)}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.general.notificationsLink'\r\n                            defaultMessage='Notifications'\r\n                        />\r\n                    </a>\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.notificationsExtra'\r\n                            defaultMessage='By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.'\r\n                            values={{\r\n                                notify: (notifLink),\r\n                            }}\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitName;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.fullName)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n\r\n        if (user.first_name && user.last_name) {\r\n            describe = user.first_name + ' ' + user.last_name;\r\n        } else if (user.first_name) {\r\n            describe = user.first_name;\r\n        } else if (user.last_name) {\r\n            describe = user.last_name;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyName'\r\n                    defaultMessage=\"Click 'Edit' to add your full name\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyName'\r\n                        defaultMessage='Click to add your full name'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.fullName)}\r\n                describe={describe}\r\n                section={'name'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createNicknameSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'nickname';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if ((this.props.user.auth_service === 'ldap' && this.props.ldapNicknameAttributeSet) || (this.props.user.auth_service === Constants.SAML_SERVICE && this.props.samlNicknameAttributeSet)) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                let nicknameLabel: JSX.Element|string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.nickname'\r\n                        defaultMessage='Nickname'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    nicknameLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='nicknameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{nicknameLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='nickname'\r\n                                name='nickname'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updateNickname}\r\n                                value={this.state.nickname}\r\n                                maxLength={Constants.MAX_NICKNAME_LENGTH}\r\n                                autoCapitalize='off'\r\n                                aria-label={formatMessage({id: 'user.settings.general.nickname', defaultMessage: 'Nickname'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.nicknameExtra'\r\n                            defaultMessage='Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitNickname;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.nickname)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (user.nickname) {\r\n            describe = user.nickname;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyNickname'\r\n                    defaultMessage=\"Click 'Edit' to add a nickname\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyNickname'\r\n                        defaultMessage='Click to add a nickname'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.nickname)}\r\n                describe={describe}\r\n                section={'nickname'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createUsernameSection = () => {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'username';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if (this.props.user.auth_service === '') {\r\n                let usernameLabel: JSX.Element | string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.username'\r\n                        defaultMessage='Username'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    usernameLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='usernameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{usernameLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='username'\r\n                                name='username'\r\n                                autoFocus={true}\r\n                                maxLength={Constants.MAX_USERNAME_LENGTH}\r\n                                type='text'\r\n                                onChange={this.updateUsername}\r\n                                value={this.state.username}\r\n                                autoCapitalize='off'\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.username', defaultMessage: 'Username'})}\r\n                                validate={(value) => {\r\n                                    const usernameError = Utils.isValidUsername(value as string);\r\n                                    if (usernameError) {\r\n                                        if (usernameError.id === ValidationErrors.RESERVED_NAME) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.usernameReserved),\r\n                                            };\r\n                                        }\r\n                                        return {\r\n                                            type: 'error',\r\n                                            value: formatMessage(holders.usernameRestrictions, {min: Constants.MIN_USERNAME_LENGTH, max: Constants.MAX_USERNAME_LENGTH}),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.usernameInfo'\r\n                            defaultMessage='Pick something easy for teammates to recognize and recall.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitUsername;\r\n            } else {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.username)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                    isValid={Utils.isValidUsername(this.state.username) === undefined}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.username)}\r\n                describe={this.props.user.username}\r\n                section={'username'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createPositionSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'position';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo: JSX.Element|string;\r\n            let submit = null;\r\n            if ((this.props.user.auth_service === Constants.LDAP_SERVICE && this.props.ldapPositionAttributeSet) || (this.props.user.auth_service === Constants.SAML_SERVICE && this.props.samlPositionAttributeSet)) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                let positionLabel: JSX.Element | string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.position'\r\n                        defaultMessage='Position'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    positionLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='positionSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{positionLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='position'\r\n                                name='position'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updatePosition}\r\n                                value={this.state.position}\r\n                                maxLength={Constants.MAX_POSITION_LENGTH}\r\n                                autoCapitalize='off'\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.position', defaultMessage: 'Position'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.positionExtra'\r\n                            defaultMessage='Use Position for your role or job title. This will be shown in your profile popover.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitPosition;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.position)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (user.position) {\r\n            describe = user.position;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyPosition'\r\n                    defaultMessage=\"Click 'Edit' to add your job title / position\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyPosition'\r\n                        defaultMessage='Click to add your job title / position'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.position)}\r\n                describe={describe}\r\n                section={'position'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createCustomAttributeSection = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        if (this.props.customProfileAttributeFields == null) {\r\n            return <></>;\r\n        }\r\n\r\n        const attributeSections = this.props.customProfileAttributeFields.map((attribute) => {\r\n            const sectionName = 'customAttribute_' + attribute.id;\r\n            const active = this.props.activeSection === sectionName;\r\n            let max = null;\r\n\r\n            const getDisplayValue = (attributeValue: string | string[]) => {\r\n                if (!attributeValue || (!Array.isArray(attributeValue) && !attributeValue.length)) {\r\n                    return '';\r\n                }\r\n\r\n                if (attribute.type === 'select' || attribute.type === 'multiselect') {\r\n                    const attribOptions = attribute.attrs.options;\r\n                    if (!attribOptions) {\r\n                        return '';\r\n                    }\r\n                    if (Array.isArray(attributeValue)) {\r\n                        return attributeValue.map((value) => {\r\n                            const option = attribOptions.find((o) => o.id === value);\r\n                            if (option) {\r\n                                return {label: option?.name, value: option?.id};\r\n                            }\r\n                            return null;\r\n                        }).filter((value) => value != null);\r\n                    }\r\n\r\n                    // Handle single select\r\n                    const option = attribOptions.find((o) => o.id === attributeValue);\r\n                    if (option) {\r\n                        return {label: option?.name, value: option?.id};\r\n                    }\r\n                    return '';\r\n                }\r\n\r\n                return attributeValue as string;\r\n            };\r\n\r\n            if (active) {\r\n                const inputs = [];\r\n                let extraInfo: JSX.Element|string;\r\n                let submit = null;\r\n\r\n                const validate = () => {\r\n                    if (attribute.attrs?.value_type === 'email') {\r\n                        const value = this.state.customAttributeValues[attribute.id] as string;\r\n                        if (value && !isEmail(value)) {\r\n                            return {\r\n                                type: 'error' as const,\r\n                                value: formatMessage(holders.validEmail),\r\n                            };\r\n                        }\r\n                    }\r\n                    if (attribute.attrs?.value_type === 'url') {\r\n                        const value = this.state.customAttributeValues[attribute.id] as string;\r\n                        if (value) {\r\n                            const validURL = validHttpUrl(value);\r\n                            if (!validURL) {\r\n                                return {\r\n                                    type: 'error' as const,\r\n                                    value: formatMessage(holders.validUrl),\r\n                                };\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                };\r\n\r\n                if ((this.props.user.auth_service === Constants.LDAP_SERVICE && attribute.attrs?.ldap) ||\r\n                    (this.props.user.auth_service === Constants.SAML_SERVICE && attribute.attrs?.saml)) {\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.field_handled_externally'\r\n                                defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                            />\r\n                        </span>\r\n                    );\r\n                } else if (attribute.attrs?.managed === 'admin') {\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.field_managed_by_admin'\r\n                                defaultMessage='This field can only be changed by an administrator.'\r\n                            />\r\n                        </span>\r\n                    );\r\n                } else {\r\n                    let attributeLabel: JSX.Element | string = (\r\n                        attribute.name\r\n                    );\r\n                    if (this.props.isMobileView) {\r\n                        attributeLabel = '';\r\n                    }\r\n\r\n                    if (attribute.type === 'select' || attribute.type === 'multiselect') {\r\n                        const attribOptions: PropertyFieldOption[] = attribute.attrs!.options as PropertyFieldOption[];\r\n                        const opts = attribOptions.map((o) => {\r\n                            return {label: o.name, value: o.id} as SelectOption;\r\n                        });\r\n                        inputs.push(\r\n                            <ReactSelect\r\n                                isMulti={attribute.type === 'multiselect' ? true : undefined}\r\n                                key={sectionName}\r\n                                id={'customProfileAttribute_' + attribute.id}\r\n                                inputId={'customProfileAttribute_' + attribute.id + '_input'}\r\n                                className='react-select inlineSelect'\r\n                                classNamePrefix='react-select'\r\n                                options={opts}\r\n                                isClearable={true}\r\n                                isSearchable={false}\r\n                                isDisabled={false}\r\n                                placeholder={formatMessage({\r\n                                    id: 'user.settings.general.select',\r\n                                    defaultMessage: 'Select',\r\n                                })}\r\n                                components={{IndicatorSeparator: null}}\r\n                                styles={selectStyles}\r\n                                value={getDisplayValue(this.state.customAttributeValues[attribute.id]) as SelectOption}\r\n                                onChange={(v, a) => this.updateSelectAttribute(v, a, attribute.id)}\r\n                            />,\r\n                        );\r\n                    } else {\r\n                        const inputType = attribute.type as string;\r\n                        inputs.push(\r\n                            <div\r\n                                key={sectionName}\r\n                                className='form-group'\r\n                            >\r\n                                <label className='col-sm-5 control-label'>{attributeLabel}</label>\r\n                                <div className='col-sm-7'>\r\n                                    <Input\r\n                                        id={sectionName}\r\n                                        name={sectionName}\r\n                                        autoFocus={true}\r\n                                        type={inputType}\r\n                                        onChange={this.updateAttribute}\r\n                                        value={getDisplayValue(this.state.customAttributeValues[attribute.id]) as string}\r\n                                        maxLength={Constants.MAX_CUSTOM_ATTRIBUTE_LENGTH}\r\n                                        autoCapitalize='off'\r\n                                        onFocus={Utils.moveCursorToEnd}\r\n                                        aria-label={attribute.name}\r\n                                        validate={validate}\r\n                                    />\r\n                                </div>\r\n                            </div>,\r\n                        );\r\n                    }\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.attributeExtra'\r\n                                defaultMessage='This will be shown in your profile popover.'\r\n                            />\r\n                        </span>\r\n                    );\r\n\r\n                    submit = this.submitAttribute.bind(this, [attribute.id]);\r\n                }\r\n\r\n                max = (\r\n                    <SettingItemMax\r\n                        key={'settingItemMax_' + attribute.id}\r\n                        title={attribute.name}\r\n                        inputs={inputs}\r\n                        submit={submit}\r\n                        saving={this.state.sectionIsSaving}\r\n                        serverError={this.state.serverError}\r\n                        updateSection={this.updateSection}\r\n                        extraInfo={extraInfo}\r\n                        isValid={validate() === undefined}\r\n                    />\r\n                );\r\n            }\r\n            let describe: JSX.Element|string = '';\r\n            if (this.props.user.custom_profile_attributes?.[attribute.id]) {\r\n                const attributeValue = getDisplayValue(this.props.user.custom_profile_attributes?.[attribute.id]);\r\n                if (attributeValue) {\r\n                    if (typeof attributeValue === 'string') {\r\n                        describe = attributeValue;\r\n                    } else if (Array.isArray(attributeValue) && attributeValue.length > 0) {\r\n                        describe = <FormattedList value={attributeValue.map((attrib) => attrib?.label || null)}/>;\r\n                    } else if (!Array.isArray(attributeValue) && Object.hasOwn(attributeValue, 'label')) {\r\n                        describe = attributeValue.label || '';\r\n                    }\r\n                }\r\n            }\r\n            if (!describe) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.emptyAttribute'\r\n                        defaultMessage=\"Click 'Edit' to add your custom attribute\"\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    describe = (\r\n                        <FormattedMessage\r\n                            id='user.settings.general.mobile.emptyAttribute'\r\n                            defaultMessage='Click to add your custom attribute'\r\n                        />\r\n                    );\r\n                }\r\n            }\r\n\r\n            return (\r\n                <div key={sectionName}>\r\n                    <SettingItem\r\n                        key={'settingItem_' + attribute.id}\r\n                        active={active}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        title={attribute.name}\r\n                        describe={describe}\r\n                        section={sectionName}\r\n                        updateSection={this.updateSection}\r\n                        max={max}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        });\r\n        return <>{attributeSections}</>;\r\n    };\r\n\r\n    createPictureSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'picture';\r\n        let max = null;\r\n\r\n        if (active) {\r\n            let submit = null;\r\n            let setDefault = null;\r\n            let helpText = null;\r\n            let imgSrc = null;\r\n\r\n            if ((this.props.user.auth_service === Constants.LDAP_SERVICE || this.props.user.auth_service === Constants.SAML_SERVICE) && this.props.ldapPictureAttributeSet) {\r\n                helpText = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                submit = this.submitPicture;\r\n                setDefault = user.last_picture_update > 0 ? this.setDefaultProfilePicture : null;\r\n                imgSrc = Utils.imageURLForUser(user.id, user.last_picture_update);\r\n                helpText = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.help.profile'\r\n                        defaultMessage='Upload a picture in BMP, JPG, JPEG, or PNG format. Maximum file size: {max}'\r\n                        values={{max: Utils.fileSizeToString(this.props.maxFileSize)}}\r\n                    />\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingPicture\r\n                    title={formatMessage(holders.profilePicture)}\r\n                    onSubmit={submit}\r\n                    onSetDefault={setDefault}\r\n                    src={imgSrc}\r\n                    defaultImageSrc={Utils.defaultImageURLForUser(user.id)}\r\n                    serverError={this.state.serverError}\r\n                    clientError={this.state.pictureError}\r\n                    updateSection={(e: React.MouseEvent) => {\r\n                        this.updateSection('');\r\n                        e.preventDefault();\r\n                    }}\r\n                    file={this.state.pictureFile}\r\n                    onFileChange={this.updatePicture}\r\n                    submitActive={this.submitActive}\r\n                    loadingPicture={this.state.loadingPicture}\r\n                    maxFileSize={this.props.maxFileSize}\r\n                    helpText={helpText}\r\n                />\r\n            );\r\n        }\r\n\r\n        let minMessage: JSX.Element|string = formatMessage(holders.uploadImage);\r\n        if (this.props.isMobileView) {\r\n            minMessage = formatMessage(holders.uploadImageMobile);\r\n        }\r\n        if (user.last_picture_update > 0) {\r\n            minMessage = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.imageUpdated'\r\n                    defaultMessage='Image last updated {date}'\r\n                    values={{\r\n                        date: (\r\n                            <FormattedDate\r\n                                value={new Date(user.last_picture_update)}\r\n                                day='2-digit'\r\n                                month='short'\r\n                                year='numeric'\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={formatMessage(holders.profilePicture)}\r\n                    describe={minMessage}\r\n                    section={'picture'}\r\n                    updateSection={this.updateSection}\r\n                    max={max}\r\n                />\r\n                <div\r\n                    className='sr-only'\r\n                    aria-live='polite'\r\n                    aria-atomic='true'\r\n                >\r\n                    {this.renderPictureStatus()}\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    renderPictureStatus = () => {\r\n        if (this.state.loadingPicture) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.uploading'\r\n                    defaultMessage='Uploading...'\r\n                />\r\n            );\r\n        } else if (this.state.pictureFile) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.selected'\r\n                    defaultMessage='Picture selected, ready to save'\r\n                />\r\n            );\r\n        } else if (this.submitActive) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.uploaded'\r\n                    defaultMessage='Picture uploaded'\r\n                />\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    render() {\r\n        const nameSection = this.createNameSection();\r\n        const nicknameSection = this.createNicknameSection();\r\n        const usernameSection = this.createUsernameSection();\r\n        const positionSection = this.createPositionSection();\r\n        const emailSection = this.createEmailSection();\r\n        const customAttributeSection = this.createCustomAttributeSection();\r\n        const pictureSection = this.createPictureSection();\r\n\r\n        return (\r\n            <div\r\n                id='profileSettings'\r\n                aria-labelledby='profileButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.modal.profile'\r\n                            defaultMessage='Profile'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        id='generalSettingsTitle'\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.modal.profile'\r\n                                defaultMessage='Profile'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {nameSection}\r\n                    <div className='divider-light'/>\r\n                    {usernameSection}\r\n                    <div className='divider-light'/>\r\n                    {nicknameSection}\r\n                    <div className='divider-light'/>\r\n                    {positionSection}\r\n                    <div className='divider-light'/>\r\n                    {emailSection}\r\n                    <div className='divider-light'/>\r\n                    {customAttributeSection}\r\n                    {pictureSection}\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(UserSettingsGeneralTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {clearErrors, logError} from 'mattermost-redux/actions/errors';\r\nimport {\r\n    updateMe,\r\n    sendVerificationEmail,\r\n    setDefaultProfileImage,\r\n    uploadProfileImage,\r\n    saveCustomProfileAttribute,\r\n    getCustomProfileAttributeValues,\r\n} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getCustomProfileAttributes, getFeatureFlagValue, getLicense} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport {isEnterpriseLicense} from 'utils/license_utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport UserSettingsGeneralTab from './user_settings_general';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config = getConfig(state);\r\n    const customProfileAttributeFields = getCustomProfileAttributes(state);\r\n\r\n    const requireEmailVerification = config.RequireEmailVerification === 'true';\r\n    const maxFileSize = parseInt(config.MaxFileSize!, 10);\r\n    const ldapFirstNameAttributeSet = config.LdapFirstNameAttributeSet === 'true';\r\n    const ldapLastNameAttributeSet = config.LdapLastNameAttributeSet === 'true';\r\n    const samlFirstNameAttributeSet = config.SamlFirstNameAttributeSet === 'true';\r\n    const samlLastNameAttributeSet = config.SamlLastNameAttributeSet === 'true';\r\n    const ldapNicknameAttributeSet = config.LdapNicknameAttributeSet === 'true';\r\n    const samlNicknameAttributeSet = config.SamlNicknameAttributeSet === 'true';\r\n    const samlPositionAttributeSet = config.SamlPositionAttributeSet === 'true';\r\n    const ldapPositionAttributeSet = config.LdapPositionAttributeSet === 'true';\r\n    const ldapPictureAttributeSet = config.LdapPictureAttributeSet === 'true';\r\n\r\n    const license = getLicense(state);\r\n    const isEnterprise = isEnterpriseLicense(license);\r\n    const enableCustomProfileAttributes = isEnterprise && getFeatureFlagValue(state, 'CustomProfileAttributes') === 'true';\r\n\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n        requireEmailVerification,\r\n        maxFileSize,\r\n        customProfileAttributeFields,\r\n        ldapFirstNameAttributeSet,\r\n        ldapLastNameAttributeSet,\r\n        samlFirstNameAttributeSet,\r\n        samlLastNameAttributeSet,\r\n        ldapNicknameAttributeSet,\r\n        samlNicknameAttributeSet,\r\n        samlPositionAttributeSet,\r\n        ldapPositionAttributeSet,\r\n        ldapPictureAttributeSet,\r\n        enableCustomProfileAttributes,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            logError,\r\n            clearErrors,\r\n            updateMe,\r\n            sendVerificationEmail,\r\n            setDefaultProfileImage,\r\n            uploadProfileImage,\r\n            saveCustomProfileAttribute,\r\n            getCustomProfileAttributeValues,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserSettingsGeneralTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect, type ConnectedProps} from 'react-redux';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getSubscriptionProduct} from 'mattermost-redux/selectors/entities/cloud';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    isCollapsedThreadsEnabled,\r\n    isCollapsedThreadsEnabledForUser,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport {isCallsEnabled, isCallsRingingEnabledOnServer} from 'selectors/calls';\r\n\r\nimport {isEnterpriseOrCloudOrSKUStarterFree} from 'utils/license_utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './user_settings_notifications';\r\nimport UserSettingsNotifications from './user_settings_notifications';\r\n\r\nconst mapStateToProps = (state: GlobalState, props: OwnProps) => {\r\n    // server config, related to server configuration, not the user\r\n    const config = getConfig(state);\r\n\r\n    const sendPushNotifications = config.SendPushNotifications === 'true';\r\n    const enableAutoResponder = config.ExperimentalEnableAutomaticReplies === 'true';\r\n\r\n    const license = getLicense(state);\r\n    const subscriptionProduct = getSubscriptionProduct(state);\r\n\r\n    const isEnterpriseReady = config.BuildEnterpriseReady === 'true';\r\n\r\n    return {\r\n        sendPushNotifications,\r\n        enableAutoResponder,\r\n        isCollapsedThreadsEnabled: props.adminMode && props.userPreferences ? isCollapsedThreadsEnabledForUser(state, props.userPreferences) : isCollapsedThreadsEnabled(state),\r\n        isCallsRingingEnabled: isCallsEnabled(state, '0.17.0') && isCallsRingingEnabledOnServer(state),\r\n        isEnterpriseOrCloudOrSKUStarterFree: isEnterpriseOrCloudOrSKUStarterFree(license, subscriptionProduct, isEnterpriseReady),\r\n        isEnterpriseReady,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    updateMe,\r\n    patchUser,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(UserSettingsNotifications);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ComponentProps} from 'react';\r\nimport React, {useMemo} from 'react';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nimport type {PluginConfigurationAction} from 'types/plugins/user_settings';\r\n\r\nimport './plugin_action.scss';\r\n\r\ntype Props = {\r\n    action?: PluginConfigurationAction;\r\n};\r\n\r\nconst PluginAction = ({\r\n    action,\r\n}: Props) => {\r\n    const props = useMemo<ComponentProps<typeof SectionNotice>>(() => {\r\n        return action ? {\r\n            text: action.text,\r\n            title: action.title,\r\n            primaryButton: {\r\n                onClick: action?.onClick,\r\n                text: action?.buttonText,\r\n            },\r\n        } : {\r\n            text: '',\r\n            title: '',\r\n        };\r\n    }, [action]);\r\n\r\n    if (!action) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={'pluginActionContainer'}>\r\n            <SectionNotice {...props}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PluginAction;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport function getPluginPreferenceKey(pluginId: string) {\r\n    return `pp_${pluginId}`.slice(0, 32);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\n\r\nimport Markdown from 'components/markdown';\r\n\r\nimport type {PluginConfigurationRadioSettingOption} from 'types/plugins/user_settings';\r\n\r\ntype Props = {\r\n    selectedValue: string;\r\n    name: string;\r\n    option: PluginConfigurationRadioSettingOption;\r\n    onSelected: (v: string) => void;\r\n}\r\n\r\nconst markdownOptions = {mentionHighlight: false};\r\n\r\nconst RadioOption = ({\r\n    selectedValue,\r\n    name,\r\n    option,\r\n    onSelected,\r\n}: Props) => {\r\n    const onChange = useCallback(() => onSelected(option.value), [option.value]);\r\n    return (\r\n        <div className={'radio'}>\r\n            <label >\r\n                <input\r\n                    type='radio'\r\n                    name={name}\r\n                    checked={selectedValue === option.value}\r\n                    onChange={onChange}\r\n                />\r\n                {option.text}\r\n            </label>\r\n            <br/>\r\n            {option.helpText && (\r\n                <Markdown\r\n                    message={option.helpText}\r\n                    options={markdownOptions}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RadioOption;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {get as getPreference} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport Markdown from 'components/markdown';\r\n\r\nimport {getPluginPreferenceKey} from 'utils/plugins/preferences';\r\n\r\nimport type {PluginConfigurationRadioSetting} from 'types/plugins/user_settings';\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RadioOption from './radio_option';\r\n\r\ntype Props = {\r\n    setting: PluginConfigurationRadioSetting;\r\n    pluginId: string;\r\n    informChange: (name: string, value: string) => void;\r\n}\r\n\r\nconst RadioInput = ({\r\n    setting,\r\n    pluginId,\r\n    informChange,\r\n}: Props) => {\r\n    const preference = useSelector<GlobalState, string>((state: GlobalState) => getPreference(state, getPluginPreferenceKey(pluginId), setting.name, setting.default));\r\n    const [selectedValue, setSelectedValue] = useState(preference);\r\n\r\n    const onSelected = useCallback((value: string) => {\r\n        setSelectedValue(value);\r\n        informChange(setting.name, value);\r\n    }, [setting.name]);\r\n\r\n    return (\r\n        <fieldset key={setting.name}>\r\n            <legend className='form-legend hidden-label'>\r\n                {setting.title || setting.name}\r\n            </legend>\r\n            {setting.options.map((option) => (\r\n                <RadioOption\r\n                    key={option.value}\r\n                    name={setting.name}\r\n                    option={option}\r\n                    selectedValue={selectedValue}\r\n                    onSelected={onSelected}\r\n                />\r\n            ))}\r\n            {setting.helpText && (\r\n                <div className='mt-5'>\r\n                    <Markdown\r\n                        message={setting.helpText}\r\n                        options={{mentionHighlight: false}}\r\n                    />\r\n                </div>\r\n            )}\r\n        </fieldset>\r\n    );\r\n};\r\n\r\nexport default RadioInput;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect, useMemo, useRef} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {get as getPreference} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\n\r\nimport PluggableErrorBoundary from 'plugins/pluggable/error_boundary';\r\nimport {getPluginPreferenceKey} from 'utils/plugins/preferences';\r\n\r\nimport type {PluginConfigurationSection} from 'types/plugins/user_settings';\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RadioInput from './radio';\r\n\r\ntype Props = {\r\n    pluginId: string;\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    section: PluginConfigurationSection;\r\n}\r\n\r\nconst PluginSetting = ({\r\n    pluginId,\r\n    section,\r\n    activeSection,\r\n    updateSection,\r\n}: Props) => {\r\n    const dispatch = useDispatch();\r\n    const userId = useSelector(getCurrentUserId);\r\n    const preferenceMin = useSelector<GlobalState, string>((state: GlobalState) => getPreference(state, getPluginPreferenceKey(pluginId), section.settings[0].name, section.settings[0].default));\r\n    const toUpdate = useRef<{[name: string]: string}>({});\r\n\r\n    const minDescribe = useMemo(() => {\r\n        const setting = section.settings[0];\r\n        if (setting.type === 'radio') {\r\n            return setting.options.find((v) => v.value === preferenceMin)?.text;\r\n        }\r\n\r\n        return undefined;\r\n    }, [section, preferenceMin]);\r\n\r\n    const onSettingChanged = useCallback((name: string, value: string) => {\r\n        toUpdate.current[name] = value;\r\n    }, []);\r\n\r\n    const updateSetting = useCallback(async () => {\r\n        const preferences = [];\r\n        for (const key of Object.keys(toUpdate.current)) {\r\n            preferences.push({\r\n                user_id: userId,\r\n                category: getPluginPreferenceKey(pluginId),\r\n                name: key,\r\n                value: toUpdate.current[key],\r\n            });\r\n        }\r\n\r\n        if (preferences.length) {\r\n            // Save preferences does not offer any await strategy or error handling\r\n            // so I am leaving this as is for now. We probably should update save\r\n            // preferences and handle any kind of error or network delay here.\r\n            dispatch(savePreferences(userId, preferences));\r\n            section.onSubmit?.(toUpdate.current);\r\n        }\r\n\r\n        updateSection('');\r\n    }, [pluginId, dispatch, section.onSubmit]);\r\n\r\n    useEffect(() => {\r\n        if (activeSection !== section.title) {\r\n            toUpdate.current = {};\r\n        }\r\n    }, [activeSection, section.title]);\r\n\r\n    const inputs = [];\r\n    for (const setting of section.settings) {\r\n        if (setting.type === 'radio') {\r\n            inputs.push(\r\n                <RadioInput\r\n                    key={setting.name}\r\n                    setting={setting}\r\n                    informChange={onSettingChanged}\r\n                    pluginId={pluginId}\r\n                />);\r\n        } else if (setting.type === 'custom') {\r\n            const CustomComponent = setting.component;\r\n            const inputEl = (\r\n                <PluggableErrorBoundary\r\n                    key={setting.name}\r\n                    pluginId={pluginId}\r\n                >\r\n                    <CustomComponent informChange={onSettingChanged}/>\r\n                </PluggableErrorBoundary>\r\n            );\r\n            inputs.push(inputEl);\r\n        }\r\n    }\r\n\r\n    if (!inputs.length) {\r\n        return null;\r\n    }\r\n\r\n    if (section.title === activeSection) {\r\n        return (\r\n            <SettingItemMax\r\n                title={section.title}\r\n                inputs={inputs}\r\n                submit={updateSetting}\r\n                updateSection={updateSection}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            section={section.title}\r\n            title={section.title}\r\n            updateSection={updateSection}\r\n            describe={minDescribe}\r\n            isDisabled={section.disabled}\r\n        />\r\n    );\r\n};\r\n\r\nexport default PluginSetting;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport PluggableErrorBoundary from 'plugins/pluggable/error_boundary';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport PluginAction from './plugin_action';\r\nimport PluginSetting from './plugin_setting';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\ntype Props = {\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    settings: PluginConfiguration;\r\n}\r\n\r\nconst PluginTab = ({\r\n    activeSection,\r\n    closeModal,\r\n    collapseModal,\r\n    settings,\r\n    updateSection,\r\n}: Props) => {\r\n    const intl = useIntl();\r\n\r\n    const headerText = intl.formatMessage(\r\n        {id: 'user.settings.plugins.title', defaultMessage: '{pluginName} Settings'},\r\n        {pluginName: settings.uiName},\r\n    );\r\n\r\n    return (\r\n        <div\r\n            id={`${settings.id}Settings`}\r\n            aria-labelledby={`${settings.id}Button`}\r\n            role='tabpanel'\r\n        >\r\n            <SettingMobileHeader\r\n                closeModal={closeModal}\r\n                collapseModal={collapseModal}\r\n                text={headerText}\r\n            />\r\n            <div className='user-settings'>\r\n                <SettingDesktopHeader text={headerText}/>\r\n                <PluginAction action={settings.action}/>\r\n                <div className='divider-dark first'/>\r\n                {settings.sections.map((v) => {\r\n                    let sectionEl;\r\n                    if ('component' in v) {\r\n                        const CustomComponent = v.component;\r\n                        sectionEl = (\r\n                            <PluggableErrorBoundary\r\n                                pluginId={settings.id}\r\n                            >\r\n                                <CustomComponent/>\r\n                            </PluggableErrorBoundary>\r\n                        );\r\n                    } else {\r\n                        sectionEl = (\r\n                            <PluginSetting\r\n                                pluginId={settings.id}\r\n                                activeSection={activeSection}\r\n                                section={v}\r\n                                updateSection={updateSection}\r\n                            />\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <React.Fragment key={v.title}>\r\n                            {sectionEl}\r\n                            <div className='divider-light'/>\r\n                        </React.Fragment>\r\n                    );\r\n                },\r\n                )}\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PluginTab;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Audit} from '@mattermost/types/audits';\r\n\r\nimport AuditTable from 'components/audit_table';\r\nimport LoadingScreen from 'components/loading_screen';\r\n\r\nimport './access_history_modal.scss';\r\n\r\ntype Props = {\r\n    onHide: () => void;\r\n    actions: {\r\n        getUserAudits: (userId: string, page?: number, perPage?: number) => void;\r\n    };\r\n    userAudits: Audit[];\r\n    currentUserId: string;\r\n}\r\n\r\nconst AccessHistoryModal = ({\r\n    actions: {\r\n        getUserAudits,\r\n    },\r\n    currentUserId,\r\n    onHide,\r\n    userAudits,\r\n}: Props) => {\r\n    useEffect(() => {\r\n        getUserAudits(currentUserId, 0, 200);\r\n    }, [currentUserId, getUserAudits]);\r\n\r\n    let content;\r\n    if (userAudits.length === 0) {\r\n        content = (<LoadingScreen/>);\r\n    } else {\r\n        content = (\r\n            <AuditTable\r\n                audits={userAudits}\r\n                showIp={true}\r\n                showSession={true}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <GenericModal\r\n            id='accessHistoryModal'\r\n            className='a11y__modal access-history-modal modal--scroll'\r\n            modalHeaderText={\r\n                <FormattedMessage\r\n                    id='access_history.title'\r\n                    defaultMessage='Access History'\r\n                />\r\n            }\r\n            modalHeaderTextId='accessHistoryModalLabel'\r\n            show={true}\r\n            onHide={onHide}\r\n            modalLocation='top'\r\n            isStacked={true}\r\n            compassDesign={true}\r\n            ariaLabelledby='accessHistoryModalLabel'\r\n        >\r\n            <div className='access-history-modal__body'>\r\n                {content}\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default React.memo(AccessHistoryModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getUserAudits} from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId, getUserAudits as getCurrentUserAudits} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AccessHistoryModal from './access_history_modal';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        userAudits: getCurrentUserAudits(state) || [],\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getUserAudits,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AccessHistoryModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {formatAsString} from 'utils/i18n';\r\n\r\ntype Props = {\r\n    devicePicture?: string;\r\n    deviceTitle: MessageDescriptor | string;\r\n}\r\n\r\nexport default function DeviceIcon(props: Props) {\r\n    const intl = useIntl();\r\n\r\n    return (\r\n        <i\r\n            className={props.devicePicture}\r\n            title={formatAsString(intl.formatMessage, props.deviceTitle)}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedDate, FormattedMessage, FormattedTime} from 'react-intl';\r\n\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport {getMonthLong} from 'utils/i18n';\r\n\r\ntype Props = {\r\n    locale: string;\r\n    currentSession: Session;\r\n    handleMoreInfo: () => void;\r\n    moreInfo: boolean;\r\n};\r\n\r\nexport default function MoreInfo(props: Props) {\r\n    const {locale, currentSession, handleMoreInfo, moreInfo} = props;\r\n\r\n    if (moreInfo) {\r\n        const firstAccessTime = new Date(currentSession.create_at);\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.firstTime'\r\n                        defaultMessage='First time active: {date}, {time}'\r\n                        values={{\r\n                            date: (\r\n                                <FormattedDate\r\n                                    value={firstAccessTime}\r\n                                    day='2-digit'\r\n                                    month={getMonthLong(locale)}\r\n                                    year='numeric'\r\n                                />\r\n                            ),\r\n                            time: (\r\n                                <FormattedTime\r\n                                    value={firstAccessTime}\r\n                                    hour='2-digit'\r\n                                    minute='2-digit'\r\n                                />\r\n                            ),\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.os'\r\n                        defaultMessage='OS: {os}'\r\n                        values={{\r\n                            os: currentSession.props.os,\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.browser'\r\n                        defaultMessage='Browser: {browser}'\r\n                        values={{\r\n                            browser: currentSession.props.browser,\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.sessionId'\r\n                        defaultMessage='Session ID: {id}'\r\n                        values={{\r\n                            id: currentSession.id,\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <a\r\n            className='theme'\r\n            href='#'\r\n            onClick={handleMoreInfo}\r\n        >\r\n            <FormattedMessage\r\n                id='activity_log.moreInfo'\r\n                defaultMessage='More info'\r\n            />\r\n        </a>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {FormattedDate, FormattedMessage, FormattedTime, defineMessages} from 'react-intl';\r\n\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport {General} from 'mattermost-redux/constants';\r\n\r\nimport {getMonthLong} from 'utils/i18n';\r\n\r\nimport DeviceIcon from './device_icon';\r\nimport MoreInfo from './more_info';\r\n\r\ntype Props = {\r\n\r\n    /**\r\n     * The index of this instance within the list\r\n     */\r\n    index: number;\r\n\r\n    /**\r\n     * The current locale of the user\r\n     */\r\n    locale: string;\r\n\r\n    /**\r\n     * The session that's to be displayed\r\n     */\r\n    currentSession: Session;\r\n\r\n    /**\r\n     * Function to revoke session\r\n     */\r\n    submitRevoke: (sessionId: string, event: React.MouseEvent) => void;\r\n};\r\n\r\ntype State = {\r\n    moreInfo: boolean;\r\n};\r\n\r\ntype SessionInfo = {\r\n    devicePicture?: string;\r\n    deviceTitle: string | MessageDescriptor;\r\n    devicePlatform?: JSX.Element;\r\n};\r\n\r\nexport default class ActivityLog extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            moreInfo: false,\r\n        };\r\n    }\r\n\r\n    handleMoreInfo = (): void => {\r\n        this.setState({moreInfo: true});\r\n    };\r\n\r\n    submitRevoke = (e: React.MouseEvent): void => {\r\n        this.props.submitRevoke(this.props.currentSession.id, e);\r\n    };\r\n\r\n    isMobileSession = (session: Session): boolean => {\r\n        return Boolean(session.device_id && (session.device_id.includes('apple') || session.device_id.includes('android')));\r\n    };\r\n\r\n    sessionInfo = (session: Session): SessionInfo => {\r\n        const sessionInfo: SessionInfo = {\r\n            deviceTitle: 'Unknown',\r\n            devicePlatform: session.props?.platform,\r\n        };\r\n\r\n        const isWindows = session.props?.platform === 'Windows';\r\n        const isMac = session.props?.platform === 'Macintosh';\r\n        const isIPhone = session.props?.platform === 'iPhone';\r\n        const isLinux = session.props?.platform === 'Linux' || session.props?.os?.includes('Linux');\r\n        const isAndroid = session.props?.os?.includes('Android');\r\n        const isDesktopApp = session.props?.browser?.includes('Desktop App');\r\n        const isIPhoneNativeApp = session.device_id?.includes(General.PUSH_NOTIFY_APPLE_REACT_NATIVE);\r\n        const isIPhoneNativeClassicApp = session.device_id?.includes('apple') && !isIPhoneNativeApp;\r\n        const isAndroidNativeApp = session.device_id?.includes(General.PUSH_NOTIFY_ANDROID_REACT_NATIVE);\r\n        const isAndroidNativeClassicApp = session.device_id?.includes('android') && !isAndroidNativeApp;\r\n\r\n        // Set device picture and title\r\n        if (isMac || isIPhone || isIPhoneNativeApp || isIPhoneNativeClassicApp) {\r\n            sessionInfo.devicePicture = 'fa fa-apple';\r\n            sessionInfo.deviceTitle = messages.appleIcon;\r\n        } else if (isWindows) {\r\n            sessionInfo.devicePicture = 'fa fa-windows';\r\n            sessionInfo.deviceTitle = messages.windowsIcon;\r\n        } else if (isAndroid || isAndroidNativeApp || isAndroidNativeClassicApp) {\r\n            sessionInfo.devicePicture = 'fa fa-android';\r\n            sessionInfo.deviceTitle = messages.androidIcon;\r\n        } else if (isLinux) {\r\n            sessionInfo.devicePicture = 'fa fa-linux';\r\n            sessionInfo.deviceTitle = messages.linuxIcon;\r\n        }\r\n\r\n        if (isIPhoneNativeClassicApp) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.iphoneNativeClassicApp'\r\n                    defaultMessage='iPhone Native Classic App'\r\n                />\r\n            );\r\n        } else if (isIPhoneNativeApp) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.iphoneNativeApp'\r\n                    defaultMessage='iPhone Native App'\r\n                />\r\n            );\r\n        } else if (isAndroidNativeClassicApp) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.androidNativeClassicApp'\r\n                    defaultMessage='Android Native Classic App'\r\n                />\r\n            );\r\n        } else if (isAndroidNativeApp) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.androidNativeApp'\r\n                    defaultMessage='Android Native App'\r\n                />\r\n            );\r\n        } else if (isAndroid) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.android'\r\n                    defaultMessage='Android'\r\n                />\r\n            );\r\n        } else if (isDesktopApp) {\r\n            sessionInfo.devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.desktop'\r\n                    defaultMessage='Native Desktop App'\r\n                />\r\n            );\r\n        }\r\n\r\n        return sessionInfo;\r\n    };\r\n\r\n    render(): React.ReactNode {\r\n        const {\r\n            index,\r\n            locale,\r\n            currentSession,\r\n        } = this.props;\r\n\r\n        const lastAccessTime = new Date(currentSession.last_activity_at);\r\n        const sessionInfo = this.sessionInfo(currentSession);\r\n\r\n        return (\r\n            <div\r\n                key={'activityLogEntryKey' + index}\r\n                className='activity-log__table'\r\n            >\r\n                <div className='activity-log__report'>\r\n                    <div className='report__platform'>\r\n                        <DeviceIcon\r\n                            devicePicture={sessionInfo.devicePicture}\r\n                            deviceTitle={sessionInfo.deviceTitle}\r\n                        />\r\n                        {sessionInfo.devicePlatform}\r\n                    </div>\r\n                    <div className='report__info'>\r\n                        <div>\r\n                            <FormattedMessage\r\n                                id='activity_log.lastActivity'\r\n                                defaultMessage='Last activity: {date}, {time}'\r\n                                values={{\r\n                                    date: (\r\n                                        <FormattedDate\r\n                                            value={lastAccessTime}\r\n                                            day='2-digit'\r\n                                            month={getMonthLong(locale)}\r\n                                            year='numeric'\r\n                                        />\r\n                                    ),\r\n                                    time: (\r\n                                        <FormattedTime\r\n                                            value={lastAccessTime}\r\n                                            hour='2-digit'\r\n                                            minute='2-digit'\r\n                                        />\r\n                                    ),\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <MoreInfo\r\n                            locale={locale}\r\n                            currentSession={currentSession}\r\n                            moreInfo={this.state.moreInfo}\r\n                            handleMoreInfo={this.handleMoreInfo}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='activity-log__action'>\r\n                    <button\r\n                        onClick={this.submitRevoke}\r\n                        className='btn btn-primary'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='activity_log.logout'\r\n                            defaultMessage='Log Out'\r\n                        />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst messages = defineMessages({\r\n    androidIcon: {\r\n        id: 'device_icons.android',\r\n        defaultMessage: 'Android Icon',\r\n    },\r\n    appleIcon: {\r\n        id: 'device_icons.apple',\r\n        defaultMessage: 'Apple Icon',\r\n    },\r\n    linuxIcon: {\r\n        id: 'device_icons.linux',\r\n        defaultMessage: 'Linux Icon',\r\n    },\r\n    windowsIcon: {\r\n        id: 'device_icons.windows',\r\n        defaultMessage: 'Windows Icon',\r\n    },\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect, useMemo} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ActivityLog from 'components/activity_log_modal/components/activity_log';\r\n\r\nimport './activity_log_modal.scss';\r\n\r\nexport type Props = {\r\n\r\n    /**\r\n     * The current user id\r\n     */\r\n    currentUserId: string;\r\n\r\n    /**\r\n     * Current user's sessions\r\n     */\r\n    sessions: Session[];\r\n\r\n    /**\r\n     * Current user's locale\r\n     */\r\n    locale: string;\r\n\r\n    /**\r\n     * Function that's called when user closes the modal\r\n     */\r\n    onHide: () => void;\r\n\r\n    actions: {\r\n\r\n        /**\r\n         * Function to refresh sessions from server\r\n         */\r\n        getSessions: (userId: string) => void;\r\n\r\n        /**\r\n         * Function to revoke a particular session\r\n         */\r\n        revokeSession: (userId: string, sessionId: string) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\nconst ActivityLogModal = ({\r\n    currentUserId,\r\n    sessions,\r\n    locale,\r\n    onHide,\r\n    actions: {\r\n        getSessions,\r\n        revokeSession,\r\n    },\r\n}: Props) => {\r\n    const submitRevoke = useCallback((altId: string, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        const modalContent = (e.target as Element)?.closest('.modal-content');\r\n        modalContent?.classList.add('animation--highlight');\r\n        setTimeout(() => {\r\n            modalContent?.classList.remove('animation--highlight');\r\n        }, 1500);\r\n        revokeSession(currentUserId, altId).then(() => {\r\n            getSessions(currentUserId);\r\n        });\r\n    }, [currentUserId, revokeSession, getSessions]);\r\n\r\n    useEffect(() => {\r\n        getSessions(currentUserId);\r\n    }, [currentUserId, getSessions]);\r\n\r\n    const activityList = useMemo(() => {\r\n        return sessions.reduce((array: JSX.Element[], currentSession, index) => {\r\n            if (currentSession.props.type === 'UserAccessToken') {\r\n                return array;\r\n            }\r\n\r\n            array.push(\r\n                <ActivityLog\r\n                    key={currentSession.id}\r\n                    index={index}\r\n                    locale={locale}\r\n                    currentSession={currentSession}\r\n                    submitRevoke={submitRevoke}\r\n                />,\r\n            );\r\n            return array;\r\n        }, []);\r\n    }, [sessions, locale, submitRevoke]);\r\n\r\n    const content = <form>{activityList}</form>;\r\n\r\n    return (\r\n        <GenericModal\r\n            id='activityLogModal'\r\n            className='activity-log-modal modal--scroll'\r\n            modalHeaderText={\r\n                <FormattedMessage\r\n                    id='activity_log.activeSessions'\r\n                    defaultMessage='Active Sessions'\r\n                />\r\n            }\r\n            show={true}\r\n            onHide={onHide}\r\n            ariaLabelledby='activityLogModalLabel'\r\n            modalLocation='top'\r\n            isStacked={true}\r\n            compassDesign={true}\r\n        >\r\n            <div className='activity-log-modal__body'>\r\n                <p className='session-help-text'>\r\n                    <FormattedMessage\r\n                        id='activity_log.sessionsDescription'\r\n                        defaultMessage=\"Sessions are created when you log in through a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the system administrator. To end the session sooner, use the 'Log Out' button.\"\r\n                    />\r\n                </p>\r\n                {content}\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default React.memo(ActivityLogModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getSessions, revokeSession} from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId, getUserSessions} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {getCurrentLocale} from 'selectors/i18n';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ActivityLogModal from './activity_log_modal';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        sessions: getUserSessions(state),\r\n        locale: getCurrentLocale(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getSessions,\r\n            revokeSession,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivityLogModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {getHistory} from 'utils/browser_history';\r\n\r\nconst SECTION_MFA = 'mfa';\r\n\r\ntype Props = {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n\r\n    // Whether or not the current user has MFA enabled\r\n    mfaActive: boolean;\r\n\r\n    // Whether or not the current user can enable MFA based on their authentication type and the server's settings\r\n    mfaAvailable: boolean;\r\n\r\n    // Whether or not this server enforces that all users have MFA\r\n    mfaEnforced: boolean;\r\n\r\n    updateSection: (section: string) => void;\r\n    actions: {deactivateMfa: () => Promise<{error?: {message: string}}>};\r\n}\r\n\r\ntype State = {\r\n    serverError: string|null;\r\n}\r\n\r\nexport default class MfaSection extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            serverError: null,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    public setupMfa = (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n\r\n        getHistory().push('/mfa/setup');\r\n    };\r\n\r\n    public removeMfa = async (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n\r\n        const {error} = await this.props.actions.deactivateMfa();\r\n\r\n        if (error) {\r\n            this.setState({\r\n                serverError: error.message,\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (this.props.mfaEnforced) {\r\n            getHistory().push('/mfa/setup');\r\n            return;\r\n        }\r\n\r\n        this.props.updateSection('');\r\n        this.setState({\r\n            serverError: null,\r\n        });\r\n    };\r\n\r\n    private renderTitle = () => {\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.mfa.title'\r\n                defaultMessage='Multi-factor Authentication'\r\n            />\r\n        );\r\n    };\r\n\r\n    private renderDescription = () => {\r\n        if (this.props.mfaActive) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.security.active'\r\n                    defaultMessage='Active'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.security.inactive'\r\n                defaultMessage='Inactive'\r\n            />\r\n        );\r\n    };\r\n\r\n    private renderContent = () => {\r\n        let content;\r\n\r\n        if (this.props.mfaActive) {\r\n            let buttonText;\r\n\r\n            if (this.props.mfaEnforced) {\r\n                buttonText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.reset'\r\n                        defaultMessage='Reset MFA on Account'\r\n                    />\r\n                );\r\n            } else {\r\n                buttonText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.remove'\r\n                        defaultMessage='Remove MFA from Account'\r\n                    />\r\n                );\r\n            }\r\n\r\n            content = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.removeMfa}\r\n                >\r\n                    {buttonText}\r\n                </a>\r\n            );\r\n        } else {\r\n            content = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.setupMfa}\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.add'\r\n                        defaultMessage='Add MFA to Account'\r\n                    />\r\n                </a>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className='pt-2'>\r\n                {content}\r\n                <br/>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    private renderHelpText = () => {\r\n        if (this.props.mfaActive) {\r\n            if (this.props.mfaEnforced) {\r\n                return (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.requiredHelp'\r\n                        defaultMessage='Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.'\r\n                    />\r\n                );\r\n            }\r\n\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.mfa.removeHelp'\r\n                    defaultMessage='Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.mfa.addHelp'\r\n                defaultMessage='Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.'\r\n            />\r\n        );\r\n    };\r\n\r\n    public render() {\r\n        const title = this.renderTitle();\r\n\r\n        if (!this.props.mfaAvailable) {\r\n            return null;\r\n        }\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section={SECTION_MFA}\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={this.renderContent()}\r\n                extraInfo={this.renderHelpText()}\r\n                serverError={this.state.serverError}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {deactivateMfa} from 'actions/views/mfa';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport MfaSection from './mfa_section';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const license = getLicense(state);\r\n    const config = getConfig(state);\r\n    const mfaLicensed = license && license.IsLicensed === 'true' && license.MFA === 'true';\r\n    const mfaEnabled = config.EnableMultifactorAuthentication === 'true';\r\n    const mfaEnforced = mfaLicensed && config.EnforceMultifactorAuthentication === 'true';\r\n    const user: UserProfile = getCurrentUser(state);\r\n    let mfaActive = false;\r\n    let mfaAvailable = false;\r\n    if (user) {\r\n        mfaActive = (user as any).mfa_active;\r\n        mfaAvailable = mfaEnabled && (user.auth_service === '' || user.auth_service === Constants.LDAP_SERVICE);\r\n    }\r\n    return {\r\n        mfaActive,\r\n        mfaAvailable,\r\n        mfaEnforced,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            deactivateMfa,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MfaSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {UserAccessToken, UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport ExternalLink from 'components/external_link';\r\nimport SaveButton from 'components/save_button';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\r\n\r\nimport {Constants, DeveloperLinks} from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\nimport {isMobile} from 'utils/user_agent';\r\n\r\nconst SECTION_TOKENS = 'tokens';\r\nconst TOKEN_CREATING = 'creating';\r\nconst TOKEN_CREATED = 'created';\r\nconst TOKEN_NOT_CREATING = 'not_creating';\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    active?: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    updateSection: (section: string) => void;\r\n    userAccessTokens: {[tokenId: string]: {description: string; id: string; is_active: boolean}};\r\n    setRequireConfirm: (isRequiredConfirm: boolean, confirmCopyToken: (confirmAction: () => void) => void) => void;\r\n    actions: {\r\n        getUserAccessTokensForUser: (userId: string, page: number, perPage: number) => void;\r\n        createUserAccessToken: (userId: string, description: string) => Promise<ActionResult<UserAccessToken>>;\r\n        revokeUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        enableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        disableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        clearUserAccessTokens: () => void;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    active?: boolean;\r\n    showConfirmModal: boolean;\r\n    newToken?: UserAccessToken | null;\r\n    tokenCreationState?: string;\r\n    tokenError?: React.ReactNode;\r\n    serverError?: string|null;\r\n    saving?: boolean;\r\n    confirmTitle?: React.ReactNode;\r\n    confirmMessage?: ((state: State) => JSX.Element)|null;\r\n    confirmButton?: React.ReactNode;\r\n    confirmComplete?: (() => void)|null;\r\n    confirmHideCancel?: boolean;\r\n}\r\n\r\nexport default class UserAccessTokenSection extends React.PureComponent<Props, State> {\r\n    private minRef: React.RefObject<SettingItemMinComponent>;\r\n    private newtokendescriptionRef: React.RefObject<HTMLInputElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: this.props.active,\r\n            showConfirmModal: false,\r\n            newToken: null,\r\n            tokenCreationState: TOKEN_NOT_CREATING,\r\n            tokenError: '',\r\n            serverError: null,\r\n            saving: false,\r\n        };\r\n        this.newtokendescriptionRef = React.createRef();\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.actions.clearUserAccessTokens();\r\n        const userId = this.props.user ? this.props.user.id : '';\r\n        this.props.actions.getUserAccessTokensForUser(userId, 0, 200);\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps: Props, prevState: State) {\r\n        if (!nextProps.active && prevState.active) {\r\n            return {\r\n                active: nextProps.active,\r\n                showConfirmModal: false,\r\n                newToken: null,\r\n                tokenCreationState: TOKEN_NOT_CREATING,\r\n                tokenError: '',\r\n                serverError: null,\r\n                saving: false,\r\n            };\r\n        }\r\n        return {active: nextProps.active};\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    startCreatingToken = () => {\r\n        this.setState({tokenCreationState: TOKEN_CREATING});\r\n    };\r\n\r\n    stopCreatingToken = () => {\r\n        this.setState({tokenCreationState: TOKEN_NOT_CREATING, saving: false});\r\n    };\r\n\r\n    handleCreateToken = async () => {\r\n        this.handleCancelConfirm();\r\n\r\n        const description = this.newtokendescriptionRef ? this.newtokendescriptionRef.current!.value : '';\r\n\r\n        if (description === '') {\r\n            this.setState({\r\n                tokenError: (\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.nameRequired'\r\n                        defaultMessage='Please enter a description.'\r\n                    />\r\n                ),\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({tokenError: '', saving: true});\r\n        this.props.setRequireConfirm(true, this.confirmCopyToken);\r\n\r\n        const userId = this.props.user ? this.props.user.id : '';\r\n        const {data, error} = await this.props.actions.createUserAccessToken(userId, description);\r\n\r\n        if (data && this.state.tokenCreationState === TOKEN_CREATING) {\r\n            this.setState({tokenCreationState: TOKEN_CREATED, newToken: data, saving: false});\r\n        } else if (error) {\r\n            this.setState({serverError: error.message, saving: false});\r\n        }\r\n    };\r\n\r\n    confirmCopyToken = (confirmAction: () => void) => {\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCopyTitle'\r\n                    defaultMessage='Copied Your Token?'\r\n                />\r\n            ),\r\n            confirmMessage: (state: State) => (\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.confirmCopyMessage'\r\n                        defaultMessage=\"Make sure you have copied and saved the access token below. You won't be able to see it again!\"\r\n                    />\r\n                    <br/>\r\n                    <br/>\r\n                    {state.tokenCreationState === TOKEN_CREATING ? (\r\n                        <div>\r\n                            <strong className='word-break--all'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.tokens.token'\r\n                                    defaultMessage='Access Token: '\r\n                                />\r\n                            </strong>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.tokenLoading'\r\n                                defaultMessage='Loading...'\r\n                            />\r\n                        </div>\r\n                    ) : (\r\n                        <strong className='word-break--all'>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.token'\r\n                                defaultMessage='Access Token: '\r\n                            />\r\n                            {state.newToken!.token}\r\n                        </strong>\r\n                    )}\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCopyButton'\r\n                    defaultMessage='Yes, I have copied the token'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.handleCancelConfirm();\r\n                confirmAction();\r\n            },\r\n            confirmHideCancel: true,\r\n        });\r\n    };\r\n\r\n    handleCancelConfirm = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            confirmTitle: null,\r\n            confirmMessage: null,\r\n            confirmButton: null,\r\n            confirmComplete: null,\r\n            confirmHideCancel: false,\r\n        });\r\n    };\r\n\r\n    confirmCreateToken = () => {\r\n        if (!UserUtils.isSystemAdmin(this.props.user!.roles)) {\r\n            this.handleCreateToken();\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCreateTitle'\r\n                    defaultMessage='Create System Admin Personal Access Token'\r\n                />\r\n            ),\r\n            confirmMessage: () => (\r\n                <div className='alert alert-danger'>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.confirmCreateMessage'\r\n                        defaultMessage='You are generating a personal access token with System Admin permissions. Are you sure want to create this token?'\r\n                    />\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCreateButton'\r\n                    defaultMessage='Yes, Create'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.handleCreateToken();\r\n            },\r\n        });\r\n    };\r\n\r\n    saveTokenKeyPress = (e: React.KeyboardEvent) => {\r\n        if (Keyboard.isKeyPressed(e, Constants.KeyCodes.ENTER)) {\r\n            this.confirmCreateToken();\r\n        }\r\n    };\r\n\r\n    confirmRevokeToken = (tokenId: string) => {\r\n        const token = this.props.userAccessTokens[tokenId];\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmDeleteTitle'\r\n                    defaultMessage='Delete Token?'\r\n                />\r\n            ),\r\n            confirmMessage: () => (\r\n                <div className='alert alert-danger'>\r\n                    <p>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.confirmDelete.description'\r\n                            defaultMessage={'Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action.'}\r\n                        />\r\n                    </p>\r\n                    <p>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.confirmDelete.confirmation'\r\n                            defaultMessage={'Are you sure you want to delete the <b>{description}</b> token?'}\r\n                            values={{\r\n                                description: token.description,\r\n                                b: (chunks) => <b>{chunks}</b>,\r\n                            }}\r\n                        />\r\n                    </p>\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmDeleteButton'\r\n                    defaultMessage='Yes, Delete'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.revokeToken(tokenId);\r\n            },\r\n        });\r\n    };\r\n\r\n    revokeToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.revokeUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n        this.handleCancelConfirm();\r\n    };\r\n\r\n    activateToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.enableUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    deactivateToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.disableUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let tokenListClass = '';\r\n\r\n        if (!this.props.active) {\r\n            const describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.clickToEdit'\r\n                    defaultMessage=\"Click 'Edit' to manage your personal access tokens\"\r\n                />\r\n            );\r\n\r\n            return (\r\n                <SettingItemMin\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.title'\r\n                            defaultMessage='Personal Access Tokens'\r\n                        />\r\n                    }\r\n                    describe={describe}\r\n                    section={SECTION_TOKENS}\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        const tokenList: JSX.Element[] = [];\r\n        Object.values(this.props.userAccessTokens).forEach((token) => {\r\n            if (this.state.newToken && this.state.newToken.id === token.id) {\r\n                return;\r\n            }\r\n\r\n            let activeLink: JSX.Element;\r\n            let activeStatus;\r\n\r\n            if (token.is_active) {\r\n                activeLink = (\r\n                    <a\r\n                        id={token.id + '_deactivate'}\r\n                        href='#'\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.deactivateToken(token.id);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.deactivate'\r\n                            defaultMessage='Disable'\r\n                        />\r\n                    </a>);\r\n            } else {\r\n                activeStatus = (\r\n                    <span className='has-error setting-box__inline-error'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.deactivatedWarning'\r\n                            defaultMessage='(Disabled)'\r\n                        />\r\n                    </span>\r\n                );\r\n                activeLink = (\r\n                    <a\r\n                        id={token.id + '_activate'}\r\n                        href='#'\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.activateToken(token.id);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.activate'\r\n                            defaultMessage='Enable'\r\n                        />\r\n                    </a>\r\n                );\r\n            }\r\n\r\n            tokenList.push(\r\n                <div\r\n                    key={token.id}\r\n                    className='setting-box__item'\r\n                >\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.tokenDesc'\r\n                            defaultMessage='Token Description: '\r\n                        />\r\n                        {token.description}\r\n                        {activeStatus}\r\n                    </div>\r\n                    <div className='setting-box__token-id whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.tokenId'\r\n                            defaultMessage='Token ID: '\r\n                        />\r\n                        {token.id}\r\n                    </div>\r\n                    <div>\r\n                        {activeLink}\r\n                        {' - '}\r\n                        <a\r\n                            id={token.id + '_delete'}\r\n                            href='#'\r\n                            onClick={(e) => {\r\n                                e.preventDefault();\r\n                                this.confirmRevokeToken(token.id);\r\n                            }}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.delete'\r\n                                defaultMessage='Delete'\r\n                            />\r\n                        </a>\r\n                    </div>\r\n                    <hr className='mb-3 mt-3'/>\r\n                </div>,\r\n            );\r\n        });\r\n\r\n        let noTokenText;\r\n        if (tokenList.length === 0) {\r\n            noTokenText = (\r\n                <FormattedMessage\r\n                    key='notokens'\r\n                    id='user.settings.tokens.userAccessTokensNone'\r\n                    defaultMessage='No personal access tokens.'\r\n                />\r\n            );\r\n        }\r\n\r\n        let extraInfo;\r\n        if (isMobile()) {\r\n            extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.description_mobile'\r\n                        defaultMessage='<linkTokens>Personal access tokens</linkTokens> function similarly to session tokens and can be used by integrations to <linkAPI>authenticate against the REST API</linkAPI>. Create new tokens on your desktop.'\r\n                        values={{\r\n                            linkTokens: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href={DeveloperLinks.PERSONAL_ACCESS_TOKENS}\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                            linkAPI: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='https://api.mattermost.com/#tag/authentication'\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </span>\r\n            );\r\n        } else {\r\n            extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.description'\r\n                        defaultMessage='<linkTokens>Personal access tokens</linkTokens> function similarly to session tokens and can be used by integrations to <linkAPI>authenticate against the REST API</linkAPI>.'\r\n                        values={{\r\n                            linkTokens: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href={DeveloperLinks.PERSONAL_ACCESS_TOKENS}\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                            linkAPI: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='https://api.mattermost.com/#tag/authentication'\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let newTokenSection;\r\n        if (this.state.tokenCreationState === TOKEN_CREATING) {\r\n            newTokenSection = (\r\n                <div className='pl-3'>\r\n                    <div className='row'>\r\n                        <label\r\n                            className='col-sm-auto control-label pr-3'\r\n                            htmlFor='newTokenDescription'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.name'\r\n                                defaultMessage='Token Description: '\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-5'>\r\n                            <input\r\n                                id='newTokenDescription'\r\n                                autoFocus={true}\r\n                                ref={this.newtokendescriptionRef}\r\n                                className='form-control'\r\n                                type='text'\r\n                                maxLength={64}\r\n                                onKeyPress={this.saveTokenKeyPress}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div className='pt-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.nameHelp'\r\n                                defaultMessage='Enter a description for your token to remember what it does.'\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label\r\n                                id='clientError'\r\n                                className='has-error mt-2 mb-2'\r\n                            >\r\n                                {this.state.tokenError}\r\n                            </label>\r\n                        </div>\r\n                        <SaveButton\r\n                            savingMessage={\r\n                                <FormattedMessage\r\n                                    id='user.settings.tokens.save'\r\n                                    defaultMessage='Save'\r\n                                />\r\n                            }\r\n                            saving={this.state.saving}\r\n                            onClick={this.confirmCreateToken}\r\n                        />\r\n                        <button\r\n                            className='btn btn-tertiary'\r\n                            onClick={this.stopCreatingToken}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.cancel'\r\n                                defaultMessage='Cancel'\r\n                            />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else if (this.state.tokenCreationState === TOKEN_CREATED) {\r\n            if (tokenList.length === 0) {\r\n                tokenListClass = ' hidden';\r\n            }\r\n\r\n            newTokenSection = (\r\n                <div\r\n                    className='alert alert-warning'\r\n                >\r\n                    <WarningIcon additionalClassName='mr-2'/>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.copy'\r\n                        defaultMessage=\"Please copy the access token below. You won't be able to see it again!\"\r\n                    />\r\n                    <br/>\r\n                    <br/>\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.name'\r\n                            defaultMessage='Token Description: '\r\n                        />\r\n                        {this.state.newToken!.description}\r\n                    </div>\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.id'\r\n                            defaultMessage='Token ID: '\r\n                        />\r\n                        {this.state.newToken!.id}\r\n                    </div>\r\n                    <strong className='word-break--all'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.token'\r\n                            defaultMessage='Access Token: '\r\n                        />\r\n                        {this.state.newToken!.token}\r\n                    </strong>\r\n                </div>\r\n            );\r\n        } else {\r\n            newTokenSection = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.startCreatingToken}\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.create'\r\n                        defaultMessage='Create Token'\r\n                    />\r\n                </a>\r\n            );\r\n        }\r\n\r\n        const inputs = [];\r\n        inputs.push(\r\n            <div\r\n                key='tokensSetting'\r\n                className='pt-2'\r\n            >\r\n                <div key='tokenList'>\r\n                    <div className={'alert alert-transparent' + tokenListClass}>\r\n                        {tokenList}\r\n                        {noTokenText}\r\n                    </div>\r\n                    {newTokenSection}\r\n                </div>\r\n            </div>,\r\n        );\r\n\r\n        return (\r\n            <div>\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.title'\r\n                            defaultMessage='Personal Access Tokens'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    extraInfo={extraInfo}\r\n                    infoPosition='top'\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.props.updateSection}\r\n                    isFullWidth={true}\r\n                    saving={this.state.saving}\r\n                    cancelButtonText={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.close'\r\n                            defaultMessage='Close'\r\n                        />\r\n                    }\r\n                />\r\n                <ConfirmModal\r\n                    title={this.state.confirmTitle}\r\n                    message={this.state.confirmMessage ? this.state.confirmMessage(this.state) : null}\r\n                    confirmButtonText={this.state.confirmButton}\r\n                    show={this.state.showConfirmModal}\r\n                    onConfirm={this.state.confirmComplete || (() => null)}\r\n                    onCancel={this.handleCancelConfirm}\r\n                    hideCancel={this.state.confirmHideCancel}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {\r\n    clearUserAccessTokens,\r\n    createUserAccessToken,\r\n    getUserAccessTokensForUser,\r\n    revokeUserAccessToken,\r\n    enableUserAccessToken,\r\n    disableUserAccessToken,\r\n} from 'mattermost-redux/actions/users';\r\n\r\nimport UserAccessTokenSection from './user_access_token_section';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        userAccessTokens: state.entities.users.myUserAccessTokens,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getUserAccessTokensForUser,\r\n            createUserAccessToken,\r\n            revokeUserAccessToken,\r\n            enableUserAccessToken,\r\n            disableUserAccessToken,\r\n            clearUserAccessTokens,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAccessTokenSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React from 'react';\r\nimport type {IntlShape} from 'react-intl';\r\nimport {FormattedDate, FormattedMessage, FormattedTime, injectIntl} from 'react-intl';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport type {OAuthApp} from '@mattermost/types/integrations';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {PasswordConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport AccessHistoryModal from 'components/access_history_modal';\r\nimport ActivityLogModal from 'components/activity_log_modal';\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport ToggleModalButton from 'components/toggle_modal_button';\r\nimport Input from 'components/widgets/inputs/input/input';\r\n\r\nimport icon50 from 'images/icon50x50.png';\r\nimport Constants from 'utils/constants';\r\nimport {isValidPassword} from 'utils/password';\r\n\r\nimport MfaSection from './mfa_section';\r\nimport UserAccessTokenSection from './user_access_token_section';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst SECTION_MFA = 'mfa';\r\nconst SECTION_PASSWORD = 'password';\r\nconst SECTION_SIGNIN = 'signin';\r\nconst SECTION_APPS = 'apps';\r\nconst SECTION_TOKENS = 'tokens';\r\n\r\ntype Actions = {\r\n    getMe: () => void;\r\n    updateUserPassword: (\r\n        userId: string,\r\n        currentPassword: string,\r\n        newPassword: string\r\n    ) => Promise<ActionResult>;\r\n    getAuthorizedOAuthApps: () => Promise<ActionResult>;\r\n    deauthorizeOAuthApp: (clientId: string) => Promise<ActionResult>;\r\n};\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    activeSection?: string;\r\n    updateSection: (section: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n    canUseAccessTokens: boolean;\r\n    enableOAuthServiceProvider: boolean;\r\n    allowedToSwitchToEmail: boolean;\r\n    enableSignUpWithGitLab: boolean;\r\n    enableSignUpWithGoogle: boolean;\r\n    enableSignUpWithOpenId: boolean;\r\n    enableLdap: boolean;\r\n    enableSaml: boolean;\r\n    enableSignUpWithOffice365: boolean;\r\n    experimentalEnableAuthenticationTransfer: boolean;\r\n    passwordConfig: PasswordConfig;\r\n    militaryTime: boolean;\r\n    actions: Actions;\r\n    intl: IntlShape;\r\n    deleteAccountLink?: string;\r\n};\r\n\r\ntype State = {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n    confirmPassword: string;\r\n    serverError: string | null;\r\n    tokenError: string;\r\n    savingPassword: boolean;\r\n    authorizedApps: OAuthApp[];\r\n};\r\n\r\nexport class SecurityTab extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = this.getDefaultState();\r\n    }\r\n\r\n    getDefaultState() {\r\n        return {\r\n            currentPassword: '',\r\n            newPassword: '',\r\n            confirmPassword: '',\r\n            serverError: '',\r\n            tokenError: '',\r\n            authService: this.props.user.auth_service,\r\n            savingPassword: false,\r\n            authorizedApps: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.enableOAuthServiceProvider) {\r\n            this.loadAuthorizedOAuthApps();\r\n        }\r\n    }\r\n\r\n    loadAuthorizedOAuthApps = async () => {\r\n        const res = await this.props.actions.getAuthorizedOAuthApps();\r\n        if ('data' in res) {\r\n            const {data} = res;\r\n            this.setState({authorizedApps: data, serverError: null});\r\n        } else if ('error' in res) {\r\n            const {error} = res;\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    submitPassword = async () => {\r\n        const user = this.props.user;\r\n        const currentPassword = this.state.currentPassword;\r\n        const newPassword = this.state.newPassword;\r\n\r\n        if (!this.isPasswordValid()) {\r\n            return;\r\n        }\r\n\r\n        this.setState({savingPassword: true});\r\n\r\n        const res = await this.props.actions.updateUserPassword(\r\n            user.id,\r\n            currentPassword,\r\n            newPassword,\r\n        );\r\n        if ('data' in res) {\r\n            this.props.updateSection('');\r\n            this.props.actions.getMe();\r\n            this.setState(this.getDefaultState());\r\n        } else if ('error' in res) {\r\n            const {error: err} = res;\r\n            const state = this.getDefaultState();\r\n            if (err.message) {\r\n                state.serverError = err.message;\r\n            } else {\r\n                state.serverError = err;\r\n            }\r\n            this.setState(state);\r\n        }\r\n    };\r\n\r\n    isPasswordValid = () => {\r\n        if (this.state.currentPassword === '') {\r\n            return false;\r\n        }\r\n\r\n        const {valid, error} = isValidPassword(\r\n            this.state.newPassword,\r\n            this.props.passwordConfig,\r\n        );\r\n        if (!valid && error) {\r\n            return false;\r\n        }\r\n\r\n        if (this.state.newPassword !== this.state.confirmPassword) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    updateCurrentPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({currentPassword: e.target.value});\r\n    };\r\n\r\n    updateNewPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({newPassword: e.target.value});\r\n    };\r\n\r\n    updateConfirmPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({confirmPassword: e.target.value});\r\n    };\r\n\r\n    deauthorizeApp = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n\r\n        const appId = e.currentTarget.getAttribute('data-app') as string;\r\n\r\n        const res = await this.props.actions.deauthorizeOAuthApp(appId);\r\n        if ('data' in res) {\r\n            const authorizedApps = this.state.authorizedApps.filter((app) => {\r\n                return app.id !== appId;\r\n            });\r\n            this.setState({authorizedApps, serverError: null});\r\n        } else if ('error' in res) {\r\n            const {error} = res;\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    handleUpdateSection = (section: string) => {\r\n        if (section) {\r\n            this.props.updateSection(section);\r\n        } else {\r\n            switch (this.props.activeSection) {\r\n            case SECTION_MFA:\r\n            case SECTION_SIGNIN:\r\n            case SECTION_TOKENS:\r\n            case SECTION_APPS:\r\n                this.setState({\r\n                    serverError: null,\r\n                });\r\n                break;\r\n            case SECTION_PASSWORD:\r\n                this.setState({\r\n                    currentPassword: '',\r\n                    newPassword: '',\r\n                    confirmPassword: '',\r\n                    serverError: null,\r\n                });\r\n                break;\r\n            default:\r\n            }\r\n\r\n            this.props.updateSection('');\r\n        }\r\n    };\r\n\r\n    createPasswordSection = () => {\r\n        const inputs = [];\r\n        let submit;\r\n\r\n        const active = this.props.activeSection === SECTION_PASSWORD;\r\n        let max = null;\r\n        if (active) {\r\n            if (this.props.user.auth_service === '') {\r\n                submit = this.submitPassword;\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='currentPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='currentPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.currentPassword'\r\n                                defaultMessage='Current Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='currentPassword'\r\n                                name='currentPassword'\r\n                                autoFocus={true}\r\n                                type='password'\r\n                                onChange={this.updateCurrentPassword}\r\n                                value={this.state.currentPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.currentPassword',\r\n                                    defaultMessage: 'Current Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    if (typeof value !== 'string' || value === '') {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: (\r\n                                                <FormattedMessage\r\n                                                    id='user.settings.security.currentPasswordError'\r\n                                                    defaultMessage='Please enter your current password.'\r\n                                                />\r\n                                            ),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n                inputs.push(\r\n                    <div\r\n                        key='newPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='newPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.newPassword'\r\n                                defaultMessage='New Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='newPassword'\r\n                                name='newPassword'\r\n                                type='password'\r\n                                onChange={this.updateNewPassword}\r\n                                value={this.state.newPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.newPassword',\r\n                                    defaultMessage: 'New Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    const {valid, error} = isValidPassword(\r\n                                        value as string,\r\n                                        this.props.passwordConfig,\r\n                                    );\r\n                                    if (!valid) {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: error,\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n                inputs.push(\r\n                    <div\r\n                        key='retypeNewPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='confirmPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.retypePassword'\r\n                                defaultMessage='Retype New Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='confirmPassword'\r\n                                name='confirmPassword'\r\n                                type='password'\r\n                                onChange={this.updateConfirmPassword}\r\n                                value={this.state.confirmPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.retypePassword',\r\n                                    defaultMessage: 'Retype New Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    if (typeof value !== 'string') {\r\n                                        return undefined;\r\n                                    }\r\n                                    if (this.state.newPassword !== value) {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: (\r\n                                                <FormattedMessage\r\n                                                    id='user.settings.security.passwordMatchError'\r\n                                                    defaultMessage='The new passwords you entered do not match.'\r\n                                                />\r\n                                            ),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else {\r\n                // Map auth service to corresponding formatted message\r\n                const authServiceMessages: Record<string, string> = {\r\n                    [Constants.GITLAB_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordGitlabCantUpdate',\r\n                        defaultMessage: 'Login occurs through GitLab. Password cannot be updated.',\r\n                    }),\r\n                    [Constants.LDAP_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordLdapCantUpdate',\r\n                        defaultMessage: 'Login occurs through AD/LDAP. Password cannot be updated.',\r\n                    }),\r\n                    [Constants.SAML_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordSamlCantUpdate',\r\n                        defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so through your login provider.',\r\n                    }),\r\n                    [Constants.GOOGLE_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordGoogleCantUpdate',\r\n                        defaultMessage: 'Login occurs through Google Apps. Password cannot be updated.',\r\n                    }),\r\n                    [Constants.OFFICE365_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordOffice365CantUpdate',\r\n                        defaultMessage: 'Login occurs through Entra ID. Password cannot be updated.',\r\n                    }),\r\n                    [Constants.MAGIC_LINK_SERVICE]: this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.passwordMagicLinkCantUpdate',\r\n                        defaultMessage: 'Login occurs via magic link. Password cannot be updated.',\r\n                    }),\r\n                };\r\n\r\n                const message = authServiceMessages[this.props.user.auth_service];\r\n                if (message) {\r\n                    inputs.push(\r\n                        <div\r\n                            key='oauthEmailInfo'\r\n                            className='form-group'\r\n                        >\r\n                            <div className='pb-3'>\r\n                                {message}\r\n                            </div>\r\n                        </div>,\r\n                    );\r\n                }\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.password'\r\n                            defaultMessage='Password'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.savingPassword}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                    isValid={this.isPasswordValid()}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe;\r\n\r\n        if (this.props.user.auth_service === '') {\r\n            const d = new Date(this.props.user.last_password_update);\r\n\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.lastUpdated'\r\n                    defaultMessage='Last updated {date} at {time}'\r\n                    values={{\r\n                        date: (\r\n                            <FormattedDate\r\n                                value={d}\r\n                                day='2-digit'\r\n                                month='short'\r\n                                year='numeric'\r\n                            />\r\n                        ),\r\n                        time: (\r\n                            <FormattedTime\r\n                                value={d}\r\n                                hour12={!this.props.militaryTime}\r\n                                hour='2-digit'\r\n                                minute='2-digit'\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginGitlab'\r\n                    defaultMessage='Login done through GitLab'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginLdap'\r\n                    defaultMessage='Login done through AD/LDAP'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginSaml'\r\n                    defaultMessage='Login done through SAML'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginGoogle'\r\n                    defaultMessage='Login done through Google Apps'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OFFICE365_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginOffice365'\r\n                    defaultMessage='Login done through Entra ID'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.MAGIC_LINK_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginMagicLink'\r\n                    defaultMessage='Login done through Magic Link'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.security.password'\r\n                        defaultMessage='Password'\r\n                    />\r\n                }\r\n                describe={describe}\r\n                section={SECTION_PASSWORD}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createSignInSection = () => {\r\n        const user = this.props.user;\r\n\r\n        const active = this.props.activeSection === SECTION_SIGNIN;\r\n        let max = null;\r\n        if (active) {\r\n            let emailOption;\r\n            let gitlabOption;\r\n            let googleOption;\r\n            let office365Option;\r\n            let openidOption;\r\n            let ldapOption;\r\n            let samlOption;\r\n\r\n            if (user.auth_service === '') {\r\n                if (this.props.enableSignUpWithGitLab) {\r\n                    gitlabOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.GITLAB_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchGitlab'\r\n                                    defaultMessage='Switch to Using GitLab SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithGoogle) {\r\n                    googleOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.GOOGLE_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchGoogle'\r\n                                    defaultMessage='Switch to Using Google SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithOffice365) {\r\n                    office365Option = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.OFFICE365_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchOffice365'\r\n                                    defaultMessage='Switch to Using Entra ID SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithOpenId) {\r\n                    openidOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.OPENID_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchOpenId'\r\n                                    defaultMessage='Switch to Using OpenID SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableLdap) {\r\n                    ldapOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_ldap?email=' +\r\n                                    encodeURIComponent(user.email)\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchLdap'\r\n                                    defaultMessage='Switch to Using AD/LDAP'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSaml) {\r\n                    samlOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.SAML_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchSaml'\r\n                                    defaultMessage='Switch to Using SAML SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n            } else if (this.props.allowedToSwitchToEmail && user.auth_service !== Constants.MAGIC_LINK_SERVICE) {\r\n                let link;\r\n                if (user.auth_service === Constants.LDAP_SERVICE) {\r\n                    link =\r\n                        '/claim/ldap_to_email?email=' +\r\n                        encodeURIComponent(user.email);\r\n                } else {\r\n                    link =\r\n                        '/claim/oauth_to_email?email=' +\r\n                        encodeURIComponent(user.email) +\r\n                        '&old_type=' +\r\n                        user.auth_service;\r\n                }\r\n\r\n                emailOption = (\r\n                    <div className='pb-3'>\r\n                        <Link\r\n                            className='btn btn-primary'\r\n                            to={link}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.switchEmail'\r\n                                defaultMessage='Switch to Using Email and Password'\r\n                            />\r\n                        </Link>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            const inputs = [];\r\n            inputs.push(\r\n                <div key='userSignInOption'>\r\n                    {emailOption}\r\n                    {gitlabOption}\r\n                    {googleOption}\r\n                    {office365Option}\r\n                    {openidOption}\r\n                    {ldapOption}\r\n                    {samlOption}\r\n                </div>,\r\n            );\r\n\r\n            let extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oneSignin'\r\n                        defaultMessage='You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.'\r\n                    />\r\n                </span>\r\n            );\r\n\r\n            if (user.auth_service === Constants.MAGIC_LINK_SERVICE) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.security.magicLinkInfo'\r\n                            defaultMessage='Magic Link is the only sign-in method available for this account.'\r\n                        />\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.method',\r\n                        defaultMessage: 'Sign-in Method',\r\n                    })}\r\n                    extraInfo={extraInfo}\r\n                    inputs={inputs}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe = (\r\n            <FormattedMessage\r\n                id='user.settings.security.emailPwd'\r\n                defaultMessage='Email and Password'\r\n            />\r\n        );\r\n        if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.gitlab'\r\n                    defaultMessage='GitLab'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.google'\r\n                    defaultMessage='Google'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OFFICE365_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.office365'\r\n                    defaultMessage='Entra ID'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OPENID_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.openid'\r\n                    defaultMessage='OpenID'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.ldap'\r\n                    defaultMessage='AD/LDAP'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.saml'\r\n                    defaultMessage='SAML'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.MAGIC_LINK_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.magicLink'\r\n                    defaultMessage='Magic Link'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={this.props.intl.formatMessage({\r\n                    id: 'user.settings.security.method',\r\n                    defaultMessage: 'Sign-in Method',\r\n                })}\r\n                describe={describe}\r\n                section={SECTION_SIGNIN}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createOAuthAppsSection = () => {\r\n        const active = this.props.activeSection === SECTION_APPS;\r\n        let max = null;\r\n        if (active) {\r\n            let apps;\r\n            if (\r\n                this.state.authorizedApps &&\r\n                this.state.authorizedApps.length > 0\r\n            ) {\r\n                apps = this.state.authorizedApps.map((app) => {\r\n                    const homepage = (\r\n                        <ExternalLink\r\n                            href={app.homepage}\r\n                            location='user_settings_security'\r\n                        >\r\n                            {app.homepage}\r\n                        </ExternalLink>\r\n                    );\r\n\r\n                    return (\r\n                        <div\r\n                            key={app.id}\r\n                            className='pb-3 authorized-app'\r\n                        >\r\n                            <div className='col-sm-10'>\r\n                                <div className='authorized-app__name'>\r\n                                    {app.name}\r\n                                    <span className='authorized-app__url'>\r\n                                        {' -'} {homepage}\r\n                                    </span>\r\n                                </div>\r\n                                <div className='authorized-app__description'>\r\n                                    {app.description}\r\n                                </div>\r\n                                <div className='authorized-app__deauthorize'>\r\n                                    <a\r\n                                        href='#'\r\n                                        data-app={app.id}\r\n                                        onClick={this.deauthorizeApp}\r\n                                    >\r\n                                        <FormattedMessage\r\n                                            id='user.settings.security.deauthorize'\r\n                                            defaultMessage='Deauthorize'\r\n                                        />\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div className='col-sm-2 pull-right'>\r\n                                <img\r\n                                    alt={app.name}\r\n                                    src={app.icon_url || icon50}\r\n                                />\r\n                            </div>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                });\r\n            } else {\r\n                apps = (\r\n                    <div className='pb-3 authorized-app'>\r\n                        <div className='setting-list__hint'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.noApps'\r\n                                defaultMessage='No OAuth 2.0 Applications are authorized.'\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            const inputs = [];\r\n            let wrapperClass;\r\n            let helpText;\r\n            if (Array.isArray(apps)) {\r\n                wrapperClass = 'authorized-apps__wrapper';\r\n\r\n                helpText = (\r\n                    <div className='authorized-apps__help'>\r\n                        <FormattedMessage\r\n                            id='user.settings.security.oauthAppsHelp'\r\n                            defaultMessage='Applications act on your behalf to access your data based on the permissions you grant them.'\r\n                        />\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            inputs.push(\r\n                <div\r\n                    className={wrapperClass}\r\n                    key='authorizedApps'\r\n                >\r\n                    {apps}\r\n                </div>,\r\n            );\r\n\r\n            const title = (\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oauthApps'\r\n                        defaultMessage='OAuth 2.0 Applications'\r\n                    />\r\n                    {helpText}\r\n                </div>\r\n            );\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={title}\r\n                    inputs={inputs}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                    isFullWidth={true}\r\n                    cancelButtonText={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.close'\r\n                            defaultMessage='Close'\r\n                        />\r\n                    }\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={this.props.intl.formatMessage({\r\n                    id: 'user.settings.security.oauthApps',\r\n                    defaultMessage: 'OAuth 2.0 Applications',\r\n                })}\r\n                describe={\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oauthAppsDescription'\r\n                        defaultMessage=\"Click 'Edit' to manage your OAuth 2.0 Applications\"\r\n                    />\r\n                }\r\n                section={SECTION_APPS}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const user = this.props.user;\r\n\r\n        const passwordSection = this.createPasswordSection();\r\n\r\n        let numMethods = 0;\r\n        numMethods = this.props.enableSignUpWithGitLab ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithGoogle ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithOffice365 ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithOpenId ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableLdap ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSaml ? numMethods + 1 : numMethods;\r\n\r\n        // If there are other sign-in methods and either email is enabled or the user's account is email, then allow switching\r\n        let signInSection;\r\n        if (\r\n            (this.props.allowedToSwitchToEmail || user.auth_service === '') &&\r\n            numMethods > 0 &&\r\n            this.props.experimentalEnableAuthenticationTransfer\r\n        ) {\r\n            signInSection = this.createSignInSection();\r\n        }\r\n\r\n        let oauthSection;\r\n        if (this.props.enableOAuthServiceProvider) {\r\n            oauthSection = this.createOAuthAppsSection();\r\n        }\r\n\r\n        let tokensSection;\r\n        if (this.props.canUseAccessTokens) {\r\n            tokensSection = (\r\n                <UserAccessTokenSection\r\n                    user={this.props.user}\r\n                    active={this.props.activeSection === SECTION_TOKENS}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    updateSection={this.handleUpdateSection}\r\n                    setRequireConfirm={this.props.setRequireConfirm}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='securitySettings'\r\n                aria-labelledby='securityButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.title'\r\n                            defaultMessage='Security Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.security.title'\r\n                                defaultMessage='Security Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {passwordSection}\r\n                    <div className='divider-light'/>\r\n                    <MfaSection\r\n                        active={this.props.activeSection === SECTION_MFA}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        updateSection={this.handleUpdateSection}\r\n                    />\r\n                    <div className='divider-light'/>\r\n                    {oauthSection}\r\n                    <div className='divider-light'/>\r\n                    {tokensSection}\r\n                    <div className='divider-light'/>\r\n                    {signInSection}\r\n                    <div className='divider-dark'/>\r\n                    <br/>\r\n                    <ToggleModalButton\r\n                        className='security-links color--link'\r\n                        modalId='access_history'\r\n                        dialogType={AccessHistoryModal}\r\n                        id='viewAccessHistory'\r\n                    >\r\n                        <i\r\n                            className='icon icon-clock-outline'\r\n                            title={this.props.intl.formatMessage({\r\n                                id: 'user.settings.security.viewHistory.icon',\r\n                                defaultMessage: 'Access History Icon',\r\n                            })}\r\n                            aria-hidden='true'\r\n                        />\r\n                        <FormattedMessage\r\n                            id='user.settings.security.viewHistory'\r\n                            defaultMessage='View Access History'\r\n                        />\r\n                    </ToggleModalButton>\r\n                    <ToggleModalButton\r\n                        className='security-links color--link mt-2'\r\n                        modalId='activity_log'\r\n                        dialogType={ActivityLogModal}\r\n                        id='viewAndLogOutOfActiveSessions'\r\n                    >\r\n                        <i\r\n                            className='icon icon-clock-outline'\r\n                            title={this.props.intl.formatMessage({\r\n                                id: 'user.settings.security.logoutActiveSessions.icon',\r\n                                defaultMessage: 'Active Sessions Icon',\r\n                            })}\r\n                            aria-hidden='true'\r\n                        />\r\n                        <FormattedMessage\r\n                            id='user.settings.security.logoutActiveSessions'\r\n                            defaultMessage='View and Log Out of Active Sessions'\r\n                        />\r\n                    </ToggleModalButton>\r\n                    {this.props.deleteAccountLink && (\r\n                        <>\r\n                            <p/>\r\n                            <ExternalLink\r\n                                className='security-links color--link mt-2 danger'\r\n                                href={this.props.deleteAccountLink}\r\n                                id='deleteAccountLink'\r\n                                location={window.location.href}\r\n                            >\r\n                                <i\r\n                                    className='icon icon-trash-can-outline'\r\n                                    title={this.props.intl.formatMessage({\r\n                                        id: 'user.settings.security.deleteAccountLink.icon',\r\n                                        defaultMessage: 'Delete Account Icon',\r\n                                    })}\r\n                                    aria-hidden='true'\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.deleteAccountLink'\r\n                                    defaultMessage='Delete Your Account'\r\n                                />\r\n                            </ExternalLink>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(SecurityTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {getAuthorizedOAuthApps, deauthorizeOAuthApp} from 'mattermost-redux/actions/integrations';\r\nimport {getMe, updateUserPassword} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getPasswordConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool} from 'mattermost-redux/selectors/entities/preferences';\r\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport SecurityTab from './user_settings_security';\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    activeSection?: string;\r\n    updateSection: (section: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n};\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\r\n    const config = getConfig(state);\r\n\r\n    const tokensEnabled = config.EnableUserAccessTokens === 'true';\r\n    const userHasTokenRole = UserUtils.hasUserAccessTokenRole(ownProps.user.roles) || UserUtils.isSystemAdmin(ownProps.user.roles);\r\n\r\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\r\n    const allowedToSwitchToEmail = config.EnableSignUpWithEmail === 'true' && (config.EnableSignInWithEmail === 'true' || config.EnableSignInWithUsername === 'true');\r\n    const enableSignUpWithGitLab = config.EnableSignUpWithGitLab === 'true';\r\n    const enableSignUpWithGoogle = config.EnableSignUpWithGoogle === 'true';\r\n    const enableSignUpWithOpenId = config.EnableSignUpWithOpenId === 'true';\r\n    const enableLdap = config.EnableLdap === 'true';\r\n    const enableSaml = config.EnableSaml === 'true';\r\n    const enableSignUpWithOffice365 = config.EnableSignUpWithOffice365 === 'true';\r\n    const experimentalEnableAuthenticationTransfer = config.ExperimentalEnableAuthenticationTransfer === 'true';\r\n\r\n    return {\r\n        canUseAccessTokens: tokensEnabled && userHasTokenRole,\r\n        enableOAuthServiceProvider,\r\n        allowedToSwitchToEmail,\r\n        enableSignUpWithGitLab,\r\n        enableSignUpWithGoogle,\r\n        enableSignUpWithOpenId,\r\n        enableLdap,\r\n        enableSaml,\r\n        enableSignUpWithOffice365,\r\n        experimentalEnableAuthenticationTransfer,\r\n        passwordConfig: getPasswordConfig(state),\r\n        militaryTime: getBool(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.USE_MILITARY_TIME, false),\r\n        deleteAccountLink: config.DeleteAccountLink,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getMe,\r\n            updateUserPassword,\r\n            getAuthorizedOAuthApps,\r\n            deauthorizeOAuthApp,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SecurityTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, StylesConfig} from 'react-select';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\ntype Limit = {\r\n    value: number;\r\n    label: string;\r\n};\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => Promise<ActionResult>;\r\n    dmGmLimit: number;\r\n    updateSection: (section: string) => void;\r\n}\r\n\r\ntype State = {\r\n    active: boolean;\r\n    limit: Limit;\r\n    isSaving: boolean;\r\n}\r\n\r\nconst limits: Limit[] = [\r\n    {value: 10, label: '10'},\r\n    {value: 15, label: '15'},\r\n    {value: 20, label: '20'},\r\n    {value: 40, label: '40'},\r\n];\r\n\r\nexport default class LimitVisibleGMsDMs extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: false,\r\n            limit: {value: 20, label: '20'},\r\n            isSaving: false,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (props.active !== state.active) {\r\n            if (props.active && !state.active) {\r\n                return {\r\n                    limit: limits.find((l) => l.value === props.dmGmLimit),\r\n                    active: props.active,\r\n                };\r\n            }\r\n\r\n            return {\r\n                active: props.active,\r\n            };\r\n        } else if (!props.active) {\r\n            return {\r\n                limit: limits.find((l) => l.value === props.dmGmLimit),\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    handleChange = (selected: OnChangeValue<Limit, boolean>) => {\r\n        if (selected && 'value' in selected) {\r\n            this.setState({limit: selected});\r\n        }\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        if (!this.props.userId) {\r\n            return;\r\n        }\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.savePreferences(this.props.userId, [{\r\n            user_id: this.props.userId,\r\n            category: Preferences.CATEGORY_SIDEBAR_SETTINGS,\r\n            name: Preferences.LIMIT_VISIBLE_DMS_GMS,\r\n            value: this.state.limit.value.toString(),\r\n        }]);\r\n\r\n        this.setState({isSaving: false});\r\n\r\n        this.props.updateSection('');\r\n    };\r\n\r\n    renderDescription = () => {\r\n        return (\r\n            <span>{this.state.limit.label}</span>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const title = (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.limitVisibleGMsDMsTitle'\r\n                defaultMessage='Number of direct messages to show'\r\n            />\r\n        );\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section='limitVisibleGMsDMs'\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={\r\n                    <fieldset>\r\n                        <legend className='form-legend hidden-label'>\r\n                            {title}\r\n                        </legend>\r\n                        <ReactSelect\r\n                            className='react-select'\r\n                            classNamePrefix='react-select'\r\n                            id='limitVisibleGMsDMs'\r\n                            options={limits}\r\n                            isClearable={false}\r\n                            onChange={this.handleChange}\r\n                            value={this.state.limit}\r\n                            isSearchable={false}\r\n                            menuPortalTarget={document.body}\r\n                            styles={reactStyles}\r\n                        />\r\n                        <div className='mt-5'>\r\n                            <FormattedMessage\r\n                                id='user.settings.sidebar.limitVisibleGMsDMsDesc'\r\n                                defaultMessage='You can also change these settings in the direct messages sidebar menu.'\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                }\r\n                submit={this.handleSubmit}\r\n                saving={this.state.isSaving}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst reactStyles = {\r\n    menuPortal: (provided) => ({\r\n        ...provided,\r\n        zIndex: 9999,\r\n    }),\r\n} satisfies StylesConfig<Limit, boolean>;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {getVisibleDmGmLimit} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './limit_visible_gms_dms';\r\nimport LimitVisibleGMsDMs from './limit_visible_gms_dms';\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    const userPreferences = ownProps.adminMode && ownProps.userPreferences ? ownProps.userPreferences : undefined;\r\n    return {\r\n        userId: ownProps.adminMode ? ownProps.userId : getCurrentUserId(state),\r\n        dmGmLimit: getVisibleDmGmLimit(state, userPreferences),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LimitVisibleGMsDMs);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => Promise<ActionResult>;\r\n    showUnreadsCategory: boolean;\r\n    updateSection: (section: string) => void;\r\n}\r\n\r\ntype State = {\r\n    active: boolean;\r\n    checked: boolean;\r\n    isSaving: boolean;\r\n}\r\n\r\nexport default class ShowUnreadsCategory extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: false,\r\n            checked: false,\r\n            isSaving: false,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (props.active !== state.active) {\r\n            if (props.active && !state.active) {\r\n                return {\r\n                    checked: props.showUnreadsCategory,\r\n                    active: props.active,\r\n                };\r\n            }\r\n\r\n            return {\r\n                active: props.active,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            checked: e.target.value === 'true',\r\n        });\r\n        a11yFocus(e.target);\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        if (!this.props.userId) {\r\n            // Only for type safety, won't actually happen\r\n            return;\r\n        }\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.savePreferences(this.props.userId, [{\r\n            user_id: this.props.userId,\r\n            category: Preferences.CATEGORY_SIDEBAR_SETTINGS,\r\n            name: Preferences.SHOW_UNREAD_SECTION,\r\n            value: this.state.checked.toString(),\r\n        }]);\r\n\r\n        this.setState({isSaving: false});\r\n\r\n        this.props.updateSection('');\r\n    };\r\n\r\n    renderDescription = () => {\r\n        if (this.props.showUnreadsCategory) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.sidebar.on'\r\n                    defaultMessage='On'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.off'\r\n                defaultMessage='Off'\r\n            />\r\n        );\r\n    };\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.showUnreadsCategoryTitle'\r\n                defaultMessage='Group unread channels separately'\r\n            />\r\n        );\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section='showUnreadsCategory'\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={\r\n                    <fieldset>\r\n                        <legend className='form-legend hidden-label'>\r\n                            {title}\r\n                        </legend>\r\n                        <div className='radio'>\r\n                            <label>\r\n                                <input\r\n                                    data-testid='showUnreadsCategoryOn'\r\n                                    type='radio'\r\n                                    name='showUnreadsCategory'\r\n                                    checked={this.state.checked}\r\n                                    onChange={() => this.setState({checked: true})}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.sidebar.on'\r\n                                    defaultMessage='On'\r\n                                />\r\n                            </label>\r\n                            <br/>\r\n                        </div>\r\n                        <div className='radio'>\r\n                            <label>\r\n                                <input\r\n                                    data-testid='showUnreadsCategoryOff'\r\n                                    type='radio'\r\n                                    name='showUnreadsCategory'\r\n                                    checked={!this.state.checked}\r\n                                    onChange={() => this.setState({checked: false})}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.sidebar.off'\r\n                                    defaultMessage='Off'\r\n                                />\r\n                            </label>\r\n                            <br/>\r\n                        </div>\r\n                        <div className='mt-5'>\r\n                            <FormattedMessage\r\n                                id='user.settings.sidebar.showUnreadsCategoryDesc'\r\n                                defaultMessage='When enabled, all unread channels and direct messages will be grouped together in the sidebar.'\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                }\r\n                submit={this.handleSubmit}\r\n                saving={this.state.isSaving}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {\r\n    shouldShowUnreadsCategory,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './show_unreads_category';\r\nimport ShowUnreadsCategory from './show_unreads_category';\r\n\r\nfunction mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const userPreferences = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        showUnreadsCategory: shouldShowUnreadsCategory(state, userPreferences),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowUnreadsCategory);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\n\r\nimport LimitVisibleGMsDMs from './limit_visible_gms_dms';\r\nimport ShowUnreadsCategory from './show_unreads_category';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nexport interface Props {\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\nexport default function UserSettingsSidebar(props: Props): JSX.Element {\r\n    return (\r\n        <div\r\n            id='sidebarSettings'\r\n            aria-labelledby='sidebarButton'\r\n            role='tabpanel'\r\n        >\r\n            <SettingMobileHeader\r\n                closeModal={props.closeModal}\r\n                collapseModal={props.collapseModal}\r\n                text={\r\n                    <FormattedMessage\r\n                        id='user.settings.sidebar.title'\r\n                        defaultMessage='Sidebar Settings'\r\n                    />\r\n                }\r\n            />\r\n            <div\r\n                id='sidebarTitle'\r\n                className='user-settings'\r\n            >\r\n                <SettingDesktopHeader\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.sidebar.title'\r\n                            defaultMessage='Sidebar Settings'\r\n                        />\r\n                    }\r\n                />\r\n\r\n                <div className='divider-dark first'/>\r\n                <ShowUnreadsCategory\r\n                    active={props.activeSection === 'showUnreadsCategory'}\r\n                    updateSection={props.updateSection}\r\n                    areAllSectionsInactive={props.activeSection === ''}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.userId}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n                <div className='divider-dark'/>\r\n                <LimitVisibleGMsDMs\r\n                    active={props.activeSection === 'limitVisibleGMsDMs'}\r\n                    updateSection={props.updateSection}\r\n                    areAllSectionsInactive={props.activeSection === ''}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.userId}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport UserSettingsSidebar from './user_settings_sidebar';\r\n\r\nexport default UserSettingsSidebar;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport AdvancedTab from './advanced';\r\nimport DisplayTab from './display';\r\nimport GeneralTab from './general';\r\nimport NotificationsTab from './notifications';\r\nimport PluginTab from './plugin';\r\nimport SecurityTab from './security';\r\nimport SidebarTab from './sidebar';\r\n\r\nexport type Props = {\r\n    user: UserProfile;\r\n    activeTab?: string;\r\n    activeSection: string;\r\n    updateSection: (section?: string) => void;\r\n    updateTab: (notifications: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n    pluginSettings: {[tabName: string]: PluginConfiguration};\r\n    userPreferences?: PreferencesType;\r\n    adminMode?: boolean;\r\n};\r\n\r\nexport default function UserSettings(props: Props) {\r\n    if (props.activeTab === 'profile') {\r\n        return (\r\n            <div>\r\n                <GeneralTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    updateTab={props.updateTab}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'security') {\r\n        return (\r\n            <div>\r\n                <SecurityTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    setRequireConfirm={props.setRequireConfirm}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'notifications') {\r\n        return (\r\n            <div>\r\n                <NotificationsTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'display') {\r\n        return (\r\n            <div>\r\n                <DisplayTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    setRequireConfirm={props.setRequireConfirm}\r\n                    adminMode={props.adminMode}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'sidebar') {\r\n        return (\r\n            <div>\r\n                <SidebarTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.user.id}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'advanced') {\r\n        return (\r\n            <div>\r\n                <AdvancedTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    user={props.user}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab && props.pluginSettings[props.activeTab]) {\r\n        return (\r\n            <div>\r\n                <PluginTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    settings={props.pluginSettings[props.activeTab]}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {type ReactNode, useEffect, useState} from 'react';\r\n\r\nconst DEFAULT_MIN_LOADER_DURATION = 1000;\r\n\r\ntype Props = {\r\n    loading: boolean;\r\n    children: ReactNode;\r\n    className?: string;\r\n    onLoaded: () => void;\r\n}\r\n\r\nconst SmartLoader = ({loading, children, className, onLoaded}: Props) => {\r\n    const [timeoutFinished, setTimeoutFinished] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setTimeoutFinished(true);\r\n        }, DEFAULT_MIN_LOADER_DURATION);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!loading && timeoutFinished) {\r\n            onLoaded();\r\n        }\r\n    }, [loading, timeoutFinished, onLoaded]);\r\n\r\n    return loading || !timeoutFinished ? (\r\n        <div className={`SmartLoader ${className}`}>\r\n            {children}\r\n        </div>\r\n    ) : null;\r\n};\r\n\r\nexport default SmartLoader;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport SettingsSidebar from 'components/settings_sidebar';\r\nimport UserSettings from 'components/user_settings';\r\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\r\nimport SmartLoader from 'components/widgets/smart_loader';\r\n\r\nimport {focusElement} from 'utils/a11y_utils';\r\nimport Constants from 'utils/constants';\r\nimport {cmdOrCtrlPressed, isKeyPressed} from 'utils/keyboard';\r\nimport {stopTryNotificationRing} from 'utils/notification_sounds';\r\nimport {isValidUrl} from 'utils/url';\r\nimport {getDisplayName} from 'utils/utils';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport './user_settings_modal.scss';\r\n\r\nexport type OwnProps = {\r\n    userID?: string;\r\n    adminMode?: boolean;\r\n    isContentProductSettings: boolean;\r\n    userPreferences?: PreferencesType;\r\n    activeTab?: string;\r\n}\r\n\r\nexport type Props = OwnProps & {\r\n    intl: IntlShape;\r\n    pluginSettings: {[pluginId: string]: PluginConfiguration};\r\n    user?: UserProfile;\r\n    onExited: () => void;\r\n    focusOriginElement?: string;\r\n    actions: {\r\n        sendVerificationEmail: (email: string) => Promise<ActionResult>;\r\n        getUserPreferences: (userID: string) => Promise<unknown>;\r\n        getUser: (userID: string) => Promise<unknown>;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    active_tab?: string;\r\n    active_section: string;\r\n    showConfirmModal: boolean;\r\n    enforceFocus?: boolean;\r\n    show: boolean;\r\n    resendStatus: string;\r\n    loading: boolean;\r\n};\r\n\r\nclass UserSettingsModal extends React.PureComponent<Props, State> {\r\n    private requireConfirm: boolean;\r\n    private customConfirmAction: ((handleConfirm: () => void) => void) | null;\r\n    private afterConfirm: (() => void) | null;\r\n    private modalBodyRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active_tab: props.activeTab ?? (props.isContentProductSettings ? 'notifications' : 'profile'),\r\n            active_section: '',\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n            show: true,\r\n            resendStatus: '',\r\n            loading: false,\r\n        };\r\n\r\n        this.requireConfirm = false;\r\n\r\n        // Used when settings want to override the default confirm modal with their own\r\n        // If set by a child, it will be called in place of showing the regular confirm\r\n        // modal. It will be passed a function to call on modal confirm\r\n        this.customConfirmAction = null;\r\n        this.afterConfirm = null;\r\n\r\n        this.modalBodyRef = React.createRef();\r\n    }\r\n\r\n    handleResend = (email: string) => {\r\n        this.setState({resendStatus: 'sending'});\r\n\r\n        this.props.actions.sendVerificationEmail(email).then(({data, error: err}) => {\r\n            if (data) {\r\n                this.setState({resendStatus: 'success'});\r\n            } else if (err) {\r\n                this.setState({resendStatus: 'failure'});\r\n            }\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n\r\n        if (this.props.adminMode && this.props.userID) {\r\n            this.setState({loading: true});\r\n\r\n            if (!this.props.userPreferences) {\r\n                this.props.actions.getUserPreferences(this.props.userID);\r\n            }\r\n            if (!this.props.user) {\r\n                this.props.actions.getUser(this.props.userID);\r\n            }\r\n        }\r\n\r\n        if (!this.props.adminMode) {\r\n            this.setState({loading: false});\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        if (this.state.active_tab !== prevState.active_tab) {\r\n            // Scroll to top if user changes tabs\r\n            if (this.modalBodyRef.current) {\r\n                const el = this.modalBodyRef.current as HTMLDivElement;\r\n                el.scrollTop = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    setLoadingFinished = () => {\r\n        this.setState({loading: false});\r\n    };\r\n\r\n    handleKeyDown = (e: KeyboardEvent) => {\r\n        // Ctrl+Shift+A (or Cmd+Shift+A) to close\r\n        if (cmdOrCtrlPressed(e) && e.shiftKey && isKeyPressed(e, Constants.KeyCodes.A)) {\r\n            e.preventDefault();\r\n            this.handleHide();\r\n        }\r\n    };\r\n\r\n    // Called when the close button is pressed on the main modal\r\n    handleHide = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(() => this.handleHide());\r\n            return;\r\n        }\r\n\r\n        // Cancel any ongoing notification sound, if any (from DesktopNotificationSettings)\r\n        stopTryNotificationRing();\r\n        this.setState({show: false});\r\n    };\r\n\r\n    // called after the dialog is fully hidden and faded out\r\n    handleHidden = () => {\r\n        this.setState({\r\n            active_tab: this.props.isContentProductSettings ? 'notifications' : 'profile',\r\n            active_section: '',\r\n        });\r\n        if (this.props.focusOriginElement) {\r\n            focusElement(this.props.focusOriginElement, true);\r\n        }\r\n        this.props.onExited();\r\n    };\r\n\r\n    // Called to hide the settings pane when on mobile\r\n    handleCollapse = () => {\r\n        const el = ReactDOM.findDOMNode(this.modalBodyRef.current) as HTMLDivElement;\r\n        el.closest('.modal-dialog')!.classList.remove('display--content');\r\n\r\n        this.setState({\r\n            active_tab: '',\r\n            active_section: '',\r\n        });\r\n    };\r\n\r\n    handleConfirm = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n        });\r\n        this.requireConfirm = false;\r\n        this.customConfirmAction = null;\r\n\r\n        if (this.afterConfirm) {\r\n            this.afterConfirm();\r\n            this.afterConfirm = null;\r\n        }\r\n    };\r\n\r\n    handleCancelConfirmation = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n        });\r\n        this.afterConfirm = null;\r\n    };\r\n\r\n    showConfirmModal = (afterConfirm: () => void) => {\r\n        if (afterConfirm) {\r\n            this.afterConfirm = afterConfirm;\r\n        }\r\n\r\n        if (this.customConfirmAction) {\r\n            this.customConfirmAction(this.handleConfirm);\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            enforceFocus: false,\r\n        });\r\n    };\r\n\r\n    // Called by settings tabs when their close button is pressed\r\n    closeModal = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(this.closeModal);\r\n        } else {\r\n            this.handleHide();\r\n        }\r\n    };\r\n\r\n    // Called by settings tabs when their back button is pressed\r\n    collapseModal = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(this.collapseModal);\r\n        } else {\r\n            this.handleCollapse();\r\n        }\r\n    };\r\n\r\n    updateTab = (tab?: string, skipConfirm?: boolean) => {\r\n        if (!skipConfirm && this.requireConfirm) {\r\n            this.showConfirmModal(() => this.updateTab(tab, true));\r\n        } else {\r\n            this.setState({\r\n                active_tab: tab,\r\n                active_section: '',\r\n            });\r\n        }\r\n    };\r\n\r\n    updateSection = (section?: string, skipConfirm?: boolean) => {\r\n        if (!skipConfirm && this.requireConfirm) {\r\n            this.showConfirmModal(() => this.updateSection(section, true));\r\n        } else {\r\n            this.setState({active_section: section ?? ''});\r\n        }\r\n    };\r\n\r\n    getUserSettingsTabs = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        return [\r\n            {\r\n                name: 'notifications',\r\n                uiName: formatMessage({id: 'user.settings.modal.notifications', defaultMessage: 'Notifications'}),\r\n                icon: 'icon icon-bell-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.notifications.icon', defaultMessage: 'Notification Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'display',\r\n                uiName: formatMessage({id: 'user.settings.modal.display', defaultMessage: 'Display'}),\r\n                icon: 'icon icon-eye-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.display.icon', defaultMessage: 'Display Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'sidebar',\r\n                uiName: formatMessage({id: 'user.settings.modal.sidebar', defaultMessage: 'Sidebar'}),\r\n                icon: 'icon icon-dock-left',\r\n                iconTitle: formatMessage({id: 'user.settings.sidebar.icon', defaultMessage: 'Sidebar Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'advanced',\r\n                uiName: formatMessage({id: 'user.settings.modal.advanced', defaultMessage: 'Advanced'}),\r\n                icon: 'icon icon-tune',\r\n                iconTitle: formatMessage({id: 'user.settings.advance.icon', defaultMessage: 'Advanced Settings Icon'}),\r\n            },\r\n        ];\r\n    };\r\n\r\n    getProfileSettingsTab = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        return [\r\n            {\r\n                name: 'profile',\r\n                uiName: formatMessage({id: 'user.settings.modal.profile', defaultMessage: 'Profile'}),\r\n                icon: 'icon icon-settings-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.profile.icon', defaultMessage: 'Profile Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'security',\r\n                uiName: formatMessage({id: 'user.settings.modal.security', defaultMessage: 'Security'}),\r\n                icon: 'icon icon-lock-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.security.icon', defaultMessage: 'Security Settings Icon'}),\r\n            },\r\n        ];\r\n    };\r\n\r\n    getPluginsSettingsTab = () => {\r\n        return Object.values(this.props.pluginSettings).map((v) => {\r\n            const useURL = v.icon && (isValidUrl(v.icon) || v.icon.startsWith('/'));\r\n            const className = v.icon ? `icon ${v.icon}` : 'icon icon-power-plug-outline';\r\n            return {\r\n                name: v.id,\r\n                uiName: v.uiName,\r\n                icon: useURL ? {url: v.icon!} : className,\r\n                iconTitle: v.uiName,\r\n            };\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        let modalTitle: string;\r\n        if (this.props.adminMode && this.props.user) {\r\n            modalTitle = formatMessage(\r\n                {id: 'userSettings.adminMode.modal_header', defaultMessage: \"{userDisplayName}'s Settings\"},\r\n                {userDisplayName: getDisplayName(this.props.user)},\r\n            );\r\n        } else if (this.props.isContentProductSettings) {\r\n            modalTitle = formatMessage({id: 'global_header.productSettings', defaultMessage: 'Settings'});\r\n        } else {\r\n            modalTitle = formatMessage({id: 'user.settings.modal.title', defaultMessage: 'Profile'});\r\n        }\r\n\r\n        const headerTitle = (\r\n            <div\r\n                className='UserSettingsModal__headerWrapper'\r\n                id='accountSettingsHeader'\r\n            >\r\n                <span\r\n                    id='accountSettingsModalLabel'\r\n                    className='modal-header__title'\r\n                >\r\n                    {modalTitle}\r\n                </span>\r\n                {this.props.adminMode && (\r\n                    <div className='adminModeBadge'>\r\n                        <FormattedMessage\r\n                            id='userSettings.adminMode.admin_mode_badge'\r\n                            defaultMessage='Admin Mode'\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <GenericModal\r\n                id='accountSettingsModal'\r\n                className='a11y__modal settings-modal UserSettingsModal'\r\n                show={this.state.show}\r\n                onHide={this.handleHide}\r\n                onExited={this.handleHidden}\r\n                ariaLabel={modalTitle}\r\n                compassDesign={true}\r\n                enforceFocus={this.state.enforceFocus}\r\n                bodyPadding={false}\r\n                modalHeaderText={headerTitle}\r\n                modalLocation='top'\r\n                delayFocusTrap={true}\r\n            >\r\n                <div\r\n                    ref={this.modalBodyRef}\r\n                >\r\n                    {/* Admin Mode: wait for user + preferences */}\r\n                    {this.props.adminMode &&\r\n                        <SmartLoader\r\n                            loading={this.props.adminMode && (!this.props.userPreferences || !this.props.user)}\r\n                            className='loadingIndicator'\r\n                            onLoaded={this.setLoadingFinished}\r\n                        >\r\n                            <LoadingSpinner/>\r\n                        </SmartLoader>\r\n                    }\r\n\r\n                    {/* Show content only when not loading */}\r\n                    {!this.state.loading && this.props.user &&\r\n                        <>\r\n                            <div className='settings-table'>\r\n                                <div className='settings-links'>\r\n                                    <SettingsSidebar\r\n                                        tabs={this.props.isContentProductSettings ? this.getUserSettingsTabs() : this.getProfileSettingsTab()}\r\n                                        pluginTabs={this.props.isContentProductSettings ? this.getPluginsSettingsTab() : []}\r\n                                        activeTab={this.state.active_tab}\r\n                                        updateTab={this.updateTab}\r\n                                    />\r\n                                </div>\r\n                                <div className='settings-content minimize-settings'>\r\n                                    <UserSettings\r\n                                        activeTab={this.state.active_tab}\r\n                                        activeSection={this.state.active_section}\r\n                                        updateSection={this.updateSection}\r\n                                        updateTab={this.updateTab}\r\n                                        closeModal={this.closeModal}\r\n                                        collapseModal={this.collapseModal}\r\n                                        setRequireConfirm={(requireConfirm?: boolean, customConfirmAction?: () => () => void) => {\r\n                                            this.requireConfirm = requireConfirm || false;\r\n                                            this.customConfirmAction = customConfirmAction || null;\r\n                                        }}\r\n                                        pluginSettings={this.props.pluginSettings}\r\n                                        user={this.props.user}\r\n                                        adminMode={this.props.adminMode}\r\n                                        userPreferences={this.props.userPreferences}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n\r\n                <ConfirmModal\r\n                    title={formatMessage({id: 'user.settings.modal.confirmTitle', defaultMessage: 'Discard Changes?'})}\r\n                    message={formatMessage({\r\n                        id: 'user.settings.modal.confirmMsg',\r\n                        defaultMessage: 'You have unsaved changes, are you sure you want to discard them?',\r\n                    })}\r\n                    confirmButtonText={formatMessage({\r\n                        id: 'user.settings.modal.confirmBtns',\r\n                        defaultMessage: 'Yes, Discard',\r\n                    })}\r\n                    show={this.state.showConfirmModal}\r\n                    onConfirm={this.handleConfirm}\r\n                    onCancel={this.handleCancelConfirmation}\r\n                />\r\n            </GenericModal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(UserSettingsModal);\r\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-aab027f3.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-84008237.esm.js';\nexport { u as useCreatable } from '../../dist/useCreatable-84008237.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-641ee5b8.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar CreatableSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var creatableProps = useStateManager(props);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\nvar CreatableSelect$1 = CreatableSelect;\n\nexport { CreatableSelect$1 as default };\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useMemo, useCallback } from 'react';\nimport { H as cleanValue, D as valueTernary } from './index-641ee5b8.esm.js';\nimport { g as getOptionValue, b as getOptionLabel } from './Select-aab027f3.esm.js';\n\nvar _excluded = [\"allowCreateWhileLoading\", \"createOptionPosition\", \"formatCreateLabel\", \"isValidNewOption\", \"getNewOptionData\", \"onCreateOption\", \"options\", \"onChange\"];\nvar compareOption = function compareOption() {\n  var inputValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var option = arguments.length > 1 ? arguments[1] : undefined;\n  var accessors = arguments.length > 2 ? arguments[2] : undefined;\n  var candidate = String(inputValue).toLowerCase();\n  var optionValue = String(accessors.getOptionValue(option)).toLowerCase();\n  var optionLabel = String(accessors.getOptionLabel(option)).toLowerCase();\n  return optionValue === candidate || optionLabel === candidate;\n};\nvar builtins = {\n  formatCreateLabel: function formatCreateLabel(inputValue) {\n    return \"Create \\\"\".concat(inputValue, \"\\\"\");\n  },\n  isValidNewOption: function isValidNewOption(inputValue, selectValue, selectOptions, accessors) {\n    return !(!inputValue || selectValue.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }) || selectOptions.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }));\n  },\n  getNewOptionData: function getNewOptionData(inputValue, optionLabel) {\n    return {\n      label: optionLabel,\n      value: inputValue,\n      __isNew__: true\n    };\n  }\n};\nfunction useCreatable(_ref) {\n  var _ref$allowCreateWhile = _ref.allowCreateWhileLoading,\n    allowCreateWhileLoading = _ref$allowCreateWhile === void 0 ? false : _ref$allowCreateWhile,\n    _ref$createOptionPosi = _ref.createOptionPosition,\n    createOptionPosition = _ref$createOptionPosi === void 0 ? 'last' : _ref$createOptionPosi,\n    _ref$formatCreateLabe = _ref.formatCreateLabel,\n    formatCreateLabel = _ref$formatCreateLabe === void 0 ? builtins.formatCreateLabel : _ref$formatCreateLabe,\n    _ref$isValidNewOption = _ref.isValidNewOption,\n    isValidNewOption = _ref$isValidNewOption === void 0 ? builtins.isValidNewOption : _ref$isValidNewOption,\n    _ref$getNewOptionData = _ref.getNewOptionData,\n    getNewOptionData = _ref$getNewOptionData === void 0 ? builtins.getNewOptionData : _ref$getNewOptionData,\n    onCreateOption = _ref.onCreateOption,\n    _ref$options = _ref.options,\n    propsOptions = _ref$options === void 0 ? [] : _ref$options,\n    propsOnChange = _ref.onChange,\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\n  var _restSelectProps$getO = restSelectProps.getOptionValue,\n    getOptionValue$1 = _restSelectProps$getO === void 0 ? getOptionValue : _restSelectProps$getO,\n    _restSelectProps$getO2 = restSelectProps.getOptionLabel,\n    getOptionLabel$1 = _restSelectProps$getO2 === void 0 ? getOptionLabel : _restSelectProps$getO2,\n    inputValue = restSelectProps.inputValue,\n    isLoading = restSelectProps.isLoading,\n    isMulti = restSelectProps.isMulti,\n    value = restSelectProps.value,\n    name = restSelectProps.name;\n  var newOption = useMemo(function () {\n    return isValidNewOption(inputValue, cleanValue(value), propsOptions, {\n      getOptionValue: getOptionValue$1,\n      getOptionLabel: getOptionLabel$1\n    }) ? getNewOptionData(inputValue, formatCreateLabel(inputValue)) : undefined;\n  }, [formatCreateLabel, getNewOptionData, getOptionLabel$1, getOptionValue$1, inputValue, isValidNewOption, propsOptions, value]);\n  var options = useMemo(function () {\n    return (allowCreateWhileLoading || !isLoading) && newOption ? createOptionPosition === 'first' ? [newOption].concat(_toConsumableArray(propsOptions)) : [].concat(_toConsumableArray(propsOptions), [newOption]) : propsOptions;\n  }, [allowCreateWhileLoading, createOptionPosition, isLoading, newOption, propsOptions]);\n  var onChange = useCallback(function (newValue, actionMeta) {\n    if (actionMeta.action !== 'select-option') {\n      return propsOnChange(newValue, actionMeta);\n    }\n    var valueArray = Array.isArray(newValue) ? newValue : [newValue];\n    if (valueArray[valueArray.length - 1] === newOption) {\n      if (onCreateOption) onCreateOption(inputValue);else {\n        var newOptionData = getNewOptionData(inputValue, inputValue);\n        var newActionMeta = {\n          action: 'create-option',\n          name: name,\n          option: newOptionData\n        };\n        propsOnChange(valueTernary(isMulti, [].concat(_toConsumableArray(cleanValue(value)), [newOptionData]), newOptionData), newActionMeta);\n      }\n      return;\n    }\n    propsOnChange(newValue, actionMeta);\n  }, [getNewOptionData, inputValue, isMulti, name, newOption, onCreateOption, propsOnChange, value]);\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\n    options: options,\n    onChange: onChange\n  });\n}\n\nexport { useCreatable as u };\n"],"names":["activateMfa","code","dispatch","getState","currentUserId","getCurrentUserId","UserActions","deactivateMfa","generateMfaSecret","ColorInput","React","constructor","props","super","_defineProperty","e","this","colorPicker","current","contains","target","setState","isOpened","state","colorInput","focus","newColorData","focused","onChange","hex","event","value","color","tinycolor","normalizedColor","toHex","isValid","setSelectionRange","length","key","togglePicker","getDerivedStateFromProps","componentDidUpdate","prevProps","prevState","prevIsOpened","document","addEventListener","checkClick","capture","removeEventListener","render","id","className","concat","ref","type","onBlur","onFocus","onKeyDown","maxLength","disabled","isDisabled","onClick","style","backgroundColor","ChromePicker","handleColorChange","disableAlpha","_pt","isRequired","SettingsSidebar","tab","_closest","preventDefault","updateTab","name","closest","classList","add","isKeyPressed","Constants","KeyCodes","UP","DOWN","visibleTabs","getVisibleTabs","currentIndex","findIndex","t","nextIndex","targetTab","targetButton","buttonRefs","get","Map","_this$props$pluginTab","tabs","filter","display","pluginTabs","renderTab","isActive","activeTab","icon","title","iconTitle","src","url","alt","newGroup","element","set","delete","classNames","active","handleClick","bind","handleKeyDown","uiName","toLowerCase","role","tabIndex","isMobileView","_this$props$pluginTab2","tabList","map","pluginTabList","visiblePluginTabs","FormattedMessage","defaultMessage","connect","getIsMobileView","JoinLeaveSection","currentTarget","joinLeaveState","a11yFocus","section","joinLeave","onUpdateSection","actions","userId","joinLeavePreference","category","Preferences","CATEGORY_ADVANCED_SETTINGS","user_id","ADVANCED_FILTER_JOIN_LEAVE","savePreferences","minRef","focusEditButton","_this$minRef$current","areAllSectionsInactive","SettingItemMax","inputs","AdvancedSections","JOIN_LEAVE","checked","handleOnChange","setting","submit","handleSubmit","saving","isSaving","serverError","updateSection","handleUpdateSection","SettingItemMin","describe","renderOnOffLabel","enableJoinLeaveMessage","getConfig","EnableJoinLeaveMessageByDefault","userPreference","adminMode","userPreferences","undefined","toString","bindActionCreators","PerformanceDebuggingSection","useRef","prevActiveRef","useEffect","_minRef$current","performanceDebuggingEnabled","settings","PerformanceDebuggingSectionExpanded","PerformanceDebuggingSectionCollapsed","Object","assign","propTypes","description","settingsEnabled","disableClientPlugins","disableTypingMessages","values","count","PERFORMANCE_DEBUGGING","setDisableClientPlugins","useState","setDisableTypingMessages","useCallback","preferences","push","CATEGORY_PERFORMANCE_DEBUGGING","NAME_DISABLE_CLIENT_PLUGINS","NAME_DISABLE_TYPING_MESSAGES","mapDispatchToProps","getUserPreferences","getBool","isPerformanceDebuggingEnabled","AdvancedSettingsDisplay","send_on_ctrl_enter","sendOnCtrlEnter","code_block_ctrl_enter","codeBlockOnCtrlEnter","formatting","join_leave","sync_drafts","syncDrafts","UNREAD_SCROLL_POSITION","unreadScrollPosition","showDeactivateAccountModal","_objectSpread","async","user","Array","isArray","forEach","updateUserActive","then","_ref","error","message","data","revokeAllSessionsForUser","emitUserLoggedOutEvent","getStateFromProps","defineMessages","default","mac","isMac","ctrlSendTitle","ctrlSendDesc","activeSection","max","updateSetting","SettingItem","unread_scroll_position","UNREAD_SCROLL_POSITION_START_FROM_LEFT","UNREAD_SCROLL_POSITION_START_FROM_NEWEST","renderUnreadScrollPositionLabel","SYNC_DRAFTS","getCtrlSendText","ctrlSendActive","renderCtrlEnterLabel","enabled","option","ctrlEnter","codeBlockCtrlEnter","ctrlSendSection","renderCtrlSendSection","formattingSection","renderFormattingSection","formattingSectionDivider","deactivateAccountSection","makeConfirmationModal","auth_service","enableUserDeactivation","saveButtonText","saveButtonClassName","handleShowDeactivateAccountModal","confirmButtonClass","deactivateMemberButton","ConfirmModal","show","confirmButtonText","onConfirm","handleDeactivateAccountSubmit","onCancel","handleHideDeactivateAccountModal","unreadScrollPositionSection","renderUnreadScrollPositionSection","unreadScrollPositionSectionDivider","syncDraftsSection","syncDraftsSectionDivider","syncedDraftsAreAllowed","renderSyncDraftsSection","SettingMobileHeader","closeModal","collapseModal","text","SettingDesktopHeader","getAdvancedSettingsCategory","makeGetCategory","getUserAdvancedSettingsCategory","makeGetUserCategory","config","EnableUserDeactivation","advancedSettingsCategory","getCurrentUser","getUnreadScrollPositionPreference","ColorChooser","htmlFor","label","newColor","_props$onChange","call","messages","sidebarBg","sidebarText","sidebarHeaderBg","sidebarTeamBarBg","sidebarHeaderTextColor","sidebarUnreadText","sidebarTextHoverBg","sidebarTextActiveBorder","sidebarTextActiveColor","onlineIndicator","awayIndicator","dndIndicator","mentionBg","mentionColor","centerChannelBg","centerChannelColor","newMessageSeparator","linkColor","buttonBg","buttonColor","errorTextColor","mentionHighlightBg","mentionHighlightLink","codeTheme","CustomThemeChooser","settingId","updateTheme","theme","newTheme","mentionBj","copyTheme","setCopyTheme","window","clipboardData","getData","JSON","parse","err","setThemeDefaults","stringify","stopPropagation","_this$textareaRef$cur","_this$textareaRef$cur2","textareaRef","_this$sidebarStylesHe","_this$sidebarStylesHe2","_this$sidebarStylesHe3","sidebarStylesHeaderRef","toggle","isAccordionOpen","setAttribute","toggleSection","sidebarStylesRef","_this$centerChannelSt","_this$centerChannelSt2","_this$centerChannelSt3","centerChannelStylesHeaderRef","centerChannelStylesRef","_this$linkAndButtonSt","_this$linkAndButtonSt2","_this$linkAndButtonSt3","linkAndButtonStylesHeaderRef","linkAndButtonStylesRef","selectTheme","execCommand","showCopySuccess","copySuccess","querySelector","setTimeout","createRef","image","node","ontransitionend","overflowY","intl","sidebarElements","centerChannelElements","linkAndButtonElements","THEME_ELEMENTS","index","_element$themes","codeThemeOptions","codeThemeURL","themes","codeThemeIndex","iconURL","defaultValue","onCodeThemeChange","WithTooltip","width","group","pasteBox","onCopy","onPaste","pasteBoxChange","onChangeHandle","toggleSidebarStyles","formatMessage","toggleCenterChannelStyles","toggleLinkAndButtonStyles","injectIntl","ThemeThumbnail","themeName","themeKey","height","viewBox","fill","xmlns","x","y","rx","cx","cy","r","PremadeThemeChooser","allowedThemes","premadeThemes","hasAllowedThemes","trim","k","THEMES","hasOwn","_premadeTheme$type","indexOf","premadeTheme","activeClass","replace","changeOpacity","toTitleCase","AllowedThemes","split","ThemeSetting","_this$props$setRequir","_this$props","teamId","applyToAllTeams","currentTeamId","saveTheme","deleteTeamSpecificThemes","setRequireConfirm","originalTheme","_this$props$setRequir2","_this$props2","themeChanged","field","applyTheme","_this$props$setRequir3","_this$props3","selected","resetFields","componentWillUnmount","arguments","DEFAULT_CODE_THEME","showAllTeamsCheckbox","displayCustom","custom","premade","themeUI","allowCustomThemes","updateType","ExternalLink","href","location","allTeamsCheckbox","submitExtra","submitTheme","disableEnterSubmit","isFullWidth","getCurrentTeamId","getTheme","getThemePreferences","getMyTeamsCount","openModal","UserSettingsTheme","ManageLanguage","modalBody","ESCAPE","openMenu","remove","ENTER","selectedOption","locale","submitUser","patchUser","updateMe","res","Error","userLocale","locales","reactSelectContainer","componentDidMount","handleContainerKeyDown","options","keys","l","order","sort","a","b","lang","reactStyles","menuPortal","provided","zIndex","interfaceLanguageLabelAria","input","ReactSelect","classNamePrefix","ariaLiveMessages","menuIsOpen","menuPortalTarget","body","styles","isClearable","setLanguage","onMenuClose","handleMenuClose","onMenuOpen","handleMenuOpen","link","msg","changeLanguage","getLanguages","ManageLanguages","ManageTimezones","manualTimezone","useAutomaticTimezone","automaticTimezone","oldUseAutomaticTimezone","oldAutomaticTimezone","oldManualTimezone","timezoneNotChanged","timezone","updatedUser","timezoneLabel","selectedOptionValue","getBrowserTimezone","getTimezoneLabel","timezones","previousTimezone","timeOptions","timeObject","_previousTimezone","utc","noTimezonesFromServer","automaticTimezoneInput","handleAutomaticTimezone","manualTimezoneInput","containerStyle","changeTimezone","getCurrentTimezoneLabel","RenderEmoticonsAsEmoji","renderEmoticonsAsEmoji","setValue","setIsSaving","handleChange","submitPreference","pref","CATEGORY_DISPLAY_SETTINGS","RENDER_EMOTICONS_AS_EMOJI","changePreference","inputId","messageId","_ref2","getDisplayStateFromProps","militaryTime","teammateNameDisplay","availabilityStatusOnPosts","channelDisplayMode","messageDisplay","colorizeUsernames","collapseDisplay","collapsedReplyThreads","linkPreviewDisplay","lastActiveDisplay","oneClickReactionsOnPosts","clickToReply","UserSettingsDisplay","show_last_active","timePreference","USE_MILITARY_TIME","availabilityStatusOnPostsPreference","AVAILABILITY_STATUS_ON_POSTS","teammateNameDisplayPreference","NAME_NAME_FORMAT","channelDisplayModePreference","CHANNEL_DISPLAY_MODE","messageDisplayPreference","MESSAGE_DISPLAY","colorizeUsernamesPreference","COLORIZE_USERNAMES","collapseDisplayPreference","COLLAPSE_DISPLAY","collapsedReplyThreadsPreference","COLLAPSED_REPLY_THREADS","linkPreviewDisplayPreference","LINK_PREVIEW_DISPLAY","oneClickReactionsOnPostsPreference","ONE_CLICK_REACTIONS_ENABLED","clickToReplyPreference","CLICK_TO_REPLY","updateState","newState","deepEqual","prevSections","clock","linkpreview","message_display","channel_display_mode","languages","shouldAutoUpdateTimezone","autoUpdateTimezone","handleChannelDisplayModeRadio","handlemessageDisplayRadio","handleCollapseRadio","handleCollapseReplyThreadsRadio","handleLastActiveRadio","handleLinkPreviewRadio","createSection","_firstOption$radionBu","_secondOption$radionB","firstOption","secondOption","thirdOption","onSubmit","extraInfo","firstMessage","radionButtonText","moreColon","firstMessageMore","more","secondMessage","secondMessageMore","thirdMessage","messageTitle","messageDesc","format","childOptionToShow","childOption","firstDisplay","secondDisplay","thirdSection","childOptionSection","thirdDisplay","childDisplay","collapseSection","defaultDisplay","defineMessage","linkPreviewSection","enableLinkPreviews","lastActiveSection","lastActiveTimeEnabled","submitLastActive","clockSection","teammateNameDisplaySection","lockTeammateNameDisplay","configTeammateNameDisplay","TEAMMATE_NAME_DISPLAY","SHOW_USERNAME","SHOW_NICKNAME_FULLNAME","SHOW_FULLNAME","availabilityStatusOnPostsSection","timezoneSelection","userTimezone","Boolean","messageDisplaySection","MESSAGE_DISPLAY_CLEAN","MESSAGE_DISPLAY_COMPACT","collapsedReplyThreadsAllowUserPreference","COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT","COLLAPSED_REPLY_THREADS_ON","COLLAPSED_REPLY_THREADS_OFF","channelDisplayModeSection","CHANNEL_DISPLAY_MODE_FULL_SCREEN","CHANNEL_DISPLAY_MODE_CENTERED","languagesSection","localeName","getLanguageInfo","themeSection","oneClickReactionsOnPostsSection","enableThemeSelection","emojiPickerEnabled","renderEmoticonsAsEmojiSection","_user$props","getTimezoneForUserProfile","getCurrentTimezoneFull","automaticTimezoneNotSet","generateCurrentTimezoneLabel","getUserCurrentTimezone","AllowCustomThemes","EnableLinkPreviews","EnableThemeSelection","getLicense","LockTeammateNameDisplay","TeammateNameDisplay","EnableEmojiPicker","EnableLastActiveTime","getUser","isLanguageAvailable","DefaultClientLocale","AVAILABILITY_STATUS_ON_POSTS_DEFAULT","USE_MILITARY_TIME_DEFAULT","CHANNEL_DISPLAY_MODE_DEFAULT","MESSAGE_DISPLAY_DEFAULT","COLORIZE_USERNAMES_DEFAULT","COLLAPSE_DISPLAY_DEFAULT","isCollapsedThreadsAllowed","CollapsedThreads","ALWAYS_ON","getCollapsedThreadsPreference","CLICK_TO_REPLY_DEFAULT","LINK_PREVIEW_DISPLAY_DEFAULT","ONE_CLICK_REACTIONS_ENABLED_DEFAULT","RENDER_EMOTICONS_AS_EMOJI_DEFAULT","SettingPicture","Component","_this$props$updateSec","removeSrc","setDefaultSrc","confirmButton","_this$props$onRemove","loadingPicture","onRemove","_this$props$onSetDefa","onSetDefault","_this$props$onSubmit","_this$props4","focusFirstElement","_this$props$onFileCha","_this$props5","onFileChange","selectInput","click","file","previewBlob","URL","createObjectURL","reader","FileReader","onload","orientation","FileUtils","result","orientationStyles","readAsArrayBuffer","imageContext","imageStyles","backgroundImage","defaultImageSrc","_title","imageElement","handler","handleRemoveSrc","handleSetDefaultSrc","settingList","_this$settingList$cur","handleFileSelected","setPicture","revokeObjectURL","img","renderImg","imgRender","buttonRender","disableSaveButtonFocus","submitActive","accept","ACCEPT_STATIC_IMAGE","handleFileChange","handleInputFile","localizeMessage","handleSave","LoadingWrapper","loading","helpText","FormError","errors","clientError","handleCancel","holders","usernameReserved","usernameGroupNameUniqueness","usernameRestrictions","validEmail","validUrl","emailMatch","incorrectPassword","emptyPassword","validImage","imageTooLarge","uploadImage","uploadImageMobile","fullName","nickname","username","profilePicture","close","position","selectStyles","valueContainer","baseStyles","minHeight","flexWrap","whiteSpace","multiValue","margin","control","multiValueLabel","padding","UserSettingsGeneralTab","PureComponent","email","resendStatus","showSpinner","sendVerificationEmail","handleEmailResend","firstName","lastName","first_name","last_name","confirmEmail","currentPassword","password","isEmail","emailUpdated","sectionIsSaving","requireEmailVerification","clearErrors","logError","AnnouncementBarMessages","EMAIL_VERIFICATION_REQUIRED","AnnouncementBarTypes","SUCCESS","errorBarMode","LogErrorBarMode","Always","server_error_id","emailError","setDefaultProfileImage","pictureError","pictureFile","AcceptedProfileImageTypes","includes","size","maxFileSize","uploadProfileImage","_ref3","setupInitialState","_this$state$customAtt","attributeID","attributeField","customProfileAttributeFields","find","attributeValue","customAttributeValues","attrs","value_type","validURL","validHttpUrl","validLink","endsWith","slice","saveCustomProfileAttribute","_ref4","files","action","fieldID","attributeValues","substring","LDAP_SERVICE","ldapFirstNameAttributeSet","ldapLastNameAttributeSet","SAML_SERVICE","samlFirstNameAttributeSet","samlLastNameAttributeSet","OAUTH_SERVICES","Input","autoFocus","updateFirstName","MAX_FIRSTNAME_LENGTH","Utils","updateLastName","MAX_LASTNAME_LENGTH","notifClick","notifLink","notify","submitName","ldapNicknameAttributeSet","samlNicknameAttributeSet","nicknameLabel","updateNickname","MAX_NICKNAME_LENGTH","autoCapitalize","submitNickname","usernameLabel","MAX_USERNAME_LENGTH","updateUsername","validate","usernameError","ValidationErrors","RESERVED_NAME","min","MIN_USERNAME_LENGTH","submitUsername","ldapPositionAttributeSet","samlPositionAttributeSet","positionLabel","updatePosition","MAX_POSITION_LENGTH","submitPosition","attributeSections","attribute","_this$props$user$cust","sectionName","getDisplayValue","attribOptions","o","_attribute$attrs3","_attribute$attrs4","_attribute$attrs5","_attribute$attrs","_attribute$attrs2","ldap","saml","managed","attributeLabel","opts","isMulti","isSearchable","placeholder","components","IndicatorSeparator","v","updateSelectAttribute","inputType","updateAttribute","MAX_CUSTOM_ATTRIBUTE_LENGTH","submitAttribute","custom_profile_attributes","_this$props$user$cust2","FormattedList","attrib","setDefault","imgSrc","ldapPictureAttributeSet","submitPicture","last_picture_update","setDefaultProfilePicture","updatePicture","minMessage","date","FormattedDate","Date","day","month","year","renderPictureStatus","enableCustomProfileAttributes","getCustomProfileAttributeValues","originalEmail","createEmailSection","emailVerificationEnabled","updateEmail","MAX_EMAIL_LENGTH","updateConfirmEmail","updateCurrentPassword","submitEmail","GITLAB_SERVICE","GOOGLE_SERVICE","OFFICE365_SERVICE","OPENID_SERVICE","isEmailValid","nameSection","createNameSection","nicknameSection","createNicknameSection","usernameSection","createUsernameSection","positionSection","createPositionSection","emailSection","customAttributeSection","createCustomAttributeSection","pictureSection","createPictureSection","getCustomProfileAttributes","RequireEmailVerification","parseInt","MaxFileSize","LdapFirstNameAttributeSet","LdapLastNameAttributeSet","SamlFirstNameAttributeSet","SamlLastNameAttributeSet","LdapNicknameAttributeSet","SamlNicknameAttributeSet","SamlPositionAttributeSet","LdapPositionAttributeSet","LdapPictureAttributeSet","license","isEnterpriseLicense","getFeatureFlagValue","mapStateToProps","sendPushNotifications","SendPushNotifications","enableAutoResponder","ExperimentalEnableAutomaticReplies","subscriptionProduct","getSubscriptionProduct","isEnterpriseReady","BuildEnterpriseReady","isCollapsedThreadsEnabled","isCollapsedThreadsEnabledForUser","isCallsRingingEnabled","isCallsEnabled","isCallsRingingEnabledOnServer","isEnterpriseOrCloudOrSKUStarterFree","UserSettingsNotifications","useMemo","primaryButton","buttonText","SectionNotice","getPluginPreferenceKey","pluginId","markdownOptions","mentionHighlight","RadioOption","selectedValue","onSelected","Markdown","RadioInput","informChange","preference","useSelector","getPreference","setSelectedValue","PluginSetting","useDispatch","preferenceMin","toUpdate","minDescribe","_setting$options$find","onSettingChanged","_section$onSubmit","CustomComponent","component","inputEl","PluggableErrorBoundary","PluginTab","headerText","useIntl","pluginName","PluginAction","sections","sectionEl","AccessHistoryModal","content","getUserAudits","onHide","userAudits","LoadingScreen","AuditTable","audits","showIp","showSession","GenericModal","modalHeaderText","modalHeaderTextId","modalLocation","isStacked","compassDesign","ariaLabelledby","getCurrentUserAudits","DeviceIcon","devicePicture","formatAsString","deviceTitle","MoreInfo","currentSession","handleMoreInfo","moreInfo","firstAccessTime","create_at","getMonthLong","time","FormattedTime","hour","minute","os","browser","ActivityLog","submitRevoke","session","device_id","_session$props","_session$props2","_session$props3","_session$props4","_session$props5","_session$props6","_session$props6$os","_session$props7","_session$props7$os","_session$props8","_session$props8$brows","_session$device_id","_session$device_id2","_session$device_id3","_session$device_id4","sessionInfo","devicePlatform","platform","isWindows","isIPhone","isLinux","isAndroid","isDesktopApp","isIPhoneNativeApp","General","PUSH_NOTIFY_APPLE_REACT_NATIVE","isIPhoneNativeClassicApp","isAndroidNativeApp","PUSH_NOTIFY_ANDROID_REACT_NATIVE","isAndroidNativeClassicApp","appleIcon","windowsIcon","androidIcon","linuxIcon","lastAccessTime","last_activity_at","ActivityLogModal","sessions","getSessions","revokeSession","altId","_e$target","modalContent","activityList","reduce","array","getUserSessions","getCurrentLocale","MfaSection","getHistory","mfaEnforced","mfaActive","removeMfa","setupMfa","renderTitle","mfaAvailable","renderContent","renderHelpText","renderDescription","mfaLicensed","IsLicensed","MFA","mfaEnabled","EnableMultifactorAuthentication","EnforceMultifactorAuthentication","mfa_active","TOKEN_CREATING","TOKEN_CREATED","TOKEN_NOT_CREATING","UserAccessTokenSection","tokenCreationState","handleCancelConfirm","newtokendescriptionRef","tokenError","confirmCopyToken","createUserAccessToken","newToken","confirmAction","showConfirmModal","confirmTitle","confirmMessage","token","confirmComplete","confirmHideCancel","UserUtils","roles","handleCreateToken","Keyboard","confirmCreateToken","tokenId","userAccessTokens","chunks","revokeToken","revokeUserAccessToken","enableUserAccessToken","disableUserAccessToken","clearUserAccessTokens","getUserAccessTokensForUser","nextProps","tokenListClass","tokenList","noTokenText","newTokenSection","activeLink","activeStatus","is_active","deactivateToken","activateToken","confirmRevokeToken","isMobile","linkTokens","DeveloperLinks","PERSONAL_ACCESS_TOKENS","linkAPI","onKeyPress","saveTokenKeyPress","SaveButton","savingMessage","stopCreatingToken","WarningIcon","additionalClassName","startCreatingToken","infoPosition","cancelButtonText","hideCancel","entities","users","myUserAccessTokens","SECTION_PASSWORD","SECTION_SIGNIN","SECTION_APPS","SECTION_TOKENS","SecurityTab","getAuthorizedOAuthApps","authorizedApps","newPassword","isPasswordValid","savingPassword","updateUserPassword","getMe","getDefaultState","valid","isValidPassword","passwordConfig","confirmPassword","appId","getAttribute","deauthorizeOAuthApp","app","submitPassword","updateNewPassword","updateConfirmPassword","MAGIC_LINK_SERVICE","d","last_password_update","hour12","emailOption","gitlabOption","googleOption","office365Option","openidOption","ldapOption","samlOption","enableSignUpWithGitLab","Link","to","encodeURIComponent","enableSignUpWithGoogle","enableSignUpWithOffice365","enableSignUpWithOpenId","enableLdap","enableSaml","allowedToSwitchToEmail","apps","homepage","deauthorizeApp","icon_url","icon50","wrapperClass","authService","enableOAuthServiceProvider","loadAuthorizedOAuthApps","passwordSection","createPasswordSection","signInSection","oauthSection","tokensSection","numMethods","experimentalEnableAuthenticationTransfer","createSignInSection","createOAuthAppsSection","canUseAccessTokens","ToggleModalButton","modalId","dialogType","deleteAccountLink","ownProps","tokensEnabled","EnableUserAccessTokens","userHasTokenRole","EnableOAuthServiceProvider","EnableSignUpWithEmail","EnableSignInWithEmail","EnableSignInWithUsername","EnableSignUpWithGitLab","EnableSignUpWithGoogle","EnableSignUpWithOpenId","EnableLdap","EnableSaml","EnableSignUpWithOffice365","ExperimentalEnableAuthenticationTransfer","getPasswordConfig","DeleteAccountLink","limits","LimitVisibleGMsDMs","limit","CATEGORY_SIDEBAR_SETTINGS","LIMIT_VISIBLE_DMS_GMS","dmGmLimit","getVisibleDmGmLimit","ShowUnreadsCategory","SHOW_UNREAD_SECTION","showUnreadsCategory","shouldShowUnreadsCategory","UserSettingsSidebar","UserSettings","GeneralTab","NotificationsTab","DisplayTab","SidebarTab","AdvancedTab","pluginSettings","SmartLoader","children","onLoaded","timeoutFinished","setTimeoutFinished","UserSettingsModal","_props$activeTab","cmdOrCtrlPressed","shiftKey","A","handleHide","requireConfirm","stopTryNotificationRing","active_tab","isContentProductSettings","active_section","focusOriginElement","focusElement","onExited","ReactDOM","modalBodyRef","enforceFocus","customConfirmAction","afterConfirm","handleConfirm","handleCollapse","skipConfirm","useURL","isValidUrl","startsWith","userID","scrollTop","modalTitle","userDisplayName","getDisplayName","headerTitle","handleHidden","ariaLabel","bodyPadding","delayFocusTrap","setLoadingFinished","LoadingSpinner","getUserSettingsTabs","getProfileSettingsTab","getPluginsSettingsTab","handleCancelConfirmation","CreatableSelect$1","forwardRef","creatableProps","u","selectProps","S","_excluded","compareOption","accessors","candidate","String","optionValue","getOptionValue","optionLabel","getOptionLabel","builtins","formatCreateLabel","inputValue","isValidNewOption","selectValue","selectOptions","some","getNewOptionData","__isNew__","useCreatable","_ref$allowCreateWhile","allowCreateWhileLoading","_ref$createOptionPosi","createOptionPosition","_ref$formatCreateLabe","_ref$isValidNewOption","_ref$getNewOptionData","onCreateOption","_ref$options","propsOptions","propsOnChange","restSelectProps","_restSelectProps$getO","getOptionValue$1","g","_restSelectProps$getO2","getOptionLabel$1","isLoading","newOption","newValue","actionMeta","valueArray","newOptionData","newActionMeta"],"sourceRoot":""}