{"version":3,"file":"8498.6db59af624d575a13686.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/add_groups_to_channel_modal/add_groups_to_channel_modal.tsx","webpack://mattermost-webapp/./src/components/add_groups_to_channel_modal/index.ts","webpack://mattermost-webapp/./src/components/add_groups_to_team_modal/add_groups_to_team_modal.tsx","webpack://mattermost-webapp/./src/components/add_groups_to_team_modal/index.ts","webpack://mattermost-webapp/./src/components/common/hooks/useGetUsageDeltas.ts","webpack://mattermost-webapp/./src/components/common/svg_images_components/magnifying_glass_svg.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/checkbox_checked_icon.tsx","webpack://mattermost-webapp/./src/types/actions.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {Modal} from 'react-bootstrap';\r\nimport type {IntlShape} from 'react-intl';\r\nimport {injectIntl, FormattedMessage, defineMessage} from 'react-intl';\r\n\r\nimport type {ServerError} from '@mattermost/types/errors';\r\nimport type {Group, GroupSource, SyncablePatch} from '@mattermost/types/groups';\r\nimport {SyncableType} from '@mattermost/types/groups';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport MultiSelect from 'components/multiselect/multiselect';\r\nimport type {Value} from 'components/multiselect/multiselect';\r\n\r\nimport groupsAvatar from 'images/groups-avatar.png';\r\nimport Constants from 'utils/constants';\r\n\r\nconst GROUPS_PER_PAGE = 50;\r\nconst MAX_SELECTABLE_VALUES = 10;\r\n\r\ntype GroupValue = (Group & Value);\r\n\r\nexport type Props = {\r\n    currentChannelName: string;\r\n    currentChannelId: string;\r\n    intl: IntlShape;\r\n    teamID: string;\r\n    searchTerm: string;\r\n    groups: Group[];\r\n    excludeGroups?: Group[];\r\n    includeGroups?: Group[];\r\n    onExited: () => void;\r\n    skipCommit?: boolean;\r\n    onAddCallback?: (groupIDs: string[]) => void;\r\n\r\n    actions: {\r\n        getGroupsNotAssociatedToChannel: (channelID: string, q?: string, page?: number, perPage?: number, filterParentTeamPermitted?: boolean, source?: GroupSource | string, onlySyncableSources?: boolean) => Promise<ActionResult>;\r\n        setModalSearchTerm: (term: string) => void;\r\n        linkGroupSyncable: (groupID: string, syncableID: string, syncableType: SyncableType, patch: Partial<SyncablePatch>) => Promise<ActionResult>;\r\n        getAllGroupsAssociatedToChannel: (channelID: string, filterAllowReference: boolean, includeMemberCount: boolean) => Promise<ActionResult>;\r\n        getTeam: (teamId: string) => Promise<ActionResult>;\r\n        getAllGroupsAssociatedToTeam: (teamID: string, filterAllowReference: boolean, includeMemberCount: boolean) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    values: GroupValue[];\r\n    show: boolean;\r\n    search: boolean;\r\n    saving: boolean;\r\n    addError: string | null;\r\n    loadingGroups: boolean;\r\n}\r\n\r\nexport class AddGroupsToChannelModal extends React.PureComponent<Props, State> {\r\n    private searchTimeoutId: number;\r\n    private selectedItemRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.searchTimeoutId = 0;\r\n\r\n        this.state = {\r\n            values: [],\r\n            show: true,\r\n            search: false,\r\n            saving: false,\r\n            addError: null,\r\n            loadingGroups: true,\r\n        };\r\n\r\n        this.selectedItemRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        Promise.all([\r\n            this.props.actions.getTeam(this.props.teamID),\r\n            this.props.actions.getAllGroupsAssociatedToTeam(this.props.teamID, false, true),\r\n            this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId, '', 0, GROUPS_PER_PAGE + 1, true, '', true),\r\n            this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId, false, true),\r\n        ]).then(() => {\r\n            this.setGroupsLoadingState(false);\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (this.props.searchTerm !== prevProps.searchTerm) {\r\n            clearTimeout(this.searchTimeoutId);\r\n\r\n            const searchTerm = this.props.searchTerm;\r\n            if (searchTerm === '') {\r\n                return;\r\n            }\r\n\r\n            this.searchTimeoutId = window.setTimeout(\r\n                async () => {\r\n                    this.setGroupsLoadingState(true);\r\n                    await this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId, searchTerm, undefined, undefined, true, '', true);\r\n                    this.setGroupsLoadingState(false);\r\n                },\r\n                Constants.SEARCH_TIMEOUT_MILLISECONDS,\r\n            );\r\n        }\r\n    }\r\n\r\n    handleHide = () => {\r\n        this.props.actions.setModalSearchTerm('');\r\n        this.setState({show: false});\r\n    };\r\n\r\n    handleResponse = (err?: ServerError) => {\r\n        let addError = null;\r\n        if (err && err.message) {\r\n            addError = err.message;\r\n        }\r\n\r\n        this.setState({\r\n            saving: false,\r\n            addError,\r\n        });\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        const groupIDs = this.state.values.map((v) => v.id);\r\n        if (groupIDs.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (this.props.skipCommit) {\r\n            if (this.props.onAddCallback) {\r\n                this.props.onAddCallback(groupIDs);\r\n            }\r\n            this.handleHide();\r\n            return;\r\n        }\r\n\r\n        this.setState({saving: true});\r\n\r\n        await Promise.all(groupIDs.map(async (groupID) => {\r\n            const {error} = await this.props.actions.linkGroupSyncable(groupID, this.props.currentChannelId, SyncableType.Channel, {auto_add: true});\r\n            this.handleResponse(error);\r\n            if (!error) {\r\n                this.handleHide();\r\n            }\r\n        }));\r\n    };\r\n\r\n    addValue = (value: GroupValue) => {\r\n        const values = Object.assign([], this.state.values);\r\n        const userIds = values.map((v: Group) => v.id);\r\n        if (value && value.id && userIds.indexOf(value.id) === -1) {\r\n            values.push(value);\r\n        }\r\n\r\n        this.setState({values});\r\n    };\r\n\r\n    setGroupsLoadingState = (loadingState: boolean) => {\r\n        this.setState({\r\n            loadingGroups: loadingState,\r\n        });\r\n    };\r\n\r\n    handlePageChange = (page: number, prevPage: number) => {\r\n        if (page > prevPage) {\r\n            this.setGroupsLoadingState(true);\r\n            this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId, this.props.searchTerm, page, GROUPS_PER_PAGE + 1, true, '', true).then(() => {\r\n                this.setGroupsLoadingState(false);\r\n            });\r\n        }\r\n    };\r\n\r\n    handleDelete = (values: GroupValue[]) => {\r\n        this.setState({values});\r\n    };\r\n\r\n    search = (term: string) => {\r\n        this.props.actions.setModalSearchTerm(term);\r\n    };\r\n\r\n    renderOption = (option: GroupValue, isSelected: boolean, onAdd: (value: GroupValue) => void, onMouseMove?: (value: GroupValue) => void) => {\r\n        const rowSelected = isSelected ? 'more-modal__row--selected' : '';\r\n\r\n        return (\r\n            <div\r\n                key={option.id}\r\n                ref={isSelected ? this.selectedItemRef : option.id}\r\n                className={'more-modal__row clickable ' + rowSelected}\r\n                onClick={() => onAdd(option)}\r\n                onMouseMove={() => (onMouseMove ? onMouseMove(option) : undefined)}\r\n            >\r\n                <img\r\n                    className='more-modal__image'\r\n                    src={groupsAvatar}\r\n                    alt='group picture'\r\n                    width='32'\r\n                    height='32'\r\n                />\r\n                <div\r\n                    className='more-modal__details'\r\n                >\r\n                    <div className='more-modal__name'>\r\n                        {option.display_name}{'\\u00A0-\\u00A0'}<span className='more-modal__name_sub'>\r\n                            <FormattedMessage\r\n                                id='numMembers'\r\n                                defaultMessage='{num, number} {num, plural, one {member} other {members}}'\r\n                                values={{\r\n                                    num: option.member_count,\r\n                                }}\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className='more-modal__actions'>\r\n                    <button\r\n                        className='more-modal__actions--round'\r\n                        aria-label='Add groups to channel'\r\n                    >\r\n                        <i className='icon icon-plus'/>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderValue(props: { data: Partial<Value> }) {\r\n        return props.data.display_name;\r\n    }\r\n\r\n    render() {\r\n        const numRemainingText = (\r\n            <div id='numGroupsRemaining'>\r\n                <FormattedMessage\r\n                    id='multiselect.numGroupsRemaining'\r\n                    defaultMessage='Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. '\r\n                    values={{\r\n                        num: MAX_SELECTABLE_VALUES - this.state.values.length,\r\n                    }}\r\n                />\r\n            </div>\r\n        );\r\n\r\n        const buttonSubmitText = defineMessage({id: 'multiselect.add', defaultMessage: 'Add'});\r\n        const buttonSubmitLoadingText = defineMessage({id: 'multiselect.adding', defaultMessage: 'Adding...'});\r\n\r\n        let addError = null;\r\n        if (this.state.addError) {\r\n            addError = (<div className='has-error col-sm-12'><label className='control-label font-weight--normal'>{this.state.addError}</label></div>);\r\n        }\r\n        let groupsToShow = this.props.groups;\r\n        if (this.props.excludeGroups) {\r\n            const hasGroup = (og: Group) => !this.props.excludeGroups!.find((g) => g.id === og.id);\r\n            groupsToShow = groupsToShow.filter(hasGroup);\r\n        }\r\n        if (this.props.includeGroups) {\r\n            const hasGroup = (og: Group) => this.props.includeGroups!.find((g) => g.id === og.id);\r\n            groupsToShow = [...groupsToShow, ...this.props.includeGroups.filter(hasGroup)];\r\n        }\r\n        const groupsToShowValues = groupsToShow.map((group) => {\r\n            return {label: group.display_name, value: group.id, ...group};\r\n        });\r\n\r\n        return (\r\n            <Modal\r\n                id='addGroupsToChannelModal'\r\n                dialogClassName={'a11y__modal more-modal more-direct-channels'}\r\n                show={this.state.show}\r\n                onHide={this.handleHide}\r\n                onExited={this.props.onExited}\r\n            >\r\n                <Modal.Header closeButton={true}>\r\n                    <Modal.Title componentClass='h1'>\r\n                        <FormattedMessage\r\n                            id='add_groups_to_channel.title'\r\n                            defaultMessage='Add New Groups to {channelName} Channel'\r\n                            values={{\r\n                                channelName: (\r\n                                    <strong>{this.props.currentChannelName}</strong>\r\n                                ),\r\n                            }}\r\n                        />\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {addError}\r\n                    <MultiSelect\r\n                        key='addGroupsToChannelKey'\r\n                        options={groupsToShowValues}\r\n                        optionRenderer={this.renderOption}\r\n                        intl={this.props.intl}\r\n                        selectedItemRef={this.selectedItemRef}\r\n                        values={this.state.values}\r\n                        valueRenderer={this.renderValue}\r\n                        perPage={GROUPS_PER_PAGE}\r\n                        handlePageChange={this.handlePageChange}\r\n                        handleInput={this.search}\r\n                        handleDelete={this.handleDelete}\r\n                        handleAdd={this.addValue}\r\n                        handleSubmit={this.handleSubmit}\r\n                        maxValues={MAX_SELECTABLE_VALUES}\r\n                        numRemainingText={numRemainingText}\r\n                        buttonSubmitText={buttonSubmitText}\r\n                        buttonSubmitLoadingText={buttonSubmitLoadingText}\r\n                        saving={this.state.saving}\r\n                        loading={this.state.loadingGroups}\r\n                        placeholderText={defineMessage({id: 'multiselect.addGroupsPlaceholder', defaultMessage: 'Search and add groups'})}\r\n                    />\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(AddGroupsToChannelModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {Group} from '@mattermost/types/groups';\r\n\r\nimport {getGroupsNotAssociatedToChannel, linkGroupSyncable, getAllGroupsAssociatedToChannel, getAllGroupsAssociatedToTeam} from 'mattermost-redux/actions/groups';\r\nimport {getTeam} from 'mattermost-redux/actions/teams';\r\nimport {getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getGroupsNotAssociatedToChannel as selectGroupsNotAssociatedToChannel} from 'mattermost-redux/selectors/entities/groups';\r\n\r\nimport {setModalSearchTerm} from 'actions/views/search';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AddGroupsToChannelModal from './add_groups_to_channel_modal';\r\n\r\ntype OwnProps = {\r\n    channel: Channel;\r\n    skipCommit: boolean;\r\n    onAddCallback: (groupIDs: string[]) => void;\r\n    excludeGroups: Group[];\r\n}\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    const searchTerm = state.views.search.modalSearch;\r\n\r\n    const channel = ownProps.channel || getCurrentChannel(state) || {};\r\n\r\n    let groups = selectGroupsNotAssociatedToChannel(state, channel.id, channel.team_id);\r\n    if (searchTerm) {\r\n        const regex = RegExp(searchTerm, 'i');\r\n        groups = groups.filter((group) => regex.test(group.display_name) || regex.test(group.name));\r\n    }\r\n\r\n    return {\r\n        currentChannelName: channel.display_name,\r\n        currentChannelId: channel.id,\r\n        skipCommit: ownProps.skipCommit,\r\n        onAddCallback: ownProps.onAddCallback,\r\n        excludeGroups: ownProps.excludeGroups,\r\n        searchTerm,\r\n        groups,\r\n        teamID: channel.team_id,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getGroupsNotAssociatedToChannel,\r\n            setModalSearchTerm,\r\n            linkGroupSyncable,\r\n            getAllGroupsAssociatedToChannel,\r\n            getTeam,\r\n            getAllGroupsAssociatedToTeam,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddGroupsToChannelModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {Modal} from 'react-bootstrap';\r\nimport type {IntlShape} from 'react-intl';\r\nimport {injectIntl, FormattedMessage, defineMessage} from 'react-intl';\r\n\r\nimport type {Group, SyncablePatch, GroupSource} from '@mattermost/types/groups';\r\nimport {SyncableType} from '@mattermost/types/groups';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport Nbsp from 'components/html_entities/nbsp';\r\nimport MultiSelect from 'components/multiselect/multiselect';\r\nimport type {Value} from 'components/multiselect/multiselect';\r\n\r\nimport groupsAvatar from 'images/groups-avatar.png';\r\nimport {focusElement} from 'utils/a11y_utils';\r\nimport Constants from 'utils/constants';\r\n\r\nconst GROUPS_PER_PAGE = 50;\r\nconst MAX_SELECTABLE_VALUES = 10;\r\n\r\ntype GroupValue = Value & {member_count?: number};\r\n\r\ntype Props = {\r\n    currentTeamName?: string;\r\n    currentTeamId: string;\r\n    intl: IntlShape;\r\n    searchTerm: string;\r\n    groups: Group[];\r\n    focusOriginElement?: string;\r\n\r\n    // used in tandem with 'skipCommit' to allow using this component without performing actual linking\r\n    excludeGroups?: Group[];\r\n    includeGroups?: Group[];\r\n    onExited: () => void;\r\n    skipCommit?: boolean;\r\n    onAddCallback?: (groupIDs: string[]) => void;\r\n    actions: Actions;\r\n}\r\n\r\nexport type Actions = {\r\n    getGroupsNotAssociatedToTeam: (teamID: string, q?: string, page?: number, perPage?: number, source?: GroupSource | string, onlySyncableSources?: boolean) => Promise<ActionResult>;\r\n    setModalSearchTerm: (term: string) => void;\r\n    linkGroupSyncable: (groupID: string, syncableID: string, syncableType: SyncableType, patch: SyncablePatch) => Promise<ActionResult>;\r\n    getAllGroupsAssociatedToTeam: (teamID: string, filterAllowReference: boolean, includeMemberCount: boolean) => Promise<ActionResult>;\r\n};\r\n\r\ntype State = {\r\n    values: GroupValue[];\r\n    show: boolean;\r\n    search: boolean;\r\n    saving: boolean;\r\n    addError: null | string;\r\n    loadingGroups: boolean;\r\n}\r\n\r\nexport class AddGroupsToTeamModal extends React.PureComponent<Props, State> {\r\n    private searchTimeoutId: number;\r\n    private readonly selectedItemRef: RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.searchTimeoutId = 0;\r\n\r\n        this.state = {\r\n            values: [],\r\n            show: true,\r\n            search: false,\r\n            saving: false,\r\n            addError: null,\r\n            loadingGroups: true,\r\n        };\r\n\r\n        this.selectedItemRef = React.createRef();\r\n    }\r\n\r\n    public componentDidMount() {\r\n        Promise.all([\r\n            this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId, '', 0, GROUPS_PER_PAGE + 1, '', true),\r\n            this.props.actions.getAllGroupsAssociatedToTeam(this.props.currentTeamId, false, true),\r\n        ]).then(() => {\r\n            this.setGroupsLoadingState(false);\r\n        });\r\n    }\r\n\r\n    public componentDidUpdate(prevProps: Props) {\r\n        if (this.props.searchTerm !== prevProps.searchTerm) {\r\n            clearTimeout(this.searchTimeoutId);\r\n\r\n            const searchTerm = this.props.searchTerm;\r\n            if (searchTerm === '') {\r\n                return;\r\n            }\r\n\r\n            this.searchTimeoutId = window.setTimeout(\r\n                async () => {\r\n                    this.setGroupsLoadingState(true);\r\n                    await this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId, searchTerm, 0, GROUPS_PER_PAGE + 1, '', true);\r\n                    this.setGroupsLoadingState(false);\r\n                },\r\n                Constants.SEARCH_TIMEOUT_MILLISECONDS,\r\n            );\r\n        }\r\n    }\r\n\r\n    // public for tests\r\n    public handleHide = () => {\r\n        this.props.actions.setModalSearchTerm('');\r\n        this.setState({show: false});\r\n    };\r\n\r\n    // public for tests\r\n    public handleExit = (): void => {\r\n        if (this.props.focusOriginElement) {\r\n            focusElement(this.props.focusOriginElement, true);\r\n        }\r\n        this.props.onExited();\r\n    };\r\n\r\n    // public for tests\r\n    public handleResponse = (err?: Error): void => {\r\n        let addError = null;\r\n        if (err && err.message) {\r\n            addError = err.message;\r\n        }\r\n\r\n        this.setState({\r\n            saving: false,\r\n            addError,\r\n        });\r\n    };\r\n\r\n    // public for tests\r\n    public handleSubmit = async () => {\r\n        const groupIDs = this.state.values.map((v) => v.id);\r\n        if (groupIDs.length === 0) {\r\n            return;\r\n        }\r\n        if (this.props.skipCommit) {\r\n            if (this.props.onAddCallback) {\r\n                this.props.onAddCallback(groupIDs);\r\n            }\r\n            this.handleHide();\r\n            return;\r\n        }\r\n\r\n        this.setState({saving: true});\r\n\r\n        await Promise.all(groupIDs.map(async (groupID) => {\r\n            const {error} = await this.props.actions.linkGroupSyncable(groupID, this.props.currentTeamId, SyncableType.Team, {auto_add: true, scheme_admin: false});\r\n            this.handleResponse(error);\r\n            if (!error) {\r\n                this.handleHide();\r\n            }\r\n        }));\r\n    };\r\n\r\n    // public for tests\r\n    public addValue = (value: GroupValue): void => {\r\n        const values = Object.assign<GroupValue[], GroupValue[]>([], this.state.values);\r\n        const userIds = values.map((v) => v.id);\r\n        if (value && value.id && userIds.indexOf(value.id) === -1) {\r\n            values.push(value);\r\n        }\r\n\r\n        this.setState({values});\r\n    };\r\n\r\n    private setGroupsLoadingState = (loadingState: boolean) => {\r\n        this.setState({\r\n            loadingGroups: loadingState,\r\n        });\r\n    };\r\n\r\n    // public for tests\r\n    public handlePageChange = (page: number, prevPage: number): void => {\r\n        if (page > prevPage) {\r\n            this.setGroupsLoadingState(true);\r\n            this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId, this.props.searchTerm, page, GROUPS_PER_PAGE + 1, '', true).then(() => {\r\n                this.setGroupsLoadingState(false);\r\n            });\r\n        }\r\n    };\r\n\r\n    // public for tests\r\n    public handleDelete = (values: GroupValue[]): void => this.setState({values});\r\n\r\n    // public for tests\r\n    public search = (term: string): void => this.props.actions.setModalSearchTerm(term);\r\n\r\n    // public for tests\r\n    public renderOption = (option: GroupValue, isSelected: boolean, onAdd: (value: GroupValue) => void, onMouseMove: (value: GroupValue) => void): JSX.Element => {\r\n        const rowSelected = isSelected ? 'more-modal__row--selected' : '';\r\n\r\n        return (\r\n            <div\r\n                key={option.id}\r\n                ref={isSelected ? this.selectedItemRef : option.id}\r\n                className={'more-modal__row clickable ' + rowSelected}\r\n                onClick={() => onAdd(option)}\r\n                onMouseMove={() => onMouseMove(option)}\r\n            >\r\n                <img\r\n                    className='more-modal__image'\r\n                    src={groupsAvatar}\r\n                    alt='group picture'\r\n                    width='32'\r\n                    height='32'\r\n                />\r\n                <div\r\n                    className='more-modal__details'\r\n                >\r\n                    <div className='more-modal__name'>\r\n                        {option.display_name}<Nbsp/>{'-'}<Nbsp/><span className='more-modal__name_sub'>\r\n                            <FormattedMessage\r\n                                id='numMembers'\r\n                                defaultMessage='{num, number} {num, plural, one {member} other {members}}'\r\n                                values={{\r\n                                    num: option.member_count,\r\n                                }}\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className='more-modal__actions'>\r\n                    <button\r\n                        className='more-modal__actions--round'\r\n                        aria-label='Add groups to team'\r\n                    >\r\n                        <i className='icon icon-plus'/>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // public for tests\r\n    public renderValue = (props: { data: Value }): string | undefined => props.data.display_name;\r\n\r\n    public render(): JSX.Element {\r\n        const numRemainingText = (\r\n            <div id='numGroupsRemaining'>\r\n                <FormattedMessage\r\n                    id='multiselect.numGroupsRemaining'\r\n                    defaultMessage='Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. '\r\n                    values={{\r\n                        num: MAX_SELECTABLE_VALUES - this.state.values.length,\r\n                    }}\r\n                />\r\n            </div>\r\n        );\r\n\r\n        const buttonSubmitText = defineMessage({id: 'multiselect.add', defaultMessage: 'Add'});\r\n        const buttonSubmitLoadingText = defineMessage({id: 'multiselect.adding', defaultMessage: 'Adding...'});\r\n\r\n        let addError = null;\r\n        if (this.state.addError) {\r\n            addError = (\r\n                <div className='has-error col-sm-12'>\r\n                    <label className='control-label font-weight--normal'>\r\n                        {this.state.addError}\r\n                    </label>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let groupsToShow = this.props.groups;\r\n        if (this.props.excludeGroups) {\r\n            const hasGroup = (og: Group) => !this.props.excludeGroups?.find((g) => g.id === og.id);\r\n            groupsToShow = groupsToShow.filter(hasGroup);\r\n        }\r\n        if (this.props.includeGroups) {\r\n            const hasGroup = (og: Group) => this.props.includeGroups?.find((g) => g.id === og.id);\r\n            groupsToShow = [...groupsToShow, ...this.props.includeGroups.filter(hasGroup)];\r\n        }\r\n\r\n        const groupsOptionsToShow = groupsToShow.map((group) => {\r\n            return {...group, label: group.display_name, value: group.id};\r\n        });\r\n\r\n        return (\r\n            <Modal\r\n                id='addGroupsToTeamModal'\r\n                dialogClassName={'a11y__modal more-modal more-direct-channels'}\r\n                show={this.state.show}\r\n                onHide={this.handleHide}\r\n                onExited={this.handleExit}\r\n            >\r\n                <Modal.Header closeButton={true}>\r\n                    <Modal.Title componentClass='h1'>\r\n                        <FormattedMessage\r\n                            id='add_groups_to_team.title'\r\n                            defaultMessage='Add New Groups to {teamName} Team'\r\n                            values={{\r\n                                teamName: (\r\n                                    <strong>{this.props.currentTeamName ?? ''}</strong>\r\n                                ),\r\n                            }}\r\n                        />\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {addError}\r\n                    <MultiSelect\r\n                        key='addGroupsToTeamKey'\r\n                        options={groupsOptionsToShow}\r\n                        optionRenderer={this.renderOption}\r\n                        intl={this.props.intl}\r\n                        selectedItemRef={this.selectedItemRef}\r\n                        values={this.state.values}\r\n                        valueRenderer={this.renderValue}\r\n                        perPage={GROUPS_PER_PAGE}\r\n                        handlePageChange={this.handlePageChange}\r\n                        handleInput={this.search}\r\n                        handleDelete={this.handleDelete}\r\n                        handleAdd={this.addValue}\r\n                        handleSubmit={this.handleSubmit}\r\n                        maxValues={MAX_SELECTABLE_VALUES}\r\n                        numRemainingText={numRemainingText}\r\n                        buttonSubmitText={buttonSubmitText}\r\n                        buttonSubmitLoadingText={buttonSubmitLoadingText}\r\n                        saving={this.state.saving}\r\n                        loading={this.state.loadingGroups}\r\n                        placeholderText={defineMessage({id: 'multiselect.addGroupsPlaceholder', defaultMessage: 'Search and add groups'})}\r\n                    />\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(AddGroupsToTeamModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {Group} from '@mattermost/types/groups';\r\nimport type {Team} from '@mattermost/types/teams';\r\n\r\nimport {getGroupsNotAssociatedToTeam, linkGroupSyncable, getAllGroupsAssociatedToTeam} from 'mattermost-redux/actions/groups';\r\nimport {getGroupsNotAssociatedToTeam as selectGroupsNotAssociatedToTeam} from 'mattermost-redux/selectors/entities/groups';\r\nimport {getCurrentTeam, getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {setModalSearchTerm} from 'actions/views/search';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AddGroupsToTeamModal from './add_groups_to_team_modal';\r\n\r\ntype Props = {\r\n    team?: Team;\r\n    skipCommit?: boolean;\r\n    onAddCallback?: (groupIDs: string[]) => void;\r\n    excludeGroups?: Group[];\r\n}\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\r\n    const searchTerm = state.views.search.modalSearch;\r\n\r\n    const team = ownProps.team || getCurrentTeam(state);\r\n\r\n    let groups = selectGroupsNotAssociatedToTeam(state, team?.id || '');\r\n    if (searchTerm) {\r\n        const regex = RegExp(searchTerm, 'i');\r\n        groups = groups.filter((group) => regex.test(group.display_name) || regex.test(group.name));\r\n    }\r\n\r\n    return {\r\n        currentTeamName: team?.display_name,\r\n        currentTeamId: team?.id ?? getCurrentTeamId(state),\r\n        skipCommit: ownProps.skipCommit,\r\n        onAddCallback: ownProps.onAddCallback,\r\n        excludeGroups: ownProps.excludeGroups,\r\n        searchTerm,\r\n        groups,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getGroupsNotAssociatedToTeam,\r\n            setModalSearchTerm,\r\n            linkGroupSyncable,\r\n            getAllGroupsAssociatedToTeam,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddGroupsToTeamModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useMemo} from 'react';\r\n\r\nimport type {CloudUsage} from '@mattermost/types/cloud';\r\n\r\nimport useGetLimits from './useGetLimits';\r\nimport useGetUsage from './useGetUsage';\r\n\r\n// Returns an object of type CloudUsage with the values being the delta between the limit, and the actual usage of this installation.\r\n// A value < 0 means that they are NOT over the limit. A value > 0 means they've exceeded that limit\r\n// 2 teams used, minus 1 team limit = value > 0, limit exceeded\r\n// 10MB files used, minus 1000MB limit = value < 0, limit not exceeded.\r\n// etc.\r\n// withBackupValue will set the limit arbitrarily high in the event that the limit isn't set\r\nexport const withBackupValue = (maybeLimit: number | undefined, limitsLoaded: boolean) => (limitsLoaded ? (maybeLimit ?? Number.MAX_VALUE) : Number.MAX_VALUE);\r\n\r\nexport default function useGetUsageDeltas(): CloudUsage {\r\n    const usage = useGetUsage();\r\n    const [limits, limitsLoaded] = useGetLimits();\r\n\r\n    const usageDelta = useMemo(() => {\r\n        return (\r\n            {\r\n                files: {\r\n                    totalStorage: usage.files.totalStorage - withBackupValue(limits.files?.total_storage, limitsLoaded),\r\n                    totalStorageLoaded: usage.files.totalStorageLoaded,\r\n                },\r\n                messages: {\r\n                    history: usage.messages.history - withBackupValue(limits.messages?.history, limitsLoaded),\r\n                    historyLoaded: usage.messages.historyLoaded,\r\n                },\r\n                teams: {\r\n                    active: usage.teams.active - withBackupValue(limits.teams?.active, limitsLoaded),\r\n\r\n                    // cloudArchived doesn't count against usage, but we pass the value along for convenience\r\n                    cloudArchived: usage.teams.cloudArchived,\r\n                    teamsLoaded: usage.teams.teamsLoaded,\r\n                },\r\n            }\r\n        );\r\n    }, [usage, limits, limitsLoaded]);\r\n\r\n    return usageDelta;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {SVGProps} from 'react';\r\n\r\nconst SvgComponent = (props: SVGProps<SVGSVGElement>) => (\r\n    <svg\r\n        width={140}\r\n        height={141}\r\n        fill='none'\r\n        xmlns='http://www.w3.org/2000/svg'\r\n        {...props}\r\n    >\r\n        <path\r\n            opacity={0.4}\r\n            d='M37.593 38.008c4.754-4.815 10.754-7.295 17.989-7.428 7.101.133 13.065 2.601 17.892 7.428 4.815 4.827 7.295 10.791 7.428 17.892-.133 7.235-2.601 13.223-7.428 17.99-4.827 4.754-10.791 7.27-17.892 7.512-7.235-.254-13.223-2.758-17.99-7.513-4.754-4.766-7.258-10.766-7.512-18 .254-7.102 2.758-13.066 7.513-17.881Z'\r\n            fill='#fff'\r\n        />\r\n        <path\r\n            d='M78.887 51.382c-2.151-6.992-6.225-12.225-12.226-15.69-6.001-3.465-12.57-4.376-19.701-2.743-3.9.995-7.297 2.717-10.22 5.162 3.269-3.567 7.415-6.037 12.428-7.416 7.13-1.633 13.732-.703 19.787 2.793s10.161 8.748 12.313 15.74c1.323 5.037 1.257 9.862-.21 14.47-1.454 4.614-4.066 8.49-7.84 11.611 2.833-3.087 4.783-6.713 5.844-10.894 1.05-4.187.991-8.522-.175-13.033Z'\r\n            fill='#000'\r\n            fillOpacity={0.4}\r\n        />\r\n        <path\r\n            d='M86.76 53.929c-.508-7.506-3.553-14.097-9.125-19.774-6.346-6.05-13.67-9.08-21.974-9.08-8.303 0-15.616 3.03-21.961 9.08-6.08 6.315-9.126 13.591-9.126 21.855 0 8.262 3.046 15.551 9.126 21.854 5.826 5.556 12.485 8.551 19.967 8.984 7.481.445 14.383-1.611 20.728-6.146l4.75 4.727 6.08-6.05-4.75-4.727c4.69-6.302 6.78-13.218 6.285-20.723Zm-13.126 19.87c-4.823 4.726-10.781 7.228-17.876 7.468-7.228-.252-13.21-2.742-17.973-7.469-4.75-4.727-7.252-10.692-7.506-17.885.254-7.06 2.756-12.99 7.506-17.789 4.75-4.787 10.745-7.252 17.973-7.385 7.095.133 13.053 2.586 17.876 7.385 4.81 4.8 7.288 10.73 7.421 17.79-.133 7.192-2.599 13.157-7.421 17.884Z'\r\n            fill='#BABEC9'\r\n        />\r\n        <path\r\n            d='M106.202 114.187c-1.567.449-2.728.291-3.482-.472L78.06 86.651c-.753-.762-1.064-1.743-.945-2.954.12-1.211.874-2.567 2.262-4.093 1.507-1.393 2.847-2.192 4.044-2.385 1.196-.194 2.165.157 2.92 1.053l26.921 24.957c.753.763.873 1.901.37 3.427-.502 1.525-1.447 3.051-2.823 4.577-1.496 1.526-3.039 2.506-4.607 2.954Z'\r\n            fill='#FFBC1F'\r\n        />\r\n        <path\r\n            d='m108.007 98.343-10.08 10.164-12.154-13.34 8.914-9.106 13.32 12.282Z'\r\n            fill='#7A5600'\r\n        />\r\n    </svg>\r\n);\r\n\r\nexport default SvgComponent;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo} from 'react';\r\n\r\nconst CheckboxCheckedIcon = () => (\r\n    <svg\r\n        width='18px'\r\n        height='18px'\r\n        viewBox='0 0 18 18'\r\n    >\r\n        <g\r\n            id='Developer-Export'\r\n            stroke='none'\r\n            strokeWidth='1'\r\n            fillRule='evenodd'\r\n        >\r\n            <g\r\n                transform='translate(-285.000000, -933.000000)'\r\n                id='All-Team-Members'\r\n            >\r\n                <g transform='translate(245.000000, 698.000000)'>\r\n                    <g\r\n                        id='Channel-Administrators'\r\n                        transform='translate(0.000000, 106.000000)'\r\n                    >\r\n                        <g\r\n                            id='data-table/column-1'\r\n                            transform='translate(11.000000, 86.000000)'\r\n                        >\r\n                            <g\r\n                                id='row-checkbox---Public-Channels'\r\n                                transform='translate(12.000000, 35.000000)'\r\n                            >\r\n                                <g\r\n                                    id='Stacked-Group'\r\n                                    transform='translate(0.000000, 5.000000)'\r\n                                >\r\n                                    <g id='data-table/1st/row-checkbox-label-base'>\r\n                                        <g\r\n                                            id='check-on-copy-11'\r\n                                            transform='translate(14.000000, 0.000000)'\r\n                                        >\r\n                                            <path\r\n                                                d='M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z'\r\n                                                id='checkbox---checked'\r\n                                            />\r\n                                        </g>\r\n                                    </g>\r\n                                </g>\r\n                            </g>\r\n                        </g>\r\n                    </g>\r\n                </g>\r\n            </g>\r\n        </g>\r\n    </svg>\r\n);\r\n\r\nexport default memo(CheckboxCheckedIcon);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nexport type SuccessResult = {data: any}\r\n\r\nexport type ErrorResult = {error: any}\r\n\r\nexport function isSuccess(result: ActionResult): result is SuccessResult {\r\n    return 'data' in result && !isError(result);\r\n}\r\n\r\nexport function isError(result: ActionResult): result is ErrorResult {\r\n    return Boolean((result as ErrorResult).error);\r\n}\r\n\r\nexport type ModalData<ModalProps> = {\r\n    modalId: string;\r\n    dialogProps?: Omit<ModalProps, 'onHide' | 'onExited'> & {onHide?: () => void; onExited?: () => void};\r\n    dialogType: React.ElementType<ModalProps>;\r\n}\r\n"],"names":["AddGroupsToChannelModal","React","constructor","props","super","_defineProperty","this","actions","setModalSearchTerm","setState","show","err","addError","message","saving","async","groupIDs","state","values","map","v","id","length","skipCommit","onAddCallback","handleHide","Promise","all","error","linkGroupSyncable","groupID","currentChannelId","SyncableType","Channel","auto_add","handleResponse","value","Object","assign","userIds","indexOf","push","loadingState","loadingGroups","page","prevPage","setGroupsLoadingState","getGroupsNotAssociatedToChannel","searchTerm","GROUPS_PER_PAGE","then","term","option","isSelected","onAdd","onMouseMove","rowSelected","key","ref","selectedItemRef","className","onClick","undefined","src","groupsAvatar","alt","width","height","display_name","FormattedMessage","defaultMessage","num","member_count","searchTimeoutId","search","componentDidMount","getTeam","teamID","getAllGroupsAssociatedToTeam","getAllGroupsAssociatedToChannel","componentDidUpdate","prevProps","clearTimeout","window","setTimeout","Constants","SEARCH_TIMEOUT_MILLISECONDS","renderValue","data","render","numRemainingText","buttonSubmitText","defineMessage","buttonSubmitLoadingText","groupsToShow","groups","excludeGroups","hasGroup","og","find","g","filter","includeGroups","groupsToShowValues","group","_objectSpread","label","Modal","dialogClassName","onHide","onExited","Header","closeButton","Title","componentClass","channelName","currentChannelName","Body","MultiSelect","options","optionRenderer","renderOption","intl","valueRenderer","perPage","handlePageChange","handleInput","handleDelete","handleAdd","addValue","handleSubmit","maxValues","loading","placeholderText","_pt","isRequired","injectIntl","connect","ownProps","views","modalSearch","channel","getCurrentChannel","selectGroupsNotAssociatedToChannel","team_id","regex","RegExp","test","name","dispatch","bindActionCreators","AddGroupsToTeamModal","focusOriginElement","focusElement","currentTeamId","Team","scheme_admin","getGroupsNotAssociatedToTeam","Nbsp","_this$props$currentTe","_this$props$excludeGr","_this$props$includeGr","groupsOptionsToShow","handleExit","teamName","currentTeamName","_team$id","team","getCurrentTeam","selectGroupsNotAssociatedToTeam","getCurrentTeamId","withBackupValue","maybeLimit","limitsLoaded","Number","MAX_VALUE","useGetUsageDeltas","usage","useGetUsage","limits","useGetLimits","useMemo","_limits$files","_limits$messages","_limits$teams","files","totalStorage","total_storage","totalStorageLoaded","messages","history","historyLoaded","teams","active","cloudArchived","teamsLoaded","fill","xmlns","opacity","d","fillOpacity","CheckboxCheckedIcon","viewBox","stroke","strokeWidth","fillRule","transform","memo","isSuccess","result","isError","Boolean"],"sourceRoot":""}