{"version":3,"file":"1119.02550e8c61d098ca02f0.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/channel_bookmarks/bookmark_delete_modal.tsx","webpack://mattermost-webapp/./src/components/channel_bookmarks/bookmark_dot_menu.tsx","webpack://mattermost-webapp/./src/components/channel_bookmarks/bookmark_item.tsx","webpack://mattermost-webapp/./src/components/channel_bookmarks/channel_bookmarks.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\ntype Props = {\r\n    displayName: string;\r\n    onConfirm: () => void;\r\n    onCancel?: () => void;\r\n    onExited: () => void;\r\n}\r\n\r\nconst noop = () => {};\r\n\r\nfunction BookmarkDeleteModal({\r\n    displayName,\r\n    onExited,\r\n    onCancel,\r\n    onConfirm,\r\n}: Props) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const title = formatMessage({\r\n        id: 'channel_bookmarks.confirm.delete.title',\r\n        defaultMessage: 'Delete bookmark',\r\n    });\r\n\r\n    const confirmButtonText = formatMessage({\r\n        id: 'channel_bookmarks.confirm.delete.button',\r\n        defaultMessage: 'Yes, delete',\r\n    });\r\n\r\n    const message = (\r\n        <FormattedMessage\r\n            id={'channel_bookmarks.confirm.delete.text'}\r\n            defaultMessage={'Are you sure you want to delete the bookmark <strong>{displayName}</strong>?'}\r\n            values={{\r\n                strong: (chunk) => <strong>{chunk}</strong>,\r\n                displayName,\r\n            }}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            confirmButtonText={confirmButtonText}\r\n            handleCancel={onCancel ?? noop}\r\n            handleConfirm={onConfirm}\r\n            modalHeaderText={title}\r\n            onExited={onExited}\r\n            compassDesign={true}\r\n            isDeleteModal={true}\r\n        >\r\n            {message}\r\n        </GenericModal>\r\n    );\r\n}\r\n\r\nexport default BookmarkDeleteModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {\r\n    DotsHorizontalIcon,\r\n    PencilOutlineIcon,\r\n    LinkVariantIcon,\r\n    TrashCanOutlineIcon,\r\n    ArrowExpandIcon,\r\n    OpenInNewIcon,\r\n    BookOutlineIcon,\r\n} from '@mattermost/compass-icons/components';\r\nimport type {ChannelBookmark, ChannelBookmarkPatch} from '@mattermost/types/channel_bookmarks';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {getFileDownloadUrl} from 'mattermost-redux/utils/file_utils';\r\n\r\nimport {editBookmark, deleteBookmark} from 'actions/channel_bookmarks';\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport GetPublicModal from 'components/get_public_link_modal';\r\nimport * as Menu from 'components/menu';\r\n\r\nimport {ModalIdentifiers} from 'utils/constants';\r\nimport {getSiteURL, shouldOpenInNewTab} from 'utils/url';\r\nimport {copyToClipboard} from 'utils/utils';\r\n\r\nimport BookmarkDeleteModal from './bookmark_delete_modal';\r\nimport ChannelBookmarksCreateModal from './channel_bookmarks_create_modal';\r\nimport {useCanGetPublicLink, useChannelBookmarkPermission} from './utils';\r\n\r\ntype Props = {bookmark: ChannelBookmark; open: () => void};\r\nconst BookmarkItemDotMenu = ({\r\n    bookmark,\r\n    open,\r\n}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n    const dispatch = useDispatch();\r\n\r\n    const siteURL = getSiteURL();\r\n    const openInNewTab = bookmark.type === 'link' && bookmark.link_url && shouldOpenInNewTab(bookmark.link_url, siteURL);\r\n\r\n    let openIcon;\r\n    if (bookmark.type === 'file') {\r\n        openIcon = <ArrowExpandIcon size={18}/>;\r\n    } else if (bookmark.link_url) {\r\n        openIcon = openInNewTab ? <OpenInNewIcon size={18}/> : <BookOutlineIcon size={18}/>;\r\n    }\r\n\r\n    const canEdit = useChannelBookmarkPermission(bookmark.channel_id, 'edit');\r\n    const canDelete = useChannelBookmarkPermission(bookmark.channel_id, 'delete');\r\n    const canGetPublicLink = useCanGetPublicLink();\r\n\r\n    const editLabel = formatMessage({id: 'channel_bookmarks.edit', defaultMessage: 'Edit'});\r\n    const openLabel = formatMessage({id: 'channel_bookmarks.open', defaultMessage: 'Open'});\r\n    const copyLinkLabel = formatMessage({id: 'channel_bookmarks.copy', defaultMessage: 'Copy link'});\r\n    const copyFileLabel = formatMessage({id: 'channel_bookmarks.copyFilePublicLink', defaultMessage: 'Get a public link'});\r\n    const deleteLabel = formatMessage({id: 'channel_bookmarks.delete', defaultMessage: 'Delete'});\r\n\r\n    const handleEdit = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.CHANNEL_BOOKMARK_CREATE,\r\n            dialogType: ChannelBookmarksCreateModal,\r\n            dialogProps: {\r\n                bookmark,\r\n                channelId: bookmark.channel_id,\r\n                onConfirm: async (data: ChannelBookmarkPatch) => dispatch(editBookmark(bookmark.channel_id, bookmark.id, data)) as ActionResult<boolean>,\r\n            },\r\n        }));\r\n    }, [editBookmark, dispatch, bookmark]);\r\n\r\n    const copyLink = useCallback(() => {\r\n        if (bookmark.type === 'link' && bookmark.link_url) {\r\n            copyToClipboard(bookmark.link_url);\r\n        } else if (bookmark.type === 'file' && bookmark.file_id) {\r\n            copyToClipboard(getFileDownloadUrl(bookmark.file_id));\r\n        }\r\n    }, [bookmark.type, bookmark.link_url, bookmark.file_id]);\r\n\r\n    const handleDelete = useCallback(() => {\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.CHANNEL_BOOKMARK_DELETE,\r\n            dialogType: BookmarkDeleteModal,\r\n            dialogProps: {\r\n                displayName: bookmark.display_name,\r\n                onConfirm: () => dispatch(deleteBookmark(bookmark.channel_id, bookmark.id)),\r\n            },\r\n        }));\r\n    }, [deleteBookmark, dispatch, bookmark]);\r\n\r\n    const handleGetPublicLink = useCallback(() => {\r\n        if (!bookmark.file_id) {\r\n            return;\r\n        }\r\n\r\n        dispatch(openModal({\r\n            modalId: ModalIdentifiers.GET_PUBLIC_LINK_MODAL,\r\n            dialogType: GetPublicModal,\r\n            dialogProps: {\r\n                fileId: bookmark.file_id,\r\n            },\r\n        }));\r\n    }, [bookmark.file_id, dispatch]);\r\n\r\n    return (\r\n        <Menu.Container\r\n            anchorOrigin={{vertical: 'bottom', horizontal: 'right'}}\r\n            transformOrigin={{vertical: 'top', horizontal: 'right'}}\r\n            menuButton={{\r\n                id: `channelBookmarksDotMenuButton-${bookmark.id}`,\r\n                class: 'channelBookmarksDotMenuButton',\r\n                children: <DotsHorizontalIcon size={18}/>,\r\n                'aria-label': formatMessage({id: 'channel_bookmarks.editBookmarkLabel', defaultMessage: 'Bookmark menu'}),\r\n            }}\r\n            menu={{\r\n                id: 'channelBookmarksDotMenuDropdown',\r\n            }}\r\n        >\r\n            <Menu.Item\r\n                key='channelBookmarksOpen'\r\n                id='channelBookmarksOpen'\r\n                onClick={open}\r\n                leadingElement={openIcon}\r\n                labels={<span>{openLabel}</span>}\r\n                aria-label={openLabel}\r\n            />\r\n            {canEdit && (\r\n                <Menu.Item\r\n                    key='channelBookmarksEdit'\r\n                    id='channelBookmarksEdit'\r\n                    onClick={handleEdit}\r\n                    leadingElement={<PencilOutlineIcon size={18}/>}\r\n                    labels={<span>{editLabel}</span>}\r\n                    aria-label={editLabel}\r\n                />\r\n            )}\r\n            {bookmark.type === 'link' && (\r\n                <Menu.Item\r\n                    key='channelBookmarksLinkCopy'\r\n                    id='channelBookmarksLinkCopy'\r\n                    onClick={copyLink}\r\n                    leadingElement={<LinkVariantIcon size={18}/>}\r\n                    labels={<span>{copyLinkLabel}</span>}\r\n                    aria-label={copyLinkLabel}\r\n                />\r\n            )}\r\n            {bookmark.type === 'file' && canGetPublicLink && (\r\n                <Menu.Item\r\n                    key='channelBookmarksFileCopy'\r\n                    id='channelBookmarksFileCopy'\r\n                    onClick={handleGetPublicLink}\r\n                    leadingElement={<LinkVariantIcon size={18}/>}\r\n                    labels={<span>{copyFileLabel}</span>}\r\n                    aria-label={copyFileLabel}\r\n                />\r\n            )}\r\n            {canDelete && (\r\n                <Menu.Item\r\n                    key='channelBookmarksDelete'\r\n                    id='channelBookmarksDelete'\r\n                    onClick={handleDelete}\r\n                    leadingElement={<TrashCanOutlineIcon size={18}/>}\r\n                    labels={<span>{deleteLabel}</span>}\r\n                    aria-label={deleteLabel}\r\n                    isDestructive={true}\r\n                />\r\n            )}\r\n        </Menu.Container>\r\n    );\r\n};\r\n\r\nexport default BookmarkItemDotMenu;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnchorHTMLAttributes} from 'react';\r\nimport React, {cloneElement, forwardRef, useRef} from 'react';\r\nimport type {DraggableProvided} from 'react-beautiful-dnd';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {Link} from 'react-router-dom';\r\nimport styled, {css} from 'styled-components';\r\n\r\nimport type {ChannelBookmark} from '@mattermost/types/channel_bookmarks';\r\nimport type {FileInfo} from '@mattermost/types/files';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {getFile} from 'mattermost-redux/selectors/entities/files';\r\nimport {getFileDownloadUrl} from 'mattermost-redux/utils/file_utils';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport FilePreviewModal from 'components/file_preview_modal';\r\n\r\nimport {ModalIdentifiers} from 'utils/constants';\r\nimport {getSiteURL, shouldOpenInNewTab} from 'utils/url';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport BookmarkItemDotMenu from './bookmark_dot_menu';\r\nimport BookmarkIcon from './bookmark_icon';\r\n\r\nconst useBookmarkLink = (bookmark: ChannelBookmark) => {\r\n    const linkRef = useRef<HTMLAnchorElement>(null);\r\n    const dispatch = useDispatch();\r\n    const fileInfo: FileInfo | undefined = useSelector((state: GlobalState) => (bookmark?.file_id && getFile(state, bookmark.file_id)) || undefined);\r\n\r\n    const open = () => {\r\n        linkRef.current?.click();\r\n    };\r\n\r\n    const handleOpenFile = (e: React.MouseEvent<HTMLAnchorElement>) => {\r\n        e.preventDefault();\r\n\r\n        if (fileInfo) {\r\n            dispatch(openModal({\r\n                modalId: ModalIdentifiers.FILE_PREVIEW_MODAL,\r\n                dialogType: FilePreviewModal,\r\n                dialogProps: {\r\n                    post: {user_id: bookmark.owner_id, channel_id: bookmark.channel_id} as Post,\r\n                    fileInfos: [fileInfo],\r\n                    startIndex: 0,\r\n                },\r\n            }));\r\n        }\r\n    };\r\n\r\n    const icon = (\r\n        <BookmarkIcon\r\n            type={bookmark.type}\r\n            emoji={bookmark.emoji}\r\n            imageUrl={bookmark.image_url}\r\n            fileInfo={fileInfo}\r\n        />\r\n    );\r\n    let link;\r\n\r\n    if (bookmark.type === 'link' && bookmark.link_url) {\r\n        link = (\r\n            <DynamicLink\r\n                href={bookmark.link_url}\r\n                ref={linkRef}\r\n                isFile={false}\r\n            >\r\n                {icon}\r\n                <Label>{bookmark.display_name}</Label>\r\n            </DynamicLink>\r\n        );\r\n    } else if (bookmark.type === 'file' && bookmark.file_id) {\r\n        link = (\r\n            <DynamicLink\r\n                href={getFileDownloadUrl(bookmark.file_id)}\r\n                onClick={handleOpenFile}\r\n                ref={linkRef}\r\n                isFile={true}\r\n            >\r\n                {icon}\r\n                <Label>{bookmark.display_name}</Label>\r\n            </DynamicLink>\r\n        );\r\n    }\r\n\r\n    return {\r\n        link,\r\n        icon,\r\n        open,\r\n    } as const;\r\n};\r\n\r\ntype Props = {\r\n    bookmark: ChannelBookmark;\r\n    drag: DraggableProvided;\r\n    isDragging: boolean;\r\n    disableInteractions: boolean;\r\n};\r\nconst BookmarkItem = (({bookmark, drag, disableInteractions}: Props) => {\r\n    const {link, open} = useBookmarkLink(bookmark);\r\n\r\n    return (\r\n        <Chip\r\n            ref={drag.innerRef}\r\n            {...drag.draggableProps}\r\n            $disableInteractions={disableInteractions}\r\n        >\r\n            {link && cloneElement(link, {...drag.dragHandleProps, role: 'link'})}\r\n            <BookmarkItemDotMenu\r\n                bookmark={bookmark}\r\n                open={open}\r\n            />\r\n        </Chip>\r\n    );\r\n});\r\n\r\nconst Chip = styled.div<{$disableInteractions: boolean}>`\r\n    position: relative;\r\n    border-radius: 12px;\r\n    overflow: hidden;\r\n    margin: 1px 0;\r\n    flex-shrink: 0;\r\n    min-width: 5rem;\r\n    max-width: 25rem;\r\n\r\n    button {\r\n        position: absolute;\r\n        visibility: hidden;\r\n        right: 6px;\r\n        top: 3px;\r\n    }\r\n\r\n    ${({$disableInteractions}) => !$disableInteractions && css`\r\n        &:hover,\r\n        &:focus-within,\r\n        &:has([aria-expanded=\"true\"]) {\r\n            button {\r\n                visibility: visible;\r\n            }\r\n        }\r\n\r\n        &:hover,\r\n        &:focus-within {\r\n            a {\r\n                text-decoration: none;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n\r\n        &:hover,\r\n        &:focus-within,\r\n        &:has([aria-expanded=\"true\"]) {\r\n            a {\r\n                background: rgba(var(--center-channel-color-rgb), 0.08);\r\n                color: rgba(var(--center-channel-color-rgb), 1);\r\n            }\r\n        }\r\n\r\n        &:active:not(:has(button:active)),\r\n        &--active,\r\n        &--active:hover {\r\n            a {\r\n                background: rgba(var(--button-bg-rgb), 0.08);\r\n                color: rgb(var(--button-bg-rgb)) !important;\r\n\r\n                .icon__text {\r\n                    color: rgb(var(--button-bg));\r\n                }\r\n\r\n                .icon {\r\n                    color: rgb(var(--button-bg));\r\n                }\r\n            }\r\n        }\r\n    `}\r\n`;\r\n\r\nconst Label = styled.span`\r\n    white-space: nowrap;\r\n    padding: 4px 0;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst TARGET_BLANK_URL_PREFIX = '!';\r\n\r\ntype DynamicLinkProps = AnchorHTMLAttributes<HTMLAnchorElement> & {\r\n    href: string;\r\n    children: React.ReactNode;\r\n    isFile: boolean;\r\n};\r\nconst DynamicLink = forwardRef<HTMLAnchorElement, DynamicLinkProps>(({\r\n    href,\r\n    children,\r\n    isFile,\r\n    onClick,\r\n    ...otherProps\r\n}, ref) => {\r\n    const siteURL = getSiteURL();\r\n    const openInNewTab = shouldOpenInNewTab(href, siteURL);\r\n\r\n    const prefixed = href[0] === TARGET_BLANK_URL_PREFIX;\r\n\r\n    if (prefixed || openInNewTab) {\r\n        return (\r\n            <StyledExternalLink\r\n                {...otherProps}\r\n                href={prefixed ? href.substring(1) : href}\r\n                rel='noopener noreferrer'\r\n                target='_blank'\r\n                location='channel_bookmarks.item'\r\n                ref={ref}\r\n            >\r\n                {children}\r\n            </StyledExternalLink>\r\n        );\r\n    }\r\n\r\n    if (href.startsWith(siteURL) && !isFile) {\r\n        return (\r\n            <StyledLink\r\n                {...otherProps}\r\n                to={href.slice(siteURL.length)}\r\n                ref={ref}\r\n            >\r\n                {children}\r\n            </StyledLink>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <StyledAnchor\r\n            {...otherProps}\r\n            href={href}\r\n            ref={ref}\r\n            onClick={onClick}\r\n        >\r\n            {children}\r\n        </StyledAnchor>\r\n    );\r\n});\r\n\r\nconst linkStyles = css`\r\n    display: flex;\r\n    padding: 0 12px 0 6px;\r\n    gap: 5px;\r\n\r\n    color: rgba(var(--center-channel-color-rgb), 1);\r\n    font-family: Open Sans;\r\n    font-size: 12px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 16px;\r\n`;\r\n\r\nconst StyledAnchor = styled.a`\r\n    &&&& {\r\n        ${linkStyles}\r\n    }\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n    &&&& {\r\n        ${linkStyles}\r\n    }\r\n`;\r\n\r\nconst StyledExternalLink = styled(ExternalLink)`\r\n    &&&& {\r\n        ${linkStyles}\r\n    }\r\n`;\r\n\r\nexport default BookmarkItem;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ComponentProps} from 'react';\r\nimport React from 'react';\r\nimport {DragDropContext, Draggable, Droppable} from 'react-beautiful-dnd';\r\nimport styled from 'styled-components';\r\n\r\nimport type {ChannelBookmark} from '@mattermost/types/channel_bookmarks';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport BookmarkItem from './bookmark_item';\r\nimport BookmarksMenu from './channel_bookmarks_menu';\r\nimport {useChannelBookmarks, MAX_BOOKMARKS_PER_CHANNEL, useCanUploadFiles, useChannelBookmarkPermission} from './utils';\r\n\r\nimport './channel_bookmarks.scss';\r\n\r\ntype Props = {\r\n    channelId: string;\r\n};\r\n\r\nfunction ChannelBookmarks({\r\n    channelId,\r\n}: Props) {\r\n    const {order, bookmarks, reorder} = useChannelBookmarks(channelId);\r\n    const canReorder = useChannelBookmarkPermission(channelId, 'order');\r\n    const canUploadFiles = useCanUploadFiles();\r\n    const hasBookmarks = Boolean(order?.length);\r\n    const limitReached = order.length >= MAX_BOOKMARKS_PER_CHANNEL;\r\n\r\n    if (!hasBookmarks) {\r\n        return null;\r\n    }\r\n\r\n    const handleOnDragEnd: ComponentProps<typeof DragDropContext>['onDragEnd'] = ({source, destination, draggableId}) => {\r\n        if (destination) {\r\n            reorder(draggableId, source.index, destination.index);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DragDropContext\r\n            onDragEnd={handleOnDragEnd}\r\n        >\r\n            <Droppable\r\n                droppableId='channel-bookmarks'\r\n                direction='horizontal'\r\n            >\r\n                {(drop, snap) => {\r\n                    return (\r\n                        <Container\r\n                            ref={drop.innerRef}\r\n                            data-testid='channel-bookmarks-container'\r\n                            className='channel-bookmarks-container'\r\n                            {...drop.droppableProps}\r\n                        >\r\n                            {order.map(makeItemRenderer(bookmarks, snap.isDraggingOver, !canReorder))}\r\n                            {drop.placeholder}\r\n                            <BookmarksMenu\r\n                                channelId={channelId}\r\n                                hasBookmarks={hasBookmarks}\r\n                                limitReached={limitReached}\r\n                                canUploadFiles={canUploadFiles}\r\n                            />\r\n                        </Container>\r\n                    );\r\n                }}\r\n            </Droppable>\r\n        </DragDropContext>\r\n    );\r\n}\r\n\r\nconst makeItemRenderer = (bookmarks: IDMappedObjects<ChannelBookmark>, disableInteractions: boolean, disableDrag: boolean) => (id: string, index: number) => {\r\n    return (\r\n        <Draggable\r\n            key={id}\r\n            draggableId={id}\r\n            index={index}\r\n            isDragDisabled={disableDrag}\r\n        >\r\n            {(drag, snap) => {\r\n                return (\r\n                    <BookmarkItem\r\n                        key={id}\r\n                        drag={drag}\r\n                        isDragging={snap.isDragging}\r\n                        disableInteractions={snap.isDragging || disableInteractions}\r\n                        bookmark={bookmarks[id]}\r\n                    />\r\n                );\r\n            }}\r\n        </Draggable>\r\n    );\r\n};\r\n\r\nexport default ChannelBookmarks;\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    padding: 0 6px;\r\n    padding-right: 0;\r\n    min-height: 38px;\r\n    align-items: center;\r\n    border-bottom: 1px solid rgba(var(--center-channel-color-rgb), 0.12);\r\n    overflow-x: auto;\r\n    max-width: 100vw;\r\n`;\r\n"],"names":["noop","BookmarkDeleteModal","_ref","displayName","onExited","onCancel","onConfirm","formatMessage","useIntl","title","id","defaultMessage","confirmButtonText","message","React","FormattedMessage","values","strong","chunk","GenericModal","handleCancel","handleConfirm","modalHeaderText","compassDesign","isDeleteModal","propTypes","_pt","isRequired","BookmarkItemDotMenu","bookmark","open","dispatch","useDispatch","siteURL","getSiteURL","openInNewTab","type","link_url","shouldOpenInNewTab","openIcon","ArrowExpandIcon","size","OpenInNewIcon","BookOutlineIcon","canEdit","useChannelBookmarkPermission","channel_id","canDelete","canGetPublicLink","useCanGetPublicLink","editLabel","openLabel","copyLinkLabel","copyFileLabel","deleteLabel","handleEdit","useCallback","openModal","modalId","ModalIdentifiers","CHANNEL_BOOKMARK_CREATE","dialogType","ChannelBookmarksCreateModal","dialogProps","channelId","async","editBookmark","data","copyLink","copyToClipboard","file_id","getFileDownloadUrl","handleDelete","CHANNEL_BOOKMARK_DELETE","display_name","deleteBookmark","handleGetPublicLink","GET_PUBLIC_LINK_MODAL","GetPublicModal","fileId","Menu","anchorOrigin","vertical","horizontal","transformOrigin","menuButton","concat","class","children","DotsHorizontalIcon","menu","key","onClick","leadingElement","labels","PencilOutlineIcon","LinkVariantIcon","TrashCanOutlineIcon","isDestructive","_excluded","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","i","Symbol","toPrimitive","call","TypeError","String","_toPrimitive","_toPropertyKey","value","configurable","writable","BookmarkItem","drag","disableInteractions","link","linkRef","useRef","fileInfo","useSelector","state","getFile","undefined","icon","BookmarkIcon","emoji","imageUrl","image_url","DynamicLink","href","ref","isFile","Label","preventDefault","FILE_PREVIEW_MODAL","FilePreviewModal","post","user_id","owner_id","fileInfos","startIndex","_linkRef$current","current","click","useBookmarkLink","Chip","assign","innerRef","draggableProps","$disableInteractions","cloneElement","dragHandleProps","role","isDragging","styled","withConfig","_ref2","css","forwardRef","_ref3","otherProps","n","hasOwnProperty","indexOf","_objectWithoutPropertiesLoose","propertyIsEnumerable","_objectWithoutProperties","prefixed","StyledExternalLink","substring","rel","target","location","startsWith","StyledLink","to","slice","StyledAnchor","linkStyles","Link","ExternalLink","ChannelBookmarks","order","bookmarks","reorder","useChannelBookmarks","canReorder","canUploadFiles","useCanUploadFiles","hasBookmarks","Boolean","limitReached","MAX_BOOKMARKS_PER_CHANNEL","DragDropContext","onDragEnd","source","destination","draggableId","index","Droppable","droppableId","direction","drop","snap","Container","className","droppableProps","map","makeItemRenderer","isDraggingOver","placeholder","BookmarksMenu","disableDrag","Draggable","isDragDisabled"],"sourceRoot":""}