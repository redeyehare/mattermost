{"version":3,"file":"7099.58ad1d8a91a7e5a6d707.js","mappings":"gVAoBA,MAAMA,EAAoBC,IAA0C,IAAzC,SAACC,EAAQ,SAAEC,EAAQ,QAAEC,GAAeH,EAC3D,MAAMI,GAAOC,EAAAA,EAAAA,WAEPC,GAAUC,EAAAA,EAAAA,eAETC,EAAOC,IAAYC,EAAAA,EAAAA,UAA0B,MAE9CC,GAAgBC,EAAAA,EAAAA,QAAyB,OAE/CC,EAAAA,EAAAA,YAAU,KACNC,SAASC,MAAQX,EAAKY,cAClB,CACIC,GAAI,0BACJC,eAAgB,+BAEpB,CAAChB,SAAUA,GAAY,cAC1B,GACF,CAACE,EAAMF,IAEV,MAkBMiB,EAAeX,EACjBY,IAAAA,cAAA,OAAKC,UAAU,wBACXD,IAAAA,cAAA,SAAOC,UAAU,iBACZb,IAGT,KAEJ,OACIY,IAAAA,cAAA,OAAKC,UAAU,aACXD,IAAAA,cAAA,OAAKC,UAAU,0BACXD,IAAAA,cAACE,EAAAA,iBAAgB,CACbL,GAAG,sBACHM,QAAQ,KACRL,eAAe,mBAEnBE,IAAAA,cAAA,QAAMI,SAlCUC,UACxBC,EAAEC,iBAEF,MAAMC,EAAWjB,EAAckB,QAASC,MAClCC,EAAS,IAAIC,gBAAgB/B,EAASgC,QAASC,IAAI,SAEzD,GAAqB,iBAAVH,EACP,MAAM,IAAII,MAAM,0BAEpB,MAAM,KAACC,EAAI,MAAE5B,SAAeL,EAAQkC,kBAAkBN,EAAOH,GACzDQ,GACA9B,EAAQgC,KAAK,gBAAkBC,EAAAA,GAAUC,iBACzC/B,EAAS,OACFD,GACPC,EAASD,EAAMiC,QACnB,GAoBYrB,IAAAA,cAAA,SACIA,IAAAA,cAACE,EAAAA,iBAAgB,CACbL,GAAG,sBACHC,eAAe,oDACfwB,OAAQ,CAACxC,eAGjBkB,IAAAA,cAAA,OAAKC,UAAWsB,IAAW,aAAc,CAAC,YAAanC,KACnDY,IAAAA,cAAA,SACIH,GAAG,qBACH2B,KAAK,WACLvB,UAAU,eACVwB,KAAK,WACLC,IAAKnC,EACLoC,YAAa3C,EAAKY,cAAc,CAC5BC,GAAI,oBACJC,eAAgB,aAEpB8B,WAAW,QACXC,WAAW,KAGlB9B,EACDC,IAAAA,cAAA,UACIH,GAAG,sBACH2B,KAAK,SACLvB,UAAU,mBAEVD,IAAAA,cAACE,EAAAA,iBAAgB,CACbL,GAAG,uBACHC,eAAe,0BAK7B,EAEZnB,EAAAmD,UAAA,CAlGEjD,SAAQkD,IAAAA,MAAA,CAAGlB,OAAMkB,IAAAA,OAAAC,aAAAA,WACjBjD,QAAOgD,IAAAA,MAAA,CACHd,kBAAiBc,IAAAA,KAAAC,aAAAA,WAErBlD,SAAQiD,IAAAA,QAgGZ,SAAeE,EAAAA,EAAAA,MAAKtD,GCzFpB,GAAeuD,EAAAA,EAAAA,UAVf,SAAyBC,GACrB,MAAO,CAACrD,UAAUsD,EAAAA,EAAAA,IAAUD,GAAOE,SACvC,IAE4BC,IAAkB,CAC1CvD,SAASwD,EAAAA,EAAAA,IAAmB,CACxBtB,kBAAiBA,EAAAA,IAClBqB,MAGP,CAA4D3D,E","sources":["webpack://mattermost-webapp/./src/components/password_reset_form/password_reset_form.tsx","webpack://mattermost-webapp/./src/components/password_reset_form/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useState, useRef, memo, useEffect} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nexport interface Props {\r\n    location: {search: string};\r\n    actions: {\r\n        resetUserPassword: (token: string, newPassword: string) => Promise<ActionResult>;\r\n    };\r\n    siteName?: string;\r\n}\r\n\r\nconst PasswordResetForm = ({location, siteName, actions}: Props) => {\r\n    const intl = useIntl();\r\n\r\n    const history = useHistory();\r\n\r\n    const [error, setError] = useState<React.ReactNode>(null);\r\n\r\n    const passwordInput = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        document.title = intl.formatMessage(\r\n            {\r\n                id: 'password_form.pageTitle',\r\n                defaultMessage: 'Password Reset | {siteName}',\r\n            },\r\n            {siteName: siteName || 'Mattermost'},\r\n        );\r\n    }, [intl, siteName]);\r\n\r\n    const handlePasswordReset = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const password = passwordInput.current!.value;\r\n        const token = (new URLSearchParams(location.search)).get('token');\r\n\r\n        if (typeof token !== 'string') {\r\n            throw new Error('token must be a string');\r\n        }\r\n        const {data, error} = await actions.resetUserPassword(token, password);\r\n        if (data) {\r\n            history.push('/login?extra=' + Constants.PASSWORD_CHANGE);\r\n            setError(null);\r\n        } else if (error) {\r\n            setError(error.message);\r\n        }\r\n    };\r\n\r\n    const errorElement = error ? (\r\n        <div className='form-group has-error'>\r\n            <label className='control-label'>\r\n                {error}\r\n            </label>\r\n        </div>\r\n    ) : null;\r\n\r\n    return (\r\n        <div className='col-sm-12'>\r\n            <div className='signup-team__container'>\r\n                <FormattedMessage\r\n                    id='password_form.title'\r\n                    tagName='h1'\r\n                    defaultMessage='Password Reset'\r\n                />\r\n                <form onSubmit={handlePasswordReset}>\r\n                    <p>\r\n                        <FormattedMessage\r\n                            id='password_form.enter'\r\n                            defaultMessage='Enter a new password for your {siteName} account.'\r\n                            values={{siteName}}\r\n                        />\r\n                    </p>\r\n                    <div className={classNames('form-group', {'has-error': error})}>\r\n                        <input\r\n                            id='resetPasswordInput'\r\n                            type='password'\r\n                            className='form-control'\r\n                            name='password'\r\n                            ref={passwordInput}\r\n                            placeholder={intl.formatMessage({\r\n                                id: 'password_form.pwd',\r\n                                defaultMessage: 'Password',\r\n                            })}\r\n                            spellCheck='false'\r\n                            autoFocus={true}\r\n                        />\r\n                    </div>\r\n                    {errorElement}\r\n                    <button\r\n                        id='resetPasswordButton'\r\n                        type='submit'\r\n                        className='btn btn-primary'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='password_form.change'\r\n                            defaultMessage='Change my password'\r\n                        />\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(PasswordResetForm);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {resetUserPassword} from 'mattermost-redux/actions/users';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport PasswordResetForm from './password_reset_form';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {siteName: getConfig(state).SiteName};\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n    actions: bindActionCreators({\r\n        resetUserPassword,\r\n    }, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PasswordResetForm);\r\n"],"names":["PasswordResetForm","_ref","location","siteName","actions","intl","useIntl","history","useHistory","error","setError","useState","passwordInput","useRef","useEffect","document","title","formatMessage","id","defaultMessage","errorElement","React","className","FormattedMessage","tagName","onSubmit","async","e","preventDefault","password","current","value","token","URLSearchParams","search","get","Error","data","resetUserPassword","push","Constants","PASSWORD_CHANGE","message","values","classNames","type","name","ref","placeholder","spellCheck","autoFocus","propTypes","_pt","isRequired","memo","connect","state","getConfig","SiteName","dispatch","bindActionCreators"],"sourceRoot":""}