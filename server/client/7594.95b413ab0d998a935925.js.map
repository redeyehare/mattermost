{"version":3,"file":"7594.95b413ab0d998a935925.js","mappings":"8OA2FA,QA7EA,WACI,MAAMA,GAAWC,EAAAA,EAAAA,eAEXC,GAAyBC,EAAAA,EAAAA,QAAOC,OAAOC,WAAW,eAADC,OAAgBC,EAAAA,GAAUC,yBAAwB,SAAQC,QAC3GC,GAA0BP,EAAAA,EAAAA,QAAOC,OAAOC,WAAW,eAADC,OAAgBC,EAAAA,GAAUC,yBAA2B,EAAC,wBAAAF,OAAuBC,EAAAA,GAAUI,0BAAyB,SAAQF,QAC1KG,GAAyBT,EAAAA,EAAAA,QAAOC,OAAOC,WAAW,eAADC,OAAgBC,EAAAA,GAAUI,0BAA4B,EAAC,wBAAAL,OAAuBC,EAAAA,GAAUM,yBAAwB,SAAQJ,QACzKK,GAA0BX,EAAAA,EAAAA,QAAOC,OAAOC,WAAW,eAADC,OAAgBC,EAAAA,GAAUM,yBAA2B,EAAC,SAAQJ,QAEhHM,GAAoBC,EAAAA,EAAAA,cAAY,KAClC,QAAQ,GACR,KAAKF,EAAwBG,QACzBjB,GAASkB,EAAAA,EAAAA,IAAWC,EAAAA,GAAYC,SAChCpB,GAASqB,EAAAA,EAAAA,IAAWF,EAAAA,GAAYC,SAChC,MACJ,KAAKR,EAAuBK,QACxBjB,GAASkB,EAAAA,EAAAA,IAAWC,EAAAA,GAAYG,QAChCtB,GAASqB,EAAAA,EAAAA,IAAWF,EAAAA,GAAYG,QAChC,MACJ,KAAKZ,EAAwBO,QACzBjB,GAASkB,EAAAA,EAAAA,IAAWC,EAAAA,GAAYI,SAChCvB,GAASqB,EAAAA,EAAAA,IAAWF,EAAAA,GAAYI,SAChC,MACJ,KAAKrB,EAAuBe,QACxBjB,GAASkB,EAAAA,EAAAA,IAAWC,EAAAA,GAAYK,QAChCxB,GAASqB,EAAAA,EAAAA,IAAWF,EAAAA,GAAYK,QAEpC,GACD,CAACxB,IAEEyB,GAAkCT,EAAAA,EAAAA,aAAYU,KAAS,KACzD1B,GAASkB,EAAAA,EAAAA,OACTlB,GAASqB,EAAAA,EAAAA,MAAa,GACvB,KAAM,IAEHM,GAAqCX,EAAAA,EAAAA,cAAaY,IAChDA,EAAEX,SACFF,GACJ,GACD,CAACA,IAoCJ,OAlCAc,EAAAA,EAAAA,YAAU,KACNd,IAEIb,EAAuB4B,kBACvBhB,EAAwBgB,iBAAiB,SAAUH,GACnDf,EAAuBkB,iBAAiB,SAAUH,GAClDjB,EAAwBoB,iBAAiB,SAAUH,GACnDzB,EAAuB4B,iBAAiB,SAAUH,IAC3CzB,EAAuB6B,aAC9BjB,EAAwBiB,YAAYJ,GACpCf,EAAuBmB,YAAYJ,GACnCjB,EAAwBqB,YAAYJ,GACpCzB,EAAuB6B,YAAYJ,IAEnCvB,OAAO0B,iBAAiB,SAAUL,GAG/B,KACCvB,EAAuB8B,qBACvBlB,EAAwBkB,oBAAoB,SAAUL,GACtDf,EAAuBoB,oBAAoB,SAAUL,GACrDjB,EAAwBsB,oBAAoB,SAAUL,GACtDzB,EAAuB8B,oBAAoB,SAAUL,IAC9CzB,EAAuB+B,gBAC9BnB,EAAwBmB,eAAeN,GACvCf,EAAuBqB,eAAeN,GACtCjB,EAAwBuB,eAAeN,GACvCzB,EAAuB+B,eAAeN,IAEtCvB,OAAO4B,oBAAoB,SAAUP,EACzC,IAEL,CAACE,EAAoCF,EAAiCV,IAElE,IACX,C","sources":["webpack://mattermost-webapp/./src/components/window_size_observer/WindowSizeObserver.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport throttle from 'lodash/throttle';\r\nimport {useCallback, useEffect, useRef} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport {setLhsSize} from 'actions/views/lhs';\r\nimport {setRhsSize} from 'actions/views/rhs';\r\n\r\nimport {SidebarSize} from 'components/resizable_sidebar/constants';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nfunction WindowSizeObserver() {\r\n    const dispatch = useDispatch();\r\n\r\n    const smallSidebarMediaQuery = useRef(window.matchMedia(`(max-width: ${Constants.SMALL_SIDEBAR_BREAKPOINT}px)`)).current;\r\n    const mediumSidebarMediaQuery = useRef(window.matchMedia(`(min-width: ${Constants.SMALL_SIDEBAR_BREAKPOINT + 1}px) and (max-width: ${Constants.MEDIUM_SIDEBAR_BREAKPOINT}px)`)).current;\r\n    const largeSidebarMediaQuery = useRef(window.matchMedia(`(min-width: ${Constants.MEDIUM_SIDEBAR_BREAKPOINT + 1}px) and (max-width: ${Constants.LARGE_SIDEBAR_BREAKPOINT}px)`)).current;\r\n    const xLargeSidebarMediaQuery = useRef(window.matchMedia(`(min-width: ${Constants.LARGE_SIDEBAR_BREAKPOINT + 1}px)`)).current;\r\n\r\n    const updateSidebarSize = useCallback(() => {\r\n        switch (true) {\r\n        case xLargeSidebarMediaQuery.matches:\r\n            dispatch(setLhsSize(SidebarSize.XLARGE));\r\n            dispatch(setRhsSize(SidebarSize.XLARGE));\r\n            break;\r\n        case largeSidebarMediaQuery.matches:\r\n            dispatch(setLhsSize(SidebarSize.LARGE));\r\n            dispatch(setRhsSize(SidebarSize.LARGE));\r\n            break;\r\n        case mediumSidebarMediaQuery.matches:\r\n            dispatch(setLhsSize(SidebarSize.MEDIUM));\r\n            dispatch(setRhsSize(SidebarSize.MEDIUM));\r\n            break;\r\n        case smallSidebarMediaQuery.matches:\r\n            dispatch(setLhsSize(SidebarSize.SMALL));\r\n            dispatch(setRhsSize(SidebarSize.SMALL));\r\n            break;\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const setSidebarSizeWhenWindowResized = useCallback(throttle(() => {\r\n        dispatch(setLhsSize());\r\n        dispatch(setRhsSize());\r\n    }, 100), []);\r\n\r\n    const handleSidebarMediaQueryChangeEvent = useCallback((e: MediaQueryListEvent) => {\r\n        if (e.matches) {\r\n            updateSidebarSize();\r\n        }\r\n    }, [updateSidebarSize]);\r\n\r\n    useEffect(() => {\r\n        updateSidebarSize();\r\n\r\n        if (smallSidebarMediaQuery.addEventListener) {\r\n            xLargeSidebarMediaQuery.addEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n            largeSidebarMediaQuery.addEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n            mediumSidebarMediaQuery.addEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n            smallSidebarMediaQuery.addEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n        } else if (smallSidebarMediaQuery.addListener) {\r\n            xLargeSidebarMediaQuery.addListener(handleSidebarMediaQueryChangeEvent);\r\n            largeSidebarMediaQuery.addListener(handleSidebarMediaQueryChangeEvent);\r\n            mediumSidebarMediaQuery.addListener(handleSidebarMediaQueryChangeEvent);\r\n            smallSidebarMediaQuery.addListener(handleSidebarMediaQueryChangeEvent);\r\n        } else {\r\n            window.addEventListener('resize', setSidebarSizeWhenWindowResized);\r\n        }\r\n\r\n        return () => {\r\n            if (smallSidebarMediaQuery.removeEventListener) {\r\n                xLargeSidebarMediaQuery.removeEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n                largeSidebarMediaQuery.removeEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n                mediumSidebarMediaQuery.removeEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n                smallSidebarMediaQuery.removeEventListener('change', handleSidebarMediaQueryChangeEvent);\r\n            } else if (smallSidebarMediaQuery.removeListener) {\r\n                xLargeSidebarMediaQuery.removeListener(handleSidebarMediaQueryChangeEvent);\r\n                largeSidebarMediaQuery.removeListener(handleSidebarMediaQueryChangeEvent);\r\n                mediumSidebarMediaQuery.removeListener(handleSidebarMediaQueryChangeEvent);\r\n                smallSidebarMediaQuery.removeListener(handleSidebarMediaQueryChangeEvent);\r\n            } else {\r\n                window.removeEventListener('resize', setSidebarSizeWhenWindowResized);\r\n            }\r\n        };\r\n    }, [handleSidebarMediaQueryChangeEvent, setSidebarSizeWhenWindowResized, updateSidebarSize]);\r\n\r\n    return null;\r\n}\r\n\r\nexport default WindowSizeObserver;\r\n"],"names":["dispatch","useDispatch","smallSidebarMediaQuery","useRef","window","matchMedia","concat","Constants","SMALL_SIDEBAR_BREAKPOINT","current","mediumSidebarMediaQuery","MEDIUM_SIDEBAR_BREAKPOINT","largeSidebarMediaQuery","LARGE_SIDEBAR_BREAKPOINT","xLargeSidebarMediaQuery","updateSidebarSize","useCallback","matches","setLhsSize","SidebarSize","XLARGE","setRhsSize","LARGE","MEDIUM","SMALL","setSidebarSizeWhenWindowResized","throttle","handleSidebarMediaQueryChangeEvent","e","useEffect","addEventListener","addListener","removeEventListener","removeListener"],"sourceRoot":""}