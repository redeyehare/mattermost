"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[3223],{55169:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B}),a(17046),a(43813);var n=a(36418),o=a.n(n),r=a(14778),i=a(37270),l=a(81911),s=a(44785),c=a.n(s),d=a(85406),m=a(97282),p=a(35631),u=a(45955),g=a(26614),f=a(77440),b=a(7430),h=a(51140),x=a(71861),k=a(53791),v=a(85760),y=a(78451);const E=c().div.withConfig({displayName:"Animation"})(["position:absolute;z-index:30;flex-direction:column;left:15px;bottom:0;display:none;&.completed{display:flex;}&:before{content:'';background-color:var(--online-indicator);opacity:0;border-radius:50%;width:1rem;bottom:15%;position:absolute;height:1rem;margin-left:auto;margin-right:auto;left:0;right:0;}.icon-check-circle{width:16px;height:16px;color:var(--online-indicator);position:relative;display:inline-flex;align-items:center;justify-content:center;::before{font-size:18px;letter-spacing:18px;margin:0;}}.x1{opacity:0;animation-delay:150ms;}.x2{transform:scale(0.6);margin-left:6px;animation-delay:250ms;opacity:0;}.x3{transform:scale(0.6);margin-left:-6px;animation-delay:300ms;opacity:0;}.x4{transform:scale(0.2);opacity:0;}&.completed{&:before{animation:opacity 800ms ease-in-out,scale 800ms linear;}.x1,.x2,.x3,.x4{animation:opacity 900ms ease-in-out,moveUp 900ms linear;}}@keyframes moveUp{0%{top:0;}100%{top:-50px;}}@keyframes opacity{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}@keyframes scale{0%{transform:scale(0);}50%{transform:scale(2);}100%{transform:scale(4);}}"]),w=e=>o().createElement(E,{className:e.completed?"completed":""},o().createElement("i",{className:"icon-check-circle x1"}),o().createElement("i",{className:"icon-check-circle x2"}),o().createElement("i",{className:"icon-check-circle x3"}),o().createElement("i",{className:"icon-check-circle x4"}));var _=a(62688),S=a.n(_),N=a(86634),A=a(17518),C=a(12895);const T=a.p+"files/2a8c0b1b24fe26f9bfcf.svg",M=c().div.withConfig({displayName:"CompletedWrapper"})(['display:flex;flex-direction:column;align-items:center;padding:26px 24px 0 24px;margin:auto;text-align:center;word-break:break-word;width:100%;height:500px;&.fade-enter{transform:scale(0);}&.fade-enter-active{transform:scale(1);}&.fade-enter-done{transform:scale(1);}&.fade-exit{transform:scale(1);}&.fade-exit-active{transform:scale(1);}&.fade-exit-done{transform:scale(1);}.start-trial-btn,.got-it-button{padding:13px 20px;background:var(--button-bg);border-radius:4px;color:var(--sidebar-text);border:none;font-weight:bold;margin-top:15px;min-height:40px;&:hover{background:var(--button-bg) !important;color:var(--sidebar-text) !important;}}h2{font-size:20px;margin:0 0 10px;font-weight:600;}.start-trial-text,.completed-subtitle{font-size:14px !important;color:rgba(var(--center-channel-color-rgb),0.75);line-height:20px;}.completed-subtitle{margin-top:5px;}.disclaimer,.download-apps{width:90%;margin-top:15px;color:rgba(var(--center-channel-color-rgb),0.75);font-family:"Open Sans";font-style:normal;font-weight:normal;line-height:16px;}.disclaimer{text-align:left;margin-top:auto;font-size:11px;}.download-apps{margin-top:24px;width:200px;font-size:12px;}.style-link{border:none;background:none !important;color:var(--button-bg) !important;}.no-thanks-link{display:inline-block;min-width:fit-content;margin-top:18px;font-weight:600;font-size:14px;line-height:20px;&:hover{text-decoration:underline;}}']),I=e=>{const{dismissAction:t}=e,a=(0,i.useDispatch)();(0,n.useEffect)((()=>{a((0,m.fr)())}),[]);const l=(0,i.useSelector)((e=>e.entities.admin.prevTrialLicense)),s=(0,i.useSelector)(g.Ay),c=null==l?void 0:l.IsLicensed,d=null==s?void 0:s.IsLicensed,p="true"===(null==s?void 0:s.Cloud),u="false"===d&&"false"===c&&(e.isCurrentUserSystemAdmin||e.isFirstAdmin)&&!p;return o().createElement(o().Fragment,null,o().createElement(N.A,{in:!0,timeout:150,classNames:"fade"},o().createElement(M,null,o().createElement("img",{src:T,alt:"completed tasks image"}),o().createElement("h2",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_title",defaultMessage:"Well done. You’ve completed all of the tasks!"})),o().createElement("span",{className:"completed-subtitle"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_subtitle",defaultMessage:"We hope Mattermost is more familiar now."})),u?o().createElement(o().Fragment,null,o().createElement("span",{className:"start-trial-text"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.higher_security_features",defaultMessage:"Interested in our higher-security features?"})," ",o().createElement("br",null),o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.start_enterprise_now",defaultMessage:"Start your free Enterprise trial now!"})),o().createElement(C.A,{onClick:t}),o().createElement("button",{onClick:t,className:"no-thanks-link style-link"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.no_thanks",defaultMessage:"No, thanks"}))):o().createElement("button",{onClick:t,className:"got-it-button"},o().createElement(r.FormattedMessage,{id:"collapsed_reply_threads_modal.confirm",defaultMessage:"Got it"})),o().createElement("div",{className:"download-apps"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.downloads",defaultMessage:"Now that you’re all set up, <link>download our apps.</link>!",values:{link:e=>o().createElement(A.A,{location:"onboarding_tasklist_completed",href:"https://mattermost.com/download#desktop"},e)}}))),u&&o().createElement("div",{className:"disclaimer"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.disclaimer",defaultMessage:"By clicking “Start trial”, I agree to the <linkEvaluation>Mattermost Software and Services License Agreement</linkEvaluation>, <linkPrivacy>privacy policy</linkPrivacy> and receiving product emails.",values:{linkEvaluation:e=>o().createElement(A.A,{href:y.vx.SOFTWARE_SERVICES_LICENSE_AGREEMENT,location:"onboarding_tasklist_completed"},e),linkPrivacy:e=>o().createElement(A.A,{href:y.L0.PRIVACY_POLICY,location:"onboarding_tasklist_completed"},e)}}))))))};I.propTypes={dismissAction:S().func.isRequired,isCurrentUserSystemAdmin:S().bool.isRequired,isFirstAdmin:S().bool.isRequired};const O=I;var F=a(17638),R=a(94621),z=a(38889);const L=c().div.withConfig({displayName:"Overlay"})(["background-color:rgba(0,0,0,0.5);display:flex;align-items:flex-end;justify-content:center;height:100%;min-height:100%;left:0;right:0;top:0;position:fixed;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;pointer-events:auto;-ms-scroll-chaining:none;transition:150ms;transition-property:background-color;transition-timing-function:ease-in-out;z-index:100;&.fade-enter{background-color:rgba(0,0,0,0);}&.fade-enter-active{background-color:rgba(0,0,0,0.5);}&.fade-enter-done{background-color:rgba(0,0,0,0.5);}&.fade-exit{background-color:rgba(0,0,0,0.5);}&.fade-exit-active{background-color:rgba(0,0,0,0);}&.fade-exit-done{background-color:rgba(0,0,0,0);}"]),V=e=>{let{trigger:t,placement:a="top-start",isVisible:r,offset:i=[0,5],children:l,onClick:s}=e;const{x:c,y:d,strategy:m,refs:{setReference:p,setFloating:u}}=(0,R.we)({placement:a,middleware:[(0,R.cY)({mainAxis:i[1],crossAxis:i[0]})],whileElementsMounted:z.ll});(0,n.useLayoutEffect)((()=>{p(t)}),[p,t]);const g={container:{position:m,top:null!=d?d:0,left:null!=c?c:0,zIndex:r?100:-1}};return o().createElement(F.XF,{id:y.Bj},o().createElement(N.A,{timeout:150,classNames:"fade",in:r,unmountOnExit:!0},o().createElement(L,{onClick:s,"data-cy":"onboarding-task-list-overlay"})),o().createElement("div",{ref:u,style:g.container},l))};V.propTypes={isVisible:S().bool.isRequired,children:S().node.isRequired,onClick:S().func.isRequired};const D=c().div.withConfig({displayName:"StyledTask"})(["display:flex;background-color:var(--center-channel-bg);cursor:pointer;width:100%;padding:8px 20px;font-size:14px;align-items:flex-start;color:var(--center-channel-color);position:relative;span{div{display:flex;align-items:flex-start;picture{display:flex;align-items:center;margin-right:10px;}}}&.completed{color:var(--online-indicator);span{span{text-decoration:underline;text-decoration-skip-ink:none;text-underline-offset:-0.325em;}}}:hover{background:rgba(var(--center-channel-color-rgb),0.08);}:active{background-color:rgba(var(--button-bg-rgb),0.08);}:focus{box-shadow:inset 0 0 0 2px rgba(255,255,255,0.32),inset 0 0 0 2px blue;}transition:background 250ms ease-in-out,color 250ms ease-in-out,box-shadow 250ms ease-in-out;"]),P=e=>{const{label:t,completedStatus:a,onClick:n}=e;return o().createElement(D,{className:a?"completed":"",onClick:()=>{n&&n()}},a&&o().createElement(w,{completed:a}),o().createElement("span",null,t))};P.propTypes={label:S().element.isRequired,icon:S().node,onClick:S().func,completedStatus:S().bool.isRequired};const X=c().div.withConfig({displayName:"TaskItems"})(["border-radius:var(--radius-m);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);background-color:var(--center-channel-bg);width:352px;padding:24px 0;transform:scale(0);opacity:0;box-shadow:var(--elevation-6);transition:opacity 250ms ease-in-out 0ms,transform 250ms ease-in-out 0ms;transform-origin:left bottom;max-height:","px;overflow-y:auto;display:none;&.open{transform:scale(1);opacity:1;display:block;}h1{font-size:20px;padding:0 24px;margin:0;}p{font-size:12px;color:rgba(var(--center-channel-color-rgb),0.75);padding:4px 24px;}.link{font-size:12px;color:var(--link-color);padding:12px 24px 0;font-weight:bold;cursor:pointer;display:block;:hover{text-decoration:underline}}"],document.documentElement.clientHeight),q=c().button.withConfig({displayName:"Button"})((e=>{let{open:t}=e;return(0,s.css)(["width:36px;height:36px;padding:7px;border-radius:var(--radius-full);left:15px;bottom:15px;position:fixed;z-index:101;display:flex;align-items:center;background:var(--center-channel-bg);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);box-shadow:var(--elevation-3);color:rgba(var(--center-channel-color-rgb),0.75);&:hover{border-color:rgba(var(--center-channel-color-rgb),0.24);box-shadow:var(--elevation-4);color:rgba(var(--center-channel-color-rgb),0.75)}span{width:20px;height:16px;background:var(--button-bg);position:absolute;display:",";border-radius:12px;color:var(--button-color);font-weight:bold;font-size:11px;line-height:16px;bottom:22px;left:22px;}"],t?"none":"block")})),B=()=>{const{formatMessage:e}=(0,r.useIntl)(),t=(0,l.useLocation)(),a=(0,i.useSelector)((e=>0!==Object.keys((0,f.Zo)(e)).length)),s=(0,i.useSelector)(u.dw),c=(0,i.useSelector)(g.Ay),E="true"===(null==c?void 0:c.Cloud),_=!0===(null==s?void 0:s.is_cloud_preview);(0,n.useEffect)((()=>{C((0,m.fr)()),a||C((0,p.Zo)())}),[]);const S=(0,i.useSelector)((e=>(0,f.Jz)(e,k.XV,k.f5.ONBOARDING_TASK_LIST_OPEN))),[N,A]=(0,n.useState)(null),C=(0,i.useDispatch)(),T=(0,i.useSelector)(b.WR),M=(0,v.AC)(),I=(0,k.es)(),[F,R]=(0,n.useState)(I.filter((e=>e.status)).length),[z,L]=(0,n.useState)(!1),D=I.length-F,B=(0,x.qZ)(),G=(0,x.QS)(),W=(0,i.useSelector)((e=>"true"===(0,g.zj)(e).EnableOnboardingFlow)),[K,j]=(0,i.useSelector)(h.xp,((e,t)=>e[0]===t[0]&&e[1]===t[1]));(0,n.useEffect)((()=>{j&&(async()=>{await C((0,p.SF)(T,[{category:k.XV,user_id:T,name:k.f5.ONBOARDING_TASK_LIST_SHOW,value:"true"},{user_id:T,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:"true"},{user_id:T,category:y.pm.RECOMMENDED_NEXT_STEPS,name:y.N$.HIDE,value:"true"}]))})()}),[]),(0,n.useEffect)((()=>{const e=I.filter((e=>e.status)).length;localStorage.getItem(k.XV)||F+1===e&&!S?(setTimeout((()=>{L(!0),R(e)}),100),setTimeout((()=>{L(!1),R(e)}),500),localStorage.removeItem(k.XV)):R(e)}),[I,F]);const U=(0,n.useCallback)((()=>{const e=[{user_id:T,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_SHOW,value:"false"},{user_id:T,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:"false"}];C((0,p.SF)(T,e))}),[T]),H=(0,n.useCallback)((()=>{const e=[{user_id:T,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:String(!S)}];C((0,p.SF)(T,e))}),[S,T]);return!a||!K||!W||E&&_||"/preparing-workspace"===t.pathname?null:o().createElement(o().Fragment,null,o().createElement(w,{completed:z}),o().createElement(q,{onClick:H,ref:e=>A(e),open:S,"data-cy":"onboarding-task-list-action-button","aria-label":e({id:"onboardingTask.checklist.start_onboarding_process",defaultMessage:"Start the onboarding process."})},S?o().createElement(d.CloseIcon,{size:20}):o().createElement(d.PlaylistCheckIcon,{size:20}),0!==D&&o().createElement("span",null,D)),o().createElement(V,{isVisible:S,trigger:N,onClick:H},o().createElement(X,{className:S?"open":""},F===I.length?o().createElement(O,{dismissAction:U,isFirstAdmin:G,isCurrentUserSystemAdmin:B}):o().createElement(o().Fragment,null,o().createElement("h1",null,o().createElement(r.FormattedMessage,{id:"next_steps_view.welcomeToMattermost",defaultMessage:"Welcome to Mattermost"})),o().createElement("p",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.main_subtitle",defaultMessage:"Let's get up and running."})),I.map((e=>o().createElement(P,{key:k.XV+e.name,label:e.label(),onClick:()=>{var t;t=e.name,H(),M(t)},completedStatus:e.status}))),o().createElement("span",{className:"link",onClick:U},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.dismiss_link",defaultMessage:"No thanks, I'll figure it out myself"}))))))}}}]);
//# sourceMappingURL=3223.8ecb45b616d0536d6009.js.map