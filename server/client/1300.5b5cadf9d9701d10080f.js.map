{"version":3,"file":"1300.5b5cadf9d9701d10080f.js","mappings":"sSAqBA,MAAMA,EAAiBC,IACnB,MAAMC,GAAUC,EAAAA,EAAAA,SAAO,IAChBC,EAAOC,IAAYC,EAAAA,EAAAA,WAAS,IAEnCC,EAAAA,EAAAA,YAAU,KACNL,EAAQM,SAAU,EACX,KACHN,EAAQM,SAAU,CAAK,IAE5B,IAEH,MAAMC,GAAoBC,EAAAA,EAAAA,cAAYC,UAClC,MAAMC,EAASX,EAAMY,MAAMC,OAAOC,aAC5Bd,EAAMe,QAAQC,UAAUL,EAAQX,EAAMiB,SAAUjB,EAAMkB,eACxDjB,EAAQM,SACRH,GAAS,EACb,GACD,CAACJ,EAAMY,MAAMC,OAAOC,OAAQd,EAAMiB,SAAUjB,EAAMkB,cAAelB,EAAMe,UAQ1E,OANAT,EAAAA,EAAAA,YAAU,KACNa,SAASC,KAAKC,UAAUC,IAAI,aAC5Bd,GAAmB,GACpB,CAACA,IAGAL,GAASH,EAAMuB,WAAavB,EAAMwB,SAC3B,KAIPC,IAAAA,cAAA,OACIC,GAAG,cACHC,UAAU,gBACZ,EAER5B,EAAA6B,UAAA,CAjDEL,UAASM,IAAAA,OAAAC,WAMTb,SAAQY,IAAAA,OAAAC,WACRN,SAAQK,IAAAA,OACRd,QAAOc,IAAAA,MAAA,CACHb,UAASa,IAAAA,KAAAC,aAAAA,WAEbZ,cAAaW,IAAAA,OAAAC,YAwCjB,SAAeC,EAAAA,EAAAA,MAAKhC,GCpBpB,GAAeiC,EAAAA,EAAAA,UAtBf,SAAyBC,GACrB,MAAMC,GAAOC,EAAAA,EAAAA,IAAeF,GACtBG,GAAUC,EAAAA,EAAAA,IAAkBJ,GAC5Bf,GAAgBoB,EAAAA,EAAAA,IAAiBL,GAIvC,MAAO,CACHV,UAJca,EAAUA,EAAQV,GAAK,GAKrCF,SAJaU,EAAOA,EAAKK,KAAO,GAKhCrB,gBAER,IAEA,SAA4BsB,GACxB,MAAO,CACHzB,SAAS0B,EAAAA,EAAAA,IAAmB,CACxBzB,UAASA,EAAAA,GACVwB,GAEX,GAEA,CAA4DzC,E","sources":["webpack://mattermost-webapp/./src/components/permalink_view/permalink_view.tsx","webpack://mattermost-webapp/./src/components/permalink_view/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useState, useEffect, useCallback, memo, useRef} from 'react';\r\nimport type {match} from 'react-router-dom';\r\n\r\ntype Props = {\r\n    channelId: string;\r\n\r\n    /*\r\n     * Object from react-router\r\n     */\r\n    match: match<{postid: string}>;\r\n    returnTo: string;\r\n    teamName?: string;\r\n    actions: {\r\n        focusPost: (postId: string, returnTo: string, currentUserId: string) => void;\r\n    };\r\n    currentUserId: string;\r\n}\r\n\r\nconst PermalinkView = (props: Props) => {\r\n    const mounted = useRef(false);\r\n    const [valid, setValid] = useState(false);\r\n\r\n    useEffect(() => {\r\n        mounted.current = true;\r\n        return () => {\r\n            mounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    const doPermalinkAction = useCallback(async () => {\r\n        const postId = props.match.params.postid;\r\n        await props.actions.focusPost(postId, props.returnTo, props.currentUserId);\r\n        if (mounted.current) {\r\n            setValid(true);\r\n        }\r\n    }, [props.match.params.postid, props.returnTo, props.currentUserId, props.actions]);\r\n\r\n    useEffect(() => {\r\n        document.body.classList.add('app__body');\r\n        doPermalinkAction();\r\n    }, [doPermalinkAction]);\r\n\r\n    // it is returning null because main idea of this component is to fire focusPost redux action\r\n    if (valid && props.channelId && props.teamName) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id='app-content'\r\n            className='app__content'\r\n        />\r\n    );\r\n};\r\n\r\nexport default memo(PermalinkView);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {focusPost} from './actions';\r\nimport PermalinkView from './permalink_view';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const team = getCurrentTeam(state);\r\n    const channel = getCurrentChannel(state);\r\n    const currentUserId = getCurrentUserId(state);\r\n    const channelId = channel ? channel.id : '';\r\n    const teamName = team ? team.name : '';\r\n\r\n    return {\r\n        channelId,\r\n        teamName,\r\n        currentUserId,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            focusPost,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PermalinkView);\r\n"],"names":["PermalinkView","props","mounted","useRef","valid","setValid","useState","useEffect","current","doPermalinkAction","useCallback","async","postId","match","params","postid","actions","focusPost","returnTo","currentUserId","document","body","classList","add","channelId","teamName","React","id","className","propTypes","_pt","isRequired","memo","connect","state","team","getCurrentTeam","channel","getCurrentChannel","getCurrentUserId","name","dispatch","bindActionCreators"],"sourceRoot":""}