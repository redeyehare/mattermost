{"version":3,"file":"3891.68ae29f1914bbfa49c59.js","mappings":"kQAgBA,MAuHA,EAvH6CA,IAAe,IAAd,QAACC,GAAQD,EACnD,MAAME,GAAOC,EAAAA,EAAAA,WACPC,GAAWC,EAAAA,EAAAA,QAAyB,OACnCC,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,IACpCC,EAAcC,IAAmBF,EAAAA,EAAAA,WAAS,GAE3CG,EAAaA,KAAM,IAAAC,EACrBL,GAAa,GACG,QAAhBK,EAAAR,EAASS,eAAO,IAAAD,GAAhBA,EAAkBE,MAAM,EA0F5B,OACIC,IAAAA,cAAA,OAAKC,UAAU,yBACVf,EAAQgB,UAAYhB,EAAQgB,SAASC,gBAClCH,IAAAA,cAAA,OAAKC,UAAU,oCACXD,IAAAA,cAACI,EAAAA,EAAc,CAACH,UAAU,0CAC1BD,IAAAA,cAAA,YAAOb,EAAKkB,cAAcnB,EAAQgB,YAG1CF,IAAAA,cAAA,MAAIC,UAAU,gCAAgCd,EAAKkB,cAAcnB,EAAQoB,QACzEN,IAAAA,cAAA,OAAKC,UAAU,mCACVd,EAAKkB,cAAcnB,EAAQqB,WAE/BrB,EAAQsB,UACLR,IAAAA,cAAA,OAAKC,UAAU,0CAzFlBf,EAAQsB,SAKTtB,EAAQsB,SAASC,SAAS,SAAWvB,EAAQsB,SAASC,SAAS,UAAYvB,EAAQsB,SAASC,SAAS,QAEjGT,IAAAA,cAAA,OACIC,UAAU,uBACVS,aAAcA,IAAMnB,GAAaI,GAAgB,GACjDgB,aAAcA,IAAMhB,GAAgB,IAEpCK,IAAAA,cAAA,SACIY,IAAKvB,EACLwB,IAAK3B,EAAQsB,SACbM,OAAQ5B,EAAQ6B,YAChBC,SAAUzB,GAAaG,EACvBuB,MAAM,EACN,cAAY,gBACZC,QA9BKC,KAChB5B,GACDK,GACJ,EA4BgBwB,QAzBKC,KACrB7B,GAAa,EAAM,EAyBH8B,OAAQA,IAAM9B,GAAa,IAE3BQ,IAAAA,cAAA,SAAOuB,KAAK,eAEdhC,GACES,IAAAA,cAAA,UACIC,UAAU,qBACViB,QAAStB,EACT,aAAYT,EAAKkB,cAAc,CAC3BmB,GAAI,iCACJrB,eAAgB,gBAGpBH,IAAAA,cAAA,OACIyB,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,QAEL5B,IAAAA,cAAA,UACI6B,GAAG,KACHC,GAAG,KACHC,EAAE,KACFH,KAAK,0BAET5B,IAAAA,cAAA,WACIgC,OAAO,oBACPJ,KAAK,gBAU7B1C,EAAQsB,SAASC,SAAS,SAAWvB,EAAQsB,SAASC,SAAS,UAAYvB,EAAQsB,SAASC,SAAS,SAAWvB,EAAQsB,SAASC,SAAS,SAAWvB,EAAQsB,SAASC,SAAS,SAE3KT,IAAAA,cAAA,OACIa,IAAK3B,EAAQsB,SACbyB,IAAK9C,EAAKkB,cAAcnB,EAAQoB,UA7DjC,MA4FL,E,eC9Gd,MAAM4B,EAA0CjD,IAAkC,IAAjC,KAACkD,EAAI,QAAEC,EAAO,YAAEC,GAAYpD,EACzE,MAAME,GAAOC,EAAAA,EAAAA,YACNkD,EAAcC,IAAmB9C,EAAAA,EAAAA,UAAS,GAI3C+C,EAAoBH,GAAeI,EAAAA,EAAaC,QAAQxD,GAAgC,gBAApBA,EAAQyD,UAE5EC,GAAiBC,EAAAA,EAAAA,cAAY,KAC/BN,GAAiBO,GAASC,KAAKC,IAAI,EAAGF,EAAO,IAAG,GACjD,IAEGG,GAAaJ,EAAAA,EAAAA,cAAY,KAC3BN,GAAiBO,GAASC,KAAKG,IAAIV,EAAkBW,OAAS,EAAGL,EAAO,IAAG,GAC5E,CAACN,EAAkBW,SAEhBC,GAAaP,EAAAA,EAAAA,cAAY,KAC3BT,GAAS,GACV,CAACA,IAEEiB,EAAgC,IAAjBf,EACfgB,EAAchB,IAAiBE,EAAkBW,OAAS,EAEhE,GAAiC,IAA7BX,EAAkBW,OAClB,OAAO,KAIX,MAAMI,EACFvD,IAAAA,cAAA,OAAKC,UAAU,oCACXD,IAAAA,cAAA,OAAKC,UAAU,wCACXD,IAAAA,cAAA,OACIC,UAAU,4CACV,cAAY,mBAEXuC,EAAkBgB,KAAI,CAACC,EAAGC,IACvB1D,IAAAA,cAAA,OACI2D,IAAG,OAAAC,OAASF,GACZzD,UAAS,iCAAA2D,OAAmCF,IAAUpB,EAAe,wCAA0C,SAI3HtC,IAAAA,cAAA,QAAMC,UAAU,0CACXqC,EAAe,EAAG,IAAKE,EAAkBW,SAIlDnD,IAAAA,cAAA,OAAKC,UAAU,gDACVoD,GACGrD,IAAAA,cAAA,UACIC,UAAU,qBACViB,QAASkC,GAERjE,EAAKkB,cAAc,CAChBmB,GAAI,2BACJrB,eAAgB,mBAK1BkD,GACErD,IAAAA,cAAA,UACIC,UAAU,mBACViB,QAAS0B,GAET5C,IAAAA,cAAC6D,EAAAA,cAAa,CAACC,KAAM,KACpB3E,EAAKkB,cAAc,CAChBmB,GAAI,+BACJrB,eAAgB,cAK5BH,IAAAA,cAAA,UACIC,UAAU,kBACViB,QAASoC,EAAclB,EAAUa,GAEhCK,EACGnE,EAAKkB,cAAc,CACfmB,GAAI,2BACJrB,eAAgB,WAGpBH,IAAAA,cAAAA,IAAAA,SAAA,KACKb,EAAKkB,cAAc,CAChBmB,GAAI,2BACJrB,eAAgB,SAEpBH,IAAAA,cAAC+D,EAAAA,eAAc,CAACD,KAAM,SAQ9C,OACI9D,IAAAA,cAACgE,EAAAA,GAAY,CACT7B,KAAMA,EACN8B,OAAQ7B,EACR8B,eAAe,EACfC,cAAc,EACdC,UAAWjF,EAAKkB,cAAc,CAC1BmB,GAAI,iCACJrB,eAAgB,+BAEpBkE,YAAY,EACZC,iBAAiB,EACjBC,aAAa,EACbhB,cAAeA,EACftD,UAAU,4BAEVD,IAAAA,cAACwE,EAAmB,CAACtF,QAASsD,EAAkBF,KACrC,EAErBJ,EAAAuC,UAAA,CAxHEtC,KAAIuC,IAAAA,KAAAC,WACJvC,QAAOsC,IAAAA,KAAAC,WACPtC,YAAWqC,IAAAA,OAwHf,S","sources":["webpack://mattermost-webapp/./src/components/cloud_preview_modal/preview_modal_content.tsx","webpack://mattermost-webapp/./src/components/cloud_preview_modal/preview_modal_content_controller.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useRef, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport MattermostLogo from 'components/widgets/icons/mattermost_logo';\r\n\r\nimport type {PreviewModalContentData} from './preview_modal_content_data';\r\n\r\nimport './preview_modal_content.scss';\r\n\r\ninterface Props {\r\n    content: PreviewModalContentData;\r\n}\r\n\r\nconst PreviewModalContent: React.FC<Props> = ({content}) => {\r\n    const intl = useIntl();\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [showControls, setShowControls] = useState(false);\r\n\r\n    const handlePlay = () => {\r\n        setIsPlaying(true);\r\n        videoRef.current?.play();\r\n    };\r\n\r\n    const handleVideoClick = () => {\r\n        if (!isPlaying) {\r\n            handlePlay();\r\n        }\r\n    };\r\n\r\n    const handleVideoPause = () => {\r\n        setIsPlaying(false);\r\n    };\r\n\r\n    const renderVideoContent = () => {\r\n        if (!content.videoUrl) {\r\n            return null;\r\n        }\r\n\r\n        // Handle direct video files\r\n        if (content.videoUrl.endsWith('.mp4') || content.videoUrl.endsWith('.webm') || content.videoUrl.endsWith('.mov')) {\r\n            return (\r\n                <div\r\n                    className='custom-video-wrapper'\r\n                    onMouseEnter={() => isPlaying && setShowControls(true)}\r\n                    onMouseLeave={() => setShowControls(false)}\r\n                >\r\n                    <video\r\n                        ref={videoRef}\r\n                        src={content.videoUrl}\r\n                        poster={content.videoPoster}\r\n                        controls={isPlaying && showControls}\r\n                        loop={true}\r\n                        data-testid='video-element'\r\n                        onClick={handleVideoClick}\r\n                        onPause={handleVideoPause}\r\n                        onPlay={() => setIsPlaying(true)}\r\n                    >\r\n                        <track kind='captions'/>\r\n                    </video>\r\n                    {!isPlaying && (\r\n                        <button\r\n                            className='custom-play-button'\r\n                            onClick={handlePlay}\r\n                            aria-label={intl.formatMessage({\r\n                                id: 'cloud_preview_modal.play_video',\r\n                                defaultMessage: 'Play video',\r\n                            })}\r\n                        >\r\n                            <svg\r\n                                width='48'\r\n                                height='48'\r\n                                viewBox='0 0 48 48'\r\n                                fill='none'\r\n                            >\r\n                                <circle\r\n                                    cx='24'\r\n                                    cy='24'\r\n                                    r='24'\r\n                                    fill='rgba(255,255,255,0.9)'\r\n                                />\r\n                                <polygon\r\n                                    points='20,16 34,24 20,32'\r\n                                    fill='#1e3a8a'\r\n                                />\r\n                            </svg>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Handle images\r\n        if (content.videoUrl.endsWith('.jpg') || content.videoUrl.endsWith('.jpeg') || content.videoUrl.endsWith('.png') || content.videoUrl.endsWith('.gif') || content.videoUrl.endsWith('.webp')) {\r\n            return (\r\n                <img\r\n                    src={content.videoUrl}\r\n                    alt={intl.formatMessage(content.title)}\r\n                />\r\n            );\r\n        }\r\n\r\n        // Fallback for other URLs - treat as image\r\n        return (\r\n            <img\r\n                src={content.videoUrl}\r\n                alt={intl.formatMessage(content.title)}\r\n            />\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className='preview-modal-content'>\r\n            {content.skuLabel && content.skuLabel.defaultMessage && (\r\n                <div className='preview-modal-content__sku-label'>\r\n                    <MattermostLogo className='preview-modal-content__sku-label-logo'/>\r\n                    <span>{intl.formatMessage(content.skuLabel)}</span>\r\n                </div>\r\n            )}\r\n            <h2 className='preview-modal-content__title'>{intl.formatMessage(content.title)}</h2>\r\n            <div className='preview-modal-content__subtitle'>\r\n                {intl.formatMessage(content.subtitle)}\r\n            </div>\r\n            {content.videoUrl && (\r\n                <div className='preview-modal-content__media-container'>\r\n                    {renderVideoContent()}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PreviewModalContent;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useState, useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {ArrowLeftIcon, ArrowRightIcon} from '@mattermost/compass-icons/components';\r\nimport {GenericModal} from '@mattermost/components';\r\n\r\nimport PreviewModalContent from './preview_modal_content';\r\nimport {modalContent} from './preview_modal_content_data';\r\nimport type {PreviewModalContentData} from './preview_modal_content_data';\r\n\r\nimport './preview_modal_controller.scss';\r\n\r\ninterface Props {\r\n    show: boolean;\r\n    onClose: () => void;\r\n    contentData?: PreviewModalContentData[];\r\n}\r\n\r\nconst PreviewModalController: React.FC<Props> = ({show, onClose, contentData}) => {\r\n    const intl = useIntl();\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n    // Use provided contentData or default to filtered modalContent\r\n    // Use passed contentData if it's provided otherwise use the default mission ops content\r\n    const activeContentData = contentData || modalContent.filter((content) => content.useCase === 'mission-ops');\r\n\r\n    const handlePrevious = useCallback(() => {\r\n        setCurrentIndex((prev) => Math.max(0, prev - 1));\r\n    }, []);\r\n\r\n    const handleNext = useCallback(() => {\r\n        setCurrentIndex((prev) => Math.min(activeContentData.length - 1, prev + 1));\r\n    }, [activeContentData.length]);\r\n\r\n    const handleSkip = useCallback(() => {\r\n        onClose();\r\n    }, [onClose]);\r\n\r\n    const isFirstSlide = currentIndex === 0;\r\n    const isLastSlide = currentIndex === activeContentData.length - 1;\r\n\r\n    if (activeContentData.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    // Custom footer content with pagination and navigation buttons\r\n    const footerContent = (\r\n        <div className='preview-modal-controller__footer'>\r\n            <div className='preview-modal-controller__pagination'>\r\n                <div\r\n                    className='preview-modal-controller__pagination-dots'\r\n                    data-testid='pagination-dots'\r\n                >\r\n                    {activeContentData.map((_, index) => (\r\n                        <div\r\n                            key={`dot-${index}`}\r\n                            className={`preview-modal-controller__dot ${index === currentIndex ? 'preview-modal-controller__dot--active' : ''}`}\r\n                        />\r\n                    ))}\r\n                </div>\r\n                <span className='preview-modal-controller__page-counter'>\r\n                    {currentIndex + 1}{'/'}{activeContentData.length}\r\n                </span>\r\n            </div>\r\n\r\n            <div className='preview-modal-controller__navigation-buttons'>\r\n                {isFirstSlide && (\r\n                    <button\r\n                        className='btn btn-quaternary'\r\n                        onClick={handleSkip}\r\n                    >\r\n                        {intl.formatMessage({\r\n                            id: 'cloud_preview_modal.skip',\r\n                            defaultMessage: 'Skip for now',\r\n                        })}\r\n                    </button>\r\n                )}\r\n\r\n                {!isFirstSlide && (\r\n                    <button\r\n                        className='btn btn-tertiary'\r\n                        onClick={handlePrevious}\r\n                    >\r\n                        <ArrowLeftIcon size={18}/>\r\n                        {intl.formatMessage({\r\n                            id: 'cloud_preview_modal.previous',\r\n                            defaultMessage: 'Previous',\r\n                        })}\r\n                    </button>\r\n                )}\r\n\r\n                <button\r\n                    className='btn btn-primary'\r\n                    onClick={isLastSlide ? onClose : handleNext}\r\n                >\r\n                    {isLastSlide ? (\r\n                        intl.formatMessage({\r\n                            id: 'cloud_preview_modal.done',\r\n                            defaultMessage: 'Finish',\r\n                        })\r\n                    ) : (\r\n                        <>\r\n                            {intl.formatMessage({\r\n                                id: 'cloud_preview_modal.next',\r\n                                defaultMessage: 'Next',\r\n                            })}\r\n                            <ArrowRightIcon size={18}/>\r\n                        </>\r\n                    )}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            show={show}\r\n            onHide={onClose}\r\n            compassDesign={true}\r\n            enforceFocus={true}\r\n            ariaLabel={intl.formatMessage({\r\n                id: 'cloud_preview_modal.aria_label',\r\n                defaultMessage: 'Cloud Preview Introduction',\r\n            })}\r\n            showHeader={true}\r\n            showCloseButton={true}\r\n            bodyPadding={true}\r\n            footerContent={footerContent}\r\n            className='preview-modal-controller'\r\n        >\r\n            <PreviewModalContent content={activeContentData[currentIndex]}/>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default PreviewModalController;\r\n"],"names":["_ref","content","intl","useIntl","videoRef","useRef","isPlaying","setIsPlaying","useState","showControls","setShowControls","handlePlay","_videoRef$current","current","play","React","className","skuLabel","defaultMessage","MattermostLogo","formatMessage","title","subtitle","videoUrl","endsWith","onMouseEnter","onMouseLeave","ref","src","poster","videoPoster","controls","loop","onClick","handleVideoClick","onPause","handleVideoPause","onPlay","kind","id","width","height","viewBox","fill","cx","cy","r","points","alt","PreviewModalController","show","onClose","contentData","currentIndex","setCurrentIndex","activeContentData","modalContent","filter","useCase","handlePrevious","useCallback","prev","Math","max","handleNext","min","length","handleSkip","isFirstSlide","isLastSlide","footerContent","map","_","index","key","concat","ArrowLeftIcon","size","ArrowRightIcon","GenericModal","onHide","compassDesign","enforceFocus","ariaLabel","showHeader","showCloseButton","bodyPadding","PreviewModalContent","propTypes","_pt","isRequired"],"sourceRoot":""}